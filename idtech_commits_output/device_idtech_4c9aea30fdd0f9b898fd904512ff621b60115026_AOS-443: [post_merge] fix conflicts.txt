4c9aea30 George.Huang 2020-12-25

AOS-443: [post_merge] fix conflicts

Change-Id: I9095141a8f430c743e6913cbfa5e781a3974e755

diff --git a/imx8m/bigcypress_8mp/AndroidBoard.mk b/imx8m/bigcypress_8mp/AndroidBoard.mk
index 9cce37db..7d2ec036 100644
--- a/imx8m/bigcypress_8mp/AndroidBoard.mk
+++ b/imx8m/bigcypress_8mp/AndroidBoard.mk
@@ -1,19 +1,9 @@
 LOCAL_PATH := $(call my-dir)
 
-<<<<<<< HEAD
 include device/idtech/common/build/dtbo.mk
 include device/idtech/common/build/imx-recovery.mk
 include device/idtech/common/build/gpt.mk
 include device/idtech/common/build/userdata.mk
-#TODO add imx8mp target
-include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/media-profile/media-profile.mk
-include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/sensor/fsl-sensor.mk
-=======
-include device/nxp/common/build/dtbo.mk
-include device/nxp/common/build/imx-recovery.mk
-include device/nxp/common/build/gpt.mk
-#TODO add imx8mp target
 include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/media-profile/media-profile.mk
 include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/sensor/fsl-sensor.mk
 -include $(IMX_MEDIA_CODEC_XML_PATH)/mediacodec-profile/mediacodec-profile.mk
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/bigcypress_8mp/AndroidUboot.mk b/imx8m/bigcypress_8mp/AndroidUboot.mk
index 8c590eeb..9405e681 100644
--- a/imx8m/bigcypress_8mp/AndroidUboot.mk
+++ b/imx8m/bigcypress_8mp/AndroidUboot.mk
@@ -16,11 +16,7 @@ define build_imx_uboot
 	cp $(UBOOT_OUT)/arch/arm/dts/imx8mp-evk.dtb $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
 	cp $(FSL_PROPRIETARY_PATH)/linux-firmware-imx/firmware/ddr/synopsys/lpddr4_pmu_train* $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
 	$(MAKE) -C $(IMX_PATH)/arm-trusted-firmware/ PLAT=`echo $(2) | cut -d '-' -f1` clean; \
-<<<<<<< HEAD
 	if [ `echo $(2) | cut -d '-' -f3` = "trusty" ]; then \
-=======
-	if [ `echo $(2) | cut -d '-' -f2` = "trusty" ]; then \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 		cp $(FSL_PROPRIETARY_PATH)/fsl-proprietary/uboot-firmware/imx8m/tee-imx8mp.bin $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/tee.bin; \
 		$(MAKE) -C $(IMX_PATH)/arm-trusted-firmware/ CROSS_COMPILE="$(ATF_CROSS_COMPILE)" PLAT=`echo $(2) | cut -d '-' -f1` bl31 -B SPD=trusty 1>/dev/null || exit 1; \
 	else \
diff --git a/imx8m/bigcypress_8mp/BoardConfig.mk b/imx8m/bigcypress_8mp/BoardConfig.mk
index b631dd3b..286c362e 100644
--- a/imx8m/bigcypress_8mp/BoardConfig.mk
+++ b/imx8m/bigcypress_8mp/BoardConfig.mk
@@ -3,10 +3,7 @@
 #
 
 BOARD_SOC_TYPE := IMX8MP
-<<<<<<< HEAD
 BOARD_SOM_TYPE := a200
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 BOARD_TYPE := EVK
 BOARD_HAVE_VPU := true
 BOARD_VPU_TYPE := hantro
@@ -16,10 +13,6 @@ HAVE_FSL_IMX_IPU := false
 HAVE_FSL_IMX_PXP := false
 BOARD_KERNEL_BASE := 0x40400000
 TARGET_GRALLOC_VERSION := v3
-<<<<<<< HEAD
-TARGET_HIGH_PERFORMANCE := true
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 TARGET_USES_HWC2 := true
 TARGET_HWCOMPOSER_VERSION := v2.0
 USE_OPENGL_RENDERER := true
@@ -39,21 +32,14 @@ SOONG_CONFIG_IMXPLUGIN_BOARD_VPU_ONLY = false
 # Product-specific compile-time definitions.
 #
 
-<<<<<<< HEAD
 IMX_DEVICE_PATH := device/idtech/imx8m/bigcypress_8mp
 
 include device/idtech/imx8m/BoardConfigCommon.mk
-=======
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mp
-
-include device/nxp/imx8m/BoardConfigCommon.mk
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 BUILD_TARGET_FS ?= ext4
 TARGET_USERIMAGES_USE_EXT4 := true
 
-<<<<<<< HEAD
-TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.freescale
+TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.nxp
 
 # Support gpt
 ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
@@ -72,27 +58,6 @@ else
     ADDITION_BPT_PARTITION = partition-table-28GB:device/idtech/common/partition/device-partitions-28GB-ab.bpt \
                              partition-table-dual:device/idtech/common/partition/device-partitions-14.4GB-ab-dual-bootloader.bpt \
                              partition-table-28GB-dual:device/idtech/common/partition/device-partitions-28GB-ab-dual-bootloader.bpt
-=======
-TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.nxp
-
-# Support gpt
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
-  BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab_super.bpt
-  ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab_super.bpt \
-                           partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader_super.bpt \
-                           partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader_super.bpt
-else
-  ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
-    BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab-no-product.bpt
-    ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab-no-product.bpt \
-                             partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader-no-product.bpt \
-                             partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader-no-product.bpt
-  else
-    BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab.bpt
-    ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab.bpt \
-                             partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader.bpt \
-                             partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader.bpt
->>>>>>> post_merge/android-11.0.0_1.0.0_history
   endif
 endif
 
@@ -120,12 +85,8 @@ BOARD_HAVE_BLUETOOTH_NXP := true
 # NXP 8997 BT
 BOARD_HAVE_BLUETOOTH_NXP := true
 
-<<<<<<< HEAD
 #BOARD_USE_SENSOR_FUSION := true
 BOARD_USE_ST_SENSOR_INPUT := true
-=======
-BOARD_USE_SENSOR_FUSION := true
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # we don't support sparse image.
 TARGET_USERIMAGES_SPARSE_EXT_DISABLED := false
@@ -139,19 +100,13 @@ USE_ION_ALLOCATOR := true
 USE_GPU_ALLOCATOR := false
 
 BOARD_AVB_ENABLE := true
-<<<<<<< HEAD
 BOARD_AVB_ALGORITHM := SHA256_RSA2048
 BOARD_AVB_KEY_PATH := device/idtech/common/security/idt_testkey_rsa2048.pem
-=======
-BOARD_AVB_ALGORITHM := SHA256_RSA4096
-# The testkey_rsa4096.pem is copied from external/avb/test/data/testkey_rsa4096.pem
-BOARD_AVB_KEY_PATH := device/nxp/common/security/testkey_rsa4096.pem
 
 BOARD_AVB_BOOT_KEY_PATH := external/avb/test/data/testkey_rsa2048.pem
 BOARD_AVB_BOOT_ALGORITHM := SHA256_RSA2048
 BOARD_AVB_BOOT_ROLLBACK_INDEX_LOCATION := 2
 
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 TARGET_USES_MKE2FS := true
 
 # define frame buffer count
@@ -159,28 +114,17 @@ NUM_FRAMEBUFFER_SURFACE_BUFFERS := 3
 
 CMASIZE=800M
 # NXP default config
-<<<<<<< HEAD
-BOARD_KERNEL_CMDLINE := init=/init androidboot.console=ttymxc1 androidboot.hardware=freescale firmware_class.path=/vendor/firmware loop.max_part=7
-
-# memory config
-BOARD_KERNEL_CMDLINE += transparent_hugepage=never
-=======
 BOARD_KERNEL_CMDLINE := init=/init androidboot.console=ttymxc1 androidboot.hardware=nxp firmware_class.path=/vendor/firmware loop.max_part=7
 
 # memory config
 BOARD_KERNEL_CMDLINE += transparent_hugepage=never
 BOARD_KERNEL_CMDLINE += swiotlb=65536
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # display config
 BOARD_KERNEL_CMDLINE += androidboot.lcd_density=240 androidboot.primary_display=imx-drm
 
 # wifi config
-<<<<<<< HEAD
-BOARD_KERNEL_CMDLINE += androidboot.wificountrycode=CN
-=======
 BOARD_KERNEL_CMDLINE += androidboot.wificountrycode=CN moal.mod_para=wifi_mod_para.conf
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # low memory device build config
 ifeq ($(LOW_MEMORY),true)
@@ -189,26 +133,19 @@ else
 BOARD_KERNEL_CMDLINE += cma=$(CMASIZE)@0x400M-0xb80M
 endif
 
-<<<<<<< HEAD
-=======
 ifneq (,$(filter userdebug eng,$(TARGET_BUILD_VARIANT)))
 BOARD_KERNEL_CMDLINE += androidboot.vendor.sysrq=1
 endif
 
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 ifeq ($(TARGET_USERIMAGES_USE_UBIFS),true)
 ifeq ($(TARGET_USERIMAGES_USE_EXT4),true)
 $(error "TARGET_USERIMAGES_USE_UBIFS and TARGET_USERIMAGES_USE_EXT4 config open in same time, please only choose one target file system image")
 endif
 endif
 
-<<<<<<< HEAD
 LOWER_BOARD_TYPE  = $(shell echo $(BOARD_TYPE) | tr A-Z a-z)
 LOWER_BOARD_SOC_TYPE  = $(shell echo $(BOARD_SOC_TYPE) | tr A-Z a-z)
 BOARD_PREBUILT_DTBOIMAGE := out/target/product/bigcypress_8mp/dtbo-$(BOARD_SOM_TYPE)-$(LOWER_BOARD_TYPE).img
-=======
-BOARD_PREBUILT_DTBOIMAGE := out/target/product/evk_8mp/dtbo-imx8mp.img
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
   ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
@@ -238,24 +175,14 @@ else # no dynamic parition feature
 endif
 
 BOARD_SEPOLICY_DIRS := \
-<<<<<<< HEAD
        device/idtech/imx8m/sepolicy \
        $(IMX_DEVICE_PATH)/sepolicy
 
 TARGET_BOARD_KERNEL_HEADERS := device/idtech/common/kernel-headers
-=======
-       device/nxp/imx8m/sepolicy \
-       $(IMX_DEVICE_PATH)/sepolicy
-
-TARGET_BOARD_KERNEL_HEADERS := device/nxp/common/kernel-headers
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ALL_DEFAULT_INSTALLED_MODULES += $(BOARD_VENDOR_KERNEL_MODULES)
 
 BOARD_USES_METADATA_PARTITION := true
 BOARD_ROOT_EXTRA_FOLDERS += metadata
-<<<<<<< HEAD
 
 BOARD_PLAT_PRIVATE_SEPOLICY_DIR := device/idtech/imx8m/sepolicy_system/private
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/bigcypress_8mp/SharedBoardConfig.mk b/imx8m/bigcypress_8mp/SharedBoardConfig.mk
index b881326a..f3f19f8e 100644
--- a/imx8m/bigcypress_8mp/SharedBoardConfig.mk
+++ b/imx8m/bigcypress_8mp/SharedBoardConfig.mk
@@ -1,9 +1,6 @@
 KERNEL_NAME := Image
 TARGET_KERNEL_ARCH := arm64
-<<<<<<< HEAD
-=======
 IMX8MP_USES_GKI := true
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 #Enable this to config 1GB ddr on evk_imx8mp
 #LOW_MEMORY := true
@@ -16,16 +13,6 @@ PRODUCT_IMX_TRUSTY := true
 
 #NXP 8997 wifi driver module
 BOARD_VENDOR_KERNEL_MODULES += \
-<<<<<<< HEAD
-    $(KERNEL_OUT)/drivers/net/wireless/marvell/mrvl8997/wlan_src/mlan.ko \
-    $(KERNEL_OUT)/drivers/net/wireless/marvell/mrvl8997/wlan_src/pcie8xxx.ko \
-# mipi-panel touch driver module
-BOARD_VENDOR_KERNEL_MODULES += \
-    $(KERNEL_OUT)/drivers/input/touchscreen/synaptics_dsx/synaptics_dsx_i2c.ko
-
-# isp vvcam driver module
-BOARD_VENDOR_KERNEL_MODULES += \
-=======
     $(KERNEL_OUT)/drivers/net/wireless/nxp/mxm_wifiex/wlan_src/mlan.ko \
     $(KERNEL_OUT)/drivers/net/wireless/nxp/mxm_wifiex/wlan_src/moal.ko
 
@@ -224,12 +211,8 @@ BOARD_VENDOR_RAMDISK_KERNEL_MODULES +=     \
     $(KERNEL_OUT)/drivers/staging/media/imx/imx8-isi-hw.ko \
     $(KERNEL_OUT)/drivers/staging/media/imx/imx8-isi-m2m.ko \
     $(KERNEL_OUT)/drivers/staging/media/imx/imx8-mipi-csi2-sam.ko \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     $(TARGET_OUT_INTERMEDIATES)/VVCAM_OBJ/vvcam-video.ko \
     $(TARGET_OUT_INTERMEDIATES)/VVCAM_OBJ/vvcam-isp.ko \
     $(TARGET_OUT_INTERMEDIATES)/VVCAM_OBJ/vvcam-dwe.ko \
     $(TARGET_OUT_INTERMEDIATES)/VVCAM_OBJ/basler-camera-driver-vvcam.ko
-<<<<<<< HEAD
-=======
 endif
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/bigcypress_8mp/UbootKernelBoardConfig.mk b/imx8m/bigcypress_8mp/UbootKernelBoardConfig.mk
index 7a26b770..9fb574d6 100644
--- a/imx8m/bigcypress_8mp/UbootKernelBoardConfig.mk
+++ b/imx8m/bigcypress_8mp/UbootKernelBoardConfig.mk
@@ -3,7 +3,6 @@ TARGET_BOOTLOADER_POSTFIX := bin
 UBOOT_POST_PROCESS := true
 
 # u-boot target
-<<<<<<< HEAD
 TARGET_BOOTLOADER_CONFIG := imx8mp-lpddr4:vp6820_8mp_evk_android_defconfig:signed
 TARGET_BOOTLOADER_CONFIG += imx8mp-lpddr4-trusty:vp6820_8mp_evk_android_trusty_defconfig
 TARGET_BOOTLOADER_CONFIG += imx8mp-lpddr4-trusty-secure-unlock:vp6820_8mp_evk_android_trusty_secure_unlock_defconfig
@@ -11,18 +10,6 @@ TARGET_BOOTLOADER_CONFIG += imx8mp-lpddr4-dual:vp6820_8mp_evk_android_dual_defco
 TARGET_BOOTLOADER_CONFIG += imx8mp-lpddr4-trusty-dual:vp6820_8mp_evk_android_trusty_dual_defconfig
 TARGET_BOOTLOADER_CONFIG += imx8mp-lpddr4-evk-uuu-mic6g:vp6820_8mp_evk_android_uuu_mic6g_defconfig:signed
 
-TARGET_KERNEL_DEFCONFIG := imx_v8_android_defconfig
-
-TARGET_KERNEL_ADDITION_DEFCONF := android_addition_defconfig
-TARGET_KERNEL_SECURE_DEFCONF ?= android_secure_defconfig
-=======
-TARGET_BOOTLOADER_CONFIG := imx8mp:imx8mp_evk_android_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mp-trusty:imx8mp_evk_android_trusty_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mp-trusty-secure-unlock:imx8mp_evk_android_trusty_secure_unlock_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mp-dual:imx8mp_evk_android_dual_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mp-trusty-dual:imx8mp_evk_android_trusty_dual_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mp-evk-uuu:imx8mp_evk_android_uuu_defconfig
-
 ifneq ($(IMX8MP_USES_GKI),)
 TARGET_KERNEL_DEFCONFIG := gki_defconfig
 TARGET_KERNEL_GKI_DEFCONF:= android_gki_defconfig
@@ -31,7 +18,7 @@ TARGET_KERNEL_DEFCONFIG := imx_v8_android_defconfig
 endif
 
 TARGET_KERNEL_ADDITION_DEFCONF := android_addition_defconfig
->>>>>>> post_merge/android-11.0.0_1.0.0_history
+TARGET_KERNEL_SECURE_DEFCONF ?= android_secure_defconfig
 
 
 # absolute path is used, not the same as relative path used in AOSP make
diff --git a/imx8m/bigcypress_8mp/android_addition_defconfig b/imx8m/bigcypress_8mp/android_addition_defconfig
index d98bc978..4c18f0ef 100644
--- a/imx8m/bigcypress_8mp/android_addition_defconfig
+++ b/imx8m/bigcypress_8mp/android_addition_defconfig
@@ -1,5 +1,5 @@
-<<<<<<< HEAD
-CONFIG_CLD_HL_SDIO_CORE=y
+CONFIG_LIBNVDIMM=y
+CONFIG_OF_PMEM=y
 CONFIG_IDG_SPI=y
 # CONFIG_USB_NET_QMI_WWAN is not set
 CONFIG_SINGLE_LOGO=y
@@ -253,7 +253,3 @@ CONFIG_USB_PRINTER=y
 # CONFIG_MMC_SDHCI_MSM is not set
 # CONFIG_MMC_SDHI is not set
 # CONFIG_MMC_DW_EXYNOS is not set
-=======
-CONFIG_LIBNVDIMM=y
-CONFIG_OF_PMEM=y
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/bigcypress_8mp/audio_policy_configuration.xml b/imx8m/bigcypress_8mp/audio_policy_configuration.xml
index a32492cf..ceeb3476 100644
--- a/imx8m/bigcypress_8mp/audio_policy_configuration.xml
+++ b/imx8m/bigcypress_8mp/audio_policy_configuration.xml
@@ -29,23 +29,9 @@
                     <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
                              samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
                 </mixPort>
-<<<<<<< HEAD
-                <mixPort name="esai output" role="source" flags="AUDIO_OUTPUT_FLAG_DIRECT|AUDIO_OUTPUT_FLAG_HW_AV_SYNC">
-                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
-                             samplingRates="48000,96000,192000,384000,768000"
-                             channelMasks="AUDIO_CHANNEL_OUT_STEREO,AUDIO_CHANNEL_OUT_QUAD,AUDIO_CHANNEL_OUT_5POINT1,AUDIO_CHANNEL_OUT_7POINT1"/>
-                    <profile name="" format="AUDIO_FORMAT_PCM_FLOAT"
-                             samplingRates="48000,96000,192000,384000,768000"
-                             channelMasks="AUDIO_CHANNEL_OUT_STEREO,AUDIO_CHANNEL_OUT_QUAD,AUDIO_CHANNEL_OUT_5POINT1,AUDIO_CHANNEL_OUT_7POINT1"/>
-                </mixPort>
-                <mixPort name="dsd output" role="source" flags="AUDIO_OUTPUT_FLAG_DIRECT|AUDIO_OUTPUT_FLAG_COMPRESS_OFFLOAD">
-                    <profile name="" format="AUDIO_FORMAT_DSD"
-                             samplingRates="2822400,5644800,11289600,22579200" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
-=======
                 <mixPort name="lpa output" role="source" flags="AUDIO_OUTPUT_FLAG_DIRECT|AUDIO_OUTPUT_FLAG_HW_AV_SYNC">
                     <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
                              samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
                 </mixPort>
                 <mixPort name="hdmi output" role="source">
                     <profile name="" format="AUDIO_FORMAT_PCM_8_24_BIT"
@@ -92,19 +78,11 @@
                 <route type="mix" sink="Speaker"
                        sources="primary output"/>
                 <route type="mix" sink="Wired Headphones"
-<<<<<<< HEAD
-                       sources="dsd output,esai output,primary output"/>
-                <route type="mix" sink="Wired Headset"
-                       sources="dsd output,esai output,primary output"/>
-                <route type="mix" sink="Line-Out"
-                       sources="dsd output,esai output,primary output"/>
-=======
                        sources="primary output"/>
                 <route type="mix" sink="Wired Headset"
                        sources="primary output"/>
                 <route type="mix" sink="Line-Out"
                        sources="lpa output,primary output"/>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
                 <route type="mix" sink="HDMI Out"
                        sources="hdmi output"/>
                 <route type="mix" sink="BT SCO Headset"
diff --git a/imx8m/bigcypress_8mp/bigcypress_8mp.mk b/imx8m/bigcypress_8mp/bigcypress_8mp.mk
index 5f5ea2dd..99a3a1e2 100644
--- a/imx8m/bigcypress_8mp/bigcypress_8mp.mk
+++ b/imx8m/bigcypress_8mp/bigcypress_8mp.mk
@@ -1,470 +1,15 @@
 # This is a FSL Android Reference Design platform based on i.MX8QP ARD board
 # It will inherit from FSL core product which in turn inherit from Google generic
 
-<<<<<<< HEAD
 IMX_DEVICE_PATH := device/idtech/imx8m/bigcypress_8mp
 $(call inherit-product, $(TOPDIR)$(IMX_DEVICE_PATH)/bigcypress_8mp_common.mk)
 
 # Overrides
 PRODUCT_NAME := bigcypress_8mp
-=======
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mp
 
-# configs shared between uboot, kernel and Android rootfs
-include $(IMX_DEVICE_PATH)/SharedBoardConfig.mk
-
--include device/nxp/common/imx_path/ImxPathConfig.mk
-include device/nxp/imx8m/ProductConfigCommon.mk
-
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.nxp),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab.nxp)
-endif
-
-# Overrides
-PRODUCT_NAME := evk_8mp
-PRODUCT_DEVICE := evk_8mp
-PRODUCT_MODEL := EVK_8MP
-
-PRODUCT_FULL_TREBLE_OVERRIDE := true
-PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/power
-PRODUCT_SOONG_NAMESPACES += hardware/google/pixel
-
-#Enable this to choose 32 bit user space build
-#IMX8_BUILD_32BIT_ROOTFS := true
-
-# Enable this to support vendor boot and boot header v3, this would be a MUST for GKI
-TARGET_USE_VENDOR_BOOT ?= true
-
-#Enable this to use dynamic partitions for the readonly partitions not touched by bootloader
-TARGET_USE_DYNAMIC_PARTITIONS ?= true
-#If the device is retrofit to have dynamic partition feature, set this variable to true to build
-#the images and OTA package. Here is a demo to update 10.0.0_1.0.0 to 10.0.0_2.0.0 or higher
-TARGET_USE_RETROFIT_DYNAMIC_PARTITION ?= false
-
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
-  $(call inherit-product, $(SRC_TARGET_DIR)/product/virtual_ab_ota.mk)
-  PRODUCT_USE_DYNAMIC_PARTITIONS := true
-  BOARD_BUILD_SUPER_IMAGE_BY_DEFAULT := true
-  BOARD_SUPER_IMAGE_IN_UPDATE_PACKAGE := true
-  ifeq ($(TARGET_USE_RETROFIT_DYNAMIC_PARTITION),true)
-    PRODUCT_RETROFIT_DYNAMIC_PARTITIONS := true
-    BOARD_SUPER_PARTITION_METADATA_DEVICE := system
-    ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
-      BOARD_SUPER_PARTITION_BLOCK_DEVICES := system vendor
-      BOARD_SUPER_PARTITION_SYSTEM_DEVICE_SIZE := 2952790016
-      BOARD_SUPER_PARTITION_VENDOR_DEVICE_SIZE := 536870912
-    else
-      BOARD_SUPER_PARTITION_BLOCK_DEVICES := system vendor product
-      BOARD_SUPER_PARTITION_SYSTEM_DEVICE_SIZE := 1610612736
-      BOARD_SUPER_PARTITION_VENDOR_DEVICE_SIZE := 536870912
-      BOARD_SUPER_PARTITION_PRODUCT_DEVICE_SIZE := 1879048192
-    endif
-  endif
-endif
-
-# Include keystore attestation keys and certificates.
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
--include $(IMX_SECURITY_PATH)/attestation/imx_attestation.mk
-endif
-
-# Include Android Go config for low memory device.
-ifeq ($(LOW_MEMORY),true)
-$(call inherit-product, build/target/product/go_defaults.mk)
-endif
-
-# Copy device related config and binary to board
-PRODUCT_COPY_FILES += \
-    $(FSL_PROPRIETARY_PATH)/fsl-proprietary/mcu-sdk/imx8mp/imx8mp_mcu_demo.img:imx8mp_mcu_demo.img \
-    $(IMX_DEVICE_PATH)/app_whitelist.xml:system/etc/sysconfig/app_whitelist.xml \
-    $(IMX_DEVICE_PATH)/audio_effects.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_effects.xml \
-    $(IMX_DEVICE_PATH)/audio_policy_configuration.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
-    $(IMX_DEVICE_PATH)/usb_audio_policy_configuration-direct-output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/usb_audio_policy_configuration-direct-output.xml \
-    $(IMX_DEVICE_PATH)/input-port-associations.xml:$(TARGET_COPY_OUT_VENDOR)/etc/input-port-associations.xml \
-    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.nxp \
-    $(IMX_DEVICE_PATH)/init.imx8mp.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mp.rc \
-    $(IMX_DEVICE_PATH)/init.recovery.nxp.rc:root/init.recovery.nxp.rc \
-    $(IMX_DEVICE_PATH)/early.init.cfg:$(TARGET_COPY_OUT_VENDOR)/etc/early.init.cfg \
-    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.rc \
-    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.usb.rc \
-    $(IMX_DEVICE_PATH)/required_hardware.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/required_hardware.xml \
-    $(IMX_DEVICE_PATH)/ueventd.nxp.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
-    $(LINUX_FIRMWARE_IMX_PATH)/linux-firmware-imx/firmware/sdma/sdma-imx7d.bin:$(TARGET_COPY_OUT_VENDOR)/firmware/imx/sdma/sdma-imx7d.bin \
-    device/nxp/common/init/init.insmod.sh:$(TARGET_COPY_OUT_VENDOR)/bin/init.insmod.sh \
-    device/nxp/common/wifi/p2p_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/p2p_supplicant_overlay.conf \
-    device/nxp/common/wifi/wpa_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/wpa_supplicant_overlay.conf
-
-# Copy isp files to board
-ISP_PROPRIETARY := $(FSL_PROPRIETARY_PATH)/fsl-proprietary/isp
-PRODUCT_COPY_FILES += \
-    $(call find-copy-subdir-files,*,$(ISP_PROPRIETARY)/bin,$(TARGET_COPY_OUT_VENDOR)/bin) \
-    $(call find-copy-subdir-files,*,$(ISP_PROPRIETARY)/lib64,$(TARGET_COPY_OUT_VENDOR)/lib64) \
-    $(call find-copy-subdir-files,*,$(ISP_PROPRIETARY)/config,$(TARGET_COPY_OUT_VENDOR)/etc/configs/isp)
-
-# We load the fstab from device tree so this is not needed, but since no kernel modules are installed to vendor
-# boot ramdisk so far, we need this step to generate the vendor-ramdisk folder or build process would fail. This
-# can be deleted once we figure out what kernel modules should be put into the vendor boot ramdisk.
-ifeq ($(TARGET_USE_VENDOR_BOOT),true)
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR_RAMDISK)/first_stage_ramdisk/fstab.nxp
-endif
-
-
-# Audio card json
-PRODUCT_COPY_FILES += \
-    device/nxp/common/audio-json/wm8960_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/wm8960_config.json \
-    device/nxp/common/audio-json/micfil_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/micfil_config.json \
-    device/nxp/common/audio-json/hdmi_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/hdmi_config.json \
-    device/nxp/common/audio-json/btsco_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/btsco_config.json \
-    device/nxp/common/audio-json/readme.txt:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/readme.txt
-
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_COPY_FILES += \
-    device/nxp/common/security/rpmb_key_test.bin:rpmb_key_test.bin \
-    device/nxp/common/security/testkey_public_rsa4096.bin:testkey_public_rsa4096.bin
-endif
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mp/camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/camera_config_imx8mp.json \
-    device/nxp/imx8m/evk_8mp/ov5640_camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/ov5640_camera_config_imx8mp.json \
-    device/nxp/imx8m/evk_8mp/isp_camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/isp_camera_config_imx8mp.json \
-    device/nxp/imx8m/evk_8mp/external_camera_config.xml:$(TARGET_COPY_OUT_VENDOR)/etc/external_camera_config.xml
-
-# ONLY devices that meet the CDD's requirements may declare these features
-PRODUCT_COPY_FILES += \
-    frameworks/native/data/etc/android.hardware.audio.output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.audio.output.xml \
-    frameworks/native/data/etc/android.hardware.bluetooth_le.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.bluetooth_le.xml \
-    frameworks/native/data/etc/android.hardware.camera.external.xml:vendor/etc/permissions/android.hardware.camera.external.xml \
-    frameworks/native/data/etc/android.hardware.camera.front.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.front.xml \
-    frameworks/native/data/etc/android.hardware.camera.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.xml \
-    frameworks/native/data/etc/android.hardware.ethernet.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.ethernet.xml \
-    frameworks/native/data/etc/android.hardware.screen.landscape.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.screen.landscape.xml \
-    frameworks/native/data/etc/android.hardware.screen.portrait.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.screen.portrait.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.multitouch.distinct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.multitouch.distinct.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.multitouch.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.multitouch.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.xml \
-    frameworks/native/data/etc/android.hardware.usb.accessory.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.accessory.xml \
-    frameworks/native/data/etc/android.hardware.usb.host.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.host.xml \
-    frameworks/native/data/etc/android.hardware.vulkan.level-0.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.level-0.xml \
-    frameworks/native/data/etc/android.hardware.vulkan.version-1_1.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.version-1_1.xml \
-    frameworks/native/data/etc/android.software.vulkan.deqp.level-2020-03-01.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.vulkan.deqp.level-2020-03-01.xml \
-    frameworks/native/data/etc/android.hardware.wifi.direct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.direct.xml \
-    frameworks/native/data/etc/android.hardware.wifi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.xml \
-    frameworks/native/data/etc/android.hardware.wifi.passpoint.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.passpoint.xml \
-    frameworks/native/data/etc/android.software.app_widgets.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.app_widgets.xml \
-    frameworks/native/data/etc/android.software.backup.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.backup.xml \
-    frameworks/native/data/etc/android.software.device_admin.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.device_admin.xml \
-    frameworks/native/data/etc/android.software.managed_users.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.managed_users.xml \
-    frameworks/native/data/etc/android.software.midi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.midi.xml \
-    frameworks/native/data/etc/android.software.print.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.print.xml \
-    frameworks/native/data/etc/android.software.sip.voip.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.sip.voip.xml \
-    frameworks/native/data/etc/android.software.verified_boot.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.verified_boot.xml \
-    frameworks/native/data/etc/android.software.voice_recognizers.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.voice_recognizers.xml \
-    frameworks/native/data/etc/android.software.activities_on_secondary_displays.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.activities_on_secondary_displays.xml \
-    frameworks/native/data/etc/android.software.picture_in_picture.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.picture_in_picture.xml
-
-# Vendor seccomp policy files for media components:
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/seccomp/mediacodec-seccomp.policy:vendor/etc/seccomp_policy/mediacodec.policy \
-    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.base.policy:vendor/etc/seccomp_policy/codec2.vendor.base.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.ext.policy:vendor/etc/seccomp_policy/codec2.vendor.ext.policy
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mp/powerhint_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/powerhint_imx8mp.json
-
-# fastboot_imx_flashall scripts, fsl-sdcard-partition script uuu_imx_android_flash scripts
-PRODUCT_COPY_FILES += \
-    device/nxp/common/tools/fastboot_imx_flashall.bat:fastboot_imx_flashall.bat \
-    device/nxp/common/tools/fastboot_imx_flashall.sh:fastboot_imx_flashall.sh \
-    device/nxp/common/tools/imx-sdcard-partition.sh:imx-sdcard-partition.sh \
-    device/nxp/common/tools/uuu_imx_android_flash.bat:uuu_imx_android_flash.bat \
-    device/nxp/common/tools/uuu_imx_android_flash.sh:uuu_imx_android_flash.sh
-
-# Set permission for GMS packages
-PRODUCT_COPY_FILES += \
-	  device/nxp/imx8m/permissions/privapp-permissions-imx.xml:$(TARGET_COPY_OUT_PRODUCT)/etc/permissions/privapp.permissions-imx.xml \
-
-USE_XML_AUDIO_POLICY_CONF := 1
-
-DEVICE_PACKAGE_OVERLAYS := $(IMX_DEVICE_PATH)/overlay
-
-PRODUCT_CHARACTERISTICS := tablet
-
-PRODUCT_AAPT_CONFIG += xlarge large tvdpi hdpi xhdpi xxhdpi
-
-# GPU openCL g2d
-PRODUCT_COPY_FILES += \
-    $(IMX_PATH)/imx/opencl-2d/cl_g2d.cl:$(TARGET_COPY_OUT_VENDOR)/etc/cl_g2d.cl
-
-# HWC2 HAL
-PRODUCT_PACKAGES += \
-    android.hardware.graphics.composer@2.4-service
-
-# Charger Mode
-PRODUCT_PRODUCT_PROPERTIES += \
-    ro.charger.no_ui=false
-
-# Do not skip charger_not_need trigger by default
-PRODUCT_DEFAULT_PROPERTY_OVERRIDES += \
-    vendor.skip.charger_not_need=0
-
-# Gralloc HAL
-PRODUCT_PACKAGES += \
-    android.hardware.graphics.mapper@2.0-impl-2.1 \
-    android.hardware.graphics.allocator@2.0-impl \
-    android.hardware.graphics.allocator@2.0-service
-
-# RenderScript HAL
-PRODUCT_PACKAGES += \
-    android.hardware.renderscript@1.0-impl
-
-PRODUCT_PACKAGES += \
-    libEGL_VIVANTE \
-    libGLESv1_CM_VIVANTE \
-    libGLESv2_VIVANTE \
-    gralloc_viv.imx \
-    libGAL \
-    libGLSLC \
-    libVSC \
-    libgpuhelper \
-    libSPIRV_viv \
-    libvulkan_VIVANTE \
-    vulkan.imx \
-    libCLC \
-    libLLVM_viv \
-    libOpenCL \
-    libg2d-opencl \
-    libg2d-viv \
-    libOpenVX \
-    libOpenVXU \
-    libNNVXCBinary-evis \
-    libNNVXCBinary-evis2 \
-    libNNVXCBinary-lite \
-    libOvx12VXCBinary-evis \
-    libOvx12VXCBinary-evis2 \
-    libOvx12VXCBinary-lite \
-    libNNGPUBinary-evis \
-    libNNGPUBinary-evis2 \
-    libNNGPUBinary-lite \
-    libNNGPUBinary-ulite \
-    libNNArchPerf \
-    libarchmodelSw
-
-PRODUCT_PACKAGES += \
-    android.hardware.audio@6.0-impl:32 \
-    android.hardware.audio@2.0-service \
-    android.hardware.audio.effect@6.0-impl:32 \
-    android.hardware.power@1.3-service.imx \
-    android.hardware.light@2.0-impl \
-    android.hardware.light@2.0-service \
-    android.hardware.configstore@1.1-service \
-    configstore@1.1.policy
-
-ifneq ($(IMX8MP_USES_GKI), true)
-# Thermal HAL
-PRODUCT_PACKAGES += \
-    android.hardware.thermal@2.0-service.imx
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mp/thermal_info_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/thermal_info_config_imx8mp.json
-endif
-
-# Neural Network HAL and lib
-PRODUCT_PACKAGES += \
-    libovxlib \
-    libnnrt \
-    android.hardware.neuralnetworks@1.2-service-vsi-npu-server
-
-# Usb HAL
-PRODUCT_PACKAGES += \
-    android.hardware.usb@1.1-service.imx
-
-# Bluetooth HAL
-PRODUCT_PACKAGES += \
-    android.hardware.bluetooth@1.0-impl \
-    android.hardware.bluetooth@1.0-service
-
-#nxp 8997 Bluetooth vendor config
-PRODUCT_PACKAGES += \
-    bt_vendor.conf
-
-# WiFi HAL
-PRODUCT_PACKAGES += \
-    android.hardware.wifi@1.0-service \
-    wifilogd \
-    wificond
-
-# WiFi RRO
-PRODUCT_PACKAGES += \
-    WifiOverlay
-
-# nxp 8997 wifi and bluetooth combo Firmware
-PRODUCT_COPY_FILES += \
-    vendor/nxp/imx-firmware/nxp/FwImage_8997/pcieuart8997_combo_v4.bin:vendor/firmware/pcieuart8997_combo_v4.bin \
-    vendor/nxp/imx-firmware/nxp/android_wifi_mod_para.conf:vendor/firmware/wifi_mod_para.conf
-
-# Wifi regulatory
-PRODUCT_COPY_FILES += \
-    external/wireless-regdb/regulatory.db:vendor/firmware/regulatory.db \
-    external/wireless-regdb/regulatory.db.p7s:vendor/firmware/regulatory.db.p7s
-
-# Keymaster HAL
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_PACKAGES += \
-    android.hardware.keymaster@4.0-service.trusty
-endif
-
-PRODUCT_PACKAGES += \
-    android.hardware.keymaster@4.0-service-imx
-
-# DRM HAL
-TARGET_ENABLE_MEDIADRM_64 := true
-PRODUCT_PACKAGES += \
-    android.hardware.drm@1.0-impl \
-    android.hardware.drm@1.0-service
-
-# new gatekeeper HAL
-PRODUCT_PACKAGES += \
-    android.hardware.gatekeeper@1.0-service.software-imx
-
-ifneq ($(BUILD_TARGET_FS),ubifs)
-PRODUCT_PROPERTY_OVERRIDES += \
-    ro.frp.pst=/dev/block/by-name/presistdata
-endif
-
-PRODUCT_PACKAGES += \
-    libg1 \
-    libhantro \
-    libcodec \
-    libhantro_vc8000e
-
-# imx c2 codec binary
-PRODUCT_PACKAGES += \
-    lib_vpu_wrapper \
-    lib_imx_c2_videodec_common \
-    lib_imx_c2_videodec \
-    lib_imx_c2_vpuwrapper_dec \
-    lib_imx_c2_videoenc_common \
-    lib_imx_c2_videoenc \
-    lib_imx_c2_vpuwrapper_enc \
-    lib_imx_c2_process \
-    lib_imx_c2_process_dummy_post \
-    lib_imx_c2_process_g2d_pre \
-    c2_component_register \
-    c2_component_register_ms \
-    c2_component_register_ra
-
-# dsp decoder
-PRODUCT_PACKAGES += \
-    media_codecs_c2_dsp.xml \
-    media_codecs_c2_dsp_aacp.xml \
-    media_codecs_c2_dsp_wma.xml \
-    lib_dsp_aac_dec \
-    lib_dsp_bsac_dec \
-    lib_dsp_codec_wrap \
-    lib_dsp_mp3_dec \
-    lib_dsp_wrap_arm12_android \
-    lib_dsp_mp3_dec_ext \
-    lib_dsp_codec_wrap_ext \
-    lib_aacd_wrap_dsp \
-    lib_mp3d_wrap_dsp \
-    lib_wma10d_wrap_dsp \
-    c2_component_register_dsp \
-    c2_component_register_dsp_wma \
-    c2_component_register_dsp_aacp
-
-
-PRODUCT_PACKAGES += \
-    DirectAudioPlayer
-
-# Tensorflow lite camera demo
-PRODUCT_PACKAGES += \
-                    tflitecamerademo
-
-# Multi-Display launcher
-PRODUCT_PACKAGES += \
-    MultiDisplay
->>>>>>> post_merge/android-11.0.0_1.0.0_history
-
-# Add oem unlocking option in settings.
-PRODUCT_PROPERTY_OVERRIDES += ro.frp.pst=/dev/block/by-name/presistdata
-PRODUCT_COMPATIBLE_PROPERTY_OVERRIDE := true
-
-<<<<<<< HEAD
 # set persist.idt.lock_orientation as 1 in default prop file, and
 # if user modified property value it would be stored in /data/property,
 # and init process will first load default prop value, and overwrite it
 # if find key in /data/property
 PRODUCT_PROPERTY_OVERRIDES += \
     persist.idt.lock_orientation=1
-=======
-# Add Trusty OS backed gatekeeper and secure storage proxy
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_PACKAGES += \
-    android.hardware.gatekeeper@1.0-service.trusty \
-    storageproxyd
-endif
-
-#DRM Widevine 1.2 L3 support
-PRODUCT_PACKAGES += \
-    android.hardware.drm@1.0-impl \
-    android.hardware.drm@1.0-service \
-    android.hardware.drm@1.3-service.widevine \
-    android.hardware.drm@1.3-service.clearkey \
-    libwvdrmcryptoplugin \
-    libwvhidl \
-    libwvdrmengine \
-
-#Dumpstate HAL 1.1 support
-PRODUCT_PACKAGES += \
-    android.hardware.dumpstate@1.1-service.imx
-
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-#Oemlock HAL 1.0 support
-PRODUCT_PACKAGES += \
-    android.hardware.oemlock@1.0-service.imx
-endif
-
-# Specify rollback index for boot and vbmeta partitions
-ifneq ($(AVB_RBINDEX),)
-BOARD_AVB_ROLLBACK_INDEX := $(AVB_RBINDEX)
-else
-BOARD_AVB_ROLLBACK_INDEX := 0
-endif
-
-ifneq ($(AVB_BOOT_RBINDEX),)
-BOARD_AVB_BOOT_ROLLBACK_INDEX := $(AVB_BOOT_RBINDEX)
-else
-BOARD_AVB_BOOT_ROLLBACK_INDEX := 0
-endif
-
-IMX-DEFAULT-G2D-LIB := libg2d-opencl
-
-ifeq ($(PREBUILT_FSL_IMX_CODEC),true)
-ifneq ($(IMX8_BUILD_32BIT_ROOTFS),true)
-INSTALL_64BIT_LIBRARY := true
-endif
--include $(FSL_CODEC_PATH)/fsl-codec/fsl-codec.mk
--include $(FSL_RESTRICTED_CODEC_PATH)/fsl-restricted-codec/imx_dsp_aacp_dec/imx_dsp_aacp_dec.mk
--include $(FSL_RESTRICTED_CODEC_PATH)/fsl-restricted-codec/imx_dsp_codec/imx_dsp_codec.mk
--include $(FSL_RESTRICTED_CODEC_PATH)/fsl-restricted-codec/imx_dsp_wma_dec/imx_dsp_wma_dec.mk
--include $(FSL_RESTRICTED_CODEC_PATH)/fsl-restricted-codec/imx_dsp/imx_dsp_8mp.mk
-endif
-
-# Included GMS package
-$(call inherit-product-if-exists, vendor/partner_gms/products/gms.mk)
-PRODUCT_SOONG_NAMESPACES += vendor/partner_gms
-
-# Resume on Reboot support
-PRODUCT_PACKAGES += \
-    android.hardware.rebootescrow-service.default
-
-PRODUCT_PROPERTY_OVERRIDES += \
-    ro.rebootescrow.device=/dev/block/pmem0
-
-PRODUCT_SOONG_NAMESPACES += hardware/google/camera
-PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/camera
-
-$(call  inherit-product-if-exists, vendor/nxp-private/security/nxp_security.mk)
-
-$(call inherit-product, $(SRC_TARGET_DIR)/product/emulated_storage.mk)
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/bigcypress_8mp/bigcypress_8mp_common.mk b/imx8m/bigcypress_8mp/bigcypress_8mp_common.mk
index ce5437d0..c54d6092 100644
--- a/imx8m/bigcypress_8mp/bigcypress_8mp_common.mk
+++ b/imx8m/bigcypress_8mp/bigcypress_8mp_common.mk
@@ -9,8 +9,8 @@ include $(IMX_DEVICE_PATH)/SharedBoardConfig.mk
 -include device/idtech/common/imx_path/ImxPathConfig.mk
 include device/idtech/imx8m/ProductConfigCommon.mk
 
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.freescale),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab.freescale)
+ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.nxp),)
+$(shell touch $(IMX_DEVICE_PATH)/fstab.nxp)
 endif
 
 # Overrides
@@ -19,10 +19,15 @@ PRODUCT_DEVICE := bigcypress_8mp
 PRODUCT_MODEL := BIGCYPRESS_8MP
 
 PRODUCT_FULL_TREBLE_OVERRIDE := true
+PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/power
+PRODUCT_SOONG_NAMESPACES += hardware/google/pixel
 
 #Enable this to choose 32 bit user space build
 #IMX8_BUILD_32BIT_ROOTFS := true
 
+# Enable this to support vendor boot and boot header v3, this would be a MUST for GKI
+TARGET_USE_VENDOR_BOOT ?= true
+
 #Enable this to use dynamic partitions for the readonly partitions not touched by bootloader
 TARGET_USE_DYNAMIC_PARTITIONS ?= true
 #If the device is retrofit to have dynamic partition feature, set this variable to true to build
@@ -30,6 +35,7 @@ TARGET_USE_DYNAMIC_PARTITIONS ?= true
 TARGET_USE_RETROFIT_DYNAMIC_PARTITION ?= false
 
 ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
+  $(call inherit-product, $(SRC_TARGET_DIR)/product/virtual_ab_ota.mk)
   PRODUCT_USE_DYNAMIC_PARTITIONS := true
   BOARD_BUILD_SUPER_IMAGE_BY_DEFAULT := true
   BOARD_SUPER_IMAGE_IN_UPDATE_PACKAGE := false
@@ -67,14 +73,14 @@ PRODUCT_COPY_FILES += \
     $(IMX_DEVICE_PATH)/audio_policy_configuration.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
     $(IMX_DEVICE_PATH)/usb_audio_policy_configuration-direct-output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/usb_audio_policy_configuration-direct-output.xml \
     $(IMX_DEVICE_PATH)/input-port-associations.xml:$(TARGET_COPY_OUT_VENDOR)/etc/input-port-associations.xml \
-    $(IMX_DEVICE_PATH)/fstab.freescale:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.freescale \
-    $(IMX_DEVICE_PATH)/init.imx8mp.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.freescale.imx8mp.rc \
-    $(IMX_DEVICE_PATH)/init.recovery.freescale.rc:root/init.recovery.freescale.rc \
+    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.nxp \
+    $(IMX_DEVICE_PATH)/init.imx8mp.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mp.rc \
+    $(IMX_DEVICE_PATH)/init.recovery.nxp.rc:root/init.recovery.nxp.rc \
     $(IMX_DEVICE_PATH)/early.init.cfg:$(TARGET_COPY_OUT_VENDOR)/etc/early.init.cfg \
-    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.freescale.rc \
-    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.freescale.usb.rc \
+    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.rc \
+    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.usb.rc \
     $(IMX_DEVICE_PATH)/required_hardware.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/required_hardware.xml \
-    $(IMX_DEVICE_PATH)/ueventd.freescale.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
+    $(IMX_DEVICE_PATH)/ueventd.nxp.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
     $(LINUX_FIRMWARE_IMX_PATH)/linux-firmware-imx/firmware/sdma/sdma-imx7d.bin:$(TARGET_COPY_OUT_VENDOR)/firmware/imx/sdma/sdma-imx7d.bin \
     device/idtech/common/init/init.insmod.sh:$(TARGET_COPY_OUT_VENDOR)/bin/init.insmod.sh \
     device/idtech/common/wifi/p2p_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/p2p_supplicant_overlay.conf \
@@ -93,12 +99,15 @@ PRODUCT_COPY_FILES += \
     $(call find-copy-subdir-files,*,$(ISP_PROPRIETARY)/lib64,$(TARGET_COPY_OUT_VENDOR)/lib64) \
     $(call find-copy-subdir-files,*,$(ISP_PROPRIETARY)/config,$(TARGET_COPY_OUT_VENDOR)/etc/configs/isp)
 
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
+# We load the fstab from device tree so this is not needed, but since no kernel modules are installed to vendor
+# boot ramdisk so far, we need this step to generate the vendor-ramdisk folder or build process would fail. This
+# can be deleted once we figure out what kernel modules should be put into the vendor boot ramdisk.
+ifeq ($(TARGET_USE_VENDOR_BOOT),true)
 PRODUCT_COPY_FILES += \
-    $(FSL_PROPRIETARY_PATH)/fsl-proprietary/dynamic_partiton_tools/lpmake:lpmake \
-    $(FSL_PROPRIETARY_PATH)/fsl-proprietary/dynamic_partiton_tools/lpmake.exe:lpmake.exe
+    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR_RAMDISK)/first_stage_ramdisk/fstab.nxp
 endif
 
+
 # Audio card json
 PRODUCT_COPY_FILES += \
     device/idtech/common/audio-json/wm8960_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/wm8960_config.json \
@@ -117,12 +126,14 @@ endif
 PRODUCT_COPY_FILES += \
     device/idtech/imx8m/bigcypress_8mp/camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/camera_config_imx8mp.json \
     device/idtech/imx8m/bigcypress_8mp/ov5640_camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/ov5640_camera_config_imx8mp.json \
-    device/idtech/imx8m/bigcypress_8mp/isp_camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/isp_camera_config_imx8mp.json
+    device/idtech/imx8m/bigcypress_8mp/isp_camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/isp_camera_config_imx8mp.json \
+    device/idtech/imx8m/bigcypress_8mp/external_camera_config.xml:$(TARGET_COPY_OUT_VENDOR)/etc/external_camera_config.xml
 
 # ONLY devices that meet the CDD's requirements may declare these features
 PRODUCT_COPY_FILES += \
     frameworks/native/data/etc/android.hardware.audio.output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.audio.output.xml \
     frameworks/native/data/etc/android.hardware.bluetooth_le.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.bluetooth_le.xml \
+    frameworks/native/data/etc/android.hardware.camera.external.xml:vendor/etc/permissions/android.hardware.camera.external.xml \
     frameworks/native/data/etc/android.hardware.camera.front.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.front.xml \
     frameworks/native/data/etc/android.hardware.camera.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.xml \
     frameworks/native/data/etc/android.hardware.ethernet.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.ethernet.xml \
@@ -135,6 +146,7 @@ PRODUCT_COPY_FILES += \
     frameworks/native/data/etc/android.hardware.usb.host.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.host.xml \
     frameworks/native/data/etc/android.hardware.vulkan.level-0.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.level-0.xml \
     frameworks/native/data/etc/android.hardware.vulkan.version-1_1.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.version-1_1.xml \
+    frameworks/native/data/etc/android.software.vulkan.deqp.level-2020-03-01.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.vulkan.deqp.level-2020-03-01.xml \
     frameworks/native/data/etc/android.hardware.wifi.direct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.direct.xml \
     frameworks/native/data/etc/android.hardware.wifi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.xml \
     frameworks/native/data/etc/android.hardware.wifi.passpoint.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.passpoint.xml \
@@ -142,6 +154,7 @@ PRODUCT_COPY_FILES += \
     frameworks/native/data/etc/android.software.backup.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.backup.xml \
     frameworks/native/data/etc/android.software.device_admin.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.device_admin.xml \
     frameworks/native/data/etc/android.software.managed_users.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.managed_users.xml \
+    frameworks/native/data/etc/android.software.midi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.midi.xml \
     frameworks/native/data/etc/android.software.print.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.print.xml \
     frameworks/native/data/etc/android.software.sip.voip.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.sip.voip.xml \
     frameworks/native/data/etc/android.software.verified_boot.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.verified_boot.xml \
@@ -152,7 +165,9 @@ PRODUCT_COPY_FILES += \
 # Vendor seccomp policy files for media components:
 PRODUCT_COPY_FILES += \
     $(IMX_DEVICE_PATH)/seccomp/mediacodec-seccomp.policy:vendor/etc/seccomp_policy/mediacodec.policy \
-    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy
+    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy \
+    device/idtech/common/seccomp_policy/codec2.vendor.base.policy:vendor/etc/seccomp_policy/codec2.vendor.base.policy \
+    device/idtech/common/seccomp_policy/codec2.vendor.ext.policy:vendor/etc/seccomp_policy/codec2.vendor.ext.policy
 
 PRODUCT_COPY_FILES += \
     device/idtech/imx8m/bigcypress_8mp/powerhint_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/powerhint_imx8mp.json
@@ -161,15 +176,13 @@ PRODUCT_COPY_FILES += \
 PRODUCT_COPY_FILES += \
     device/idtech/common/tools/fastboot_imx_flashall.bat:fastboot_imx_flashall.bat \
     device/idtech/common/tools/fastboot_imx_flashall.sh:fastboot_imx_flashall.sh \
-    device/idtech/common/tools/fsl-sdcard-partition.sh:fsl-sdcard-partition.sh \
+    device/idtech/common/tools/imx-sdcard-partition.sh:imx-sdcard-partition.sh \
     device/idtech/common/tools/uuu_imx_android_flash.bat:uuu_imx_android_flash.bat \
     device/idtech/common/tools/uuu_imx_android_flash.sh:uuu_imx_android_flash.sh
 
-# Copy media_codecs.xml for 1GB bigcypress_8mp board
-ifeq ($(LOW_MEMORY),true)
+# Set permission for GMS packages
 PRODUCT_COPY_FILES += \
-    $(FSL_PROPRIETARY_PATH)/fsl-proprietary/media-profile/imx8mp/media_codecs_no_vpu.xml:$(TARGET_COPY_OUT_VENDOR)/etc/media_codecs.xml
-endif
+	  device/idtech/imx8m/permissions/privapp-permissions-imx.xml:$(TARGET_COPY_OUT_PRODUCT)/etc/permissions/privapp.permissions-imx.xml \
 
 USE_XML_AUDIO_POLICY_CONF := 1
 
@@ -185,7 +198,15 @@ PRODUCT_COPY_FILES += \
 
 # HWC2 HAL
 PRODUCT_PACKAGES += \
-    android.hardware.graphics.composer@2.3-service
+    android.hardware.graphics.composer@2.4-service
+
+# Charger Mode
+PRODUCT_PRODUCT_PROPERTIES += \
+    ro.charger.no_ui=false
+
+# Do not skip charger_not_need trigger by default
+PRODUCT_DEFAULT_PROPERTY_OVERRIDES += \
+    vendor.skip.charger_not_need=0
 
 # Gralloc HAL
 PRODUCT_PACKAGES += \
@@ -227,13 +248,12 @@ PRODUCT_PACKAGES += \
     libNNGPUBinary-lite \
     libNNGPUBinary-ulite \
     libNNArchPerf \
-    libarchmodelSw \
-    gatekeeper.imx
+    libarchmodelSw
 
 PRODUCT_PACKAGES += \
-    android.hardware.audio@5.0-impl:32 \
+    android.hardware.audio@6.0-impl:32 \
     android.hardware.audio@2.0-service \
-    android.hardware.audio.effect@5.0-impl:32 \
+    android.hardware.audio.effect@6.0-impl:32 \
     android.hardware.power@1.3-service.imx \
     android.hardware.light@2.0-impl \
     android.hardware.light@2.0-service \
@@ -243,11 +263,13 @@ PRODUCT_PACKAGES += \
     android.hardware.configstore@1.1-service \
     configstore@1.1.policy
 
+ifneq ($(IMX8MP_USES_GKI), true)
 # Thermal HAL
 PRODUCT_PACKAGES += \
     android.hardware.thermal@2.0-service.imx
 PRODUCT_COPY_FILES += \
     device/idtech/imx8m/bigcypress_8mp/thermal_info_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/thermal_info_config_imx8mp.json
+endif
 
 # Neural Network HAL and lib
 PRODUCT_PACKAGES += \
@@ -274,9 +296,14 @@ PRODUCT_PACKAGES += \
     wifilogd \
     wificond
 
+# WiFi RRO
+PRODUCT_PACKAGES += \
+    WifiOverlay
+
 # nxp 8997 wifi and bluetooth combo Firmware
 PRODUCT_COPY_FILES += \
-    vendor/nxp/imx-firmware/nxp/FwImage_8997/pcieuart8997_combo_v4.bin:vendor/firmware/pcieuart8997_combo_v4.bin
+    vendor/nxp/imx-firmware/nxp/FwImage_8997/pcieuart8997_combo_v4.bin:vendor/firmware/pcieuart8997_combo_v4.bin \
+    vendor/nxp/imx-firmware/nxp/android_wifi_mod_para.conf:vendor/firmware/wifi_mod_para.conf
 
 # Wifi regulatory
 PRODUCT_COPY_FILES += \
@@ -286,12 +313,11 @@ PRODUCT_COPY_FILES += \
 # Keymaster HAL
 ifeq ($(PRODUCT_IMX_TRUSTY),true)
 PRODUCT_PACKAGES += \
-    android.hardware.keymaster@3.0-service.trusty
+    android.hardware.keymaster@4.0-service.trusty
 endif
 
 PRODUCT_PACKAGES += \
-    android.hardware.keymaster@3.0-impl \
-    android.hardware.keymaster@3.0-service
+    android.hardware.keymaster@4.0-service-imx
 
 # DRM HAL
 TARGET_ENABLE_MEDIADRM_64 := true
@@ -301,18 +327,13 @@ PRODUCT_PACKAGES += \
 
 # new gatekeeper HAL
 PRODUCT_PACKAGES += \
-    android.hardware.gatekeeper@1.0-impl \
-    android.hardware.gatekeeper@1.0-service
+    android.hardware.gatekeeper@1.0-service.software-imx
 
 ifneq ($(BUILD_TARGET_FS),ubifs)
 PRODUCT_PROPERTY_OVERRIDES += \
     ro.frp.pst=/dev/block/by-name/presistdata
 endif
 
-# ro.product.first_api_level indicates the first api level the device has commercially launched on.
-PRODUCT_PROPERTY_OVERRIDES += \
-    ro.product.first_api_level=28
-
 PRODUCT_PACKAGES += \
     libg1 \
     libhantro \
@@ -375,7 +396,7 @@ PRODUCT_COMPATIBLE_PROPERTY_OVERRIDE := true
 # Add Trusty OS backed gatekeeper and secure storage proxy
 ifeq ($(PRODUCT_IMX_TRUSTY),true)
 PRODUCT_PACKAGES += \
-    gatekeeper.trusty \
+    android.hardware.gatekeeper@1.0-service.trusty \
     storageproxyd
 endif
 
@@ -383,15 +404,15 @@ endif
 PRODUCT_PACKAGES += \
     android.hardware.drm@1.0-impl \
     android.hardware.drm@1.0-service \
-    android.hardware.drm@1.2-service.widevine \
-    android.hardware.drm@1.2-service.clearkey \
+    android.hardware.drm@1.3-service.widevine \
+    android.hardware.drm@1.3-service.clearkey \
     libwvdrmcryptoplugin \
     libwvhidl \
     libwvdrmengine \
 
-#Dumpstate HAL 1.0 support
+#Dumpstate HAL 1.1 support
 PRODUCT_PACKAGES += \
-    android.hardware.dumpstate@1.0-service.imx
+    android.hardware.dumpstate@1.1-service.imx
 
 ifeq ($(PRODUCT_IMX_TRUSTY),true)
 #Oemlock HAL 1.0 support
@@ -403,17 +424,17 @@ endif
 PRODUCT_PACKAGES += \
     MultiClientInputMethod
 
-# Specify rollback index for bootloader and for AVB
+# Specify rollback index for boot and vbmeta partitions
 ifneq ($(AVB_RBINDEX),)
 BOARD_AVB_ROLLBACK_INDEX := $(AVB_RBINDEX)
 else
 BOARD_AVB_ROLLBACK_INDEX := 0
 endif
 
-ifneq (,$(filter userdebug eng,$(TARGET_BUILD_VARIANT)))
-$(call inherit-product, $(SRC_TARGET_DIR)/product/gsi_keys.mk)
-PRODUCT_PACKAGES += \
-    adb_debug.prop
+ifneq ($(AVB_BOOT_RBINDEX),)
+BOARD_AVB_BOOT_ROLLBACK_INDEX := $(AVB_BOOT_RBINDEX)
+else
+BOARD_AVB_BOOT_ROLLBACK_INDEX := 0
 endif
 
 IMX-DEFAULT-G2D-LIB := libg2d-opencl
@@ -431,9 +452,22 @@ endif
 
 # Included GMS package
 $(call inherit-product-if-exists, vendor/partner_gms/products/gms.mk)
+PRODUCT_SOONG_NAMESPACES += vendor/partner_gms
+
+# Resume on Reboot support
+PRODUCT_PACKAGES += \
+    android.hardware.rebootescrow-service.default
+
+PRODUCT_PROPERTY_OVERRIDES += \
+    ro.rebootescrow.device=/dev/block/pmem0
+
+PRODUCT_SOONG_NAMESPACES += hardware/google/camera
+PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/camera
 
 $(call  inherit-product-if-exists, vendor/nxp-private/security/nxp_security.mk)
 
+$(call inherit-product, $(SRC_TARGET_DIR)/product/emulated_storage.mk)
+
 # Copy Quectel vendor RIL
 PRODUCT_COPY_FILES += \
     vendor/quectel/libstdc++.so:/vendor/lib64/libstdc++.so \
diff --git a/imx8m/bigcypress_8mp/camera_config_imx8mp.json b/imx8m/bigcypress_8mp/camera_config_imx8mp.json
index 04f5d0e4..68e881ca 100644
--- a/imx8m/bigcypress_8mp/camera_config_imx8mp.json
+++ b/imx8m/bigcypress_8mp/camera_config_imx8mp.json
@@ -29,10 +29,7 @@
       "camera_type": "front",
       "camera_name": "mxc-isi-cap",
       "orientation": "0",
-<<<<<<< HEAD
-=======
       "mplane": "1",
->>>>>>> post_merge/android-11.0.0_1.0.0_history
       "buffer_type": "dma",
       "ActiveArrayWidth": "2592",
       "ActiveArrayHeight": "1944",
diff --git a/imx8m/bigcypress_8mp/early.init.cfg b/imx8m/bigcypress_8mp/early.init.cfg
index b3bd340f..9dd16032 100644
--- a/imx8m/bigcypress_8mp/early.init.cfg
+++ b/imx8m/bigcypress_8mp/early.init.cfg
@@ -1,12 +1,2 @@
-<<<<<<< HEAD
-insmod vendor/lib/modules/mlan.ko
-insmod vendor/lib/modules/pcie8xxx.ko sta_name=wlan uap_name=wlan wfd_name=p2p max_vir_bss=1 ps_mode=2 auto_ds=2 cfg80211_wext=0xf cal_data_cfg=none p2p_enh=1 fw_name=pcieuart8997_combo_v4.bin
-insmod vendor/lib/modules/synaptics_dsx_i2c.ko
-insmod /vendor/lib/modules/vvcam-video.ko
-insmod /vendor/lib/modules/vvcam-isp.ko
-insmod /vendor/lib/modules/vvcam-dwe.ko
-insmod /vendor/lib/modules/basler-camera-driver-vvcam.ko
-=======
 # support insmod xx.ko; setprop xx xx; modeprobe
 modprobe
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/bigcypress_8mp/evk_8mp.mk b/imx8m/bigcypress_8mp/evk_8mp.mk
deleted file mode 100644
index 7d552bcb..00000000
--- a/imx8m/bigcypress_8mp/evk_8mp.mk
+++ /dev/null
@@ -1,453 +0,0 @@
-# This is a FSL Android Reference Design platform based on i.MX8QP ARD board
-# It will inherit from FSL core product which in turn inherit from Google generic
-
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mp
-
-# configs shared between uboot, kernel and Android rootfs
-include $(IMX_DEVICE_PATH)/SharedBoardConfig.mk
-
--include device/nxp/common/imx_path/ImxPathConfig.mk
-include device/nxp/imx8m/ProductConfigCommon.mk
-
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.nxp),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab.nxp)
-endif
-
-# Overrides
-PRODUCT_NAME := evk_8mp
-PRODUCT_DEVICE := evk_8mp
-PRODUCT_MODEL := EVK_8MP
-
-PRODUCT_FULL_TREBLE_OVERRIDE := true
-PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/power
-PRODUCT_SOONG_NAMESPACES += hardware/google/pixel
-
-#Enable this to choose 32 bit user space build
-#IMX8_BUILD_32BIT_ROOTFS := true
-
-# Enable this to support vendor boot and boot header v3, this would be a MUST for GKI
-TARGET_USE_VENDOR_BOOT ?= true
-
-#Enable this to use dynamic partitions for the readonly partitions not touched by bootloader
-TARGET_USE_DYNAMIC_PARTITIONS ?= true
-#If the device is retrofit to have dynamic partition feature, set this variable to true to build
-#the images and OTA package. Here is a demo to update 10.0.0_1.0.0 to 10.0.0_2.0.0 or higher
-TARGET_USE_RETROFIT_DYNAMIC_PARTITION ?= false
-
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
-  $(call inherit-product, $(SRC_TARGET_DIR)/product/virtual_ab_ota.mk)
-  PRODUCT_USE_DYNAMIC_PARTITIONS := true
-  BOARD_BUILD_SUPER_IMAGE_BY_DEFAULT := true
-  BOARD_SUPER_IMAGE_IN_UPDATE_PACKAGE := true
-  ifeq ($(TARGET_USE_RETROFIT_DYNAMIC_PARTITION),true)
-    PRODUCT_RETROFIT_DYNAMIC_PARTITIONS := true
-    BOARD_SUPER_PARTITION_METADATA_DEVICE := system
-    ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
-      BOARD_SUPER_PARTITION_BLOCK_DEVICES := system vendor
-      BOARD_SUPER_PARTITION_SYSTEM_DEVICE_SIZE := 2952790016
-      BOARD_SUPER_PARTITION_VENDOR_DEVICE_SIZE := 536870912
-    else
-      BOARD_SUPER_PARTITION_BLOCK_DEVICES := system vendor product
-      BOARD_SUPER_PARTITION_SYSTEM_DEVICE_SIZE := 1610612736
-      BOARD_SUPER_PARTITION_VENDOR_DEVICE_SIZE := 536870912
-      BOARD_SUPER_PARTITION_PRODUCT_DEVICE_SIZE := 1879048192
-    endif
-  endif
-endif
-
-# Include keystore attestation keys and certificates.
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
--include $(IMX_SECURITY_PATH)/attestation/imx_attestation.mk
-endif
-
-# Include Android Go config for low memory device.
-ifeq ($(LOW_MEMORY),true)
-$(call inherit-product, build/target/product/go_defaults.mk)
-endif
-
-# Copy device related config and binary to board
-PRODUCT_COPY_FILES += \
-    $(FSL_PROPRIETARY_PATH)/fsl-proprietary/mcu-sdk/imx8mp/imx8mp_mcu_demo.img:imx8mp_mcu_demo.img \
-    $(IMX_DEVICE_PATH)/app_whitelist.xml:system/etc/sysconfig/app_whitelist.xml \
-    $(IMX_DEVICE_PATH)/audio_effects.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_effects.xml \
-    $(IMX_DEVICE_PATH)/audio_policy_configuration.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
-    $(IMX_DEVICE_PATH)/usb_audio_policy_configuration-direct-output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/usb_audio_policy_configuration-direct-output.xml \
-    $(IMX_DEVICE_PATH)/input-port-associations.xml:$(TARGET_COPY_OUT_VENDOR)/etc/input-port-associations.xml \
-    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.nxp \
-    $(IMX_DEVICE_PATH)/init.imx8mp.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mp.rc \
-    $(IMX_DEVICE_PATH)/init.recovery.nxp.rc:root/init.recovery.nxp.rc \
-    $(IMX_DEVICE_PATH)/early.init.cfg:$(TARGET_COPY_OUT_VENDOR)/etc/early.init.cfg \
-    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.rc \
-    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.usb.rc \
-    $(IMX_DEVICE_PATH)/required_hardware.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/required_hardware.xml \
-    $(IMX_DEVICE_PATH)/ueventd.nxp.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
-    $(LINUX_FIRMWARE_IMX_PATH)/linux-firmware-imx/firmware/sdma/sdma-imx7d.bin:$(TARGET_COPY_OUT_VENDOR)/firmware/imx/sdma/sdma-imx7d.bin \
-    device/nxp/common/init/init.insmod.sh:$(TARGET_COPY_OUT_VENDOR)/bin/init.insmod.sh \
-    device/nxp/common/wifi/p2p_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/p2p_supplicant_overlay.conf \
-    device/nxp/common/wifi/wpa_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/wpa_supplicant_overlay.conf
-
-# Copy isp files to board
-ISP_PROPRIETARY := $(FSL_PROPRIETARY_PATH)/fsl-proprietary/isp
-PRODUCT_COPY_FILES += \
-    $(call find-copy-subdir-files,*,$(ISP_PROPRIETARY)/bin,$(TARGET_COPY_OUT_VENDOR)/bin) \
-    $(call find-copy-subdir-files,*,$(ISP_PROPRIETARY)/lib64,$(TARGET_COPY_OUT_VENDOR)/lib64) \
-    $(call find-copy-subdir-files,*,$(ISP_PROPRIETARY)/config,$(TARGET_COPY_OUT_VENDOR)/etc/configs/isp)
-
-# We load the fstab from device tree so this is not needed, but since no kernel modules are installed to vendor
-# boot ramdisk so far, we need this step to generate the vendor-ramdisk folder or build process would fail. This
-# can be deleted once we figure out what kernel modules should be put into the vendor boot ramdisk.
-ifeq ($(TARGET_USE_VENDOR_BOOT),true)
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR_RAMDISK)/first_stage_ramdisk/fstab.nxp
-endif
-
-
-# Audio card json
-PRODUCT_COPY_FILES += \
-    device/nxp/common/audio-json/wm8960_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/wm8960_config.json \
-    device/nxp/common/audio-json/micfil_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/micfil_config.json \
-    device/nxp/common/audio-json/hdmi_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/hdmi_config.json \
-    device/nxp/common/audio-json/btsco_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/btsco_config.json \
-    device/nxp/common/audio-json/readme.txt:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/readme.txt
-
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_COPY_FILES += \
-    device/nxp/common/security/rpmb_key_test.bin:rpmb_key_test.bin \
-    device/nxp/common/security/testkey_public_rsa4096.bin:testkey_public_rsa4096.bin
-endif
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mp/camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/camera_config_imx8mp.json \
-    device/nxp/imx8m/evk_8mp/ov5640_camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/ov5640_camera_config_imx8mp.json \
-    device/nxp/imx8m/evk_8mp/isp_camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/isp_camera_config_imx8mp.json \
-    device/nxp/imx8m/evk_8mp/external_camera_config.xml:$(TARGET_COPY_OUT_VENDOR)/etc/external_camera_config.xml
-
-# ONLY devices that meet the CDD's requirements may declare these features
-PRODUCT_COPY_FILES += \
-    frameworks/native/data/etc/android.hardware.audio.output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.audio.output.xml \
-    frameworks/native/data/etc/android.hardware.bluetooth_le.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.bluetooth_le.xml \
-    frameworks/native/data/etc/android.hardware.camera.external.xml:vendor/etc/permissions/android.hardware.camera.external.xml \
-    frameworks/native/data/etc/android.hardware.camera.front.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.front.xml \
-    frameworks/native/data/etc/android.hardware.camera.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.xml \
-    frameworks/native/data/etc/android.hardware.ethernet.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.ethernet.xml \
-    frameworks/native/data/etc/android.hardware.screen.landscape.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.screen.landscape.xml \
-    frameworks/native/data/etc/android.hardware.screen.portrait.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.screen.portrait.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.multitouch.distinct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.multitouch.distinct.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.multitouch.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.multitouch.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.xml \
-    frameworks/native/data/etc/android.hardware.usb.accessory.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.accessory.xml \
-    frameworks/native/data/etc/android.hardware.usb.host.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.host.xml \
-    frameworks/native/data/etc/android.hardware.vulkan.level-0.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.level-0.xml \
-    frameworks/native/data/etc/android.hardware.vulkan.version-1_1.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.version-1_1.xml \
-    frameworks/native/data/etc/android.software.vulkan.deqp.level-2020-03-01.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.vulkan.deqp.level-2020-03-01.xml \
-    frameworks/native/data/etc/android.hardware.wifi.direct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.direct.xml \
-    frameworks/native/data/etc/android.hardware.wifi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.xml \
-    frameworks/native/data/etc/android.hardware.wifi.passpoint.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.passpoint.xml \
-    frameworks/native/data/etc/android.software.app_widgets.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.app_widgets.xml \
-    frameworks/native/data/etc/android.software.backup.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.backup.xml \
-    frameworks/native/data/etc/android.software.device_admin.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.device_admin.xml \
-    frameworks/native/data/etc/android.software.managed_users.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.managed_users.xml \
-    frameworks/native/data/etc/android.software.midi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.midi.xml \
-    frameworks/native/data/etc/android.software.print.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.print.xml \
-    frameworks/native/data/etc/android.software.sip.voip.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.sip.voip.xml \
-    frameworks/native/data/etc/android.software.verified_boot.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.verified_boot.xml \
-    frameworks/native/data/etc/android.software.voice_recognizers.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.voice_recognizers.xml \
-    frameworks/native/data/etc/android.software.activities_on_secondary_displays.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.activities_on_secondary_displays.xml \
-    frameworks/native/data/etc/android.software.picture_in_picture.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.picture_in_picture.xml
-
-# Vendor seccomp policy files for media components:
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/seccomp/mediacodec-seccomp.policy:vendor/etc/seccomp_policy/mediacodec.policy \
-    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.base.policy:vendor/etc/seccomp_policy/codec2.vendor.base.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.ext.policy:vendor/etc/seccomp_policy/codec2.vendor.ext.policy
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mp/powerhint_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/powerhint_imx8mp.json
-
-# fastboot_imx_flashall scripts, fsl-sdcard-partition script uuu_imx_android_flash scripts
-PRODUCT_COPY_FILES += \
-    device/nxp/common/tools/fastboot_imx_flashall.bat:fastboot_imx_flashall.bat \
-    device/nxp/common/tools/fastboot_imx_flashall.sh:fastboot_imx_flashall.sh \
-    device/nxp/common/tools/imx-sdcard-partition.sh:imx-sdcard-partition.sh \
-    device/nxp/common/tools/uuu_imx_android_flash.bat:uuu_imx_android_flash.bat \
-    device/nxp/common/tools/uuu_imx_android_flash.sh:uuu_imx_android_flash.sh
-
-# Set permission for GMS packages
-PRODUCT_COPY_FILES += \
-	  device/nxp/imx8m/permissions/privapp-permissions-imx.xml:$(TARGET_COPY_OUT_PRODUCT)/etc/permissions/privapp.permissions-imx.xml \
-
-USE_XML_AUDIO_POLICY_CONF := 1
-
-DEVICE_PACKAGE_OVERLAYS := $(IMX_DEVICE_PATH)/overlay
-
-PRODUCT_CHARACTERISTICS := tablet
-
-PRODUCT_AAPT_CONFIG += xlarge large tvdpi hdpi xhdpi xxhdpi
-
-# GPU openCL g2d
-PRODUCT_COPY_FILES += \
-    $(IMX_PATH)/imx/opencl-2d/cl_g2d.cl:$(TARGET_COPY_OUT_VENDOR)/etc/cl_g2d.cl
-
-# HWC2 HAL
-PRODUCT_PACKAGES += \
-    android.hardware.graphics.composer@2.4-service
-
-# Charger Mode
-PRODUCT_PRODUCT_PROPERTIES += \
-    ro.charger.no_ui=false
-
-# Do not skip charger_not_need trigger by default
-PRODUCT_DEFAULT_PROPERTY_OVERRIDES += \
-    vendor.skip.charger_not_need=0
-
-# Gralloc HAL
-PRODUCT_PACKAGES += \
-    android.hardware.graphics.mapper@2.0-impl-2.1 \
-    android.hardware.graphics.allocator@2.0-impl \
-    android.hardware.graphics.allocator@2.0-service
-
-# RenderScript HAL
-PRODUCT_PACKAGES += \
-    android.hardware.renderscript@1.0-impl
-
-PRODUCT_PACKAGES += \
-    libEGL_VIVANTE \
-    libGLESv1_CM_VIVANTE \
-    libGLESv2_VIVANTE \
-    gralloc_viv.imx \
-    libGAL \
-    libGLSLC \
-    libVSC \
-    libgpuhelper \
-    libSPIRV_viv \
-    libvulkan_VIVANTE \
-    vulkan.imx \
-    libCLC \
-    libLLVM_viv \
-    libOpenCL \
-    libg2d-opencl \
-    libg2d-viv \
-    libOpenVX \
-    libOpenVXU \
-    libNNVXCBinary-evis \
-    libNNVXCBinary-evis2 \
-    libNNVXCBinary-lite \
-    libOvx12VXCBinary-evis \
-    libOvx12VXCBinary-evis2 \
-    libOvx12VXCBinary-lite \
-    libNNGPUBinary-evis \
-    libNNGPUBinary-evis2 \
-    libNNGPUBinary-lite \
-    libNNGPUBinary-ulite \
-    libNNArchPerf \
-    libarchmodelSw
-
-PRODUCT_PACKAGES += \
-    android.hardware.audio@6.0-impl:32 \
-    android.hardware.audio@2.0-service \
-    android.hardware.audio.effect@6.0-impl:32 \
-    android.hardware.power@1.3-service.imx \
-    android.hardware.light@2.0-impl \
-    android.hardware.light@2.0-service \
-    android.hardware.configstore@1.1-service \
-    configstore@1.1.policy
-
-ifneq ($(IMX8MP_USES_GKI), true)
-# Thermal HAL
-PRODUCT_PACKAGES += \
-    android.hardware.thermal@2.0-service.imx
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mp/thermal_info_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/thermal_info_config_imx8mp.json
-endif
-
-# Neural Network HAL and lib
-PRODUCT_PACKAGES += \
-    libovxlib \
-    libnnrt \
-    android.hardware.neuralnetworks@1.2-service-vsi-npu-server
-
-# Usb HAL
-PRODUCT_PACKAGES += \
-    android.hardware.usb@1.1-service.imx
-
-# Bluetooth HAL
-PRODUCT_PACKAGES += \
-    android.hardware.bluetooth@1.0-impl \
-    android.hardware.bluetooth@1.0-service
-
-#nxp 8997 Bluetooth vendor config
-PRODUCT_PACKAGES += \
-    bt_vendor.conf
-
-# WiFi HAL
-PRODUCT_PACKAGES += \
-    android.hardware.wifi@1.0-service \
-    wifilogd \
-    wificond
-
-# WiFi RRO
-PRODUCT_PACKAGES += \
-    WifiOverlay
-
-# nxp 8997 wifi and bluetooth combo Firmware
-PRODUCT_COPY_FILES += \
-    vendor/nxp/imx-firmware/nxp/FwImage_8997/pcieuart8997_combo_v4.bin:vendor/firmware/pcieuart8997_combo_v4.bin \
-    vendor/nxp/imx-firmware/nxp/android_wifi_mod_para.conf:vendor/firmware/wifi_mod_para.conf
-
-# Wifi regulatory
-PRODUCT_COPY_FILES += \
-    external/wireless-regdb/regulatory.db:vendor/firmware/regulatory.db \
-    external/wireless-regdb/regulatory.db.p7s:vendor/firmware/regulatory.db.p7s
-
-# Keymaster HAL
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_PACKAGES += \
-    android.hardware.keymaster@4.0-service.trusty
-endif
-
-PRODUCT_PACKAGES += \
-    android.hardware.keymaster@4.0-service-imx
-
-# DRM HAL
-TARGET_ENABLE_MEDIADRM_64 := true
-PRODUCT_PACKAGES += \
-    android.hardware.drm@1.0-impl \
-    android.hardware.drm@1.0-service
-
-# new gatekeeper HAL
-PRODUCT_PACKAGES += \
-    android.hardware.gatekeeper@1.0-service.software-imx
-
-ifneq ($(BUILD_TARGET_FS),ubifs)
-PRODUCT_PROPERTY_OVERRIDES += \
-    ro.frp.pst=/dev/block/by-name/presistdata
-endif
-
-PRODUCT_PACKAGES += \
-    libg1 \
-    libhantro \
-    libcodec \
-    libhantro_vc8000e
-
-# imx c2 codec binary
-PRODUCT_PACKAGES += \
-    lib_vpu_wrapper \
-    lib_imx_c2_videodec_common \
-    lib_imx_c2_videodec \
-    lib_imx_c2_vpuwrapper_dec \
-    lib_imx_c2_videoenc_common \
-    lib_imx_c2_videoenc \
-    lib_imx_c2_vpuwrapper_enc \
-    lib_imx_c2_process \
-    lib_imx_c2_process_dummy_post \
-    lib_imx_c2_process_g2d_pre \
-    c2_component_register \
-    c2_component_register_ms \
-    c2_component_register_ra
-
-# dsp decoder
-PRODUCT_PACKAGES += \
-    media_codecs_c2_dsp.xml \
-    media_codecs_c2_dsp_aacp.xml \
-    media_codecs_c2_dsp_wma.xml \
-    lib_dsp_aac_dec \
-    lib_dsp_bsac_dec \
-    lib_dsp_codec_wrap \
-    lib_dsp_mp3_dec \
-    lib_dsp_wrap_arm12_android \
-    lib_dsp_mp3_dec_ext \
-    lib_dsp_codec_wrap_ext \
-    lib_aacd_wrap_dsp \
-    lib_mp3d_wrap_dsp \
-    lib_wma10d_wrap_dsp \
-    c2_component_register_dsp \
-    c2_component_register_dsp_wma \
-    c2_component_register_dsp_aacp
-
-
-PRODUCT_PACKAGES += \
-    DirectAudioPlayer
-
-# Tensorflow lite camera demo
-PRODUCT_PACKAGES += \
-                    tflitecamerademo
-
-# Multi-Display launcher
-PRODUCT_PACKAGES += \
-    MultiDisplay
-
-# Add oem unlocking option in settings.
-PRODUCT_PROPERTY_OVERRIDES += ro.frp.pst=/dev/block/by-name/presistdata
-PRODUCT_COMPATIBLE_PROPERTY_OVERRIDE := true
-
-# Add Trusty OS backed gatekeeper and secure storage proxy
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_PACKAGES += \
-    android.hardware.gatekeeper@1.0-service.trusty \
-    storageproxyd
-endif
-
-#DRM Widevine 1.2 L3 support
-PRODUCT_PACKAGES += \
-    android.hardware.drm@1.0-impl \
-    android.hardware.drm@1.0-service \
-    android.hardware.drm@1.3-service.widevine \
-    android.hardware.drm@1.3-service.clearkey \
-    libwvdrmcryptoplugin \
-    libwvhidl \
-    libwvdrmengine \
-
-#Dumpstate HAL 1.1 support
-PRODUCT_PACKAGES += \
-    android.hardware.dumpstate@1.1-service.imx
-
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-#Oemlock HAL 1.0 support
-PRODUCT_PACKAGES += \
-    android.hardware.oemlock@1.0-service.imx
-endif
-
-# Specify rollback index for boot and vbmeta partitions
-ifneq ($(AVB_RBINDEX),)
-BOARD_AVB_ROLLBACK_INDEX := $(AVB_RBINDEX)
-else
-BOARD_AVB_ROLLBACK_INDEX := 0
-endif
-
-ifneq ($(AVB_BOOT_RBINDEX),)
-BOARD_AVB_BOOT_ROLLBACK_INDEX := $(AVB_BOOT_RBINDEX)
-else
-BOARD_AVB_BOOT_ROLLBACK_INDEX := 0
-endif
-
-IMX-DEFAULT-G2D-LIB := libg2d-opencl
-
-ifeq ($(PREBUILT_FSL_IMX_CODEC),true)
-ifneq ($(IMX8_BUILD_32BIT_ROOTFS),true)
-INSTALL_64BIT_LIBRARY := true
-endif
--include $(FSL_CODEC_PATH)/fsl-codec/fsl-codec.mk
--include $(FSL_RESTRICTED_CODEC_PATH)/fsl-restricted-codec/imx_dsp_aacp_dec/imx_dsp_aacp_dec.mk
--include $(FSL_RESTRICTED_CODEC_PATH)/fsl-restricted-codec/imx_dsp_codec/imx_dsp_codec.mk
--include $(FSL_RESTRICTED_CODEC_PATH)/fsl-restricted-codec/imx_dsp_wma_dec/imx_dsp_wma_dec.mk
--include $(FSL_RESTRICTED_CODEC_PATH)/fsl-restricted-codec/imx_dsp/imx_dsp_8mp.mk
-endif
-
-# Included GMS package
-$(call inherit-product-if-exists, vendor/partner_gms/products/gms.mk)
-PRODUCT_SOONG_NAMESPACES += vendor/partner_gms
-
-# Resume on Reboot support
-PRODUCT_PACKAGES += \
-    android.hardware.rebootescrow-service.default
-
-PRODUCT_PROPERTY_OVERRIDES += \
-    ro.rebootescrow.device=/dev/block/pmem0
-
-PRODUCT_SOONG_NAMESPACES += hardware/google/camera
-PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/camera
-
-$(call  inherit-product-if-exists, vendor/nxp-private/security/nxp_security.mk)
-
-$(call inherit-product, $(SRC_TARGET_DIR)/product/emulated_storage.mk)
diff --git a/imx8m/bigcypress_8mp/init.imx8mp.rc b/imx8m/bigcypress_8mp/init.imx8mp.rc
index 773969e5..3a491f10 100755
--- a/imx8m/bigcypress_8mp/init.imx8mp.rc
+++ b/imx8m/bigcypress_8mp/init.imx8mp.rc
@@ -25,6 +25,7 @@ on property:sys.boot_completed=1
     # Set up and down limit to 200us/200us
     write /sys/devices/system/cpu/cpufreq/schedutil/up_rate_limit_us 200
     write /sys/devices/system/cpu/cpufreq/schedutil/down_rate_limit_us 200
+    write /proc/sys/kernel/sched_util_clamp_min 512
 
 on property:sys.boot_completed=1
     # update cpuset now that processors are up
diff --git a/imx8m/bigcypress_8mp/init.imx8mp.rc~post_merge_android-11.0.0_1.0.0_history b/imx8m/bigcypress_8mp/init.imx8mp.rc~post_merge_android-11.0.0_1.0.0_history
deleted file mode 100755
index 3a491f10..00000000
--- a/imx8m/bigcypress_8mp/init.imx8mp.rc~post_merge_android-11.0.0_1.0.0_history
+++ /dev/null
@@ -1,52 +0,0 @@
-on early-boot
-
-    # Set OpenGLES version
-    setprop ro.opengles.version 196609
-
-    # Set GPU 3D minimum clock to 3/64
-    write /sys/bus/platform/drivers/galcore/gpu3DMinClock 3
-
-    # change for FSL specific service
-    chown root system /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
-    chmod 0664 /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
-    chown root system /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
-    chmod 0664 /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
-    chown root system /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
-    chmod 0664 /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
-    chown root system /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_cur_freq
-    chmod 0440 /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_cur_freq
-    chown root system /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_frequencies
-
-on property:sys.boot_completed=1
-    # Set default CPU frequency governor
-    # configure governor settings for little cluster
-    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "schedutil"
-    # The rate-limit tunable in the schedutil governor applies to transitions to both lower and higher frequencies
-    # Set up and down limit to 200us/200us
-    write /sys/devices/system/cpu/cpufreq/schedutil/up_rate_limit_us 200
-    write /sys/devices/system/cpu/cpufreq/schedutil/down_rate_limit_us 200
-    write /proc/sys/kernel/sched_util_clamp_min 512
-
-on property:sys.boot_completed=1
-    # update cpuset now that processors are up
-    write /dev/cpuset/foreground/cpus 0-3
-
-    # top-app gets all cpus
-    write /dev/cpuset/top-app/cpus 0-3
-
-    #background contains a small subset (generally one little core)
-    write /dev/cpuset/background/cpus 0
-
-    # add system-background cpuset, a new cpuset for system services
-    # that should not run on larger cores
-    # system-background is for system tasks that should only run on
-    # little cores, not on bigs to be used only by init
-    write /dev/cpuset/system-background/cpus 0-2
-
-on early-boot
-    export VSI_LOG_LEVEL 0
-    start isp_media_server
-
-service isp_media_server /vendor/bin/isp_media_server /vendor/etc/configs/isp/daA3840_30mc_1080P.json
-    group camera
-    oneshot
diff --git a/imx8m/bigcypress_8mp/init.rc b/imx8m/bigcypress_8mp/init.rc
index d6ff32b1..8c1e6b6a 100644
--- a/imx8m/bigcypress_8mp/init.rc
+++ b/imx8m/bigcypress_8mp/init.rc
@@ -2,26 +2,27 @@ import /vendor/etc/init/hw/init.${ro.hardware}.usb.rc
 import /vendor/etc/init/hw/init.${ro.hardware}.${ro.boot.soc_type}.rc
 import /product/etc/init/hw/init.idt.common.rc
 
+service vendor.charger /system/bin/charger
+    class charger
+    user system
+    group system wakelock input
+    capabilities SYS_BOOT
+    file /dev/kmsg w
+    file /sys/fs/pstore/console-ramoops-0 r
+    file /sys/fs/pstore/console-ramoops r
+    file /proc/last_kmsg r
+
+on charger
+    start vendor.charger
+
 on early-init
     # mount the debugfs
     mount debugfs none /sys/kernel/debug/ mode=0755
 
-    # Mount binderfs
-    mkdir /dev/binderfs
-    mount binder binder /dev/binderfs stats=global
-    chmod 0755 /dev/binderfs
-
-    symlink /dev/binderfs/binder /dev/binder
-    symlink /dev/binderfs/hwbinder /dev/hwbinder
-    symlink /dev/binderfs/vndbinder /dev/vndbinder
-
-    chmod 0666 /dev/binderfs/hwbinder
-    chmod 0666 /dev/binderfs/binder
-    chmod 0666 /dev/binderfs/vndbinder
-
-
 on early-init
     start early_init_sh
+    # Set the host name which used in console
+    export HOSTNAME bigcypress_8mp
 
     # Due keymaster start very early so set prop here
     # Also gatekeeper share same role for keymaster
@@ -29,7 +30,14 @@ on early-init
     setprop ro.hardware.gatekeeper ${ro.boot.keystore}
     setprop vendor.storageproxyd ${ro.boot.keystore}
 
-on init
+    # Use ro.boot.lcd_density to override ro.sf.lcd_density
+    setprop ro.sf.lcd_density ${ro.boot.lcd_density}
+
+# Skip charger_not_need trigger for charger mode
+on early-init && property:ro.boot.mode=charger
+    setprop vendor.skip.charger_not_need 1
+
+on init && property:vendor.skip.charger_not_need=0
     start watchdogd
 
     # Support legacy paths
@@ -66,39 +74,37 @@ on init
     write /dev/stune/rt/schedtune.boost 50
     write /dev/stune/rt/schedtune.prefer_idle 1
 
-on late-fs
-    # Start keymaster service
-    start vendor.keymaster-3-0-${ro.boot.keystore}
+on late-fs && property:vendor.skip.charger_not_need=0
+    # Start keymaster/gatekeeper service
+    start vendor.gatekeeper-1-0-${ro.boot.keystore}
+    start vendor.keymaster-4-0-${ro.boot.keystore}
     setprop vendor.powerhal.init 1
 
-    mount_all /vendor/etc/fstab.freescale --late
+    # Wait for keymaster
+    exec_start wait_for_keymaster
 
-on late-fs && property:vendor.storageproxyd=trusty
+    mount_all /vendor/etc/fstab.nxp --late
+
+on late-fs && property:vendor.storageproxyd=trusty && property:vendor.skip.charger_not_need=0
     start vendor.oemlock-1-0
 
-on early-boot
+on early-boot && property:vendor.skip.charger_not_need=0
     # For evk_8mp, when swap used about 400M, upgrade the level.
     setprop ro.lmk.upgrade_pressure 93
     setprop ro.lmk.downgrade_pressure 99
     setprop ro.lmk.critical_upgrade true
 
-    # Set the host name which used in console
-    export HOSTNAME bigcypress_8mp
-
     # Set permission for IIM node
     symlink /dev/mxs_viim /dev/mxc_mem
 
-    # Enable Tethering in the Settings
-    setprop ro.tether.denied false
-
     setprop hwc.stretch.filter  1
 
     # Default g2d [dpu|pxp|viv] lib to be used
     setprop vendor.imx.default-g2d viv
 
     # fsl omx graphic manager media framework property
-    setprop rw.VIDEO_RENDER_NAME video_render.surface
-    setprop media.fsl_codec.flag 7
+    setprop vendor.rw.VIDEO_RENDER_NAME video_render.surface
+    setprop vendor.media.fsl_codec.flag 7
 
     setprop camera.disable_zsl_mode 1
 
@@ -109,22 +115,11 @@ on early-boot
     write /sys/block/mmcblk1/queue/read_ahead_kb 2048
     write /sys/block/mmcblk2/queue/read_ahead_kb 2048
 
-    # Set period_us for usb audio
-    setprop ro.audio.usb.period_us 20000
-
     # Prepare for wifi
     setprop wifi.interface wlan0
     setprop wifi.direct.interface p2p0
     setprop wifi.concurrent.interface wlan1
 
-    setprop persist.service.bdroid.bdaddr 22:22:67:C6:69:73
-
-    # Use ro.boot.lcd_density to override ro.sf.lcd_density
-    setprop ro.sf.lcd_density ${ro.boot.lcd_density}
-
-    # prepare for ril
-    setprop ro.ril.wake_lock_timeout 300
-
     # Set tracefs permission to 755
     chmod 0755 /sys/kernel/debug/tracing
 
@@ -133,17 +128,14 @@ on early-boot
     chmod 0664 /sys/kernel/debug/sync/sw_sync
 
     # Default backlight device
-    setprop hw.backlight.dev "32e60000.mipi_dsi.0"
+    setprop vendor.hw.backlight.dev "32e60000.mipi_dsi.0"
     # Chmod/chown FSL specific sys entry
     chown system system /sys/class/backlight/32e60000.mipi_dsi.0/brightness
     chmod 0660 /sys/class/backlight/32e60000.mipi_dsi.0/brightness
 
     # Set light sensor sysfs path and light sensor threshold lux value
     setprop ro.hardware.lightsensor "/sys/class/i2c-dev/i2c-0/device/0-0044/"
-    setprop ro.lightsensor.threshold  20
-
-    # Dectect DSF streams when scanning media
-    setprop ro.FSL_DSF_PARSER 1
+    setprop vendor.ro.lightsensor.threshold  20
 
     # Allow DSD file(duration larger than 10s) can play
     setprop audio.offload.min.duration.secs 10
@@ -162,6 +154,7 @@ service wpa_supplicant /vendor/bin/hw/wpa_supplicant \
     interface android.hardware.wifi.supplicant@1.0::ISupplicant default
     interface android.hardware.wifi.supplicant@1.1::ISupplicant default
     interface android.hardware.wifi.supplicant@1.2::ISupplicant default
+    interface android.hardware.wifi.supplicant@1.3::ISupplicant default
     class main
     socket wpa_wlan0 dgram 660 wifi wifi
     disabled
@@ -171,7 +164,7 @@ service sensor_fusion /vendor/bin/fsl_sensor_fusion
     class late_start
     seclabel u:r:sensors:s0
     user system
-    group input
+    group system uhid
     oneshot
 
 service vendor.sensors-hal-1-0 /vendor/bin/hw/android.hardware.sensors@1.0-service
@@ -233,15 +226,15 @@ service bugreport /system/bin/dumpstate -d -p -B -z \
     oneshot
     keycodes 114 115 116
 
-on boot
+on boot && property:vendor.skip.charger_not_need=0
     start audioserver
     start mediadrm
     start media
     start drm
 
-on fs
+on fs && property:vendor.skip.charger_not_need=0
 # mount ext4 partitions
-    mount_all /vendor/etc/fstab.freescale --early
+    mount_all /vendor/etc/fstab.nxp --early
 
     # Adjust parameters for dm-verity device
     write /sys/block/dm-0/queue/read_ahead_kb 4096
@@ -249,15 +242,15 @@ on fs
     # Update dm-verity state and set partition.*.verified properties
     verity_update_state
 
-on verity-logging
+on verity-logging && property:vendor.skip.charger_not_need=0
     exec u:r:slideshow:s0 -- /sbin/slideshow warning/verity_red_1 warning/verity_red_2
 
-on post-fs
+on post-fs && property:vendor.skip.charger_not_need=0
     # Set netd memlock rlimit to 8MB
     setrlimit 8 8388608 8388608
 
     # Turn on swap
-    swapon_all /vendor/etc/fstab.freescale
+    swapon_all /vendor/etc/fstab.nxp
 
     # Swap in only 1 page at a time
     write /proc/sys/vm/page-cluster 0
@@ -266,7 +259,7 @@ on post-fs
     chown system system /proc/pagetypeinfo
     chmod 0440 /proc/pagetypeinfo
 
-on post-fs-data
+on post-fs-data && property:vendor.skip.charger_not_need=0
     setprop vold.post_fs_data_done 1
     # create temp node for secure storage proxy
     mkdir /data/vendor/ss 0700 system system
@@ -275,30 +268,26 @@ on post-fs-data
     setprop TMPDIR /data/vendor/.opencl-cache
     mkdir /data/vendor/.opencl-cache 0771 system camera
 
-on zygote-start
+on zygote-start && property:vendor.skip.charger_not_need=0
     # Create the directories used by the Wireless subsystem
-    mkdir /data/misc/wifi 0770 wifi wifi
-    mkdir /data/misc/wifi/wpa_supplicant 0770 wifi wifi
     mkdir /data/vendor/wifi 0771 wifi wifi
     mkdir /data/vendor/wifi/wpa 0770 wifi wifi
     mkdir /data/vendor/wifi/wpa/sockets 0770 wifi wifi
-    mkdir /data/misc/dhcp 0770 dhcp dhcp
-    chown dhcp dhcp /data/misc/dhcp
 
-service early_init_sh /vendor/bin/init.insmod.sh /vendor/etc/early.init.cfg sys.all.early_init.ready
+service early_init_sh /vendor/bin/init.insmod.sh /vendor/etc/early.init.cfg vendor.all.early_init.ready
     class main
     user root
     group root system
     disabled
     oneshot
 
-on property:sys.boot_completed=1 && property:vendor.storageproxyd=trusty
+on property:sys.boot_completed=1 && property:vendor.storageproxyd=trusty && property:vendor.skip.charger_not_need=0
     start storageproxyd
 
 service storageproxyd /vendor/bin/storageproxyd -p /data/vendor/ss -r /dev/mmcblk2rpmb -d /dev/trusty-ipc-dev0
    group system
 
-on property:ro.boot.vendor.sysrq=1
+on property:ro.boot.vendor.sysrq=1 && property:vendor.skip.charger_not_need=0
     write /proc/sys/kernel/sysrq 1
 
 # setenv append_bootargs androidboot.usb.debugging=1
diff --git a/imx8m/bigcypress_8mp/init.rc~post_merge_android-11.0.0_1.0.0_history b/imx8m/bigcypress_8mp/init.rc~post_merge_android-11.0.0_1.0.0_history
deleted file mode 100644
index 7f43e9a5..00000000
--- a/imx8m/bigcypress_8mp/init.rc~post_merge_android-11.0.0_1.0.0_history
+++ /dev/null
@@ -1,288 +0,0 @@
-import /vendor/etc/init/hw/init.${ro.hardware}.usb.rc
-import /vendor/etc/init/hw/init.${ro.hardware}.${ro.boot.soc_type}.rc
-
-service vendor.charger /system/bin/charger
-    class charger
-    user system
-    group system wakelock input
-    capabilities SYS_BOOT
-    file /dev/kmsg w
-    file /sys/fs/pstore/console-ramoops-0 r
-    file /sys/fs/pstore/console-ramoops r
-    file /proc/last_kmsg r
-
-on charger
-    start vendor.charger
-
-on early-init
-    # mount the debugfs
-    mount debugfs none /sys/kernel/debug/ mode=0755
-
-on early-init
-    start early_init_sh
-    # Set the host name which used in console
-    export HOSTNAME evk_8mp
-
-    # Due keymaster start very early so set prop here
-    # Also gatekeeper share same role for keymaster
-    setprop ro.hardware.keystore ${ro.boot.keystore}
-    setprop ro.hardware.gatekeeper ${ro.boot.keystore}
-    setprop vendor.storageproxyd ${ro.boot.keystore}
-
-    # Use ro.boot.lcd_density to override ro.sf.lcd_density
-    setprop ro.sf.lcd_density ${ro.boot.lcd_density}
-
-# Skip charger_not_need trigger for charger mode
-on early-init && property:ro.boot.mode=charger
-    setprop vendor.skip.charger_not_need 1
-
-on init && property:vendor.skip.charger_not_need=0
-    start watchdogd
-
-    # Support legacy paths
-    symlink /sdcard /mnt/sdcard
-    symlink /sdcard /storage/sdcard0
-
-    # setup the global environment
-    export CORE_REGISTER_FILE /vendor/etc/core_register
-    export COMPONENT_REGISTER_FILE /vendor/etc/component_register
-    export CONTENTPIPE_REGISTER_FILE /vendor/etc/contentpipe_register
-
-    # disable cursor blink for fbcon, if no splash screen support
-    write /sys/class/graphics/fbcon/cursor_blink 0
-
-    # deattch the fbcon as hdmi hotplug conflict with fbcon
-    write /sys/class/vtconsole/vtcon1/bind 0
-
-    chown system system /dev/stune/top-app/schedtune.boost
-    chmod 664 /dev/stune/top-app/schedtune.boost
-    chown system system /dev/stune/top-app/schedtune.prefer_idle
-    chmod 664 /dev/stune/top-app/schedtune.prefer_idle
-    chown system system /dev/stune/foreground/schedtune.boost
-    chmod 664 /dev/stune/foreground/schedtune.boost
-    chown system system /dev/stune/foreground/schedtune.prefer_idle
-    chmod 664 /dev/stune/foreground/schedtune.prefer_idle
-    chown system system /dev/stune/schedtune.boost
-    chmod 664 /dev/stune/schedtune.boost
-
-    # set default schedTune value for foreground/top-app (only affects EAS)
-    write /dev/stune/foreground/schedtune.boost 10
-    write /dev/stune/foreground/schedtune.prefer_idle 1
-    write /dev/stune/top-app/schedtune.boost 40
-    write /dev/stune/top-app/schedtune.prefer_idle 1
-    write /dev/stune/rt/schedtune.boost 50
-    write /dev/stune/rt/schedtune.prefer_idle 1
-
-on late-fs && property:vendor.skip.charger_not_need=0
-    # Start keymaster/gatekeeper service
-    start vendor.gatekeeper-1-0-${ro.boot.keystore}
-    start vendor.keymaster-4-0-${ro.boot.keystore}
-    setprop vendor.powerhal.init 1
-
-    # Wait for keymaster
-    exec_start wait_for_keymaster
-
-    mount_all /vendor/etc/fstab.nxp --late
-
-on late-fs && property:vendor.storageproxyd=trusty && property:vendor.skip.charger_not_need=0
-    start vendor.oemlock-1-0
-
-on early-boot && property:vendor.skip.charger_not_need=0
-    # For evk_8mp, when swap used about 400M, upgrade the level.
-    setprop ro.lmk.upgrade_pressure 93
-    setprop ro.lmk.downgrade_pressure 99
-    setprop ro.lmk.critical_upgrade true
-
-    # Set permission for IIM node
-    symlink /dev/mxs_viim /dev/mxc_mem
-
-    setprop hwc.stretch.filter  1
-
-    # Default g2d [dpu|pxp|viv] lib to be used
-    setprop vendor.imx.default-g2d viv
-
-    # fsl omx graphic manager media framework property
-    setprop vendor.rw.VIDEO_RENDER_NAME video_render.surface
-    setprop vendor.media.fsl_codec.flag 7
-
-    setprop camera.disable_zsl_mode 1
-
-    #Enable GPU 2D do CSC on imx8mp platform
-    setprop vendor.camera.2d.enable true
-
-   # Tweak the mmc device read ahead buffer size
-    write /sys/block/mmcblk1/queue/read_ahead_kb 2048
-    write /sys/block/mmcblk2/queue/read_ahead_kb 2048
-
-    # Prepare for wifi
-    setprop wifi.interface wlan0
-    setprop wifi.direct.interface p2p0
-    setprop wifi.concurrent.interface wlan1
-
-    # Set tracefs permission to 755
-    chmod 0755 /sys/kernel/debug/tracing
-
-    # Set sw_sync group to graphics and set permission to 664
-    chown root graphics /sys/kernel/debug/sync/sw_sync
-    chmod 0664 /sys/kernel/debug/sync/sw_sync
-
-    # Default backlight device
-    setprop vendor.hw.backlight.dev "32e60000.mipi_dsi.0"
-    # Chmod/chown FSL specific sys entry
-    chown system system /sys/class/backlight/32e60000.mipi_dsi.0/brightness
-    chmod 0660 /sys/class/backlight/32e60000.mipi_dsi.0/brightness
-
-    # Set light sensor sysfs path and light sensor threshold lux value
-    setprop ro.hardware.lightsensor "/sys/class/i2c-dev/i2c-0/device/0-0044/"
-    setprop vendor.ro.lightsensor.threshold  20
-
-    # Allow DSD file(duration larger than 10s) can play
-    setprop audio.offload.min.duration.secs 10
-
-    # Enlarge limition of audio buffer allocation
-    setprop ro.af.client_heap_size_kbyte 32768
-
-    # enlarge media max memory size to 3G.
-    setprop ro.media.maxmem 3221225471
-
-    start vendor.wifi_hal_legacy
-
-service wpa_supplicant /vendor/bin/hw/wpa_supplicant \
-    -O/data/vendor/wifi/wpa/sockets -puse_p2p_group_interface=1 \
-    -g@android:wpa_wlan0
-    interface android.hardware.wifi.supplicant@1.0::ISupplicant default
-    interface android.hardware.wifi.supplicant@1.1::ISupplicant default
-    interface android.hardware.wifi.supplicant@1.2::ISupplicant default
-    interface android.hardware.wifi.supplicant@1.3::ISupplicant default
-    class main
-    socket wpa_wlan0 dgram 660 wifi wifi
-    disabled
-    oneshot
-
-service sensor_fusion /vendor/bin/fsl_sensor_fusion
-    class late_start
-    seclabel u:r:sensors:s0
-    user system
-    group system uhid
-    oneshot
-
-# Set watchdog timer to 30 seconds and pet it every 10 seconds to get a 20 second margin
-service watchdogd /system/bin/watchdogd 10 20
-    class core
-    seclabel u:r:watchdogd:s0
-
-service dhcpcd_wlan0 /system/bin/dhcpcd -aABDKL
-    class main
-    disabled
-    oneshot
-
-service dhcpcd_p2p /system/bin/dhcpcd -aABKL
-    class main
-    disabled
-    oneshot
-
-service dhcpcd_eth0 /system/bin/dhcpcd -ABKL eth0
-    class main
-    disabled
-    oneshot
-
-service dhcpcd_bt-pan /system/bin/dhcpcd -ABKL
-    class main
-    disabled
-    oneshot
-
-service iprenew_wlan0 /system/bin/dhcpcd -n
-    class main
-    disabled
-    oneshot
-
-service iprenew_p2p /system/bin/dhcpcd -n
-    class main
-    disabled
-    oneshot
-
-service iprenew_eth0 /system/bin/dhcpcd -n eth0
-    class main
-    disabled
-    oneshot
-
-service iprenew_bt-pan /system/bin/dhcpcd -n
-    class main
-    disabled
-    oneshot
-
-# bugreport is triggered by holding down volume down, volume up and power
-service bugreport /system/bin/dumpstate -d -p -B -z \
-        -o /data/user_de/0/com.android.shell/files/bugreports/bugreport
-    class main
-    disabled
-    oneshot
-    keycodes 114 115 116
-
-on boot && property:vendor.skip.charger_not_need=0
-    start audioserver
-    start mediadrm
-    start media
-    start drm
-
-on fs && property:vendor.skip.charger_not_need=0
-# mount ext4 partitions
-    mount_all /vendor/etc/fstab.nxp --early
-
-    # Adjust parameters for dm-verity device
-    write /sys/block/dm-0/queue/read_ahead_kb 4096
-
-    # Update dm-verity state and set partition.*.verified properties
-    verity_update_state
-
-on verity-logging && property:vendor.skip.charger_not_need=0
-    exec u:r:slideshow:s0 -- /sbin/slideshow warning/verity_red_1 warning/verity_red_2
-
-on post-fs && property:vendor.skip.charger_not_need=0
-    # Set netd memlock rlimit to 8MB
-    setrlimit 8 8388608 8388608
-
-    # Turn on swap
-    swapon_all /vendor/etc/fstab.nxp
-
-    # Swap in only 1 page at a time
-    write /proc/sys/vm/page-cluster 0
-
-    # Grant permission for fetching available_pages info of statsd
-    chown system system /proc/pagetypeinfo
-    chmod 0440 /proc/pagetypeinfo
-
-on post-fs-data && property:vendor.skip.charger_not_need=0
-    setprop vold.post_fs_data_done 1
-    # create temp node for secure storage proxy
-    mkdir /data/vendor/ss 0700 system system
-
-    # tmp dir for opencl Compiler
-    setprop TMPDIR /data/vendor/.opencl-cache
-    mkdir /data/vendor/.opencl-cache 0771 system camera
-
-on zygote-start && property:vendor.skip.charger_not_need=0
-    # Create the directories used by the Wireless subsystem
-    mkdir /data/vendor/wifi 0771 wifi wifi
-    mkdir /data/vendor/wifi/wpa 0770 wifi wifi
-    mkdir /data/vendor/wifi/wpa/sockets 0770 wifi wifi
-
-service early_init_sh /vendor/bin/init.insmod.sh /vendor/etc/early.init.cfg vendor.all.early_init.ready
-    class main
-    user root
-    group root system
-    disabled
-    oneshot
-
-on property:sys.boot_completed=1 && property:vendor.storageproxyd=trusty && property:vendor.skip.charger_not_need=0
-    start storageproxyd
-
-service storageproxyd /vendor/bin/storageproxyd -p /data/vendor/ss -r /dev/mmcblk2rpmb -d /dev/trusty-ipc-dev0
-   group system
-
-on property:ro.boot.vendor.sysrq=1 && property:vendor.skip.charger_not_need=0
-    write /proc/sys/kernel/sysrq 1
-
-# setenv append_bootargs androidboot.usb.debugging=1
-on property:ro.boot.usb.debugging=1
-    setprop persist.sys.usb.config adb
diff --git a/imx8m/bigcypress_8mp/isp_camera_config_imx8mp.json b/imx8m/bigcypress_8mp/isp_camera_config_imx8mp.json
index 2ab05f9a..e753b863 100644
--- a/imx8m/bigcypress_8mp/isp_camera_config_imx8mp.json
+++ b/imx8m/bigcypress_8mp/isp_camera_config_imx8mp.json
@@ -18,15 +18,9 @@
       "ActiveArrayHeight": "1080",
       "PixelArrayWidth": "1920",
       "PixelArrayHeight": "1080",
-<<<<<<< HEAD
-      "PhysicalWidth": "3.6288",
-      "PhysicalHeight": "2.7216",
-      "FocalLength": "3.37",
-=======
       "PhysicalWidth": "4.032",
       "PhysicalHeight": "2.268",
       "FocalLength": "4.0",
->>>>>>> post_merge/android-11.0.0_1.0.0_history
       "MaxJpegSize": "4194304",
       "MinFrameDuration": "33331760",
       "MaxFrameDuration": "300000000"
diff --git a/imx8m/bigcypress_8mp/manifest.xml b/imx8m/bigcypress_8mp/manifest.xml
index 8ea9a8f9..8ad5615b 100644
--- a/imx8m/bigcypress_8mp/manifest.xml
+++ b/imx8m/bigcypress_8mp/manifest.xml
@@ -1,4 +1,5 @@
 <manifest version="1.0" type="device" target-level="4">
+    <kernel  target-level="5" />
     <hal format="hidl">
 	<name>android.hardware.graphics.allocator</name>
         <transport>hwbinder</transport>
@@ -12,7 +13,7 @@
     <hal format="hidl">
         <name>android.hardware.graphics.composer</name>
         <transport>hwbinder</transport>
-        <version>2.3</version>
+        <version>2.4</version>
         <interface>
             <name>IComposer</name>
             <instance>default</instance>
@@ -21,7 +22,7 @@
     <hal format="hidl">
         <name>android.hardware.keymaster</name>
         <transport>hwbinder</transport>
-        <version>3.0</version>
+        <version>4.0</version>
         <interface>
             <name>IKeymasterDevice</name>
             <instance>default</instance>
@@ -39,8 +40,8 @@
             <name>IDrmFactory</name>
             <instance>default</instance>
         </interface>
-        <fqname>@1.2::ICryptoFactory/clearkey</fqname>
-        <fqname>@1.2::IDrmFactory/clearkey</fqname>
+        <fqname>@1.3::ICryptoFactory/clearkey</fqname>
+        <fqname>@1.3::IDrmFactory/clearkey</fqname>
     </hal>
     <hal format="hidl">
         <name>android.hardware.gatekeeper</name>
@@ -110,43 +111,6 @@
             <instance>default</instance>
         </interface>
     </hal>
-    <hal format="hidl">
-       <name>android.hardware.wifi</name>
-       <transport>hwbinder</transport>
-       <version>1.3</version>
-       <interface>
-           <name>IWifi</name>
-           <instance>default</instance>
-       </interface>
-    </hal>
-    <hal format="hidl">
-       <name>android.hardware.wifi.supplicant</name>
-       <transport>hwbinder</transport>
-       <version>1.2</version>
-       <interface>
-           <name>ISupplicant</name>
-           <instance>default</instance>
-       </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.wifi.hostapd</name>
-        <transport>hwbinder</transport>
-        <version>1.1</version>
-        <interface>
-            <name>IHostapd</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-       <name>android.hardware.camera.provider</name>
-	<transport>hwbinder</transport>
-	<impl level="generic"></impl>
-	<version>2.4</version>
-	<interface>
-	    <name>ICameraProvider</name>
-	    <instance>legacy/0</instance>
-	</interface>
-    </hal>
     <hal format="hidl">
         <name>android.hardware.light</name>
         <transport>hwbinder</transport>
@@ -168,7 +132,7 @@
     <hal format="hidl">
         <name>android.hardware.audio</name>
         <transport>hwbinder</transport>
-        <version>5.0</version>
+        <version>6.0</version>
         <interface>
             <name>IDevicesFactory</name>
             <instance>default</instance>
@@ -177,30 +141,12 @@
     <hal format="hidl">
         <name>android.hardware.audio.effect</name>
         <transport>hwbinder</transport>
-		<version>5.0</version>
+        <version>6.0</version>
         <interface>
             <name>IEffectsFactory</name>
             <instance>default</instance>
         </interface>
     </hal>
-    <hal format="hidl">
-        <name>android.hardware.usb</name>
-        <transport>hwbinder</transport>
-        <version>1.1</version>
-        <interface>
-            <name>IUsb</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.usb.gadget</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IUsbGadget</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
     <hal format="hidl">
         <name>android.hardware.bluetooth</name>
         <transport>hwbinder</transport>
@@ -213,30 +159,12 @@
     <hal format="hidl">
         <name>android.hardware.dumpstate</name>
         <transport>hwbinder</transport>
-        <version>1.0</version>
+        <version>1.1</version>
         <interface>
             <name>IDumpstateDevice</name>
             <instance>default</instance>
         </interface>
     </hal>
-    <hal format="hidl">
-        <name>android.hardware.oemlock</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IOemLock</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.health</name>
-        <transport>hwbinder</transport>
-        <version>2.0</version>
-        <interface>
-            <name>IHealth</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
     <hal format="hidl">
         <name>nxp.hardware.display</name>
             <transport>hwbinder</transport>
@@ -247,12 +175,8 @@
         </interface>
     </hal>
     <hal format="hidl">
-        <name>android.hardware.neuralnetworks</name>
-        <transport>hwbinder</transport>
-        <version>1.2</version>
-        <interface>
-            <name>IDevice</name>
-            <instance>vsi-npu</instance>
-        </interface>
+       <name>android.hardware.camera.provider</name>
+       <transport>hwbinder</transport>
+       <fqname>@2.4::ICameraProvider/external/0</fqname>
     </hal>
 </manifest>
diff --git a/imx8m/bigcypress_8mp/manifest.xml~post_merge_android-11.0.0_1.0.0_history b/imx8m/bigcypress_8mp/manifest.xml~post_merge_android-11.0.0_1.0.0_history
deleted file mode 100644
index db1a8ec0..00000000
--- a/imx8m/bigcypress_8mp/manifest.xml~post_merge_android-11.0.0_1.0.0_history
+++ /dev/null
@@ -1,173 +0,0 @@
-<manifest version="1.0" type="device" target-level="4">
-    <kernel  target-level="5" />
-    <hal format="hidl">
-	<name>android.hardware.graphics.allocator</name>
-        <transport>hwbinder</transport>
-	<impl level="generic"></impl>
-	<version>2.0</version>
-	<interface>
-	    <name>IAllocator</name>
-	    <instance>default</instance>
-	</interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.graphics.composer</name>
-        <transport>hwbinder</transport>
-        <version>2.4</version>
-        <interface>
-            <name>IComposer</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.keymaster</name>
-        <transport>hwbinder</transport>
-        <version>4.0</version>
-        <interface>
-            <name>IKeymasterDevice</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.drm</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>ICryptoFactory</name>
-            <instance>default</instance>
-        </interface>
-        <interface>
-            <name>IDrmFactory</name>
-            <instance>default</instance>
-        </interface>
-        <fqname>@1.3::ICryptoFactory/clearkey</fqname>
-        <fqname>@1.3::IDrmFactory/clearkey</fqname>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.gatekeeper</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IGatekeeper</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.graphics.mapper</name>
-        <transport arch="32+64">passthrough</transport>
-        <impl level="generic"></impl>
-        <version>2.1</version>
-        <interface>
-            <name>IMapper</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.renderscript</name>
-        <transport arch="32+64">passthrough</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IDevice</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.configstore</name>
-        <transport>hwbinder</transport>
-        <version>1.1</version>
-        <interface>
-            <name>ISurfaceFlingerConfigs</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.media.c2</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IComponentStore</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.media.omx</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IOmx</name>
-            <instance>default</instance>
-        </interface>
-        <interface>
-            <name>IOmxStore</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.light</name>
-        <transport>hwbinder</transport>
-        <version>2.0</version>
-        <interface>
-            <name>ILight</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.memtrack</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IMemtrack</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.audio</name>
-        <transport>hwbinder</transport>
-        <version>6.0</version>
-        <interface>
-            <name>IDevicesFactory</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.audio.effect</name>
-        <transport>hwbinder</transport>
-		<version>6.0</version>
-        <interface>
-            <name>IEffectsFactory</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.bluetooth</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IBluetoothHci</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.dumpstate</name>
-        <transport>hwbinder</transport>
-        <version>1.1</version>
-        <interface>
-            <name>IDumpstateDevice</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>nxp.hardware.display</name>
-            <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IDisplay</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-       <name>android.hardware.camera.provider</name>
-       <transport>hwbinder</transport>
-       <fqname>@2.4::ICameraProvider/external/0</fqname>
-    </hal>
-</manifest>
diff --git a/imx8m/bigcypress_8mp/ov5640_camera_config_imx8mp.json b/imx8m/bigcypress_8mp/ov5640_camera_config_imx8mp.json
index 55c0971e..e1f28176 100644
--- a/imx8m/bigcypress_8mp/ov5640_camera_config_imx8mp.json
+++ b/imx8m/bigcypress_8mp/ov5640_camera_config_imx8mp.json
@@ -12,10 +12,7 @@
       "camera_type": "back",
       "camera_name": "mxc-isi-cap",
       "orientation": "0",
-<<<<<<< HEAD
-=======
       "mplane": "1",
->>>>>>> post_merge/android-11.0.0_1.0.0_history
       "buffer_type": "dma",
       "ActiveArrayWidth": "2592",
       "ActiveArrayHeight": "1944",
diff --git a/imx8m/bigcypress_8mp/overlay/frameworks/base/core/res/res/values/config.xml b/imx8m/bigcypress_8mp/overlay/frameworks/base/core/res/res/values/config.xml
index e1bc9a69..ff22c3e8 100644
--- a/imx8m/bigcypress_8mp/overlay/frameworks/base/core/res/res/values/config.xml
+++ b/imx8m/bigcypress_8mp/overlay/frameworks/base/core/res/res/values/config.xml
@@ -185,40 +185,13 @@
     <!-- This device is not "voice capable"; it's data-only. -->
     <bool name="config_voice_capable">false</bool>
 
-<<<<<<< HEAD
-    <!-- Boolean indicating whether the wifi chipset has dual frequency band support -->
-    <bool translatable="false" name="config_wifi_dual_band_support">true</bool>
-
     <!-- Boolean indicating whether system support sustained performance mode. -->
     <bool name="config_sustainedPerformanceModeSupported">true</bool>
 
-    <!-- Enable 802.11ac for Wifi hotspot (SAP) -->
-    <bool translatable="false" name="config_wifi_softap_ieee80211ac_supported">true</bool>
-
-    <!-- Enable ACS (auto channel selection) for Wifi hotspot (SAP) -->
-    <bool translatable="false" name="config_wifi_softap_acs_supported">true</bool>
-
-    <!-- Boolean indicating whether 802.11r Fast BSS Transition is enabled on this platform -->
-    <bool translatable="false" name="config_wifi_fast_bss_transition_enabled">true</bool>
-
-    <!-- Boolean indicating whether the wifi chipset has background scan support -->
-    <bool translatable="false" name="config_wifi_background_scan_support">true</bool>
-
-    <!-- Indicates that connected MAC randomization is supported on this device -->
-    <bool translatable="false" name="config_wifi_connected_mac_randomization_supported">true</bool>
-
-    <!-- Indicates that p2p MAC randomization is supported on this device -->
-    <bool translatable="false" name="config_wifi_p2p_mac_randomization_supported">true</bool>
-
     <!-- The default gravity for the picture-in-picture window.
          Currently, this maps to Gravity.TOP | Gravity.RIGHT -->
     <integer name="config_defaultPictureInPictureGravity">0x35</integer>
 
     <!-- Flag indicating whether orientation is able to change by application.-->
     <bool name="config_orientation_lock_available">true</bool>
-
-=======
-    <!-- Boolean indicating whether system support sustained performance mode. -->
-    <bool name="config_sustainedPerformanceModeSupported">true</bool>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 </resources>
diff --git a/imx8m/bigcypress_8mp/overlay/frameworks/base/packages/SettingsProvider/res/values/defaults.xml~post_merge_android-11.0.0_1.0.0_history b/imx8m/bigcypress_8mp/overlay/frameworks/base/packages/SettingsProvider/res/values/defaults.xml~post_merge_android-11.0.0_1.0.0_history
deleted file mode 100644
index 660abbe5..00000000
--- a/imx8m/bigcypress_8mp/overlay/frameworks/base/packages/SettingsProvider/res/values/defaults.xml~post_merge_android-11.0.0_1.0.0_history
+++ /dev/null
@@ -1,24 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<!--
-/**
- * Copyright (c) 2009, The Android Open Source Project
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
--->
-<resources>
-    <!-- Default for Settings.Secure.USER_SETUP_COMPLETE -->
-    <bool name="def_user_setup_complete">true</bool>
-    <bool name="def_bluetooth_on">false</bool>
-    <bool name="def_stay_on_while_plugged_in">true</bool>
-</resources>
diff --git a/imx8m/bigcypress_8mp/powerhint_imx8mp.json b/imx8m/bigcypress_8mp/powerhint_imx8mp.json
index a46059da..d926e59a 100644
--- a/imx8m/bigcypress_8mp/powerhint_imx8mp.json
+++ b/imx8m/bigcypress_8mp/powerhint_imx8mp.json
@@ -80,7 +80,7 @@
       "PowerHint": "INTERACTION",
       "Node": "CPULittleClusterMinFreq",
       "Duration": 0,
-      "Value": "1600000"
+      "Value": "1800000"
     },
     {
       "PowerHint": "INTERACTION",
@@ -88,6 +88,12 @@
       "Duration": 0,
       "Value": "60"
     },
+    {
+      "PowerHint": "INTERACTION",
+      "Node": "PMQoSCpuDmaLatency",
+      "Duration": 500,
+      "Value": "0"
+    },
     {
       "PowerHint": "LAUNCH",
       "Node": "CPULittleClusterMinFreq",
@@ -109,14 +115,14 @@
     {
       "PowerHint": "CAMERA_LAUNCH",
       "Node": "CPULittleClusterMinFreq",
-      "Duration": 1000,
-      "Value": "1200000"
+      "Duration": 5000,
+      "Value": "1800000"
     },
     {
       "PowerHint": "CAMERA_LAUNCH",
       "Node": "CPULittleClusterMaxFreq",
-      "Duration": 1000,
-      "Value": "1200000"
+      "Duration": 5000,
+      "Value": "1800000"
     },
     {
       "PowerHint": "CAMERA_LAUNCH",
@@ -139,13 +145,13 @@
     {
       "PowerHint": "CAMERA_SHOT",
       "Node": "CPULittleClusterMinFreq",
-      "Duration": 1000,
-      "Value": "1200000"
+      "Duration": 5000,
+      "Value": "1800000"
     },
     {
       "PowerHint": "CAMERA_SHOT",
       "Node": "CPULittleClusterMaxFreq",
-      "Duration": 1000,
+      "Duration": 5000,
       "Value": "1800000"
     },
     {
diff --git a/imx8m/bigcypress_8mp/powerhint_imx8mp.json~post_merge_android-11.0.0_1.0.0_history b/imx8m/bigcypress_8mp/powerhint_imx8mp.json~post_merge_android-11.0.0_1.0.0_history
deleted file mode 100644
index d926e59a..00000000
--- a/imx8m/bigcypress_8mp/powerhint_imx8mp.json~post_merge_android-11.0.0_1.0.0_history
+++ /dev/null
@@ -1,200 +0,0 @@
-{
-  "Nodes": [
-    {
-      "Name": "CPULittleClusterMaxFreq",
-      "Path": "/sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq",
-      "Values": [
-        "1800000",
-        "1600000",
-        "1200000"
-      ],
-      "DefaultIndex": 0,
-      "ResetOnInit": true
-    },
-    {
-      "Name": "CPULittleClusterMinFreq",
-      "Path": "/sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq",
-      "Values": [
-        "1800000",
-        "1600000",
-        "1200000"
-      ],
-      "ResetOnInit": true
-    },
-    {
-      "Name": "TASchedtuneBoost",
-      "Path": "/dev/stune/top-app/schedtune.boost",
-      "Values": [
-        "60",
-        "10"
-      ],
-      "DefaultIndex": 1,
-      "ResetOnInit": true
-    },
-    {
-      "Name": "PMQoSCpuDmaLatency",
-      "Path": "/dev/cpu_dma_latency",
-      "Values": [
-        "0",
-        "3000"
-      ],
-      "DefaultIndex": 1,
-      "HoldFd": true
-    },
-    {
-      "Name": "PowerHALMainState",
-      "Path": "vendor.powerhal.camera",
-      "Values": [
-        "CAMERA_STREAMING",
-        ""
-      ],
-      "Type": "Property"
-    },
-    {
-      "Name": "PowerHALAudioState",
-      "Path": "vendor.powerhal.audio",
-      "Values": [
-        "AUDIO_LOW_LATENCY",
-        ""
-      ],
-      "Type": "Property"
-    },
-    {
-      "Name": "PowerHALRenderingState",
-      "Path": "vendor.powerhal.rendering",
-      "Values": [
-        "EXPENSIVE_RENDERING",
-        ""
-      ],
-      "Type": "Property"
-    }
-  ],
-  "Actions": [
-    {
-      "PowerHint": "SUSTAINED_PERFORMANCE",
-      "Node": "CPULittleClusterMaxFreq",
-      "Duration": 0,
-      "Value": "1600000"
-    },
-    {
-      "PowerHint": "INTERACTION",
-      "Node": "CPULittleClusterMinFreq",
-      "Duration": 0,
-      "Value": "1800000"
-    },
-    {
-      "PowerHint": "INTERACTION",
-      "Node": "TASchedtuneBoost",
-      "Duration": 0,
-      "Value": "60"
-    },
-    {
-      "PowerHint": "INTERACTION",
-      "Node": "PMQoSCpuDmaLatency",
-      "Duration": 500,
-      "Value": "0"
-    },
-    {
-      "PowerHint": "LAUNCH",
-      "Node": "CPULittleClusterMinFreq",
-      "Duration": 5000,
-      "Value": "1800000"
-    },
-    {
-      "PowerHint": "LAUNCH",
-      "Node": "CPULittleClusterMaxFreq",
-      "Duration": 5000,
-      "Value": "1800000"
-    },
-    {
-      "PowerHint": "LAUNCH",
-      "Node": "PMQoSCpuDmaLatency",
-      "Duration": 5000,
-      "Value": "0"
-    },
-    {
-      "PowerHint": "CAMERA_LAUNCH",
-      "Node": "CPULittleClusterMinFreq",
-      "Duration": 5000,
-      "Value": "1800000"
-    },
-    {
-      "PowerHint": "CAMERA_LAUNCH",
-      "Node": "CPULittleClusterMaxFreq",
-      "Duration": 5000,
-      "Value": "1800000"
-    },
-    {
-      "PowerHint": "CAMERA_LAUNCH",
-      "Node": "PMQoSCpuDmaLatency",
-      "Duration": 1000,
-      "Value": "0"
-    },
-    {
-      "PowerHint": "CAMERA_STREAMING",
-      "Node": "PowerHALMainState",
-      "Duration": 0,
-      "Value": "CAMERA_STREAMING"
-    },
-    {
-      "PowerHint": "CAMERA_STREAMING",
-      "Node": "CPULittleClusterMaxFreq",
-      "Duration": 0,
-      "Value": "1600000"
-    },
-    {
-      "PowerHint": "CAMERA_SHOT",
-      "Node": "CPULittleClusterMinFreq",
-      "Duration": 5000,
-      "Value": "1800000"
-    },
-    {
-      "PowerHint": "CAMERA_SHOT",
-      "Node": "CPULittleClusterMaxFreq",
-      "Duration": 5000,
-      "Value": "1800000"
-    },
-    {
-      "PowerHint": "CAMERA_SHOT",
-      "Node": "PMQoSCpuDmaLatency",
-      "Duration": 1000,
-      "Value": "0"
-    },
-    {
-      "PowerHint": "LOW_POWER",
-      "Node": "CPULittleClusterMinFreq",
-      "Duration": 0,
-      "Value": "1200000"
-    },
-    {
-      "PowerHint": "LOW_POWER",
-      "Node": "CPULittleClusterMaxFreq",
-      "Duration": 0,
-      "Value": "1600000"
-    },
-    {
-      "PowerHint": "AUDIO_STREAMING",
-      "Node": "PMQoSCpuDmaLatency",
-      "Duration": 2000,
-      "Value": "0"
-    },
-    {
-      "PowerHint": "AUDIO_STREAMING",
-      "Node": "CPULittleClusterMinFreq",
-      "Duration": 2000,
-      "Value": "1600000"
-    },
-    {
-      "PowerHint": "AUDIO_LOW_LATENCY",
-      "Node": "PowerHALAudioState",
-      "Duration": 0,
-      "Value": "AUDIO_LOW_LATENCY"
-    },
-    {
-      "PowerHint": "AUDIO_LOW_LATENCY",
-      "Node": "PMQoSCpuDmaLatency",
-      "Duration": 0,
-      "Value": "0"
-    }
-  ]
-}
diff --git a/imx8m/bigcypress_8mp/sepolicy/file_contexts b/imx8m/bigcypress_8mp/sepolicy/file_contexts
index 00861fc3..09e5c4b6 100644
--- a/imx8m/bigcypress_8mp/sepolicy/file_contexts
+++ b/imx8m/bigcypress_8mp/sepolicy/file_contexts
@@ -23,15 +23,12 @@
 /dev/block/platform/soc@0/30800000.bus/30b60000\.mmc/by-name/userdata         u:object_r:userdata_block_device:s0
 /dev/block/platform/soc@0/30800000.bus/30b60000\.mmc/by-name/vbmeta_[ab]      u:object_r:vbmeta_block_device:s0
 /dev/block/platform/soc@0/30800000.bus/30b60000\.mmc/by-name/super            u:object_r:super_block_device:s0
-<<<<<<< HEAD
 /dev/block/platform/soc@0/30800000.bus/30b60000\.mmc/by-name/bootloader_[ab]  u:object_r:bootloader_block_device:s0
 /dev/block/platform/soc@0/30800000.bus/30b60000\.mmc/by-name/mem_info_[ab]    u:object_r:bootloader_block_device:s0
 
 # spl
 /dev/block/mmcblk2boot[01]            u:object_r:spl_block_device:s0
 /dev/block/mmcblk2boot[01]p[1-9]      u:object_r:spl_block_device:s0
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 #peripheral
 /vendor/bin/magd                u:object_r:sensors_exec:s0
@@ -51,11 +48,8 @@
 # Media Codec2 service
 /vendor/bin/hw/android\.hardware\.media\.c2@1\.0-service    u:object_r:mediacodec_exec:s0
 
-<<<<<<< HEAD
-=======
 /dev/block/pmem0  u:object_r:rebootescrow_device:s0
 
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 # isp related
 /vendor/bin/vvext                           u:object_r:isp_exec:s0
 /vendor/bin/video_test                      u:object_r:isp_exec:s0
diff --git a/imx8m/bigcypress_8mp/sepolicy/genfs_contexts b/imx8m/bigcypress_8mp/sepolicy/genfs_contexts
index 3256c12b..2fcd3d72 100644
--- a/imx8m/bigcypress_8mp/sepolicy/genfs_contexts
+++ b/imx8m/bigcypress_8mp/sepolicy/genfs_contexts
@@ -3,10 +3,7 @@ genfscon sysfs /devices/platform/soc@0/30800000.bus/30b50000.mmc/mmc_host/mmc1/m
 genfscon sysfs /devices/platform/soc@0/30800000.bus/30b60000.mmc/mmc_host/mmc2/mmc2:0001/block/mmcblk2 u:object_r:sysfs_block_devices:s0
 genfscon sysfs /devices/platform/soc@0/30800000.bus/30bb0000.spi/spi_master/spi0/spi0.0/mtd/mtd0/mtdblock0 u:object_r:sysfs_block_devices:s0
 genfscon sysfs /devices/platform/soc@0/32c00000.bus/32e60000.mipi_dsi/32e60000.mipi_dsi.0/backlight u:object_r:sysfs_leds:s0
-<<<<<<< HEAD
 genfscon sysfs /devices/platform/backlight/backlight/backlight u:object_r:sysfs_leds:s0
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 #sys/class/net
 genfscon sysfs /devices/platform/soc@0/30800000.bus/30be0000.ethernet/net                u:object_r:sysfs_net:s0
@@ -15,8 +12,6 @@ genfscon sysfs /devices/platform/33800000.pcie/pci0000:00/0000:00:00.0/0000:01:0
 genfscon sysfs /devices/platform/32f10100.usb/38100000.dwc3/gadget/net                   u:object_r:sysfs_net:s0
 
 genfscon sysfs /devices/platform/soc@0/30800000.bus/30a30000.i2c/i2c-1/1-0050/extcon u:object_r:sysfs_extcon:s0
-<<<<<<< HEAD
-=======
 
 # android.system.suspend@1.0-service
 genfscon sysfs /devices/platform/soc@0/30000000.bus/30370000.snvs/30370000.snvs:snvs-powerkey/wakeup                         u:object_r:sysfs_wakeup:s0
@@ -29,4 +24,3 @@ genfscon sysfs /devices/platform/soc@0/30800000.bus/30a30000.i2c/i2c-1/1-0050/po
 
 # for dumpstate to access the stat file
 genfscon sysfs /devices/platform/94400000.pmem/ndbus0/region0/namespace0.0/block/pmem0                                       u:object_r:sysfs_block_devices:s0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/bigcypress_8mq/AndroidBoard.mk b/imx8m/bigcypress_8mq/AndroidBoard.mk
index dcb09302..7d2ec036 100644
--- a/imx8m/bigcypress_8mq/AndroidBoard.mk
+++ b/imx8m/bigcypress_8mq/AndroidBoard.mk
@@ -1,17 +1,9 @@
 LOCAL_PATH := $(call my-dir)
 
-<<<<<<< HEAD
 include device/idtech/common/build/dtbo.mk
 include device/idtech/common/build/imx-recovery.mk
 include device/idtech/common/build/gpt.mk
 include device/idtech/common/build/userdata.mk
 include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/media-profile/media-profile.mk
 include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/sensor/fsl-sensor.mk
-=======
-include device/nxp/common/build/dtbo.mk
-include device/nxp/common/build/imx-recovery.mk
-include device/nxp/common/build/gpt.mk
-include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/media-profile/media-profile.mk
-include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/sensor/fsl-sensor.mk
 -include $(IMX_MEDIA_CODEC_XML_PATH)/mediacodec-profile/mediacodec-profile.mk
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/bigcypress_8mq/AndroidTee.mk b/imx8m/bigcypress_8mq/AndroidTee.mk
index c9e446c6..72d257db 100644
--- a/imx8m/bigcypress_8mq/AndroidTee.mk
+++ b/imx8m/bigcypress_8mq/AndroidTee.mk
@@ -4,11 +4,7 @@ MAKE += SHELL=/bin/bash
 define build_uboot_w_tee
 	$(MAKE) -C bootable/bootloader/arm-trusted-firmware/ -B CROSS_COMPILE=aarch64-linux-android- PLAT=imx8mq V=1 SPD=opteed DECRYPTED_BUFFER_START=$(DECRYPTED_BUFFER_START) DECRYPTED_BUFFER_LEN=$(DECRYPTED_BUFFER_LEN) DECODED_BUFFER_START=$(DECODED_BUFFER_START) DECODED_BUFFER_LEN=$(DECODED_BUFFER_LEN) bl31; \
 	cp bootable/bootloader/arm-trusted-firmware/build/imx8mq/release/bl31.bin $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.;\
-<<<<<<< HEAD
 	aarch64-linux-android-objcopy -O binary out/target/product/bigcypress_8mq/optee/arm-plat-imx/core/tee.elf $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/tee.bin; \
-=======
-	aarch64-linux-android-objcopy -O binary out/target/product/evk_8mq/optee/arm-plat-imx/core/tee.elf $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/tee.bin; \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 	$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ clean; \
 	$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ SOC=iMX8M  flash_hdmi_spl_uboot; \
 	cp $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/flash.bin $(PRODUCT_OUT)/u-boot-$(strip $(2)).imx;
diff --git a/imx8m/bigcypress_8mq/AndroidUboot.mk b/imx8m/bigcypress_8mq/AndroidUboot.mk
index cfea5dfc..06a2fe2a 100644
--- a/imx8m/bigcypress_8mq/AndroidUboot.mk
+++ b/imx8m/bigcypress_8mq/AndroidUboot.mk
@@ -17,11 +17,7 @@ define build_imx_uboot
 	cp $(FSL_PROPRIETARY_PATH)/linux-firmware-imx/firmware/hdmi/cadence/signed_hdmi_imx8m.bin  $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
 	cp $(FSL_PROPRIETARY_PATH)/linux-firmware-imx/firmware/ddr/synopsys/lpddr4_pmu_train* $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
 	$(MAKE) -C $(IMX_PATH)/arm-trusted-firmware/ PLAT=`echo $(2) | cut -d '-' -f1` clean; \
-<<<<<<< HEAD
 	if [ `echo $(2) | cut -d '-' -f3` = "trusty" ] && [ `echo $(2) | rev | cut -d '-' -f1` != "uuu" ]; then \
-=======
-	if [ `echo $(2) | cut -d '-' -f2` = "trusty" ] && [ `echo $(2) | rev | cut -d '-' -f1` != "uuu" ]; then \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 		cp $(FSL_PROPRIETARY_PATH)/fsl-proprietary/uboot-firmware/imx8m/tee-imx8mq.bin $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/tee.bin; \
 		$(MAKE) -C $(IMX_PATH)/arm-trusted-firmware/ CROSS_COMPILE="$(ATF_CROSS_COMPILE)" PLAT=`echo $(2) | cut -d '-' -f1` bl31 -B SPD=trusty 1>/dev/null || exit 1; \
 	else \
@@ -41,7 +37,6 @@ define build_imx_uboot
 	fi; \
 	if [ `echo $(2) | rev | cut -d '-' -f1 | rev` != "dual" ]; then \
 		cp $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/flash.bin $(UBOOT_COLLECTION)/u-boot-$(strip $(2)).imx; \
-<<<<<<< HEAD
 		if [ -f device/idtech/common/prebuilts/spl_tab_auxiliary.img ]; then \
 			dd if=device/idtech/common/prebuilts/spl_tab_auxiliary.img of=$(UBOOT_COLLECTION)/u-boot-$(strip $(2)).imx bs=1 seek=105984 conv=notrunc; \
 		fi; \
@@ -51,11 +46,6 @@ define build_imx_uboot
 		if [ -f device/idtech/common/prebuilts/spl_tab_auxiliary.img ]; then \
 			dd if=device/idtech/common/prebuilts/spl_tab_auxiliary.img of=$(UBOOT_COLLECTION)/spl-$(strip $(2)).bin bs=1 seek=105984 conv=notrunc; \
 		fi; \
-=======
-	else \
-		cp $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/flash.bin $(UBOOT_COLLECTION)/spl-$(strip $(2)).bin; \
-		cp $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/u-boot-ivt.itb $(UBOOT_COLLECTION)/bootloader-$(strip $(2)).img; \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 	fi;
 endef
 
diff --git a/imx8m/bigcypress_8mq/BoardConfig.mk b/imx8m/bigcypress_8mq/BoardConfig.mk
index 859ef585..13a11a9a 100644
--- a/imx8m/bigcypress_8mq/BoardConfig.mk
+++ b/imx8m/bigcypress_8mq/BoardConfig.mk
@@ -3,10 +3,7 @@
 #
 
 BOARD_SOC_TYPE := IMX8MQ
-<<<<<<< HEAD
 BOARD_SOM_TYPE := a300
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 BOARD_TYPE := EVK
 BOARD_HAVE_VPU := true
 BOARD_VPU_TYPE := hantro
@@ -16,10 +13,6 @@ HAVE_FSL_IMX_IPU := false
 HAVE_FSL_IMX_PXP := false
 BOARD_KERNEL_BASE := 0x40400000
 TARGET_GRALLOC_VERSION := v3
-<<<<<<< HEAD
-TARGET_HIGH_PERFORMANCE := true
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 TARGET_USES_HWC2 := true
 TARGET_HWCOMPOSER_VERSION := v2.0
 USE_OPENGL_RENDERER := true
@@ -39,21 +32,14 @@ SOONG_CONFIG_IMXPLUGIN_BOARD_VPU_ONLY = false
 # Product-specific compile-time definitions.
 #
 
-<<<<<<< HEAD
 IMX_DEVICE_PATH := device/idtech/imx8m/bigcypress_8mq
 
 include device/idtech/imx8m/BoardConfigCommon.mk
-=======
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mq
-
-include device/nxp/imx8m/BoardConfigCommon.mk
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 BUILD_TARGET_FS ?= ext4
 TARGET_USERIMAGES_USE_EXT4 := true
 
-<<<<<<< HEAD
-TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.freescale
+TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.nxp
 
 # Support gpt
 ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
@@ -72,27 +58,6 @@ else
     ADDITION_BPT_PARTITION = partition-table-28GB:device/idtech/common/partition/device-partitions-28GB-ab.bpt \
                              partition-table-dual:device/idtech/common/partition/device-partitions-14.4GB-ab-dual-bootloader.bpt \
                              partition-table-28GB-dual:device/idtech/common/partition/device-partitions-28GB-ab-dual-bootloader.bpt
-=======
-TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.nxp
-
-# Support gpt
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
-  BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab_super.bpt
-  ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab_super.bpt \
-                           partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader_super.bpt \
-                           partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader_super.bpt
-else
-  ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
-    BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab-no-product.bpt
-    ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab-no-product.bpt \
-                             partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader-no-product.bpt \
-                             partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader-no-product.bpt
-  else
-    BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab.bpt
-    ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab.bpt \
-                             partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader.bpt \
-                             partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader.bpt
->>>>>>> post_merge/android-11.0.0_1.0.0_history
   endif
 endif
 
@@ -104,18 +69,13 @@ TARGET_BOOTLOADER_BOARD_NAME := EVK
 
 USE_OPENGL_RENDERER := true
 
-<<<<<<< HEAD
 BOARD_WLAN_DEVICE            := bcmdhd
-=======
-BOARD_WLAN_DEVICE            := nxp
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 WPA_SUPPLICANT_VERSION       := VER_0_8_X
 BOARD_WPA_SUPPLICANT_DRIVER  := NL80211
 BOARD_HOSTAPD_DRIVER         := NL80211
 BOARD_HOSTAPD_PRIVATE_LIB           := lib_driver_cmd_$(BOARD_WLAN_DEVICE)
 BOARD_WPA_SUPPLICANT_PRIVATE_LIB    := lib_driver_cmd_$(BOARD_WLAN_DEVICE)
 
-<<<<<<< HEAD
 WIFI_DRIVER_FW_PATH_PARAM := "/sys/module/brcmfmac/parameters/alternative_fw_path"
 
 #WIFI_HIDL_FEATURE_DUAL_INTERFACE := true
@@ -127,16 +87,6 @@ BOARD_HAVE_BLUETOOTH_BCM := true
 
 #BOARD_USE_SENSOR_FUSION := true
 BOARD_USE_ST_SENSOR_INPUT := true
-=======
-WIFI_HIDL_FEATURE_DUAL_INTERFACE := true
-
-BOARD_BLUETOOTH_BDROID_BUILDCFG_INCLUDE_DIR := $(IMX_DEVICE_PATH)/bluetooth
-
-# NXP 8997 BT
-BOARD_HAVE_BLUETOOTH_NXP := true
-
-BOARD_USE_SENSOR_FUSION := true
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # we don't support sparse image.
 TARGET_USERIMAGES_SPARSE_EXT_DISABLED := false
@@ -149,18 +99,12 @@ USE_GPU_ALLOCATOR := false
 
 BOARD_AVB_ENABLE := true
 TARGET_USES_MKE2FS := true
-<<<<<<< HEAD
 BOARD_AVB_ALGORITHM := SHA256_RSA2048
 BOARD_AVB_KEY_PATH := device/idtech/common/security/idt_testkey_rsa2048.pem
-=======
-BOARD_AVB_ALGORITHM := SHA256_RSA4096
-# The testkey_rsa4096.pem is copied from external/avb/test/data/testkey_rsa4096.pem
-BOARD_AVB_KEY_PATH := device/nxp/common/security/testkey_rsa4096.pem
 
 BOARD_AVB_BOOT_KEY_PATH := external/avb/test/data/testkey_rsa2048.pem
 BOARD_AVB_BOOT_ALGORITHM := SHA256_RSA2048
 BOARD_AVB_BOOT_ROLLBACK_INDEX_LOCATION := 2
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # define frame buffer count
 NUM_FRAMEBUFFER_SURFACE_BUFFERS := 3
@@ -168,19 +112,11 @@ NUM_FRAMEBUFFER_SURFACE_BUFFERS := 3
 ifeq ($(PRODUCT_IMX_DRM),true)
 CMASIZE=736M
 else
-<<<<<<< HEAD
 CMASIZE=800M
 endif
 
-# NXP default config
-BOARD_KERNEL_CMDLINE := init=/init androidboot.console=ttymxc0 androidboot.hardware=freescale firmware_class.path=/vendor/firmware loop.max_part=7
-=======
-CMASIZE=1280M
-endif
-
 # NXP default config
 BOARD_KERNEL_CMDLINE := init=/init androidboot.console=ttymxc0 androidboot.hardware=nxp firmware_class.path=/vendor/firmware loop.max_part=7
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # framebuffer config
 BOARD_KERNEL_CMDLINE += androidboot.fbTileSupport=enable
@@ -189,21 +125,14 @@ BOARD_KERNEL_CMDLINE += androidboot.fbTileSupport=enable
 BOARD_KERNEL_CMDLINE += transparent_hugepage=never cma=$(CMASIZE)
 
 # display config
-<<<<<<< HEAD
 BOARD_KERNEL_CMDLINE += androidboot.lcd_density=294 androidboot.primary_display=imx-dcss androidboot.gui_resolution=1080p
 
-# wifi config
-BOARD_KERNEL_CMDLINE += androidboot.wificountrycode=CN
-=======
-BOARD_KERNEL_CMDLINE += androidboot.lcd_density=240 androidboot.primary_display=imx-dcss androidboot.gui_resolution=1080p
-
 # wifi config
 BOARD_KERNEL_CMDLINE += androidboot.wificountrycode=CN moal.mod_para=wifi_mod_para.conf
 
 ifneq (,$(filter userdebug eng,$(TARGET_BUILD_VARIANT)))
 BOARD_KERNEL_CMDLINE += androidboot.vendor.sysrq=1
 endif
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ifeq ($(TARGET_USERIMAGES_USE_UBIFS),true)
 ifeq ($(TARGET_USERIMAGES_USE_EXT4),true)
@@ -211,13 +140,9 @@ $(error "TARGET_USERIMAGES_USE_UBIFS and TARGET_USERIMAGES_USE_EXT4 config open
 endif
 endif
 
-<<<<<<< HEAD
 LOWER_BOARD_TYPE  = $(shell echo $(BOARD_TYPE) | tr A-Z a-z)
 LOWER_BOARD_SOC_TYPE  = $(shell echo $(BOARD_SOC_TYPE) | tr A-Z a-z)
 BOARD_PREBUILT_DTBOIMAGE := out/target/product/bigcypress_8mq/dtbo-$(BOARD_SOM_TYPE)-$(LOWER_BOARD_TYPE).img
-=======
-BOARD_PREBUILT_DTBOIMAGE := out/target/product/evk_8mq/dtbo-imx8mq.img
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
   ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
     TARGET_BOARD_DTS_CONFIG ?= imx8mq:imx8mq-evk-no-product.dtb
@@ -235,20 +160,12 @@ else # no dynamic parition feature
   ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
     TARGET_BOARD_DTS_CONFIG ?= imx8mq:imx8mq-evk-no-product-no-dynamic_partition.dtb
   else
-<<<<<<< HEAD
     TARGET_BOARD_DTS_CONFIG ?= imx8mq:imx8mq-evk-no-dynamic_partition.dtb
-=======
-	TARGET_BOARD_DTS_CONFIG ?= imx8mq:imx8mq-evk-no-dynamic_partition.dtb
->>>>>>> post_merge/android-11.0.0_1.0.0_history
   endif
 endif
 
 BOARD_SEPOLICY_DIRS := \
-<<<<<<< HEAD
        device/idtech/imx8m/sepolicy \
-=======
-       device/nxp/imx8m/sepolicy \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
        $(IMX_DEVICE_PATH)/sepolicy
 
 ifeq ($(PRODUCT_IMX_DRM),true)
@@ -256,20 +173,13 @@ BOARD_SEPOLICY_DIRS += \
        $(IMX_DEVICE_PATH)/sepolicy_drm
 endif
 
-<<<<<<< HEAD
 TARGET_BOARD_KERNEL_HEADERS := device/idtech/common/kernel-headers
-=======
-TARGET_BOARD_KERNEL_HEADERS := device/nxp/common/kernel-headers
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ALL_DEFAULT_INSTALLED_MODULES += $(BOARD_VENDOR_KERNEL_MODULES)
 
 BOARD_USES_METADATA_PARTITION := true
 BOARD_ROOT_EXTRA_FOLDERS += metadata
-<<<<<<< HEAD
 
 BOARD_PLAT_PRIVATE_SEPOLICY_DIR := device/idtech/imx8m/sepolicy_system/private
 
 AB_OTA_PARTITIONS += spl_bak
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/bigcypress_8mq/SharedBoardConfig.mk b/imx8m/bigcypress_8mq/SharedBoardConfig.mk
index 28609277..98fc2d66 100644
--- a/imx8m/bigcypress_8mq/SharedBoardConfig.mk
+++ b/imx8m/bigcypress_8mq/SharedBoardConfig.mk
@@ -7,17 +7,10 @@ PRODUCT_IMX_TRUSTY := true
 #Enable this to disable product partition build.
 #IMX_NO_PRODUCT_PARTITION := true
 
-<<<<<<< HEAD
 # BCM fmac wifi driver module
 BOARD_VENDOR_KERNEL_MODULES += \
     $(KERNEL_OUT)/drivers/net/wireless/broadcom/brcm80211/brcmfmac/brcmfmac.ko \
     $(KERNEL_OUT)/drivers/net/wireless/broadcom/brcm80211/brcmutil/brcmutil.ko
-=======
-#NXP 8997 wifi driver module
-BOARD_VENDOR_KERNEL_MODULES += \
-    $(KERNEL_OUT)/drivers/net/wireless/nxp/mxm_wifiex/wlan_src/mlan.ko \
-    $(KERNEL_OUT)/drivers/net/wireless/nxp/mxm_wifiex/wlan_src/moal.ko
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # mipi-panel touch driver module
 BOARD_VENDOR_KERNEL_MODULES += \
diff --git a/imx8m/bigcypress_8mq/UbootKernelBoardConfig.mk b/imx8m/bigcypress_8mq/UbootKernelBoardConfig.mk
index 76078ff2..c5eb9595 100644
--- a/imx8m/bigcypress_8mq/UbootKernelBoardConfig.mk
+++ b/imx8m/bigcypress_8mq/UbootKernelBoardConfig.mk
@@ -2,7 +2,6 @@ TARGET_BOOTLOADER_POSTFIX := bin
 UBOOT_POST_PROCESS := true
 
 # u-boot target for imx8mq_evk
-<<<<<<< HEAD
 TARGET_BOOTLOADER_CONFIG := imx8mq-lpddr4:bigcypress_8mq_evk_android_defconfig:signed
 TARGET_BOOTLOADER_CONFIG += imx8mq-lpddr4-dual:bigcypress_8mq_evk_android_dual_defconfig:signed
 ifeq ($(PRODUCT_IMX_TRUSTY),true)
@@ -17,21 +16,6 @@ TARGET_BOOTLOADER_CONFIG += imx8mq-lpddr4-evk-uuu-mic3g:vp6820_8mq_evk_android_u
 TARGET_KERNEL_DEFCONFIG := imx_v8_android_defconfig
 TARGET_KERNEL_ADDITION_DEFCONF ?= android_addition_defconfig
 TARGET_KERNEL_SECURE_DEFCONF ?= android_secure_defconfig
-=======
-TARGET_BOOTLOADER_CONFIG := imx8mq:imx8mq_evk_android_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mq-dual:imx8mq_evk_android_dual_defconfig
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-  TARGET_BOOTLOADER_CONFIG += imx8mq-trusty:imx8mq_evk_android_trusty_defconfig
-  TARGET_BOOTLOADER_CONFIG += imx8mq-trusty-secure-unlock:imx8mq_evk_android_trusty_secure_unlock_defconfig
-  TARGET_BOOTLOADER_CONFIG += imx8mq-trusty-dual:imx8mq_evk_android_trusty_dual_defconfig
-endif
-
-# u-boot target used by uuu for imx8mq_evk
-TARGET_BOOTLOADER_CONFIG += imx8mq-evk-uuu:imx8mq_evk_android_uuu_defconfig
-
-TARGET_KERNEL_DEFCONFIG := imx_v8_android_defconfig
-# TARGET_KERNEL_ADDITION_DEFCONF ?= android_addition_defconfig
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 
 # absolute path is used, not the same as relative path used in AOSP make
diff --git a/imx8m/bigcypress_8mq/bigcypress_8mq.mk b/imx8m/bigcypress_8mq/bigcypress_8mq.mk
index 912be169..c2cdb64c 100644
--- a/imx8m/bigcypress_8mq/bigcypress_8mq.mk
+++ b/imx8m/bigcypress_8mq/bigcypress_8mq.mk
@@ -1,424 +1,15 @@
 # This is a FSL Android Reference Design platform based on i.MX8QP ARD board
 # It will inherit from FSL core product which in turn inherit from Google generic
 
-<<<<<<< HEAD
 IMX_DEVICE_PATH := device/idtech/imx8m/bigcypress_8mq
 $(call inherit-product, $(TOPDIR)$(IMX_DEVICE_PATH)/bigcypress_8mq_common.mk)
 
 # Overrides
 PRODUCT_NAME := bigcypress_8mq
-=======
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mq
 
-# configs shared between uboot, kernel and Android rootfs
-include $(IMX_DEVICE_PATH)/SharedBoardConfig.mk
-
--include device/nxp/common/imx_path/ImxPathConfig.mk
-include device/nxp/imx8m/ProductConfigCommon.mk
-
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab_nand.nxp),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab_nand.nxp)
-endif
-
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.nxp),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab.nxp)
-endif
-
-# Overrides
-PRODUCT_NAME := evk_8mq
-PRODUCT_DEVICE := evk_8mq
-PRODUCT_MODEL := EVK_8MQ
-
-PRODUCT_FULL_TREBLE_OVERRIDE := true
-PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/power
-PRODUCT_SOONG_NAMESPACES += hardware/google/pixel
-
-#Enable this to choose 32 bit user space build
-#IMX8_BUILD_32BIT_ROOTFS := true
-
-# Enable this to support vendor boot and boot header v3, this would be a MUST for GKI
-TARGET_USE_VENDOR_BOOT ?= true
-
-#Enable this to use dynamic partitions for the readonly partitions not touched by bootloader
-TARGET_USE_DYNAMIC_PARTITIONS ?= true
-#If the device is retrofit to have dynamic partition feature, set this variable to true to build
-#the images and OTA package. Here is a demo to update 10.0.0_1.0.0 to 10.0.0_2.0.0 or higher
-TARGET_USE_RETROFIT_DYNAMIC_PARTITION ?= false
-
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
-  $(call inherit-product, $(SRC_TARGET_DIR)/product/virtual_ab_ota.mk)
-  PRODUCT_USE_DYNAMIC_PARTITIONS := true
-  BOARD_BUILD_SUPER_IMAGE_BY_DEFAULT := true
-  BOARD_SUPER_IMAGE_IN_UPDATE_PACKAGE := true
-  ifeq ($(TARGET_USE_RETROFIT_DYNAMIC_PARTITION),true)
-    PRODUCT_RETROFIT_DYNAMIC_PARTITIONS := true
-    BOARD_SUPER_PARTITION_METADATA_DEVICE := system
-    ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
-      BOARD_SUPER_PARTITION_BLOCK_DEVICES := system vendor
-      BOARD_SUPER_PARTITION_SYSTEM_DEVICE_SIZE := 2952790016
-      BOARD_SUPER_PARTITION_VENDOR_DEVICE_SIZE := 536870912
-    else
-      BOARD_SUPER_PARTITION_BLOCK_DEVICES := system vendor product
-      BOARD_SUPER_PARTITION_SYSTEM_DEVICE_SIZE := 1610612736
-      BOARD_SUPER_PARTITION_VENDOR_DEVICE_SIZE := 536870912
-      BOARD_SUPER_PARTITION_PRODUCT_DEVICE_SIZE := 1879048192
-    endif
-  endif
-endif
-
-# Include keystore attestation keys and certificates.
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
--include $(IMX_SECURITY_PATH)/attestation/imx_attestation.mk
-endif
-
-# Copy device related config and binary to board
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/app_whitelist.xml:system/etc/sysconfig/app_whitelist.xml \
-    $(IMX_DEVICE_PATH)/audio_effects.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_effects.xml \
-    $(IMX_DEVICE_PATH)/audio_policy_configuration.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
-    $(IMX_DEVICE_PATH)/input-port-associations.xml:$(TARGET_COPY_OUT_VENDOR)/etc/input-port-associations.xml \
-    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.nxp \
-    $(IMX_DEVICE_PATH)/init.imx8mq.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mq.rc \
-    $(IMX_DEVICE_PATH)/init.recovery.nxp.rc:root/init.recovery.nxp.rc \
-    $(IMX_DEVICE_PATH)/early.init.cfg:$(TARGET_COPY_OUT_VENDOR)/etc/early.init.cfg \
-    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.rc \
-    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.usb.rc \
-    $(IMX_DEVICE_PATH)/required_hardware.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/required_hardware.xml \
-    $(IMX_DEVICE_PATH)/ueventd.nxp.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
-    $(LINUX_FIRMWARE_IMX_PATH)/linux-firmware-imx/firmware/sdma/sdma-imx7d.bin:$(TARGET_COPY_OUT_VENDOR)/firmware/imx/sdma/sdma-imx7d.bin \
-    device/nxp/common/init/init.insmod.sh:$(TARGET_COPY_OUT_VENDOR)/bin/init.insmod.sh \
-    device/nxp/common/wifi/p2p_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/p2p_supplicant_overlay.conf \
-    device/nxp/common/wifi/wpa_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/wpa_supplicant_overlay.conf
-
-# We load the fstab from device tree so this is not needed, but since no kernel modules are installed to vendor
-# boot ramdisk so far, we need this step to generate the vendor-ramdisk folder or build process would fail. This
-# can be deleted once we figure out what kernel modules should be put into the vendor boot ramdisk.
-ifeq ($(TARGET_USE_VENDOR_BOOT),true)
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR_RAMDISK)/first_stage_ramdisk/fstab.nxp
-endif
-
-
-# Audio card json
-PRODUCT_COPY_FILES += \
-    device/nxp/common/audio-json/wm8524_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/wm8524_config.json \
-    device/nxp/common/audio-json/spdif_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/spdif_config.json \
-    device/nxp/common/audio-json/cdnhdmi_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/cdnhdmi_config.json \
-    device/nxp/common/audio-json/ak4458_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/ak4458_config.json \
-    device/nxp/common/audio-json/ak5558_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/ak5558_config.json \
-    device/nxp/common/audio-json/btsco_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/btsco_config.json \
-    device/nxp/common/audio-json/readme.txt:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/readme.txt
-
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_COPY_FILES += \
-    device/nxp/common/security/rpmb_key_test.bin:rpmb_key_test.bin \
-    device/nxp/common/security/testkey_public_rsa4096.bin:testkey_public_rsa4096.bin
-endif
-
-# ONLY devices that meet the CDD's requirements may declare these features
-PRODUCT_COPY_FILES += \
-    frameworks/native/data/etc/android.hardware.audio.output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.audio.output.xml \
-    frameworks/native/data/etc/android.hardware.bluetooth_le.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.bluetooth_le.xml \
-    frameworks/native/data/etc/android.hardware.camera.external.xml:vendor/etc/permissions/android.hardware.camera.external.xml \
-    frameworks/native/data/etc/android.hardware.camera.front.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.front.xml \
-    frameworks/native/data/etc/android.hardware.camera.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.xml \
-    frameworks/native/data/etc/android.hardware.ethernet.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.ethernet.xml \
-    frameworks/native/data/etc/android.hardware.screen.landscape.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.screen.landscape.xml \
-    frameworks/native/data/etc/android.hardware.screen.portrait.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.screen.portrait.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.multitouch.distinct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.multitouch.distinct.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.multitouch.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.multitouch.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.xml \
-    frameworks/native/data/etc/android.hardware.usb.accessory.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.accessory.xml \
-    frameworks/native/data/etc/android.hardware.usb.host.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.host.xml \
-    frameworks/native/data/etc/android.hardware.vulkan.level-0.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.level-0.xml \
-    frameworks/native/data/etc/android.hardware.vulkan.version-1_1.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.version-1_1.xml \
-    frameworks/native/data/etc/android.software.vulkan.deqp.level-2020-03-01.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.vulkan.deqp.level-2020-03-01.xml \
-    frameworks/native/data/etc/android.hardware.wifi.direct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.direct.xml \
-    frameworks/native/data/etc/android.hardware.wifi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.xml \
-    frameworks/native/data/etc/android.hardware.wifi.passpoint.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.passpoint.xml \
-    frameworks/native/data/etc/android.software.app_widgets.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.app_widgets.xml \
-    frameworks/native/data/etc/android.software.backup.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.backup.xml \
-    frameworks/native/data/etc/android.software.device_admin.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.device_admin.xml \
-    frameworks/native/data/etc/android.software.managed_users.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.managed_users.xml \
-    frameworks/native/data/etc/android.software.midi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.midi.xml \
-    frameworks/native/data/etc/android.software.print.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.print.xml \
-    frameworks/native/data/etc/android.software.sip.voip.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.sip.voip.xml \
-    frameworks/native/data/etc/android.software.verified_boot.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.verified_boot.xml \
-    frameworks/native/data/etc/android.software.voice_recognizers.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.voice_recognizers.xml \
-    frameworks/native/data/etc/android.software.activities_on_secondary_displays.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.activities_on_secondary_displays.xml \
-    frameworks/native/data/etc/android.software.picture_in_picture.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.picture_in_picture.xml
-
-# Vendor seccomp policy files for media components:
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/seccomp/mediacodec-seccomp.policy:vendor/etc/seccomp_policy/mediacodec.policy \
-    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.base.policy:vendor/etc/seccomp_policy/codec2.vendor.base.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.ext.policy:vendor/etc/seccomp_policy/codec2.vendor.ext.policy
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mq/powerhint_imx8mq.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/powerhint_imx8mq.json
-
-# fastboot_imx_flashall scripts, fsl-sdcard-partition script and uuu_imx_android_flash scripts
-PRODUCT_COPY_FILES += \
-    device/nxp/common/tools/fastboot_imx_flashall.bat:fastboot_imx_flashall.bat \
-    device/nxp/common/tools/fastboot_imx_flashall.sh:fastboot_imx_flashall.sh \
-    device/nxp/common/tools/imx-sdcard-partition.sh:imx-sdcard-partition.sh \
-    device/nxp/common/tools/uuu_imx_android_flash.bat:uuu_imx_android_flash.bat \
-    device/nxp/common/tools/uuu_imx_android_flash.sh:uuu_imx_android_flash.sh
-
-USE_XML_AUDIO_POLICY_CONF := 1
-
-DEVICE_PACKAGE_OVERLAYS := $(IMX_DEVICE_PATH)/overlay
-
-PRODUCT_CHARACTERISTICS := tablet
-
-PRODUCT_AAPT_CONFIG += xlarge large tvdpi hdpi xhdpi xxhdpi
-
-# GPU openCL g2d
-PRODUCT_COPY_FILES += \
-    $(IMX_PATH)/imx/opencl-2d/cl_g2d.cl:$(TARGET_COPY_OUT_VENDOR)/etc/cl_g2d.cl
-
-# GPU openCL SDK header file
--include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/include/CL/cl_sdk.mk
-
-# GPU openVX SDK header file
--include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/include/nnxc_kernels/nnxc_kernels.mk
-
-# GPU openCL icdloader config file
--include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/gpu-viv/icdloader/icdloader.mk
-
-# HWC2 HAL
-PRODUCT_PACKAGES += \
-    android.hardware.graphics.composer@2.4-service
-
-# Charger Mode
-PRODUCT_PRODUCT_PROPERTIES += \
-    ro.charger.no_ui=false
-
-# Do not skip charger_not_need trigger by default
-PRODUCT_DEFAULT_PROPERTY_OVERRIDES += \
-    vendor.skip.charger_not_need=0
-
-# Gralloc HAL
-PRODUCT_PACKAGES += \
-    android.hardware.graphics.mapper@2.0-impl-2.1 \
-    android.hardware.graphics.allocator@2.0-impl \
-    android.hardware.graphics.allocator@2.0-service
-
-# RenderScript HAL
-PRODUCT_PACKAGES += \
-    android.hardware.renderscript@1.0-impl
-
-PRODUCT_PACKAGES += \
-        libEGL_VIVANTE \
-        libGLESv1_CM_VIVANTE \
-        libGLESv2_VIVANTE \
-        gralloc_viv.imx \
-        libGAL \
-        libGLSLC \
-        libVSC \
-        libgpuhelper \
-        libSPIRV_viv \
-        libvulkan_VIVANTE \
-        vulkan.imx \
-        libCLC \
-        libLLVM_viv \
-        libOpenCL \
-        libg2d-opencl \
-        libg2d-viv \
-        libOpenVX \
-        libOpenVXU \
-        libNNVXCBinary-evis \
-        libNNVXCBinary-evis2 \
-        libNNVXCBinary-lite \
-        libOvx12VXCBinary-evis \
-        libOvx12VXCBinary-evis2 \
-        libOvx12VXCBinary-lite \
-        libNNGPUBinary-evis \
-        libNNGPUBinary-evis2 \
-        libNNGPUBinary-lite \
-        libNNGPUBinary-ulite \
-        libNNArchPerf \
-        libarchmodelSw
-
-PRODUCT_PACKAGES += \
-    android.hardware.audio@6.0-impl:32 \
-    android.hardware.audio@2.0-service \
-    android.hardware.audio.effect@6.0-impl:32 \
-    android.hardware.power@1.3-service.imx \
-    android.hardware.light@2.0-impl \
-    android.hardware.light@2.0-service \
-    android.hardware.configstore@1.1-service \
-    configstore@1.1.policy
-
-# Thermal HAL
-PRODUCT_PACKAGES += \
-    android.hardware.thermal@2.0-service.imx
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mq/thermal_info_config_imx8mq.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/thermal_info_config_imx8mq.json
-
-# Neural Network HAL and lib
-PRODUCT_PACKAGES += \
-    libovxlib \
-    libnnrt \
-    android.hardware.neuralnetworks@1.2-service-vsi-npu-server
-
-# Usb HAL
-PRODUCT_PACKAGES += \
-    android.hardware.usb@1.1-service.imx
-
-# Bluetooth HAL
-PRODUCT_PACKAGES += \
-    android.hardware.bluetooth@1.0-impl \
-    android.hardware.bluetooth@1.0-service
-
-# WiFi HAL
-PRODUCT_PACKAGES += \
-    android.hardware.wifi@1.0-service \
-    wifilogd \
-    wificond
-
-# WiFi RRO
-PRODUCT_PACKAGES += \
-    WifiOverlay
-
-# NXP 8997 Bluetooth vendor config
-PRODUCT_PACKAGES += \
-    bt_vendor.conf
-
-# NXP 8997 Wifi and Bluetooth Combo Firmware
-PRODUCT_COPY_FILES += \
-    vendor/nxp/imx-firmware/nxp/FwImage_8997/pcieuart8997_combo_v4.bin:vendor/firmware/pcieuart8997_combo_v4.bin \
-    vendor/nxp/imx-firmware/nxp/android_wifi_mod_para.conf:vendor/firmware/wifi_mod_para.conf
-
-# Wifi regulatory
-PRODUCT_COPY_FILES += \
-    external/wireless-regdb/regulatory.db:vendor/firmware/regulatory.db \
-    external/wireless-regdb/regulatory.db.p7s:vendor/firmware/regulatory.db.p7s
-
-# hardware backed keymaster service
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_PACKAGES += \
-    android.hardware.keymaster@4.0-service.trusty
-endif
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mq/camera_config_imx8mq.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/camera_config_imx8mq.json \
-    device/nxp/imx8m/evk_8mq/external_camera_config.xml:$(TARGET_COPY_OUT_VENDOR)/etc/external_camera_config.xml
-
-# Keymaster HAL
-PRODUCT_PACKAGES += \
-    android.hardware.keymaster@4.0-service-imx
-
-# DRM HAL
-TARGET_ENABLE_MEDIADRM_64 := true
-PRODUCT_PACKAGES += \
-    android.hardware.drm@1.0-impl \
-    android.hardware.drm@1.0-service
-
-# new gatekeeper HAL
-PRODUCT_PACKAGES += \
-    android.hardware.gatekeeper@1.0-service.software-imx
-
-# Add Trusty OS backed gatekeeper and secure storage proxy
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_PACKAGES += \
-    android.hardware.gatekeeper@1.0-service.trusty \
-    storageproxyd
-endif
-
-#Dumpstate HAL 1.1 support
-PRODUCT_PACKAGES += \
-    android.hardware.dumpstate@1.1-service.imx
-
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-#Oemlock HAL 1.0 support
-PRODUCT_PACKAGES += \
-    android.hardware.oemlock@1.0-service.imx
-endif
-
-ifneq ($(BUILD_TARGET_FS),ubifs)
-PRODUCT_PROPERTY_OVERRIDES += \
-    ro.frp.pst=/dev/block/by-name/presistdata
-endif
-
-PRODUCT_PACKAGES += \
-    libg1 \
-    libhantro \
-    libcodec
-
-# imx c2 codec binary
-PRODUCT_PACKAGES += \
-    lib_vpu_wrapper \
-    lib_imx_c2_videodec_common \
-    lib_imx_c2_videodec \
-    lib_imx_c2_vpuwrapper_dec \
-    lib_imx_c2_process \
-    lib_imx_c2_process_dummy_post \
-    c2_component_register \
-    c2_component_register_ms \
-    c2_component_register_wmv9 \
-    c2_component_register_ra \
-    c2_component_register_rv
->>>>>>> post_merge/android-11.0.0_1.0.0_history
-
-# Add oem unlocking option in settings.
-PRODUCT_PROPERTY_OVERRIDES += ro.frp.pst=/dev/block/by-name/presistdata
-PRODUCT_COMPATIBLE_PROPERTY_OVERRIDE := true
-
-<<<<<<< HEAD
 # set persist.idt.lock_orientation as 1 in default prop file, and
 # if user modified property value it would be stored in /data/property,
 # and init process will first load default prop value, and overwrite it
 # if find key in /data/property
 PRODUCT_PROPERTY_OVERRIDES += \
     persist.idt.lock_orientation=1
-=======
-# Tensorflow lite camera demo
-PRODUCT_PACKAGES += \
-                    tflitecamerademo
-
-# Multi-Display launcher
-PRODUCT_PACKAGES += \
-    MultiClientInputMethod \
-    MultiDisplay
-
-# Specify rollback index for boot and vbmeta partitions
-ifneq ($(AVB_RBINDEX),)
-BOARD_AVB_ROLLBACK_INDEX := $(AVB_RBINDEX)
-else
-BOARD_AVB_ROLLBACK_INDEX := 0
-endif
-
-ifneq ($(AVB_BOOT_RBINDEX),)
-BOARD_AVB_BOOT_ROLLBACK_INDEX := $(AVB_BOOT_RBINDEX)
-else
-BOARD_AVB_BOOT_ROLLBACK_INDEX := 0
-endif
-
-#DRM Widevine 1.2 L3 support
-PRODUCT_PACKAGES += \
-    android.hardware.drm@1.0-impl \
-    android.hardware.drm@1.0-service \
-    android.hardware.drm@1.3-service.widevine \
-    android.hardware.drm@1.3-service.clearkey \
-    libwvdrmcryptoplugin \
-    libwvhidl \
-    libwvdrmengine \
-
-IMX-DEFAULT-G2D-LIB := libg2d-viv
-
-ifeq ($(PREBUILT_FSL_IMX_CODEC),true)
-ifneq ($(IMX8_BUILD_32BIT_ROOTFS),true)
-INSTALL_64BIT_LIBRARY := true
-endif
--include $(FSL_CODEC_PATH)/fsl-codec/fsl-codec.mk
-endif
-
-PRODUCT_SOONG_NAMESPACES += hardware/google/camera
-PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/camera
-
-$(call  inherit-product-if-exists, vendor/nxp-private/security/nxp_security.mk)
-
-$(call inherit-product, $(SRC_TARGET_DIR)/product/emulated_storage.mk)
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/bigcypress_8mq/bigcypress_8mq_common.mk b/imx8m/bigcypress_8mq/bigcypress_8mq_common.mk
index 88e73e73..9f8d00e6 100644
--- a/imx8m/bigcypress_8mq/bigcypress_8mq_common.mk
+++ b/imx8m/bigcypress_8mq/bigcypress_8mq_common.mk
@@ -9,12 +9,12 @@ include $(IMX_DEVICE_PATH)/SharedBoardConfig.mk
 -include device/idtech/common/imx_path/ImxPathConfig.mk
 include device/idtech/imx8m/ProductConfigCommon.mk
 
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab_nand.freescale),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab_nand.freescale)
+ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab_nand.nxp),)
+$(shell touch $(IMX_DEVICE_PATH)/fstab_nand.nxp)
 endif
 
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.freescale),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab.freescale)
+ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.nxp),)
+$(shell touch $(IMX_DEVICE_PATH)/fstab.nxp)
 endif
 
 # Overrides
@@ -23,10 +23,15 @@ PRODUCT_DEVICE := bigcypress_8mq
 PRODUCT_MODEL := BIGCYPRESS_8MQ
 
 PRODUCT_FULL_TREBLE_OVERRIDE := true
+PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/power
+PRODUCT_SOONG_NAMESPACES += hardware/google/pixel
 
 #Enable this to choose 32 bit user space build
 #IMX8_BUILD_32BIT_ROOTFS := true
 
+# Enable this to support vendor boot and boot header v3, this would be a MUST for GKI
+TARGET_USE_VENDOR_BOOT ?= true
+
 #Enable this to use dynamic partitions for the readonly partitions not touched by bootloader
 TARGET_USE_DYNAMIC_PARTITIONS ?= true
 #If the device is retrofit to have dynamic partition feature, set this variable to true to build
@@ -34,6 +39,7 @@ TARGET_USE_DYNAMIC_PARTITIONS ?= true
 TARGET_USE_RETROFIT_DYNAMIC_PARTITION ?= false
 
 ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
+  $(call inherit-product, $(SRC_TARGET_DIR)/product/virtual_ab_ota.mk)
   PRODUCT_USE_DYNAMIC_PARTITIONS := true
   BOARD_BUILD_SUPER_IMAGE_BY_DEFAULT := true
   BOARD_SUPER_IMAGE_IN_UPDATE_PACKAGE := false
@@ -64,14 +70,14 @@ PRODUCT_COPY_FILES += \
     $(IMX_DEVICE_PATH)/audio_effects.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_effects.xml \
     $(IMX_DEVICE_PATH)/audio_policy_configuration.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
     $(IMX_DEVICE_PATH)/input-port-associations.xml:$(TARGET_COPY_OUT_VENDOR)/etc/input-port-associations.xml \
-    $(IMX_DEVICE_PATH)/fstab.freescale:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.freescale \
-    $(IMX_DEVICE_PATH)/init.imx8mq.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.freescale.imx8mq.rc \
-    $(IMX_DEVICE_PATH)/init.recovery.freescale.rc:root/init.recovery.freescale.rc \
+    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.nxp \
+    $(IMX_DEVICE_PATH)/init.imx8mq.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mq.rc \
+    $(IMX_DEVICE_PATH)/init.recovery.nxp.rc:root/init.recovery.nxp.rc \
     $(IMX_DEVICE_PATH)/early.init.cfg:$(TARGET_COPY_OUT_VENDOR)/etc/early.init.cfg \
-    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.freescale.rc \
-    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.freescale.usb.rc \
+    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.rc \
+    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.usb.rc \
     $(IMX_DEVICE_PATH)/required_hardware.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/required_hardware.xml \
-    $(IMX_DEVICE_PATH)/ueventd.freescale.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
+    $(IMX_DEVICE_PATH)/ueventd.nxp.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
     $(LINUX_FIRMWARE_IMX_PATH)/linux-firmware-imx/firmware/sdma/sdma-imx7d.bin:$(TARGET_COPY_OUT_VENDOR)/firmware/imx/sdma/sdma-imx7d.bin \
     device/idtech/common/init/init.insmod.sh:$(TARGET_COPY_OUT_VENDOR)/bin/init.insmod.sh \
     device/idtech/common/wifi/p2p_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/p2p_supplicant_overlay.conf \
@@ -83,12 +89,15 @@ PRODUCT_COPY_FILES += \
     device/idtech/common/prebuilts/mem_info.txt:$(PRODUCT_OUT)/mem_info.txt \
     device/idtech/imx8m/device_policy.sh:$(TARGET_COPY_OUT_PRODUCT)/etc/init/hw/device_policy.sh
 
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
+# We load the fstab from device tree so this is not needed, but since no kernel modules are installed to vendor
+# boot ramdisk so far, we need this step to generate the vendor-ramdisk folder or build process would fail. This
+# can be deleted once we figure out what kernel modules should be put into the vendor boot ramdisk.
+ifeq ($(TARGET_USE_VENDOR_BOOT),true)
 PRODUCT_COPY_FILES += \
-    $(FSL_PROPRIETARY_PATH)/fsl-proprietary/dynamic_partiton_tools/lpmake:lpmake \
-    $(FSL_PROPRIETARY_PATH)/fsl-proprietary/dynamic_partiton_tools/lpmake.exe:lpmake.exe
+    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR_RAMDISK)/first_stage_ramdisk/fstab.nxp
 endif
 
+
 # Audio card json
 PRODUCT_COPY_FILES += \
     device/idtech/common/audio-json/wm8524_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/wm8524_config.json \
@@ -111,6 +120,7 @@ endif
 PRODUCT_COPY_FILES += \
     frameworks/native/data/etc/android.hardware.audio.output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.audio.output.xml \
     frameworks/native/data/etc/android.hardware.bluetooth_le.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.bluetooth_le.xml \
+    frameworks/native/data/etc/android.hardware.camera.external.xml:vendor/etc/permissions/android.hardware.camera.external.xml \
     frameworks/native/data/etc/android.hardware.camera.front.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.front.xml \
     frameworks/native/data/etc/android.hardware.camera.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.xml \
     frameworks/native/data/etc/android.hardware.ethernet.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.ethernet.xml \
@@ -123,6 +133,7 @@ PRODUCT_COPY_FILES += \
     frameworks/native/data/etc/android.hardware.usb.host.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.host.xml \
     frameworks/native/data/etc/android.hardware.vulkan.level-0.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.level-0.xml \
     frameworks/native/data/etc/android.hardware.vulkan.version-1_1.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.version-1_1.xml \
+    frameworks/native/data/etc/android.software.vulkan.deqp.level-2020-03-01.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.vulkan.deqp.level-2020-03-01.xml \
     frameworks/native/data/etc/android.hardware.wifi.direct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.direct.xml \
     frameworks/native/data/etc/android.hardware.wifi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.xml \
     frameworks/native/data/etc/android.hardware.wifi.passpoint.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.passpoint.xml \
@@ -130,6 +141,7 @@ PRODUCT_COPY_FILES += \
     frameworks/native/data/etc/android.software.backup.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.backup.xml \
     frameworks/native/data/etc/android.software.device_admin.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.device_admin.xml \
     frameworks/native/data/etc/android.software.managed_users.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.managed_users.xml \
+    frameworks/native/data/etc/android.software.midi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.midi.xml \
     frameworks/native/data/etc/android.software.print.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.print.xml \
     frameworks/native/data/etc/android.software.sip.voip.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.sip.voip.xml \
     frameworks/native/data/etc/android.software.verified_boot.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.verified_boot.xml \
@@ -140,7 +152,9 @@ PRODUCT_COPY_FILES += \
 # Vendor seccomp policy files for media components:
 PRODUCT_COPY_FILES += \
     $(IMX_DEVICE_PATH)/seccomp/mediacodec-seccomp.policy:vendor/etc/seccomp_policy/mediacodec.policy \
-    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy
+    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy \
+    device/idtech/common/seccomp_policy/codec2.vendor.base.policy:vendor/etc/seccomp_policy/codec2.vendor.base.policy \
+    device/idtech/common/seccomp_policy/codec2.vendor.ext.policy:vendor/etc/seccomp_policy/codec2.vendor.ext.policy
 
 PRODUCT_COPY_FILES += \
     device/idtech/imx8m/bigcypress_8mq/powerhint_imx8mq.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/powerhint_imx8mq.json
@@ -149,7 +163,7 @@ PRODUCT_COPY_FILES += \
 PRODUCT_COPY_FILES += \
     device/idtech/common/tools/fastboot_imx_flashall.bat:fastboot_imx_flashall.bat \
     device/idtech/common/tools/fastboot_imx_flashall.sh:fastboot_imx_flashall.sh \
-    device/idtech/common/tools/fsl-sdcard-partition.sh:fsl-sdcard-partition.sh \
+    device/idtech/common/tools/imx-sdcard-partition.sh:imx-sdcard-partition.sh \
     device/idtech/common/tools/uuu_imx_android_flash.bat:uuu_imx_android_flash.bat \
     device/idtech/common/tools/uuu_imx_android_flash.sh:uuu_imx_android_flash.sh
 
@@ -176,7 +190,15 @@ PRODUCT_COPY_FILES += \
 
 # HWC2 HAL
 PRODUCT_PACKAGES += \
-    android.hardware.graphics.composer@2.3-service
+    android.hardware.graphics.composer@2.4-service
+
+# Charger Mode
+PRODUCT_PRODUCT_PROPERTIES += \
+    ro.charger.no_ui=false
+
+# Do not skip charger_not_need trigger by default
+PRODUCT_DEFAULT_PROPERTY_OVERRIDES += \
+    vendor.skip.charger_not_need=0
 
 # Gralloc HAL
 PRODUCT_PACKAGES += \
@@ -219,13 +241,12 @@ PRODUCT_PACKAGES += \
         libNNGPUBinary-ulite \
         libNNArchPerf \
         libarchmodelSw \
-        gatekeeper.imx \
         kioskled.imx
 
 PRODUCT_PACKAGES += \
-    android.hardware.audio@5.0-impl:32 \
+    android.hardware.audio@6.0-impl:32 \
     android.hardware.audio@2.0-service \
-    android.hardware.audio.effect@5.0-impl:32 \
+    android.hardware.audio.effect@6.0-impl:32 \
     android.hardware.power@1.3-service.imx \
     android.hardware.light@2.0-impl \
     android.hardware.light@2.0-service \
@@ -262,6 +283,10 @@ PRODUCT_PACKAGES += \
     wifilogd \
     wificond
 
+# WiFi RRO
+PRODUCT_PACKAGES += \
+    WifiOverlay
+
 # BCM Bluetooth vendor config
 PRODUCT_PACKAGES += \
     bt_vendor.conf
@@ -284,16 +309,16 @@ PRODUCT_COPY_FILES += \
 # hardware backed keymaster service
 ifeq ($(PRODUCT_IMX_TRUSTY),true)
 PRODUCT_PACKAGES += \
-    android.hardware.keymaster@3.0-service.trusty
+    android.hardware.keymaster@4.0-service.trusty
 endif
 
 PRODUCT_COPY_FILES += \
-    device/idtech/imx8m/bigcypress_8mq/camera_config_imx8mq.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/camera_config_imx8mq.json
+    device/idtech/imx8m/bigcypress_8mq/camera_config_imx8mq.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/camera_config_imx8mq.json \
+    device/idtech/imx8m/bigcypress_8mq/external_camera_config.xml:$(TARGET_COPY_OUT_VENDOR)/etc/external_camera_config.xml
 
 # Keymaster HAL
 PRODUCT_PACKAGES += \
-    android.hardware.keymaster@3.0-impl \
-    android.hardware.keymaster@3.0-service
+    android.hardware.keymaster@4.0-service-imx
 
 # DRM HAL
 TARGET_ENABLE_MEDIADRM_64 := true
@@ -303,19 +328,18 @@ PRODUCT_PACKAGES += \
 
 # new gatekeeper HAL
 PRODUCT_PACKAGES += \
-    android.hardware.gatekeeper@1.0-impl \
-    android.hardware.gatekeeper@1.0-service
+    android.hardware.gatekeeper@1.0-service.software-imx
 
 # Add Trusty OS backed gatekeeper and secure storage proxy
 ifeq ($(PRODUCT_IMX_TRUSTY),true)
 PRODUCT_PACKAGES += \
-    gatekeeper.trusty \
+    android.hardware.gatekeeper@1.0-service.trusty \
     storageproxyd
 endif
 
-#Dumpstate HAL 1.0 support
+#Dumpstate HAL 1.1 support
 PRODUCT_PACKAGES += \
-    android.hardware.dumpstate@1.0-service.imx
+    android.hardware.dumpstate@1.1-service.imx
 
 ifeq ($(PRODUCT_IMX_TRUSTY),true)
 #Oemlock HAL 1.0 support
@@ -328,10 +352,6 @@ PRODUCT_PROPERTY_OVERRIDES += \
     ro.frp.pst=/dev/block/by-name/presistdata
 endif
 
-# ro.product.first_api_level indicates the first api level the device has commercially launched on.
-PRODUCT_PROPERTY_OVERRIDES += \
-    ro.product.first_api_level=28
-
 PRODUCT_PACKAGES += \
     libg1 \
     libhantro \
@@ -369,29 +389,29 @@ endif
 PRODUCT_PACKAGES += \
     MultiClientInputMethod
 
-# Specify rollback index for bootloader and for AVB
+# Specify rollback index for boot and vbmeta partitions
 ifneq ($(AVB_RBINDEX),)
 BOARD_AVB_ROLLBACK_INDEX := $(AVB_RBINDEX)
 else
 BOARD_AVB_ROLLBACK_INDEX := 0
 endif
 
+ifneq ($(AVB_BOOT_RBINDEX),)
+BOARD_AVB_BOOT_ROLLBACK_INDEX := $(AVB_BOOT_RBINDEX)
+else
+BOARD_AVB_BOOT_ROLLBACK_INDEX := 0
+endif
+
 #DRM Widevine 1.2 L3 support
 PRODUCT_PACKAGES += \
     android.hardware.drm@1.0-impl \
     android.hardware.drm@1.0-service \
-    android.hardware.drm@1.2-service.widevine \
-    android.hardware.drm@1.2-service.clearkey \
+    android.hardware.drm@1.3-service.widevine \
+    android.hardware.drm@1.3-service.clearkey \
     libwvdrmcryptoplugin \
     libwvhidl \
     libwvdrmengine \
 
-ifneq (,$(filter userdebug eng,$(TARGET_BUILD_VARIANT)))
-$(call inherit-product, $(SRC_TARGET_DIR)/product/gsi_keys.mk)
-PRODUCT_PACKAGES += \
-    adb_debug.prop
-endif
-
 IMX-DEFAULT-G2D-LIB := libg2d-viv
 
 ifeq ($(PREBUILT_FSL_IMX_CODEC),true)
@@ -401,8 +421,13 @@ endif
 -include $(FSL_CODEC_PATH)/fsl-codec/fsl-codec.mk
 endif
 
+PRODUCT_SOONG_NAMESPACES += hardware/google/camera
+PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/camera
+
 $(call  inherit-product-if-exists, vendor/nxp-private/security/nxp_security.mk)
 
+$(call inherit-product, $(SRC_TARGET_DIR)/product/emulated_storage.mk)
+
 # Copy Quectel vendor RIL
 PRODUCT_COPY_FILES += \
     vendor/quectel/libstdc++.so:/vendor/lib64/libstdc++.so \
diff --git a/imx8m/bigcypress_8mq/bigcypress_8mq_drm.mk b/imx8m/bigcypress_8mq/bigcypress_8mq_drm.mk
index 0340779d..b13675ca 100644
--- a/imx8m/bigcypress_8mq/bigcypress_8mq_drm.mk
+++ b/imx8m/bigcypress_8mq/bigcypress_8mq_drm.mk
@@ -1,7 +1,6 @@
 # This is a FSL Android Reference Design platform based on i.MX8MQ board
 # It will inherit from FSL core product which in turn inherit from Google generic
 
-<<<<<<< HEAD
 IMX_DEVICE_PATH := device/idtech/imx8m/bigcypress_8mq
 
 PRODUCT_IMX_DRM := true
@@ -9,39 +8,19 @@ PRODUCT_IMX_DRM := true
 # copy drm specific files before inherit bigcypress_8mq.mk, otherwise copy is ignored
 PRODUCT_COPY_FILES += \
 	$(IMX_DEVICE_PATH)/audio_policy_configuration_drm.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
-	$(IMX_DEVICE_PATH)/init.imx8mq.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.freescale.imx8mq.main.rc \
-	$(IMX_DEVICE_PATH)/init.imx8mq.drm.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.freescale.imx8mq.rc \
+	$(IMX_DEVICE_PATH)/init.imx8mq.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mq.main.rc \
+	$(IMX_DEVICE_PATH)/init.imx8mq.drm.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mq.rc \
 	$(TOPDIR)device/idtech/imx8m/tee-supplicant.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/tee-supplicant.rc \
 
 
 $(call inherit-product, $(TOPDIR)device/idtech/imx8m/optee-packages.mk)
 $(call inherit-product, $(TOPDIR)$(IMX_DEVICE_PATH)/bigcypress_8mq.mk)
-=======
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mq
-
-PRODUCT_IMX_DRM := true
-
-# copy drm specific files before inherit evk_8mq.mk, otherwise copy is ignored
-PRODUCT_COPY_FILES += \
-	$(IMX_DEVICE_PATH)/audio_policy_configuration_drm.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
-	$(IMX_DEVICE_PATH)/init.imx8mq.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mq.main.rc \
-	$(IMX_DEVICE_PATH)/init.imx8mq.drm.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mq.rc \
-	$(TOPDIR)device/nxp/imx8m/tee-supplicant.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/tee-supplicant.rc \
-
-
-$(call inherit-product, $(TOPDIR)device/nxp/imx8m/optee-packages.mk)
-$(call inherit-product, $(TOPDIR)$(IMX_DEVICE_PATH)/evk_8mq.mk)
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 TARGET_KERNEL_DEFCONFIG := imx_v8_android_defconfig
 
 
 # Overrides
-<<<<<<< HEAD
 PRODUCT_NAME := bigcypress_8mq_drm
-=======
-PRODUCT_NAME := evk_8mq_drm
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 CFG_DRM_SECURE_DATA_PATH ?= y
 CFG_RDC_SECURE_DATA_PATH ?= y
diff --git a/imx8m/bigcypress_8mq/camera_config_imx8mq.json b/imx8m/bigcypress_8mq/camera_config_imx8mq.json
index 2cb67d99..90b8e2f6 100644
--- a/imx8m/bigcypress_8mq/camera_config_imx8mq.json
+++ b/imx8m/bigcypress_8mq/camera_config_imx8mq.json
@@ -10,7 +10,6 @@
   "camera_metadata": [
     {
       "camera_type": "back",
-<<<<<<< HEAD
       "camera_name": "uvc",
       "orientation": "0",
       "buffer_type": "dma",
@@ -24,33 +23,6 @@
       "MaxJpegSize": "4194304",
       "MinFrameDuration": "33331760",
       "MaxFrameDuration": "300000000"
-=======
-      "camera_name": "mx6s-csi",
-      "orientation": "0",
-      "buffer_type": "mmap",
-      "ActiveArrayWidth": "2592",
-      "ActiveArrayHeight": "1944",
-      "PixelArrayWidth": "2592",
-      "PixelArrayHeight": "1944",
-      "PhysicalWidth": "3.6288",
-      "PhysicalHeight": "2.7216",
-      "FocalLength": "3.37",
-      "MaxJpegSize": "8388608",
-      "MinFrameDuration": "33331760",
-      "MaxFrameDuration": "300000000",
-      "OmitFrame": [
-          {
-              "width": "2592",
-              "height": "1944",
-              "omit_num": "3"
-          },
-          {
-              "width": "1920",
-              "height": "1080",
-              "omit_num": "2"
-          }
-      ]
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     }
   ]
 }
diff --git a/imx8m/bigcypress_8mq/early.init.cfg b/imx8m/bigcypress_8mq/early.init.cfg
index e9ccb225..9dd16032 100644
--- a/imx8m/bigcypress_8mq/early.init.cfg
+++ b/imx8m/bigcypress_8mq/early.init.cfg
@@ -1,9 +1,2 @@
-<<<<<<< HEAD
-insmod vendor/lib/modules/brcmutil.ko
-insmod vendor/lib/modules/brcmfmac.ko
-insmod vendor/lib/modules/wlan.ko
-insmod vendor/lib/modules/synaptics_dsx_i2c.ko
-=======
 # support insmod xx.ko; setprop xx xx; modeprobe
 modprobe
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/bigcypress_8mq/evk_8mq.mk b/imx8m/bigcypress_8mq/evk_8mq.mk
deleted file mode 100644
index 020f88f9..00000000
--- a/imx8m/bigcypress_8mq/evk_8mq.mk
+++ /dev/null
@@ -1,407 +0,0 @@
-# This is a FSL Android Reference Design platform based on i.MX8QP ARD board
-# It will inherit from FSL core product which in turn inherit from Google generic
-
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mq
-
-# configs shared between uboot, kernel and Android rootfs
-include $(IMX_DEVICE_PATH)/SharedBoardConfig.mk
-
--include device/nxp/common/imx_path/ImxPathConfig.mk
-include device/nxp/imx8m/ProductConfigCommon.mk
-
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab_nand.nxp),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab_nand.nxp)
-endif
-
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.nxp),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab.nxp)
-endif
-
-# Overrides
-PRODUCT_NAME := evk_8mq
-PRODUCT_DEVICE := evk_8mq
-PRODUCT_MODEL := EVK_8MQ
-
-PRODUCT_FULL_TREBLE_OVERRIDE := true
-PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/power
-PRODUCT_SOONG_NAMESPACES += hardware/google/pixel
-
-#Enable this to choose 32 bit user space build
-#IMX8_BUILD_32BIT_ROOTFS := true
-
-# Enable this to support vendor boot and boot header v3, this would be a MUST for GKI
-TARGET_USE_VENDOR_BOOT ?= true
-
-#Enable this to use dynamic partitions for the readonly partitions not touched by bootloader
-TARGET_USE_DYNAMIC_PARTITIONS ?= true
-#If the device is retrofit to have dynamic partition feature, set this variable to true to build
-#the images and OTA package. Here is a demo to update 10.0.0_1.0.0 to 10.0.0_2.0.0 or higher
-TARGET_USE_RETROFIT_DYNAMIC_PARTITION ?= false
-
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
-  $(call inherit-product, $(SRC_TARGET_DIR)/product/virtual_ab_ota.mk)
-  PRODUCT_USE_DYNAMIC_PARTITIONS := true
-  BOARD_BUILD_SUPER_IMAGE_BY_DEFAULT := true
-  BOARD_SUPER_IMAGE_IN_UPDATE_PACKAGE := true
-  ifeq ($(TARGET_USE_RETROFIT_DYNAMIC_PARTITION),true)
-    PRODUCT_RETROFIT_DYNAMIC_PARTITIONS := true
-    BOARD_SUPER_PARTITION_METADATA_DEVICE := system
-    ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
-      BOARD_SUPER_PARTITION_BLOCK_DEVICES := system vendor
-      BOARD_SUPER_PARTITION_SYSTEM_DEVICE_SIZE := 2952790016
-      BOARD_SUPER_PARTITION_VENDOR_DEVICE_SIZE := 536870912
-    else
-      BOARD_SUPER_PARTITION_BLOCK_DEVICES := system vendor product
-      BOARD_SUPER_PARTITION_SYSTEM_DEVICE_SIZE := 1610612736
-      BOARD_SUPER_PARTITION_VENDOR_DEVICE_SIZE := 536870912
-      BOARD_SUPER_PARTITION_PRODUCT_DEVICE_SIZE := 1879048192
-    endif
-  endif
-endif
-
-# Include keystore attestation keys and certificates.
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
--include $(IMX_SECURITY_PATH)/attestation/imx_attestation.mk
-endif
-
-# Copy device related config and binary to board
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/app_whitelist.xml:system/etc/sysconfig/app_whitelist.xml \
-    $(IMX_DEVICE_PATH)/audio_effects.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_effects.xml \
-    $(IMX_DEVICE_PATH)/audio_policy_configuration.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
-    $(IMX_DEVICE_PATH)/input-port-associations.xml:$(TARGET_COPY_OUT_VENDOR)/etc/input-port-associations.xml \
-    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.nxp \
-    $(IMX_DEVICE_PATH)/init.imx8mq.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mq.rc \
-    $(IMX_DEVICE_PATH)/init.recovery.nxp.rc:root/init.recovery.nxp.rc \
-    $(IMX_DEVICE_PATH)/early.init.cfg:$(TARGET_COPY_OUT_VENDOR)/etc/early.init.cfg \
-    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.rc \
-    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.usb.rc \
-    $(IMX_DEVICE_PATH)/required_hardware.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/required_hardware.xml \
-    $(IMX_DEVICE_PATH)/ueventd.nxp.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
-    $(LINUX_FIRMWARE_IMX_PATH)/linux-firmware-imx/firmware/sdma/sdma-imx7d.bin:$(TARGET_COPY_OUT_VENDOR)/firmware/imx/sdma/sdma-imx7d.bin \
-    device/nxp/common/init/init.insmod.sh:$(TARGET_COPY_OUT_VENDOR)/bin/init.insmod.sh \
-    device/nxp/common/wifi/p2p_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/p2p_supplicant_overlay.conf \
-    device/nxp/common/wifi/wpa_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/wpa_supplicant_overlay.conf
-
-# We load the fstab from device tree so this is not needed, but since no kernel modules are installed to vendor
-# boot ramdisk so far, we need this step to generate the vendor-ramdisk folder or build process would fail. This
-# can be deleted once we figure out what kernel modules should be put into the vendor boot ramdisk.
-ifeq ($(TARGET_USE_VENDOR_BOOT),true)
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR_RAMDISK)/first_stage_ramdisk/fstab.nxp
-endif
-
-
-# Audio card json
-PRODUCT_COPY_FILES += \
-    device/nxp/common/audio-json/wm8524_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/wm8524_config.json \
-    device/nxp/common/audio-json/spdif_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/spdif_config.json \
-    device/nxp/common/audio-json/cdnhdmi_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/cdnhdmi_config.json \
-    device/nxp/common/audio-json/ak4458_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/ak4458_config.json \
-    device/nxp/common/audio-json/ak5558_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/ak5558_config.json \
-    device/nxp/common/audio-json/btsco_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/btsco_config.json \
-    device/nxp/common/audio-json/readme.txt:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/readme.txt
-
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_COPY_FILES += \
-    device/nxp/common/security/rpmb_key_test.bin:rpmb_key_test.bin \
-    device/nxp/common/security/testkey_public_rsa4096.bin:testkey_public_rsa4096.bin
-endif
-
-# ONLY devices that meet the CDD's requirements may declare these features
-PRODUCT_COPY_FILES += \
-    frameworks/native/data/etc/android.hardware.audio.output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.audio.output.xml \
-    frameworks/native/data/etc/android.hardware.bluetooth_le.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.bluetooth_le.xml \
-    frameworks/native/data/etc/android.hardware.camera.external.xml:vendor/etc/permissions/android.hardware.camera.external.xml \
-    frameworks/native/data/etc/android.hardware.camera.front.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.front.xml \
-    frameworks/native/data/etc/android.hardware.camera.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.xml \
-    frameworks/native/data/etc/android.hardware.ethernet.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.ethernet.xml \
-    frameworks/native/data/etc/android.hardware.screen.landscape.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.screen.landscape.xml \
-    frameworks/native/data/etc/android.hardware.screen.portrait.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.screen.portrait.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.multitouch.distinct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.multitouch.distinct.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.multitouch.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.multitouch.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.xml \
-    frameworks/native/data/etc/android.hardware.usb.accessory.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.accessory.xml \
-    frameworks/native/data/etc/android.hardware.usb.host.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.host.xml \
-    frameworks/native/data/etc/android.hardware.vulkan.level-0.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.level-0.xml \
-    frameworks/native/data/etc/android.hardware.vulkan.version-1_1.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.version-1_1.xml \
-    frameworks/native/data/etc/android.software.vulkan.deqp.level-2020-03-01.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.vulkan.deqp.level-2020-03-01.xml \
-    frameworks/native/data/etc/android.hardware.wifi.direct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.direct.xml \
-    frameworks/native/data/etc/android.hardware.wifi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.xml \
-    frameworks/native/data/etc/android.hardware.wifi.passpoint.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.passpoint.xml \
-    frameworks/native/data/etc/android.software.app_widgets.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.app_widgets.xml \
-    frameworks/native/data/etc/android.software.backup.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.backup.xml \
-    frameworks/native/data/etc/android.software.device_admin.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.device_admin.xml \
-    frameworks/native/data/etc/android.software.managed_users.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.managed_users.xml \
-    frameworks/native/data/etc/android.software.midi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.midi.xml \
-    frameworks/native/data/etc/android.software.print.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.print.xml \
-    frameworks/native/data/etc/android.software.sip.voip.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.sip.voip.xml \
-    frameworks/native/data/etc/android.software.verified_boot.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.verified_boot.xml \
-    frameworks/native/data/etc/android.software.voice_recognizers.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.voice_recognizers.xml \
-    frameworks/native/data/etc/android.software.activities_on_secondary_displays.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.activities_on_secondary_displays.xml \
-    frameworks/native/data/etc/android.software.picture_in_picture.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.picture_in_picture.xml
-
-# Vendor seccomp policy files for media components:
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/seccomp/mediacodec-seccomp.policy:vendor/etc/seccomp_policy/mediacodec.policy \
-    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.base.policy:vendor/etc/seccomp_policy/codec2.vendor.base.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.ext.policy:vendor/etc/seccomp_policy/codec2.vendor.ext.policy
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mq/powerhint_imx8mq.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/powerhint_imx8mq.json
-
-# fastboot_imx_flashall scripts, fsl-sdcard-partition script and uuu_imx_android_flash scripts
-PRODUCT_COPY_FILES += \
-    device/nxp/common/tools/fastboot_imx_flashall.bat:fastboot_imx_flashall.bat \
-    device/nxp/common/tools/fastboot_imx_flashall.sh:fastboot_imx_flashall.sh \
-    device/nxp/common/tools/imx-sdcard-partition.sh:imx-sdcard-partition.sh \
-    device/nxp/common/tools/uuu_imx_android_flash.bat:uuu_imx_android_flash.bat \
-    device/nxp/common/tools/uuu_imx_android_flash.sh:uuu_imx_android_flash.sh
-
-USE_XML_AUDIO_POLICY_CONF := 1
-
-DEVICE_PACKAGE_OVERLAYS := $(IMX_DEVICE_PATH)/overlay
-
-PRODUCT_CHARACTERISTICS := tablet
-
-PRODUCT_AAPT_CONFIG += xlarge large tvdpi hdpi xhdpi xxhdpi
-
-# GPU openCL g2d
-PRODUCT_COPY_FILES += \
-    $(IMX_PATH)/imx/opencl-2d/cl_g2d.cl:$(TARGET_COPY_OUT_VENDOR)/etc/cl_g2d.cl
-
-# GPU openCL SDK header file
--include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/include/CL/cl_sdk.mk
-
-# GPU openVX SDK header file
--include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/include/nnxc_kernels/nnxc_kernels.mk
-
-# GPU openCL icdloader config file
--include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/gpu-viv/icdloader/icdloader.mk
-
-# HWC2 HAL
-PRODUCT_PACKAGES += \
-    android.hardware.graphics.composer@2.4-service
-
-# Charger Mode
-PRODUCT_PRODUCT_PROPERTIES += \
-    ro.charger.no_ui=false
-
-# Do not skip charger_not_need trigger by default
-PRODUCT_DEFAULT_PROPERTY_OVERRIDES += \
-    vendor.skip.charger_not_need=0
-
-# Gralloc HAL
-PRODUCT_PACKAGES += \
-    android.hardware.graphics.mapper@2.0-impl-2.1 \
-    android.hardware.graphics.allocator@2.0-impl \
-    android.hardware.graphics.allocator@2.0-service
-
-# RenderScript HAL
-PRODUCT_PACKAGES += \
-    android.hardware.renderscript@1.0-impl
-
-PRODUCT_PACKAGES += \
-        libEGL_VIVANTE \
-        libGLESv1_CM_VIVANTE \
-        libGLESv2_VIVANTE \
-        gralloc_viv.imx \
-        libGAL \
-        libGLSLC \
-        libVSC \
-        libgpuhelper \
-        libSPIRV_viv \
-        libvulkan_VIVANTE \
-        vulkan.imx \
-        libCLC \
-        libLLVM_viv \
-        libOpenCL \
-        libg2d-opencl \
-        libg2d-viv \
-        libOpenVX \
-        libOpenVXU \
-        libNNVXCBinary-evis \
-        libNNVXCBinary-evis2 \
-        libNNVXCBinary-lite \
-        libOvx12VXCBinary-evis \
-        libOvx12VXCBinary-evis2 \
-        libOvx12VXCBinary-lite \
-        libNNGPUBinary-evis \
-        libNNGPUBinary-evis2 \
-        libNNGPUBinary-lite \
-        libNNGPUBinary-ulite \
-        libNNArchPerf \
-        libarchmodelSw
-
-PRODUCT_PACKAGES += \
-    android.hardware.audio@6.0-impl:32 \
-    android.hardware.audio@2.0-service \
-    android.hardware.audio.effect@6.0-impl:32 \
-    android.hardware.power@1.3-service.imx \
-    android.hardware.light@2.0-impl \
-    android.hardware.light@2.0-service \
-    android.hardware.configstore@1.1-service \
-    configstore@1.1.policy
-
-# Thermal HAL
-PRODUCT_PACKAGES += \
-    android.hardware.thermal@2.0-service.imx
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mq/thermal_info_config_imx8mq.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/thermal_info_config_imx8mq.json
-
-# Neural Network HAL and lib
-PRODUCT_PACKAGES += \
-    libovxlib \
-    libnnrt \
-    android.hardware.neuralnetworks@1.2-service-vsi-npu-server
-
-# Usb HAL
-PRODUCT_PACKAGES += \
-    android.hardware.usb@1.1-service.imx
-
-# Bluetooth HAL
-PRODUCT_PACKAGES += \
-    android.hardware.bluetooth@1.0-impl \
-    android.hardware.bluetooth@1.0-service
-
-# WiFi HAL
-PRODUCT_PACKAGES += \
-    android.hardware.wifi@1.0-service \
-    wifilogd \
-    wificond
-
-# WiFi RRO
-PRODUCT_PACKAGES += \
-    WifiOverlay
-
-# NXP 8997 Bluetooth vendor config
-PRODUCT_PACKAGES += \
-    bt_vendor.conf
-
-# NXP 8997 Wifi and Bluetooth Combo Firmware
-PRODUCT_COPY_FILES += \
-    vendor/nxp/imx-firmware/nxp/FwImage_8997/pcieuart8997_combo_v4.bin:vendor/firmware/pcieuart8997_combo_v4.bin \
-    vendor/nxp/imx-firmware/nxp/android_wifi_mod_para.conf:vendor/firmware/wifi_mod_para.conf
-
-# Wifi regulatory
-PRODUCT_COPY_FILES += \
-    external/wireless-regdb/regulatory.db:vendor/firmware/regulatory.db \
-    external/wireless-regdb/regulatory.db.p7s:vendor/firmware/regulatory.db.p7s
-
-# hardware backed keymaster service
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_PACKAGES += \
-    android.hardware.keymaster@4.0-service.trusty
-endif
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mq/camera_config_imx8mq.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/camera_config_imx8mq.json \
-    device/nxp/imx8m/evk_8mq/external_camera_config.xml:$(TARGET_COPY_OUT_VENDOR)/etc/external_camera_config.xml
-
-# Keymaster HAL
-PRODUCT_PACKAGES += \
-    android.hardware.keymaster@4.0-service-imx
-
-# DRM HAL
-TARGET_ENABLE_MEDIADRM_64 := true
-PRODUCT_PACKAGES += \
-    android.hardware.drm@1.0-impl \
-    android.hardware.drm@1.0-service
-
-# new gatekeeper HAL
-PRODUCT_PACKAGES += \
-    android.hardware.gatekeeper@1.0-service.software-imx
-
-# Add Trusty OS backed gatekeeper and secure storage proxy
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_PACKAGES += \
-    android.hardware.gatekeeper@1.0-service.trusty \
-    storageproxyd
-endif
-
-#Dumpstate HAL 1.1 support
-PRODUCT_PACKAGES += \
-    android.hardware.dumpstate@1.1-service.imx
-
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-#Oemlock HAL 1.0 support
-PRODUCT_PACKAGES += \
-    android.hardware.oemlock@1.0-service.imx
-endif
-
-ifneq ($(BUILD_TARGET_FS),ubifs)
-PRODUCT_PROPERTY_OVERRIDES += \
-    ro.frp.pst=/dev/block/by-name/presistdata
-endif
-
-PRODUCT_PACKAGES += \
-    libg1 \
-    libhantro \
-    libcodec
-
-# imx c2 codec binary
-PRODUCT_PACKAGES += \
-    lib_vpu_wrapper \
-    lib_imx_c2_videodec_common \
-    lib_imx_c2_videodec \
-    lib_imx_c2_vpuwrapper_dec \
-    lib_imx_c2_process \
-    lib_imx_c2_process_dummy_post \
-    c2_component_register \
-    c2_component_register_ms \
-    c2_component_register_wmv9 \
-    c2_component_register_ra \
-    c2_component_register_rv
-
-# Add oem unlocking option in settings.
-PRODUCT_PROPERTY_OVERRIDES += ro.frp.pst=/dev/block/by-name/presistdata
-PRODUCT_COMPATIBLE_PROPERTY_OVERRIDE := true
-
-# Tensorflow lite camera demo
-PRODUCT_PACKAGES += \
-                    tflitecamerademo
-
-# Multi-Display launcher
-PRODUCT_PACKAGES += \
-    MultiClientInputMethod \
-    MultiDisplay
-
-# Specify rollback index for boot and vbmeta partitions
-ifneq ($(AVB_RBINDEX),)
-BOARD_AVB_ROLLBACK_INDEX := $(AVB_RBINDEX)
-else
-BOARD_AVB_ROLLBACK_INDEX := 0
-endif
-
-ifneq ($(AVB_BOOT_RBINDEX),)
-BOARD_AVB_BOOT_ROLLBACK_INDEX := $(AVB_BOOT_RBINDEX)
-else
-BOARD_AVB_BOOT_ROLLBACK_INDEX := 0
-endif
-
-#DRM Widevine 1.2 L3 support
-PRODUCT_PACKAGES += \
-    android.hardware.drm@1.0-impl \
-    android.hardware.drm@1.0-service \
-    android.hardware.drm@1.3-service.widevine \
-    android.hardware.drm@1.3-service.clearkey \
-    libwvdrmcryptoplugin \
-    libwvhidl \
-    libwvdrmengine \
-
-IMX-DEFAULT-G2D-LIB := libg2d-viv
-
-ifeq ($(PREBUILT_FSL_IMX_CODEC),true)
-ifneq ($(IMX8_BUILD_32BIT_ROOTFS),true)
-INSTALL_64BIT_LIBRARY := true
-endif
--include $(FSL_CODEC_PATH)/fsl-codec/fsl-codec.mk
-endif
-
-PRODUCT_SOONG_NAMESPACES += hardware/google/camera
-PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/camera
-
-$(call  inherit-product-if-exists, vendor/nxp-private/security/nxp_security.mk)
-
-$(call inherit-product, $(SRC_TARGET_DIR)/product/emulated_storage.mk)
diff --git a/imx8m/bigcypress_8mq/evk_8mq_drm.mk b/imx8m/bigcypress_8mq/evk_8mq_drm.mk
deleted file mode 100644
index fe4b31ad..00000000
--- a/imx8m/bigcypress_8mq/evk_8mq_drm.mk
+++ /dev/null
@@ -1,72 +0,0 @@
-# This is a FSL Android Reference Design platform based on i.MX8MQ board
-# It will inherit from FSL core product which in turn inherit from Google generic
-
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mq
-
-PRODUCT_IMX_DRM := true
-
-# copy drm specific files before inherit evk_8mq.mk, otherwise copy is ignored
-PRODUCT_COPY_FILES += \
-	$(IMX_DEVICE_PATH)/audio_policy_configuration_drm.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
-	$(IMX_DEVICE_PATH)/init.imx8mq.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mq.main.rc \
-	$(IMX_DEVICE_PATH)/init.imx8mq.drm.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mq.rc \
-	$(TOPDIR)device/nxp/imx8m/tee-supplicant.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/tee-supplicant.rc \
-
-
-$(call inherit-product, $(TOPDIR)device/nxp/imx8m/optee-packages.mk)
-$(call inherit-product, $(TOPDIR)$(IMX_DEVICE_PATH)/evk_8mq.mk)
-
-TARGET_KERNEL_DEFCONFIG := imx_v8_android_defconfig
-
-
-# Overrides
-PRODUCT_NAME := evk_8mq_drm
-
-CFG_DRM_SECURE_DATA_PATH ?= y
-CFG_RDC_SECURE_DATA_PATH ?= y
-
-ifeq ($(CFG_DRM_SECURE_DATA_PATH),y)
-CFG_SECURE_DATA_PATH := y
-SOONG_CONFIG_IMXPLUGIN += CFG_SECURE_DATA_PATH
-SOONG_CONFIG_IMXPLUGIN_CFG_SECURE_DATA_PATH = y
-CFG_TEE_SDP_MEM_BASE := 0xcc000000
-CFG_TEE_SDP_MEM_SIZE := 0x02000000
-ifeq ($(CFG_RDC_SECURE_DATA_PATH),y)
-DECRYPTED_BUFFER_START	:= $(CFG_TEE_SDP_MEM_BASE)
-DECRYPTED_BUFFER_LEN	:= $(CFG_TEE_SDP_MEM_SIZE)
-DECODED_BUFFER_START	:= 0xCE000000
-DECODED_BUFFER_LEN		:= 0x30000000
-endif
-endif
-
-TARGET_BOARD_DTS_CONFIG := imx8mq:imx8mq-evk-drm.dtb imx8mq-mipi:imx8mq-evk-lcdif-adv7535.dtb imx8mq-dual:imx8mq-evk-dual-display.dtb
-
-# Exoplayer
-PRODUCT_PACKAGES += \
-	exoplayer \
-
-# Playready
-PRODUCT_COPY_FILES += \
-	vendor/nxp/drm_artifacts/playready/Samples/devcert.dat:$(TARGET_COPY_OUT_VENDOR)/playready/devcert.dat \
-	vendor/nxp/drm_artifacts/playready/Samples/priv.dat:$(TARGET_COPY_OUT_VENDOR)/playready/priv.dat \
-	vendor/nxp/drm_artifacts/playready/bgroupcert.dat:$(TARGET_COPY_OUT_VENDOR)/playready/bgroupcert.dat \
-	vendor/nxp/drm_artifacts/playready/zgpriv_protected.dat:$(TARGET_COPY_OUT_VENDOR)/playready/zgpriv_protected.dat \
-
-ifneq ($(CFG_BUILD_DRM_FROM_SOURCES),y)
-PRODUCT_COPY_FILES += \
-	vendor/nxp/drm_artifacts/playready/ta/82dbae9c-9ce0-47e0-a1cb4048cfdb84aa.ta:$(TARGET_COPY_OUT_VENDOR)/lib/optee_armtz/82dbae9c-9ce0-47e0-a1cb4048cfdb84aa.ta \
-	vendor/nxp/drm_artifacts/playready/libdrmplayreadyplugin.so:$(TARGET_COPY_OUT_VENDOR)/lib64/mediadrm/libdrmplayreadyplugin.so \
-	vendor/nxp/drm_artifacts/playready/optee_playready_test:$(TARGET_COPY_OUT_VENDOR)/bin/optee_playready_test
-endif
-
-ifneq ($(CFG_BUILD_DRM_FROM_SOURCES),y)
-# Widevine
-PRODUCT_COPY_FILES += \
-	vendor/nxp/drm_artifacts/widevine/lib/liboemcrypto.so:$(TARGET_COPY_OUT_VENDOR)/lib/liboemcrypto.so \
-	vendor/nxp/drm_artifacts/widevine/lib/libwvdrmengine.so:$(TARGET_COPY_OUT_VENDOR)/lib/mediadrm/libwvdrmengine.so \
-	vendor/nxp/drm_artifacts/widevine/lib/libvtswidevine.so:$(TARGET_COPY_OUT_VENDOR)/lib/drm-vts-test-libs/libvtswidevine.so \
-	vendor/nxp/drm_artifacts/widevine/lib64/liboemcrypto.so:$(TARGET_COPY_OUT_VENDOR)/lib64/liboemcrypto.so \
-	vendor/nxp/drm_artifacts/widevine/lib64/libwvdrmengine.so:$(TARGET_COPY_OUT_VENDOR)/lib64/mediadrm/libwvdrmengine.so \
-	vendor/nxp/drm_artifacts/widevine/lib64/libvtswidevine.so:$(TARGET_COPY_OUT_VENDOR)/lib64/drm-vts-test-libs/libvtswidevine.so \
-	vendor/nxp/drm_artifacts/widevine/ta/706f6574-7765-6469-77656e6942656665.ta:$(TARGET_COPY_OUT_VENDOR)/lib/optee_armtz/706f6574-7765-6469-77656e6942656665.ta
-endif
diff --git a/imx8m/bigcypress_8mq/init.imx8mq.rc b/imx8m/bigcypress_8mq/init.imx8mq.rc
index 038c07d6..9e0b3c05 100755
--- a/imx8m/bigcypress_8mq/init.imx8mq.rc
+++ b/imx8m/bigcypress_8mq/init.imx8mq.rc
@@ -20,6 +20,9 @@ on early-boot
     chmod 0440 /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_cur_freq
     chown root system /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_frequencies
 
+    # disable 3D composition overlay to fix video rotate problem
+    setprop vendor.hwc.enable.overlay 0
+
 on property:sys.boot_completed=1
     # Set default CPU frequency governor
     # configure governor settings for little cluster
@@ -28,6 +31,7 @@ on property:sys.boot_completed=1
     # Set up and down limit to 200us/200us
     write /sys/devices/system/cpu/cpufreq/schedutil/up_rate_limit_us 200
     write /sys/devices/system/cpu/cpufreq/schedutil/down_rate_limit_us 200
+    write /proc/sys/kernel/sched_util_clamp_min 512
 
 on property:sys.boot_completed=1
     # update cpuset now that processors are up
diff --git a/imx8m/bigcypress_8mq/init.imx8mq.rc~post_merge_android-11.0.0_1.0.0_history b/imx8m/bigcypress_8mq/init.imx8mq.rc~post_merge_android-11.0.0_1.0.0_history
deleted file mode 100755
index 4b82e581..00000000
--- a/imx8m/bigcypress_8mq/init.imx8mq.rc~post_merge_android-11.0.0_1.0.0_history
+++ /dev/null
@@ -1,47 +0,0 @@
-on early-boot
-
-    # Set OpenGLES version
-    setprop ro.opengles.version 196609
-
-    # Set GPU 3D minimum clock to 3/64
-    write /sys/bus/platform/drivers/galcore/gpu3DMinClock 3
-
-    # Set NN reject model by weights md5
-    setprop WEIGHT_MD5_CHECK 1
-
-    # change for FSL specific service
-    chown root system /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
-    chmod 0664 /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
-    chown root system /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
-    chmod 0664 /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
-    chown root system /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
-    chmod 0664 /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
-    chown root system /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_cur_freq
-    chmod 0440 /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_cur_freq
-    chown root system /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_frequencies
-
-on property:sys.boot_completed=1
-    # Set default CPU frequency governor
-    # configure governor settings for little cluster
-    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "schedutil"
-    # The rate-limit tunable in the schedutil governor applies to transitions to both lower and higher frequencies
-    # Set up and down limit to 200us/200us
-    write /sys/devices/system/cpu/cpufreq/schedutil/up_rate_limit_us 200
-    write /sys/devices/system/cpu/cpufreq/schedutil/down_rate_limit_us 200
-    write /proc/sys/kernel/sched_util_clamp_min 512
-
-on property:sys.boot_completed=1
-    # update cpuset now that processors are up
-    write /dev/cpuset/foreground/cpus 0-3
-
-    # top-app gets all cpus
-    write /dev/cpuset/top-app/cpus 0-3
-
-    #background contains a small subset (generally one little core)
-    write /dev/cpuset/background/cpus 0
-
-    # add system-background cpuset, a new cpuset for system services
-    # that should not run on larger cores
-    # system-background is for system tasks that should only run on
-    # little cores, not on bigs to be used only by init
-    write /dev/cpuset/system-background/cpus 0-2
diff --git a/imx8m/bigcypress_8mq/init.rc b/imx8m/bigcypress_8mq/init.rc
index e145eaa7..078dec51 100644
--- a/imx8m/bigcypress_8mq/init.rc
+++ b/imx8m/bigcypress_8mq/init.rc
@@ -1,8 +1,6 @@
 import /vendor/etc/init/hw/init.${ro.hardware}.usb.rc
 import /vendor/etc/init/hw/init.${ro.hardware}.${ro.boot.soc_type}.rc
-<<<<<<< HEAD
 import /product/etc/init/hw/init.idt.common.rc
-=======
 
 service vendor.charger /system/bin/charger
     class charger
@@ -16,35 +14,15 @@ service vendor.charger /system/bin/charger
 
 on charger
     start vendor.charger
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 on early-init
     # mount the debugfs
     mount debugfs none /sys/kernel/debug/ mode=0755
 
-<<<<<<< HEAD
-    # Mount binderfs
-    mkdir /dev/binderfs
-    mount binder binder /dev/binderfs stats=global
-    chmod 0755 /dev/binderfs
-
-    symlink /dev/binderfs/binder /dev/binder
-    symlink /dev/binderfs/hwbinder /dev/hwbinder
-    symlink /dev/binderfs/vndbinder /dev/vndbinder
-
-    chmod 0666 /dev/binderfs/hwbinder
-    chmod 0666 /dev/binderfs/binder
-    chmod 0666 /dev/binderfs/vndbinder
-
-
-on early-init
-    start early_init_sh
-=======
 on early-init
     start early_init_sh
     # Set the host name which used in console
-    export HOSTNAME evk_8mq
->>>>>>> post_merge/android-11.0.0_1.0.0_history
+    export HOSTNAME bigcypress_8mq
 
     # Due keymaster start very early so set prop here
     # Also gatekeeper share same role for keymaster
@@ -52,9 +30,6 @@ on early-init
     setprop ro.hardware.gatekeeper ${ro.boot.keystore}
     setprop vendor.storageproxyd ${ro.boot.keystore}
 
-<<<<<<< HEAD
-on init
-=======
     # Use ro.boot.lcd_density to override ro.sf.lcd_density
     setprop ro.sf.lcd_density ${ro.boot.lcd_density}
 
@@ -63,7 +38,6 @@ on early-init && property:ro.boot.mode=charger
     setprop vendor.skip.charger_not_need 1
 
 on init && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     start watchdogd
 
     # Support legacy paths
@@ -100,19 +74,6 @@ on init && property:vendor.skip.charger_not_need=0
     write /dev/stune/rt/schedtune.boost 50
     write /dev/stune/rt/schedtune.prefer_idle 1
 
-<<<<<<< HEAD
-on late-fs
-    # Start keymaster service
-    start vendor.keymaster-3-0-${ro.boot.keystore}
-    setprop vendor.powerhal.init 1
-
-    mount_all /vendor/etc/fstab.freescale --late
-
-on late-fs && property:vendor.storageproxyd=trusty
-    start vendor.oemlock-1-0
-
-on early-boot
-=======
 on late-fs && property:vendor.skip.charger_not_need=0
     # Start keymaster/gatekeeper service
     start vendor.gatekeeper-1-0-${ro.boot.keystore}
@@ -128,27 +89,14 @@ on late-fs && property:vendor.storageproxyd=trusty && property:vendor.skip.charg
     start vendor.oemlock-1-0
 
 on early-boot && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     # For evk_8mq, when swap used about 400M, upgrade the level.
     setprop ro.lmk.upgrade_pressure 87
     setprop ro.lmk.downgrade_pressure 95
     setprop ro.lmk.critical_upgrade true
 
-<<<<<<< HEAD
-    # Set the host name which used in console
-    export HOSTNAME bigcypress_8mq
-
-    # Set permission for IIM node
-    symlink /dev/mxs_viim /dev/mxc_mem
-
-    # Enable Tethering in the Settings
-    setprop ro.tether.denied false
-
-=======
     # Set permission for IIM node
     symlink /dev/mxs_viim /dev/mxc_mem
 
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     setprop sys.hwc.disable     1
     setprop vendor.2d.composition 0
     setprop hwc.stretch.filter  1
@@ -157,54 +105,32 @@ on early-boot && property:vendor.skip.charger_not_need=0
     setprop VIVANTE_SDK_DIR /vendor/etc/viv_sdk
 
     # fsl omx graphic manager media framework property
-<<<<<<< HEAD
-    setprop rw.VIDEO_RENDER_NAME video_render.surface
-    setprop media.fsl_codec.flag 7
+    setprop vendor.rw.VIDEO_RENDER_NAME video_render.surface
+    setprop vendor.media.fsl_codec.flag 7
 
     setprop camera.disable_zsl_mode 1
     setprop back_camera_name mx6s-csi0
     setprop back_camera_orient 0
     setprop front_camera_name mx6s-csi1
     setprop front_camera_orient 0
-=======
-    setprop vendor.rw.VIDEO_RENDER_NAME video_render.surface
-    setprop vendor.media.fsl_codec.flag 7
-
-    setprop camera.disable_zsl_mode 1
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
    # Tweak the mmc device read ahead buffer size
     write /sys/block/mmcblk0/queue/read_ahead_kb 2048
     write /sys/block/mmcblk1/queue/read_ahead_kb 2048
 
-<<<<<<< HEAD
-    # Set period_us for usb audio
-    setprop ro.audio.usb.period_us 20000
-
     # Wifi firmware reload path
     chown wifi wifi /sys/module/brcmfmac/parameters/alternative_fw_path
 
     # Prepare for wifi
     setprop wifi.interface wlan0
 
-    setprop persist.service.bdroid.bdaddr 22:22:67:C6:69:73
-
     # Prepare for bluetooth
     chmod 665 /sys/class/rfkill/rfkill0/state
     chown bluetooth bluetooth /sys/class/rfkill/rfkill0/state
     write /sys/class/rfkill/rfkill0/state 0
 
-    # Prepare for RIL
-    setprop ro.ril.wake_lock_timeout 300
-
     # Use ro.boot.lcd_density to override ro.sf.lcd_density
     setprop ro.sf.lcd_density ${ro.boot.lcd_density}
-=======
-    # Prepare for wifi
-    setprop wifi.interface wlan0
-    setprop wifi.direct.interface p2p0
-    setprop wifi.concurrent.interface wlan1
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Disable surfaceflinger back pressure propagate
     setprop debug.sf.disable_backpressure 1
@@ -217,12 +143,11 @@ on early-boot && property:vendor.skip.charger_not_need=0
     chmod 0664 /sys/kernel/debug/sync/sw_sync
 
     # Default backlight device
-<<<<<<< HEAD
-    #setprop hw.backlight.dev "30a00000.mipi_dsi.0"
+    #setprop vendor.hw.backlight.dev "30a00000.mipi_dsi.0"
     # Chmod/chown FSL specific sys entry
     #chown system system /sys/class/backlight/30a00000.mipi_dsi.0/brightness
     #chmod 0660 /sys/class/backlight/30a00000.mipi_dsi.0/brightness
-    setprop hw.backlight.dev "backlight"
+    setprop vendor.hw.backlight.dev "backlight"
     chown system system /sys/class/backlight/backlight/brightness
     chmod 0660 /sys/class/backlight/backlight/brightness
 
@@ -234,22 +159,9 @@ on early-boot && property:vendor.skip.charger_not_need=0
     chmod 0660 /sys/class/backlight/pwm_3/brightness
     chmod 0660 /sys/class/backlight/pwm_4/brightness
 
-    # Set light sensor sysfs path and light sensor threshold lux value
-    setprop ro.hardware.lightsensor "/sys/class/i2c-dev/i2c-0/device/0-0044/"
-    setprop ro.lightsensor.threshold  20
-
-    # Dectect DSF streams when scanning media
-    setprop ro.FSL_DSF_PARSER 1
-=======
-    setprop vendor.hw.backlight.dev "30a00000.mipi_dsi.0"
-    # Chmod/chown FSL specific sys entry
-    chown system system /sys/class/backlight/30a00000.mipi_dsi.0/brightness
-    chmod 0660 /sys/class/backlight/30a00000.mipi_dsi.0/brightness
-
     # Set light sensor sysfs path and light sensor threshold lux value
     setprop ro.hardware.lightsensor "/sys/class/i2c-dev/i2c-0/device/0-0044/"
     setprop vendor.ro.lightsensor.threshold  20
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Allow DSD file(duration larger than 10s) can play
     setprop audio.offload.min.duration.secs 10
@@ -260,17 +172,10 @@ on early-boot && property:vendor.skip.charger_not_need=0
     # enlarge media max memory size to 3G.
     setprop ro.media.maxmem 3221225471
 
-<<<<<<< HEAD
     setprop wifi.direct.interface p2p-dev-wlan0
     start vendor.wifi_hal_legacy
 
-    # disable 3D composition overlay to fix video rotate problem
-    setprop hwc.enable.overlay 0
-
-on boot
-=======
 on boot && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     start audioserver
     start mediadrm
     start media
@@ -282,10 +187,7 @@ service wpa_supplicant /vendor/bin/hw/wpa_supplicant \
     interface android.hardware.wifi.supplicant@1.0::ISupplicant default
     interface android.hardware.wifi.supplicant@1.1::ISupplicant default
     interface android.hardware.wifi.supplicant@1.2::ISupplicant default
-<<<<<<< HEAD
-=======
     interface android.hardware.wifi.supplicant@1.3::ISupplicant default
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     class main
     socket wpa_wlan0 dgram 660 wifi wifi
     disabled
@@ -295,8 +197,7 @@ service sensor_fusion /vendor/bin/fsl_sensor_fusion
     class late_start
     seclabel u:r:sensors:s0
     user system
-<<<<<<< HEAD
-    group input
+    group system uhid
     oneshot
 
 service vendor.sensors-hal-1-0 /vendor/bin/hw/android.hardware.sensors@1.0-service
@@ -305,11 +206,6 @@ service vendor.sensors-hal-1-0 /vendor/bin/hw/android.hardware.sensors@1.0-servi
     group system wakelock input root
     capabilities BLOCK_SUSPEND SYS_NICE
 
-=======
-    group system uhid
-    oneshot
-
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 # Set watchdog timer to 30 seconds and pet it every 10 seconds to get a 20 second margin
 service watchdogd /system/bin/watchdogd 10 20
     class core
@@ -363,15 +259,9 @@ service bugreport /system/bin/dumpstate -d -p -B -z \
     oneshot
     keycodes 114 115 116
 
-<<<<<<< HEAD
-on fs
-# mount ext4 partitions
-    mount_all /vendor/etc/fstab.freescale --early
-=======
 on fs && property:vendor.skip.charger_not_need=0
 # mount ext4 partitions
     mount_all /vendor/etc/fstab.nxp --early
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Adjust parameters for dm-verity device
     write /sys/block/dm-0/queue/read_ahead_kb 4096
@@ -379,26 +269,15 @@ on fs && property:vendor.skip.charger_not_need=0
     # Update dm-verity state and set partition.*.verified properties
     verity_update_state
 
-<<<<<<< HEAD
-on verity-logging
-    exec u:r:slideshow:s0 -- /sbin/slideshow warning/verity_red_1 warning/verity_red_2
-
-on post-fs
-=======
 on verity-logging && property:vendor.skip.charger_not_need=0
     exec u:r:slideshow:s0 -- /sbin/slideshow warning/verity_red_1 warning/verity_red_2
 
 on post-fs && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     # Set netd memlock rlimit to 8MB
     setrlimit 8 8388608 8388608
 
     # Turn on swap
-<<<<<<< HEAD
-    swapon_all /vendor/etc/fstab.freescale
-=======
     swapon_all /vendor/etc/fstab.nxp
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Swap in only 1 page at a time
     write /proc/sys/vm/page-cluster 0
@@ -407,11 +286,7 @@ on post-fs && property:vendor.skip.charger_not_need=0
     chown system system /proc/pagetypeinfo
     chmod 0440 /proc/pagetypeinfo
 
-<<<<<<< HEAD
-on post-fs-data
-=======
 on post-fs-data && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     setprop vold.post_fs_data_done 1
     # create temp node for secure storage proxy
     mkdir /data/vendor/ss 0700 system system
@@ -420,19 +295,6 @@ on post-fs-data && property:vendor.skip.charger_not_need=0
     setprop TMPDIR /data/vendor/.opencl-cache
     mkdir /data/vendor/.opencl-cache 0771 system camera
 
-<<<<<<< HEAD
-on zygote-start
-    # Create the directories used by the Wireless subsystem
-    mkdir /data/misc/wifi 0770 wifi wifi
-    mkdir /data/misc/wifi/wpa_supplicant 0770 wifi wifi
-    mkdir /data/vendor/wifi 0771 wifi wifi
-    mkdir /data/vendor/wifi/wpa 0770 wifi wifi
-    mkdir /data/vendor/wifi/wpa/sockets 0770 wifi wifi
-    mkdir /data/misc/dhcp 0770 dhcp dhcp
-    chown dhcp dhcp /data/misc/dhcp
-
-service early_init_sh /vendor/bin/init.insmod.sh /vendor/etc/early.init.cfg sys.all.early_init.ready
-=======
 on zygote-start && property:vendor.skip.charger_not_need=0
     # Create the directories used by the Wireless subsystem
     mkdir /data/vendor/wifi 0771 wifi wifi
@@ -440,29 +302,20 @@ on zygote-start && property:vendor.skip.charger_not_need=0
     mkdir /data/vendor/wifi/wpa/sockets 0770 wifi wifi
 
 service early_init_sh /vendor/bin/init.insmod.sh /vendor/etc/early.init.cfg vendor.all.early_init.ready
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     class main
     user root
     group root system
     disabled
     oneshot
 
-<<<<<<< HEAD
-on property:sys.boot_completed=1 && property:vendor.storageproxyd=trusty
-=======
 on property:sys.boot_completed=1 && property:vendor.storageproxyd=trusty && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     start storageproxyd
 
 service storageproxyd /vendor/bin/storageproxyd -p /data/vendor/ss -r /dev/mmcblk0rpmb -d /dev/trusty-ipc-dev0
    group system
 
 
-<<<<<<< HEAD
-on property:ro.boot.vendor.sysrq=1
-=======
 on property:ro.boot.vendor.sysrq=1 && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     write /proc/sys/kernel/sysrq 1
 
 # setenv append_bootargs androidboot.usb.debugging=1
diff --git a/imx8m/bigcypress_8mq/manifest.xml b/imx8m/bigcypress_8mq/manifest.xml
index 815b4a8a..5654b032 100644
--- a/imx8m/bigcypress_8mq/manifest.xml
+++ b/imx8m/bigcypress_8mq/manifest.xml
@@ -1,8 +1,5 @@
 <manifest version="1.0" type="device" target-level="4">
-<<<<<<< HEAD
-=======
     <kernel  target-level="5" />
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     <hal format="hidl">
 	<name>android.hardware.graphics.allocator</name>
         <transport>hwbinder</transport>
@@ -16,22 +13,13 @@
     <hal format="hidl">
         <name>android.hardware.graphics.composer</name>
         <transport>hwbinder</transport>
-<<<<<<< HEAD
-        <version>2.3</version>
-=======
         <version>2.4</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <interface>
             <name>IComposer</name>
             <instance>default</instance>
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
-        <name>android.hardware.keymaster</name>
-        <transport>hwbinder</transport>
-        <version>3.0</version>
-=======
        <name>android.hardware.camera.provider</name>
        <transport>hwbinder</transport>
        <fqname>@2.4::ICameraProvider/external/0</fqname>
@@ -40,7 +28,6 @@
         <name>android.hardware.keymaster</name>
         <transport>hwbinder</transport>
         <version>4.0</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <interface>
             <name>IKeymasterDevice</name>
             <instance>default</instance>
@@ -58,13 +45,8 @@
             <name>IDrmFactory</name>
             <instance>default</instance>
         </interface>
-<<<<<<< HEAD
-        <fqname>@1.2::ICryptoFactory/clearkey</fqname>
-        <fqname>@1.2::IDrmFactory/clearkey</fqname>
-=======
         <fqname>@1.3::ICryptoFactory/clearkey</fqname>
         <fqname>@1.3::IDrmFactory/clearkey</fqname>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     </hal>
     <hal format="hidl">
         <name>android.hardware.gatekeeper</name>
@@ -95,7 +77,6 @@
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
         <name>android.hardware.sensors</name>
         <transport>hwbinder</transport>
         <version>1.0</version>
@@ -105,8 +86,6 @@
         </interface>
     </hal>
     <hal format="hidl">
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <name>android.hardware.configstore</name>
         <transport>hwbinder</transport>
         <version>1.1</version>
@@ -138,46 +117,6 @@
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
-       <name>android.hardware.wifi</name>
-       <transport>hwbinder</transport>
-       <version>1.3</version>
-       <interface>
-           <name>IWifi</name>
-           <instance>default</instance>
-       </interface>
-    </hal>
-    <hal format="hidl">
-       <name>android.hardware.wifi.supplicant</name>
-       <transport>hwbinder</transport>
-       <version>1.2</version>
-       <interface>
-           <name>ISupplicant</name>
-           <instance>default</instance>
-       </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.wifi.hostapd</name>
-        <transport>hwbinder</transport>
-        <version>1.1</version>
-        <interface>
-            <name>IHostapd</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-       <name>android.hardware.camera.provider</name>
-	<transport>hwbinder</transport>
-	<impl level="generic"></impl>
-	<version>2.4</version>
-	<interface>
-	    <name>ICameraProvider</name>
-	    <instance>legacy/0</instance>
-	</interface>
-    </hal>
-    <hal format="hidl">
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <name>android.hardware.light</name>
         <transport>hwbinder</transport>
         <version>2.0</version>
@@ -198,11 +137,7 @@
     <hal format="hidl">
         <name>android.hardware.audio</name>
         <transport>hwbinder</transport>
-<<<<<<< HEAD
-        <version>5.0</version>
-=======
         <version>6.0</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <interface>
             <name>IDevicesFactory</name>
             <instance>default</instance>
@@ -211,38 +146,13 @@
     <hal format="hidl">
         <name>android.hardware.audio.effect</name>
         <transport>hwbinder</transport>
-<<<<<<< HEAD
-        <version>5.0</version>
-=======
         <version>6.0</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <interface>
             <name>IEffectsFactory</name>
             <instance>default</instance>
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
-        <name>android.hardware.usb</name>
-        <transport>hwbinder</transport>
-        <version>1.1</version>
-        <interface>
-            <name>IUsb</name>
-            <instance>default</instance>
-          </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.usb.gadget</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IUsbGadget</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <name>android.hardware.bluetooth</name>
         <transport>hwbinder</transport>
         <version>1.0</version>
@@ -254,38 +164,13 @@
     <hal format="hidl">
         <name>android.hardware.dumpstate</name>
         <transport>hwbinder</transport>
-<<<<<<< HEAD
-        <version>1.0</version>
-=======
         <version>1.1</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <interface>
             <name>IDumpstateDevice</name>
             <instance>default</instance>
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
-        <name>android.hardware.oemlock</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IOemLock</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.health</name>
-        <transport>hwbinder</transport>
-        <version>2.0</version>
-        <interface>
-            <name>IHealth</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <name>nxp.hardware.display</name>
             <transport>hwbinder</transport>
         <version>1.0</version>
@@ -294,16 +179,6 @@
             <instance>default</instance>
         </interface>
     </hal>
-<<<<<<< HEAD
-    <hal format="hidl">
-        <name>android.hardware.neuralnetworks</name>
-        <transport>hwbinder</transport>
-        <version>1.2</version>
-        <interface>
-            <name>IDevice</name>
-            <instance>vsi-npu</instance>
-        </interface>
-    </hal>
     <hal format="hidl">
         <name>android.hardware.broadcastradio</name>
             <transport>hwbinder</transport>
@@ -340,6 +215,4 @@
             <instance>default</instance>
         </interface>
     </hal>
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 </manifest>
diff --git a/imx8m/bigcypress_8mq/overlay/frameworks/base/core/res/res/values/config.xml b/imx8m/bigcypress_8mq/overlay/frameworks/base/core/res/res/values/config.xml
index f1368531..4722b491 100644
--- a/imx8m/bigcypress_8mq/overlay/frameworks/base/core/res/res/values/config.xml
+++ b/imx8m/bigcypress_8mq/overlay/frameworks/base/core/res/res/values/config.xml
@@ -185,36 +185,11 @@
     <!-- This device is not "voice capable"; it's data-only. -->
     <bool name="config_voice_capable">false</bool>
 
-<<<<<<< HEAD
-    <!-- Boolean indicating whether the wifi chipset has dual frequency band support -->
-    <bool translatable="false" name="config_wifi_dual_band_support">true</bool>
-
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     <!-- Boolean indicating whether system support sustained performance mode. -->
     <bool name="config_sustainedPerformanceModeSupported">true</bool>
 
     <!-- If the system has the input method for each display - enable per-display focus. -->
     <bool name="config_perDisplayFocusEnabled">true</bool>
-<<<<<<< HEAD
-
-    <!-- Enable 802.11ac for Wifi hotspot (SAP) -->
-    <bool translatable="false" name="config_wifi_softap_ieee80211ac_supported">true</bool>
-
-    <!-- Enable ACS (auto channel selection) for Wifi hotspot (SAP) -->
-    <bool translatable="false" name="config_wifi_softap_acs_supported">true</bool>
-
-    <!-- Boolean indicating whether 802.11r Fast BSS Transition is enabled on this platform -->
-    <bool translatable="false" name="config_wifi_fast_bss_transition_enabled">true</bool>
-
-    <!-- Boolean indicating whether the wifi chipset has background scan support -->
-    <bool translatable="false" name="config_wifi_background_scan_support">true</bool>
-
-    <!-- Indicates that connected MAC randomization is supported on this device -->
-    <bool translatable="false" name="config_wifi_connected_mac_randomization_supported">true</bool>
-
-    <!-- Indicates that p2p MAC randomization is supported on this device -->
-    <bool translatable="false" name="config_wifi_p2p_mac_randomization_supported">true</bool>
 
     <!-- The default gravity for the picture-in-picture window.
          Currently, this maps to Gravity.TOP | Gravity.RIGHT -->
@@ -222,6 +197,4 @@
 
     <!-- Flag indicating whether orientation is able to change by application.-->
     <bool name="config_orientation_lock_available">true</bool>
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 </resources>
diff --git a/imx8m/bigcypress_8mq/overlay/frameworks/base/packages/SettingsProvider/res/values/defaults.xml b/imx8m/bigcypress_8mq/overlay/frameworks/base/packages/SettingsProvider/res/values/defaults.xml
index bd32383c..0bf9ee21 100644
--- a/imx8m/bigcypress_8mq/overlay/frameworks/base/packages/SettingsProvider/res/values/defaults.xml
+++ b/imx8m/bigcypress_8mq/overlay/frameworks/base/packages/SettingsProvider/res/values/defaults.xml
@@ -21,8 +21,5 @@
     <bool name="def_user_setup_complete">true</bool>
     <bool name="def_bluetooth_on">false</bool>
     <bool name="def_stay_on_while_plugged_in">true</bool>
-<<<<<<< HEAD
     <string name="def_immersive_mode_confirmations" translatable="false">confirmed</string>
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 </resources>
diff --git a/imx8m/bigcypress_8mq/powerhint_imx8mq.json b/imx8m/bigcypress_8mq/powerhint_imx8mq.json
index dd45c0b3..99ea1690 100644
--- a/imx8m/bigcypress_8mq/powerhint_imx8mq.json
+++ b/imx8m/bigcypress_8mq/powerhint_imx8mq.json
@@ -4,16 +4,10 @@
       "Name": "CPULittleClusterMaxFreq",
       "Path": "/sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq",
       "Values": [
-<<<<<<< HEAD
-        "1800000",
-        "1600000",
-        "1200000"
-=======
         "1500000",
         "1300000",
         "1000000",
         "800000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
       ],
       "DefaultIndex": 0,
       "ResetOnInit": true
@@ -22,16 +16,10 @@
       "Name": "CPULittleClusterMinFreq",
       "Path": "/sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq",
       "Values": [
-<<<<<<< HEAD
-        "1800000",
-        "1600000",
-        "1200000"
-=======
         "1500000",
         "1300000",
         "1000000",
         "800000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
       ],
       "ResetOnInit": true
     },
@@ -88,21 +76,13 @@
       "PowerHint": "SUSTAINED_PERFORMANCE",
       "Node": "CPULittleClusterMaxFreq",
       "Duration": 0,
-<<<<<<< HEAD
-      "Value": "1600000"
-=======
       "Value": "1300000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "INTERACTION",
       "Node": "CPULittleClusterMinFreq",
       "Duration": 0,
-<<<<<<< HEAD
-      "Value": "1600000"
-=======
       "Value": "1500000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "INTERACTION",
@@ -111,12 +91,6 @@
       "Value": "60"
     },
     {
-<<<<<<< HEAD
-      "PowerHint": "LAUNCH",
-      "Node": "CPULittleClusterMinFreq",
-      "Duration": 5000,
-      "Value": "1800000"
-=======
       "PowerHint": "INTERACTION",
       "Node": "PMQoSCpuDmaLatency",
       "Duration": 500,
@@ -127,17 +101,12 @@
       "Node": "CPULittleClusterMinFreq",
       "Duration": 5000,
       "Value": "1500000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "LAUNCH",
       "Node": "CPULittleClusterMaxFreq",
       "Duration": 5000,
-<<<<<<< HEAD
-      "Value": "1800000"
-=======
       "Value": "1500000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "LAUNCH",
@@ -148,24 +117,14 @@
     {
       "PowerHint": "CAMERA_LAUNCH",
       "Node": "CPULittleClusterMinFreq",
-<<<<<<< HEAD
-      "Duration": 1000,
-      "Value": "1800000"
-=======
       "Duration": 5000,
       "Value": "1500000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "CAMERA_LAUNCH",
       "Node": "CPULittleClusterMaxFreq",
-<<<<<<< HEAD
-      "Duration": 1000,
-      "Value": "1800000"
-=======
       "Duration": 5000,
       "Value": "1500000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "CAMERA_LAUNCH",
@@ -183,33 +142,19 @@
       "PowerHint": "CAMERA_STREAMING",
       "Node": "CPULittleClusterMaxFreq",
       "Duration": 0,
-<<<<<<< HEAD
-      "Value": "1600000"
-=======
       "Value": "1300000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "CAMERA_SHOT",
       "Node": "CPULittleClusterMinFreq",
-<<<<<<< HEAD
-      "Duration": 1000,
-      "Value": "1800000"
-=======
       "Duration": 5000,
       "Value": "1500000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "CAMERA_SHOT",
       "Node": "CPULittleClusterMaxFreq",
-<<<<<<< HEAD
-      "Duration": 1000,
-      "Value": "1800000"
-=======
       "Duration": 5000,
       "Value": "1500000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "CAMERA_SHOT",
@@ -221,21 +166,13 @@
       "PowerHint": "LOW_POWER",
       "Node": "CPULittleClusterMinFreq",
       "Duration": 0,
-<<<<<<< HEAD
-      "Value": "1200000"
-=======
       "Value": "800000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "LOW_POWER",
       "Node": "CPULittleClusterMaxFreq",
       "Duration": 0,
-<<<<<<< HEAD
-      "Value": "1200000"
-=======
       "Value": "1300000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "AUDIO_STREAMING",
@@ -244,15 +181,12 @@
       "Value": "0"
     },
     {
-<<<<<<< HEAD
-=======
       "PowerHint": "AUDIO_STREAMING",
       "Node": "CPULittleClusterMinFreq",
       "Duration": 2000,
       "Value": "1000000"
     },
     {
->>>>>>> post_merge/android-11.0.0_1.0.0_history
       "PowerHint": "AUDIO_LOW_LATENCY",
       "Node": "PowerHALAudioState",
       "Duration": 0,
diff --git a/imx8m/bigcypress_8mq/sepolicy/file_contexts b/imx8m/bigcypress_8mq/sepolicy/file_contexts
index cb1ad6b6..09cead84 100644
--- a/imx8m/bigcypress_8mq/sepolicy/file_contexts
+++ b/imx8m/bigcypress_8mq/sepolicy/file_contexts
@@ -23,15 +23,12 @@
 /dev/block/platform/soc@0/soc@0\:bus@30800000/30b40000\.mmc/by-name/userdata         u:object_r:userdata_block_device:s0
 /dev/block/platform/soc@0/soc@0\:bus@30800000/30b40000\.mmc/by-name/vbmeta_[ab]      u:object_r:vbmeta_block_device:s0
 /dev/block/platform/soc@0/soc@0\:bus@30800000/30b40000\.mmc/by-name/super            u:object_r:super_block_device:s0
-<<<<<<< HEAD
 /dev/block/platform/soc@0/soc@0\:bus@30800000/30b40000\.mmc/by-name/bootloader_[ab]  u:object_r:bootloader_block_device:s0
 /dev/block/platform/soc@0/soc@0\:bus@30800000/30b40000\.mmc/by-name/mem_info_[ab]    u:object_r:bootloader_block_device:s0
 
 # spl
 /dev/block/mmcblk0boot[01]            u:object_r:spl_block_device:s0
 /dev/block/mmcblk0boot[01]p[1-9]      u:object_r:spl_block_device:s0
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 #peripheral
 /vendor/bin/magd                u:object_r:sensors_exec:s0
@@ -50,10 +47,7 @@
 /vendor/bin/hw/android\.hardware\.thermal@2\.0-service.imx         u:object_r:hal_thermal_default_exec:s0
 
 /vendor/bin/hw/android\.hardware\.media\.c2@1\.0-service    u:object_r:mediacodec_exec:s0
-<<<<<<< HEAD
 
 #Kiosk Led file node
 /sys/devices/platform/leds/leds/LED_KIOSK_[0-9]/brightness     u:object_r:sysfs_idtech_kioskleds:s0
 /vendor/bin/hw/android\.hardware\.kioskled@1\.0-service        u:object_r:hal_kioskled_default_exec:s0
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/bigcypress_8mq/sepolicy/genfs_contexts b/imx8m/bigcypress_8mq/sepolicy/genfs_contexts
index 9d287d6c..2f5e1478 100644
--- a/imx8m/bigcypress_8mq/sepolicy/genfs_contexts
+++ b/imx8m/bigcypress_8mq/sepolicy/genfs_contexts
@@ -7,16 +7,11 @@ genfscon sysfs /devices/platform/soc@0/soc@0:bus@30800000/30b50000.mmc/mmc_host/
 genfscon sysfs /devices/platform/soc@0/soc@0:bus@30800000/30bb0000.spi/spi_master/spi3/spi3.0/mtd/mtd0/mtdblock u:object_r:sysfs_block_devices:s0
 
 genfscon sysfs /devices/platform/soc@0/soc@0:bus@30800000/30a00000.mipi_dsi/30a00000.mipi_dsi.0/backlight u:object_r:sysfs_leds:s0
-<<<<<<< HEAD
 genfscon sysfs /devices/platform/backlight/backlight/backlight u:object_r:sysfs_leds:s0
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 #/sys/class/net
 genfscon sysfs /devices/platform/soc@0/soc@0:bus@30800000/30be0000.ethernet/net               u:object_r:sysfs_net:s0
 genfscon sysfs /devices/platform/soc@0/33800000.pcie/pci0000:00/0000:00:00.0/0000:01:00.0/net u:object_r:sysfs_net:s0
-<<<<<<< HEAD
-=======
 genfscon sysfs /devices/platform/soc@0/33c00000.pcie/pci0000:00/0000:00:00.0/0000:01:00.0/net u:object_r:sysfs_net:s0
 
 
@@ -28,4 +23,3 @@ genfscon sysfs /devices/platform/soc@0/soc@0:bus@30000000/30370000.snvs/30370000
 genfscon sysfs /devices/virtual/power_supply/battery/wakeup4                                                                       u:object_r:sysfs_wakeup:s0
 genfscon sysfs /devices/virtual/power_supply/usb/wakeup5                                                                           u:object_r:sysfs_wakeup:s0
 genfscon sysfs /devices/platform/soc@0/soc@0:bus@30800000/30a20000.i2c/i2c-0/0-0050/power_supply/tcpm-source-psy-0-0050/wakeup6    u:object_r:sysfs_wakeup:s0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/evk_8mp/evk_8mp.mk b/imx8m/evk_8mp/evk_8mp.mk
index 6c973e3c..7d552bcb 100644
--- a/imx8m/evk_8mp/evk_8mp.mk
+++ b/imx8m/evk_8mp/evk_8mp.mk
@@ -286,16 +286,15 @@ PRODUCT_PACKAGES += \
     wifilogd \
     wificond
 
-# nxp 8997 Firmware
-PRODUCT_COPY_FILES += \
-    vendor/nxp/imx-firmware/nxp/FwImage_8997/pcie8997_wlan_v4.bin:vendor/firmware/mrvl/pcie8997_wlan_v4.bin \
-    vendor/nxp/imx-firmware/nxp/FwImage_8997/pcieuart8997_combo_v4.bin:vendor/firmware/mrvl/pcieuart8997_combo_v4.bin \
-    vendor/nxp/imx-firmware/nxp/FwImage_8997/uart8997_bt_v4.bin:vendor/firmware/mrvl/uart8997_bt_v4.bin \
-
 # WiFi RRO
 PRODUCT_PACKAGES += \
     WifiOverlay
 
+# nxp 8997 wifi and bluetooth combo Firmware
+PRODUCT_COPY_FILES += \
+    vendor/nxp/imx-firmware/nxp/FwImage_8997/pcieuart8997_combo_v4.bin:vendor/firmware/pcieuart8997_combo_v4.bin \
+    vendor/nxp/imx-firmware/nxp/android_wifi_mod_para.conf:vendor/firmware/wifi_mod_para.conf
+
 # Wifi regulatory
 PRODUCT_COPY_FILES += \
     external/wireless-regdb/regulatory.db:vendor/firmware/regulatory.db \
diff --git a/imx8m/evk_a100/AndroidBoard.mk b/imx8m/evk_a100/AndroidBoard.mk
index dcb09302..97d97bf5 100644
--- a/imx8m/evk_a100/AndroidBoard.mk
+++ b/imx8m/evk_a100/AndroidBoard.mk
@@ -1,17 +1,8 @@
 LOCAL_PATH := $(call my-dir)
 
-<<<<<<< HEAD
 include device/idtech/common/build/dtbo.mk
 include device/idtech/common/build/imx-recovery.mk
 include device/idtech/common/build/gpt.mk
 include device/idtech/common/build/userdata.mk
 include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/media-profile/media-profile.mk
 include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/sensor/fsl-sensor.mk
-=======
-include device/nxp/common/build/dtbo.mk
-include device/nxp/common/build/imx-recovery.mk
-include device/nxp/common/build/gpt.mk
-include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/media-profile/media-profile.mk
-include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/sensor/fsl-sensor.mk
--include $(IMX_MEDIA_CODEC_XML_PATH)/mediacodec-profile/mediacodec-profile.mk
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/evk_a100/AndroidUboot.mk~post_merge_android-11.0.0_1.0.0_history b/imx8m/evk_a100/AndroidUboot.mk~post_merge_android-11.0.0_1.0.0_history
deleted file mode 100644
index 25e10ebd..00000000
--- a/imx8m/evk_a100/AndroidUboot.mk~post_merge_android-11.0.0_1.0.0_history
+++ /dev/null
@@ -1,53 +0,0 @@
-# uboot.imx in android combine scfw.bin and uboot.bin
-MAKE += SHELL=/bin/bash
-
-ifneq ($(AARCH64_GCC_CROSS_COMPILE),)
-ATF_CROSS_COMPILE := $(strip $(AARCH64_GCC_CROSS_COMPILE))
-else
-ATF_TOOLCHAIN_ABS := $(realpath prebuilts/gcc/$(HOST_PREBUILT_TAG)/aarch64/aarch64-linux-android-4.9/bin)
-ATF_CROSS_COMPILE := $(ATF_TOOLCHAIN_ABS)/aarch64-linux-androidkernel-
-endif
-
-define build_imx_uboot
-	$(hide) echo Building i.MX U-Boot with firmware; \
-	cp $(UBOOT_OUT)/u-boot-nodtb.$(strip $(1)) $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
-	cp $(UBOOT_OUT)/spl/u-boot-spl.bin  $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
-	cp $(UBOOT_OUT)/tools/mkimage  $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/mkimage_uboot; \
-	if [ `echo $(2) | cut -d '-' -f2` = "ddr4" ]; then \
-		cp $(UBOOT_OUT)/arch/arm/dts/imx8mn-ddr4-evk.dtb $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
-		cp $(FSL_PROPRIETARY_PATH)/linux-firmware-imx/firmware/ddr/synopsys/ddr4* $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
-	else \
-		cp $(UBOOT_OUT)/arch/arm/dts/imx8mn-evk.dtb  $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
-		cp $(FSL_PROPRIETARY_PATH)/linux-firmware-imx/firmware/ddr/synopsys/lpddr4_pmu_train* $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
-	fi; \
-	$(MAKE) -C $(IMX_PATH)/arm-trusted-firmware/ PLAT=`echo $(2) | cut -d '-' -f1` clean; \
-	if [ `echo $(2) | cut -d '-' -f2` = "trusty" ]; then \
-		cp $(FSL_PROPRIETARY_PATH)/fsl-proprietary/uboot-firmware/imx8m/tee-imx8mn.bin $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/tee.bin; \
-		$(MAKE) -C $(IMX_PATH)/arm-trusted-firmware/ CROSS_COMPILE="$(ATF_CROSS_COMPILE)" PLAT=`echo $(2) | cut -d '-' -f1` bl31 -B SPD=trusty 1>/dev/null || exit 1; \
-	else \
-		if [ -f $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/tee.bin ] ; then \
-			rm -rf $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/tee.bin; \
-		fi; \
-		$(MAKE) -C $(IMX_PATH)/arm-trusted-firmware/ CROSS_COMPILE="$(ATF_CROSS_COMPILE)" PLAT=`echo $(2) | cut -d '-' -f1` bl31 -B 1>/dev/null || exit 1; \
-	fi; \
-	cp $(IMX_PATH)/arm-trusted-firmware/build/`echo $(2) | cut -d '-' -f1`/release/bl31.bin $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/bl31.bin; \
-	$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ clean; \
-	if [ `echo $(2) | cut -d '-' -f2` = "ddr4" ]; then \
-		$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ SOC=iMX8MN  flash_ddr4_evk || exit 1; \
-		$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ SOC=iMX8MN print_fit_hab_ddr4 || exit 1; \
-	elif [ `echo $(2) | rev | cut -d '-' -f1 | rev` != "dual" ]; then \
-		$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ SOC=iMX8MN flash_spl_uboot || exit 1; \
-		$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ SOC=iMX8MN print_fit_hab || exit 1; \
-	else \
-		$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ SOC=iMX8MN flash_evk_no_hdmi_dual_bootloader || exit 1; \
-		$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ SOC=iMX8MN PRINT_FIT_HAB_OFFSET=0x0 print_fit_hab || exit 1; \
-	fi; \
-	if [ `echo $(2) | rev | cut -d '-' -f1 | rev` != "dual" ]; then \
-		cp $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/flash.bin $(UBOOT_COLLECTION)/u-boot-$(strip $(2)).imx; \
-	else \
-		cp $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/flash.bin $(UBOOT_COLLECTION)/spl-$(strip $(2)).bin; \
-		cp $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/u-boot-ivt.itb $(UBOOT_COLLECTION)/bootloader-$(strip $(2)).img; \
-	fi;
-endef
-
-
diff --git a/imx8m/evk_a100/BoardConfig.mk b/imx8m/evk_a100/BoardConfig.mk
index afd6891a..7928e742 100644
--- a/imx8m/evk_a100/BoardConfig.mk
+++ b/imx8m/evk_a100/BoardConfig.mk
@@ -3,12 +3,8 @@
 #
 
 BOARD_SOC_TYPE := IMX8MN
-<<<<<<< HEAD
 BOARD_SOM_TYPE := a100
 BOARD_TYPE := DEVBOARD
-=======
-BOARD_TYPE := EVK
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 BOARD_HAVE_VPU := false
 HAVE_FSL_IMX_GPU2D := false
 HAVE_FSL_IMX_GPU3D := true
@@ -16,10 +12,7 @@ HAVE_FSL_IMX_IPU := false
 HAVE_FSL_IMX_PXP := false
 BOARD_KERNEL_BASE := 0x40400000
 TARGET_GRALLOC_VERSION := v3
-<<<<<<< HEAD
 TARGET_HIGH_PERFORMANCE := true
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 TARGET_USES_HWC2 := true
 TARGET_HWCOMPOSER_VERSION := v2.0
 USE_OPENGL_RENDERER := true
@@ -37,20 +30,13 @@ SOONG_CONFIG_IMXPLUGIN_BOARD_VPU_ONLY = false
 # Product-specific compile-time definitions.
 #
 
-<<<<<<< HEAD
 IMX_DEVICE_PATH := device/idtech/imx8m/evk_a100
 
 include device/idtech/imx8m/BoardConfigCommon.mk
-=======
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mn
-
-include device/nxp/imx8m/BoardConfigCommon.mk
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 BUILD_TARGET_FS ?= ext4
 TARGET_USERIMAGES_USE_EXT4 := true
 
-<<<<<<< HEAD
 TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.freescale
 
 # Support gpt
@@ -70,27 +56,6 @@ else
     ADDITION_BPT_PARTITION = partition-table-28GB:device/idtech/common/partition/device-partitions-28GB-ab.bpt \
                              partition-table-dual:device/idtech/common/partition/device-partitions-14.4GB-ab-dual-bootloader.bpt \
                              partition-table-28GB-dual:device/idtech/common/partition/device-partitions-28GB-ab-dual-bootloader.bpt
-=======
-TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.nxp
-
-# Support gpt
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
-  BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab_super.bpt
-  ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab_super.bpt \
-                           partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader_super.bpt \
-                           partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader_super.bpt
-else
-  ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
-    BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab-no-product.bpt
-    ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab-no-product.bpt \
-                             partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader-no-product.bpt \
-                             partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader-no-product.bpt
-  else
-    BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab.bpt
-    ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab.bpt \
-                             partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader.bpt \
-                             partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader.bpt
->>>>>>> post_merge/android-11.0.0_1.0.0_history
   endif
 endif
 
@@ -102,40 +67,25 @@ TARGET_BOOTLOADER_BOARD_NAME := EVK
 
 USE_OPENGL_RENDERER := true
 
-<<<<<<< HEAD
 BOARD_WLAN_DEVICE            := bcmdhd
-=======
-BOARD_WLAN_DEVICE            := nxp
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 WPA_SUPPLICANT_VERSION       := VER_0_8_X
 BOARD_WPA_SUPPLICANT_DRIVER  := NL80211
 BOARD_HOSTAPD_DRIVER         := NL80211
 BOARD_HOSTAPD_PRIVATE_LIB               := lib_driver_cmd_$(BOARD_WLAN_DEVICE)
 BOARD_WPA_SUPPLICANT_PRIVATE_LIB        := lib_driver_cmd_$(BOARD_WLAN_DEVICE)
 
-<<<<<<< HEAD
 WIFI_DRIVER_FW_PATH_PARAM := "/sys/module/brcmfmac/parameters/alternative_fw_path"
 
 #BOARD_USE_SENSOR_FUSION := true
 BOARD_USE_ST_SENSOR_INPUT := true
-=======
-WIFI_HIDL_FEATURE_DUAL_INTERFACE := true
-
-BOARD_USE_SENSOR_FUSION := true
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # we don't support sparse image.
 TARGET_USERIMAGES_SPARSE_EXT_DISABLED := false
 
 BOARD_BLUETOOTH_BDROID_BUILDCFG_INCLUDE_DIR := $(IMX_DEVICE_PATH)/bluetooth
 
-<<<<<<< HEAD
 # BCM 1MW BT
 BOARD_HAVE_BLUETOOTH_BCM := true
-=======
-# NXP 8987 BT
-BOARD_HAVE_BLUETOOTH_NXP := true
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 BOARD_HAVE_USB_CAMERA := true
 BOARD_HAVE_USB_MJPEG_CAMERA := false
@@ -144,19 +94,8 @@ USE_ION_ALLOCATOR := true
 USE_GPU_ALLOCATOR := false
 
 BOARD_AVB_ENABLE := true
-<<<<<<< HEAD
 BOARD_AVB_ALGORITHM := SHA256_RSA2048
 BOARD_AVB_KEY_PATH := device/idtech/common/security/idt_testkey_rsa2048.pem
-=======
-BOARD_AVB_ALGORITHM := SHA256_RSA4096
-# The testkey_rsa4096.pem is copied from external/avb/test/data/testkey_rsa4096.pem
-BOARD_AVB_KEY_PATH := device/nxp/common/security/testkey_rsa4096.pem
-
-BOARD_AVB_BOOT_KEY_PATH := external/avb/test/data/testkey_rsa2048.pem
-BOARD_AVB_BOOT_ALGORITHM := SHA256_RSA2048
-BOARD_AVB_BOOT_ROLLBACK_INDEX_LOCATION := 2
-
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 TARGET_USES_MKE2FS := true
 
 # define frame buffer count
@@ -165,27 +104,16 @@ NUM_FRAMEBUFFER_SURFACE_BUFFERS := 3
 CMASIZE=800M
 
 # NXP default config
-<<<<<<< HEAD
 BOARD_KERNEL_CMDLINE := init=/init androidboot.console=ttymxc1 androidboot.hardware=freescale firmware_class.path=/vendor/firmware loop.max_part=7
-=======
-BOARD_KERNEL_CMDLINE := init=/init androidboot.console=ttymxc1 androidboot.hardware=nxp firmware_class.path=/vendor/firmware loop.max_part=7
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # memory config
 BOARD_KERNEL_CMDLINE += transparent_hugepage=never
 
 # display config
-<<<<<<< HEAD
 BOARD_KERNEL_CMDLINE += androidboot.lcd_density=294 androidboot.primary_display=imx-drm
 
 # wifi config
 BOARD_KERNEL_CMDLINE += androidboot.wificountrycode=CN
-=======
-BOARD_KERNEL_CMDLINE += androidboot.lcd_density=240 androidboot.primary_display=imx-drm
-
-# wifi config
-BOARD_KERNEL_CMDLINE += androidboot.wificountrycode=CN moal.mod_para=wifi_mod_para_sd8987.conf
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # low memory device build config
 ifeq ($(LOW_MEMORY),true)
@@ -194,32 +122,20 @@ else
 BOARD_KERNEL_CMDLINE += cma=$(CMASIZE)@0x400M-0xb80M
 endif
 
-<<<<<<< HEAD
-=======
-ifneq (,$(filter userdebug eng,$(TARGET_BUILD_VARIANT)))
-BOARD_KERNEL_CMDLINE += androidboot.vendor.sysrq=1
-endif
-
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 ifeq ($(TARGET_USERIMAGES_USE_UBIFS),true)
 ifeq ($(TARGET_USERIMAGES_USE_EXT4),true)
 $(error "TARGET_USERIMAGES_USE_UBIFS and TARGET_USERIMAGES_USE_EXT4 config open in same time, please only choose one target file system image")
 endif
 endif
 
-<<<<<<< HEAD
 LOWER_BOARD_TYPE  = $(shell echo $(BOARD_TYPE) | tr A-Z a-z)
 LOWER_BOARD_SOC_TYPE  = $(shell echo $(BOARD_SOC_TYPE) | tr A-Z a-z)
 BOARD_PREBUILT_DTBOIMAGE := out/target/product/evk_a100/dtbo-$(BOARD_SOM_TYPE)-$(LOWER_BOARD_TYPE).img
-=======
-BOARD_PREBUILT_DTBOIMAGE := out/target/product/evk_8mn/dtbo-imx8mn.img
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
   ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
     TARGET_BOARD_DTS_CONFIG := imx8mn-ddr4:imx8mn-ddr4-evk-no-product.dtb
   else
-<<<<<<< HEAD
     # imx8mn with MIPI-HDMI display, BCM wifi and support trusty
     TARGET_BOARD_DTS_CONFIG := imx8mn-ddr4:imx8mn-ddr4-evk.dtb
     TARGET_BOARD_DTS_CONFIG += imx8mn:imx8mn-evk.dtb
@@ -230,18 +146,6 @@ ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
     # imx8mn with MIPI panel display and BCM wifi
     TARGET_BOARD_DTS_CONFIG += imx8mn-mipi-panel:imx8mn-evk-rm67191.dtb
     # imx8mn with MIPI-HDMI display and BCM wifi and M7 image
-=======
-    # imx8mn with MIPI-HDMI display, wifi and support trusty
-    TARGET_BOARD_DTS_CONFIG := imx8mn-ddr4:imx8mn-ddr4-evk.dtb
-    TARGET_BOARD_DTS_CONFIG += imx8mn:imx8mn-evk.dtb
-    # imx8mn with MIPI panel display and wifi
-    TARGET_BOARD_DTS_CONFIG += imx8mn-ddr4-mipi-panel:imx8mn-ddr4-evk-rm67191.dtb
-    # imx8mn with MIPI-HDMI display and wifi and M7 image
-    TARGET_BOARD_DTS_CONFIG += imx8mn-ddr4-rpmsg:imx8mn-ddr4-evk-rpmsg.dtb
-    # imx8mn with MIPI panel display and wifi
-    TARGET_BOARD_DTS_CONFIG += imx8mn-mipi-panel:imx8mn-evk-rm67191.dtb
-    # imx8mn with MIPI-HDMI display and wifi and M7 image
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     TARGET_BOARD_DTS_CONFIG += imx8mn-rpmsg:imx8mn-evk-rpmsg.dtb
   endif
 else
@@ -253,24 +157,14 @@ else
 endif
 
 BOARD_SEPOLICY_DIRS := \
-<<<<<<< HEAD
        device/idtech/imx8m/sepolicy \
        $(IMX_DEVICE_PATH)/sepolicy
 
 TARGET_BOARD_KERNEL_HEADERS := device/idtech/common/kernel-headers
-=======
-       device/nxp/imx8m/sepolicy \
-       $(IMX_DEVICE_PATH)/sepolicy
-
-TARGET_BOARD_KERNEL_HEADERS := device/nxp/common/kernel-headers
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ALL_DEFAULT_INSTALLED_MODULES += $(BOARD_VENDOR_KERNEL_MODULES)
 
 BOARD_USES_METADATA_PARTITION := true
 BOARD_ROOT_EXTRA_FOLDERS += metadata
-<<<<<<< HEAD
 
 BOARD_PLAT_PRIVATE_SEPOLICY_DIR := device/idtech/imx8m/sepolicy_system/private
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/evk_a100/UbootKernelBoardConfig.mk b/imx8m/evk_a100/UbootKernelBoardConfig.mk
index 6b0cc175..c5e552f2 100644
--- a/imx8m/evk_a100/UbootKernelBoardConfig.mk
+++ b/imx8m/evk_a100/UbootKernelBoardConfig.mk
@@ -2,7 +2,6 @@
 TARGET_BOOTLOADER_POSTFIX := bin
 UBOOT_POST_PROCESS := true
 
-<<<<<<< HEAD
 # u-boot target for a100 devboard
 TARGET_BOOTLOADER_CONFIG := imx8mn-devboard:imx8mn_a100_devboard_android_defconfig
 TARGET_BOOTLOADER_CONFIG += imx8mn-devboard-dual:imx8mn_a100_devboard_android_dual_defconfig
@@ -18,25 +17,6 @@ TARGET_BOOTLOADER_CONFIG += imx8mn-devboard-evk-uuu:imx8mn_a100_devboard_android
 TARGET_KERNEL_DEFCONFIG := imx_v8_android_defconfig
 TARGET_KERNEL_ADDITION_DEFCONF := android_addition_defconfig
 TARGET_KERNEL_SECURE_DEFCONF ?= android_secure_defconfig
-=======
-# u-boot target for stand config and Trusty OS config
-TARGET_BOOTLOADER_CONFIG := imx8mn-ddr4:imx8mn_ddr4_evk_android_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mn:imx8mn_evk_android_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mn-dual:imx8mn_evk_android_dual_defconfig
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-  TARGET_BOOTLOADER_CONFIG += imx8mn-trusty:imx8mn_evk_android_trusty_defconfig
-  TARGET_BOOTLOADER_CONFIG += imx8mn-trusty-dual:imx8mn_evk_android_trusty_dual_defconfig
-  TARGET_BOOTLOADER_CONFIG += imx8mn-trusty-secure-unlock:imx8mn_evk_android_trusty_secure_unlock_defconfig
-endif
-
-# u-boot target used by uuu for imx8mn_evk
-TARGET_BOOTLOADER_CONFIG += imx8mn-ddr4-evk-uuu:imx8mn_ddr4_evk_android_uuu_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mn-evk-uuu:imx8mn_evk_android_uuu_defconfig
-
-TARGET_KERNEL_DEFCONFIG := imx_v8_android_defconfig
-
-TARGET_KERNEL_ADDITION_DEFCONF := android_addition_defconfig
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 
 # absolute path is used, not the same as relative path used in AOSP make
diff --git a/imx8m/evk_a100/android_addition_defconfig b/imx8m/evk_a100/android_addition_defconfig
index 0b69f902..af03a131 100644
--- a/imx8m/evk_a100/android_addition_defconfig
+++ b/imx8m/evk_a100/android_addition_defconfig
@@ -1,4 +1,3 @@
-<<<<<<< HEAD
 CONFIG_WLAN_VENDOR_NXP=y
 CONFIG_MXMWIFIEX=m
 CONFIG_CLD_HL_SDIO_CORE=y
@@ -250,7 +249,3 @@ CONFIG_BCM_SBA_RAID=m
 # CONFIG_MMC_SDHCI_MSM is not set
 # CONFIG_MMC_SDHI is not set
 # CONFIG_MMC_DW_EXYNOS is not set
-=======
-CONFIG_LIBNVDIMM=y
-CONFIG_OF_PMEM=y
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/evk_a100/audio_policy_configuration.xml~post_merge_android-11.0.0_1.0.0_history b/imx8m/evk_a100/audio_policy_configuration.xml~post_merge_android-11.0.0_1.0.0_history
deleted file mode 100644
index 5cfd9f4f..00000000
--- a/imx8m/evk_a100/audio_policy_configuration.xml~post_merge_android-11.0.0_1.0.0_history
+++ /dev/null
@@ -1,94 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
-<!-- Copyright (C) 2017 The Android Open Source Project
-
-     Licensed under the Apache License, Version 2.0 (the "License");
-     you may not use this file except in compliance with the License.
-     You may obtain a copy of the License at
-
-          http://www.apache.org/licenses/LICENSE-2.0
-
-     Unless required by applicable law or agreed to in writing, software
-     distributed under the License is distributed on an "AS IS" BASIS,
-     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-     See the License for the specific language governing permissions and
-     limitations under the License.
--->
-
-<audioPolicyConfiguration version="1.0" xmlns:xi="http://www.w3.org/2001/XInclude">
-    <globalConfiguration speaker_drc_enabled="true"/>
-
-    <modules>
-        <module name="primary" halVersion="2.0">
-            <attachedDevices>
-                <item>Speaker</item>
-                <item>Built-In Mic</item>
-            </attachedDevices>
-            <defaultOutputDevice>Speaker</defaultOutputDevice>
-            <mixPorts>
-                <mixPort name="primary output" role="source" flags="AUDIO_OUTPUT_FLAG_PRIMARY">
-                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
-                             samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
-                </mixPort>
-                <mixPort name="bt sco output" role="source">
-                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
-                             samplingRates="16000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
-                </mixPort>
-
-                <mixPort name="primary input" role="sink">
-                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
-                             samplingRates="8000,11025,16000,22050,24000,32000,44100,48000"
-                             channelMasks="AUDIO_CHANNEL_IN_MONO,AUDIO_CHANNEL_IN_STEREO"/>
-                </mixPort>
-            </mixPorts>
-            <devicePorts>
-                <devicePort tagName="Speaker" type="AUDIO_DEVICE_OUT_SPEAKER" role="sink" >
-                </devicePort>
-                <devicePort tagName="Wired Headphones" type="AUDIO_DEVICE_OUT_WIRED_HEADPHONE" role="sink">
-                </devicePort>
-                <devicePort tagName="BT SCO Headset" type="AUDIO_DEVICE_OUT_BLUETOOTH_SCO_HEADSET" role="sink">
-                </devicePort>
-                <devicePort tagName="BT SCO CarKit" type="AUDIO_DEVICE_OUT_BLUETOOTH_SCO_CARKIT" role="sink">
-                </devicePort>
-                <devicePort tagName="BT SCO" type="AUDIO_DEVICE_OUT_BLUETOOTH_SCO" role="sink">
-                </devicePort>
-
-                <devicePort tagName="Built-In Mic" type="AUDIO_DEVICE_IN_BUILTIN_MIC" role="source">
-                </devicePort>
-                <devicePort tagName="Spdif-In" type="AUDIO_DEVICE_IN_AUX_DIGITAL" role="source">
-                </devicePort>
-                <devicePort tagName="BT SCO Headset Mic" type="AUDIO_DEVICE_IN_BLUETOOTH_SCO_HEADSET" role="source">
-                </devicePort>
-            </devicePorts>
-            <routes>
-                <route type="mix" sink="Speaker"
-                       sources="primary output"/>
-                <route type="mix" sink="Wired Headphones"
-                       sources="primary output"/>
-                <route type="mix" sink="BT SCO Headset"
-                        sources="bt sco output"/>
-                <route type="mix" sink="BT SCO CarKit"
-                       sources="bt sco output"/>
-                <route type="mix" sink="BT SCO"
-                       sources="bt sco output"/>
-
-                <route type="mix" sink="primary input"
-                       sources="Built-In Mic,Spdif-In,BT SCO Headset Mic"/>
-            </routes>
-        </module>
-
-        <!-- A2dp Audio HAL -->
-        <xi:include href="a2dp_audio_policy_configuration.xml"/>
-
-        <!-- Usb Audio HAL -->
-        <xi:include href="usb_audio_policy_configuration.xml"/>
-
-        <!-- Remote Submix Audio HAL -->
-        <xi:include href="r_submix_audio_policy_configuration.xml"/>
-
-    </modules>
-
-    <!-- Volume section -->
-    <xi:include href="audio_policy_volumes.xml"/>
-    <xi:include href="default_volume_tables.xml"/>
-
-</audioPolicyConfiguration>
diff --git a/imx8m/evk_a100/camera_config_imx8mn.json b/imx8m/evk_a100/camera_config_imx8mn.json
index 12e760a9..b3713f24 100644
--- a/imx8m/evk_a100/camera_config_imx8mn.json
+++ b/imx8m/evk_a100/camera_config_imx8mn.json
@@ -12,7 +12,6 @@
       "camera_type": "back",
       "camera_name": "mxc-isi-cap",
       "orientation": "0",
-<<<<<<< HEAD
       "buffer_type": "dma",
       "ActiveArrayWidth": "1920",
       "ActiveArrayHeight": "1080",
@@ -29,9 +28,6 @@
       "camera_type": "front",
       "camera_name": "uvc",
       "orientation": "0",
-=======
-      "mplane": "1",
->>>>>>> post_merge/android-11.0.0_1.0.0_history
       "buffer_type": "dma",
       "ActiveArrayWidth": "1920",
       "ActiveArrayHeight": "1080",
diff --git a/imx8m/evk_a100/evk_8mn.mk~post_merge_android-11.0.0_1.0.0_history b/imx8m/evk_a100/evk_8mn.mk~post_merge_android-11.0.0_1.0.0_history
deleted file mode 100644
index 44ff7729..00000000
--- a/imx8m/evk_a100/evk_8mn.mk~post_merge_android-11.0.0_1.0.0_history
+++ /dev/null
@@ -1,379 +0,0 @@
-# This is a FSL Android Reference Design platform based on i.MX8QP ARD board
-# It will inherit from FSL core product which in turn inherit from Google generic
-
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mn
-
-# configs shared between uboot, kernel and Android rootfs
-include $(IMX_DEVICE_PATH)/SharedBoardConfig.mk
-
--include device/nxp/common/imx_path/ImxPathConfig.mk
-include device/nxp/imx8m/ProductConfigCommon.mk
-
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.nxp),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab.nxp)
-endif
-
-# Overrides
-PRODUCT_NAME := evk_8mn
-PRODUCT_DEVICE := evk_8mn
-PRODUCT_MODEL := EVK_8MN
-
-PRODUCT_FULL_TREBLE_OVERRIDE := true
-PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/power
-PRODUCT_SOONG_NAMESPACES += hardware/google/pixel
-
-#Enable this to choose 32 bit user space build
-#IMX8_BUILD_32BIT_ROOTFS := true
-
-# Enable this to support vendor boot and boot header v3, this would be a MUST for GKI
-TARGET_USE_VENDOR_BOOT ?= true
-
-#Enable this to use dynamic partitions for the readonly partitions not touched by bootloader
-TARGET_USE_DYNAMIC_PARTITIONS ?= true
-#If the device is retrofit to have dynamic partition feature, set this variable to true to build
-#the images and OTA package. Here is a demo to update 10.0.0_1.0.0 to 10.0.0_2.0.0 or higher
-TARGET_USE_RETROFIT_DYNAMIC_PARTITION ?= false
-
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
-  $(call inherit-product, $(SRC_TARGET_DIR)/product/virtual_ab_ota.mk)
-  PRODUCT_USE_DYNAMIC_PARTITIONS := true
-  BOARD_BUILD_SUPER_IMAGE_BY_DEFAULT := true
-  BOARD_SUPER_IMAGE_IN_UPDATE_PACKAGE := true
-  ifeq ($(TARGET_USE_RETROFIT_DYNAMIC_PARTITION),true)
-    PRODUCT_RETROFIT_DYNAMIC_PARTITIONS := true
-    BOARD_SUPER_PARTITION_METADATA_DEVICE := system
-    ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
-      BOARD_SUPER_PARTITION_BLOCK_DEVICES := system vendor
-      BOARD_SUPER_PARTITION_SYSTEM_DEVICE_SIZE := 2952790016
-      BOARD_SUPER_PARTITION_VENDOR_DEVICE_SIZE := 536870912
-    else
-      BOARD_SUPER_PARTITION_BLOCK_DEVICES := system vendor product
-      BOARD_SUPER_PARTITION_SYSTEM_DEVICE_SIZE := 1610612736
-      BOARD_SUPER_PARTITION_VENDOR_DEVICE_SIZE := 536870912
-      BOARD_SUPER_PARTITION_PRODUCT_DEVICE_SIZE := 1879048192
-    endif
-  endif
-endif
-
-# Include keystore attestation keys and certificates.
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
--include $(IMX_SECURITY_PATH)/attestation/imx_attestation.mk
-endif
-
-# Include Android Go config for low memory device.
-ifeq ($(LOW_MEMORY),true)
-$(call inherit-product, build/target/product/go_defaults.mk)
-endif
-
-# Copy device related config and binary to board
-PRODUCT_COPY_FILES += \
-    $(FSL_PROPRIETARY_PATH)/fsl-proprietary/mcu-sdk/imx8mn/imx8mn_mcu_demo.img:imx8mn_mcu_demo.img \
-    $(IMX_DEVICE_PATH)/app_whitelist.xml:system/etc/sysconfig/app_whitelist.xml \
-    $(IMX_DEVICE_PATH)/audio_effects.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_effects.xml \
-    $(IMX_DEVICE_PATH)/audio_policy_configuration.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
-    $(IMX_DEVICE_PATH)/usb_audio_policy_configuration-direct-output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/usb_audio_policy_configuration-direct-output.xml \
-    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.nxp \
-    $(IMX_DEVICE_PATH)/init.imx8mn.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mn.rc \
-    $(IMX_DEVICE_PATH)/init.recovery.nxp.rc:root/init.recovery.nxp.rc \
-    $(IMX_DEVICE_PATH)/early.init.cfg:$(TARGET_COPY_OUT_VENDOR)/etc/early.init.cfg \
-    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.rc \
-    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.usb.rc \
-    $(IMX_DEVICE_PATH)/required_hardware.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/required_hardware.xml \
-    $(IMX_DEVICE_PATH)/ueventd.nxp.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
-    $(LINUX_FIRMWARE_IMX_PATH)/linux-firmware-imx/firmware/sdma/sdma-imx7d.bin:$(TARGET_COPY_OUT_VENDOR)/firmware/imx/sdma/sdma-imx7d.bin \
-    device/nxp/common/init/init.insmod.sh:$(TARGET_COPY_OUT_VENDOR)/bin/init.insmod.sh \
-    device/nxp/common/wifi/p2p_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/p2p_supplicant_overlay.conf \
-    device/nxp/common/wifi/wpa_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/wpa_supplicant_overlay.conf
-
-# We load the fstab from device tree so this is not needed, but since no kernel modules are installed to vendor
-# boot ramdisk so far, we need this step to generate the vendor-ramdisk folder or build process would fail. This
-# can be deleted once we figure out what kernel modules should be put into the vendor boot ramdisk.
-ifeq ($(TARGET_USE_VENDOR_BOOT),true)
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR_RAMDISK)/first_stage_ramdisk/fstab.nxp
-endif
-
-# Audio card json
-PRODUCT_COPY_FILES += \
-    device/nxp/common/audio-json/wm8524_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/wm8524_config.json \
-    device/nxp/common/audio-json/spdif_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/spdif_config.json \
-    device/nxp/common/audio-json/micfil_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/micfil_config.json \
-    device/nxp/common/audio-json/btsco_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/btsco_config.json \
-    device/nxp/common/audio-json/readme.txt:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/readme.txt
-
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_COPY_FILES += \
-    device/nxp/common/security/rpmb_key_test.bin:rpmb_key_test.bin \
-    device/nxp/common/security/testkey_public_rsa4096.bin:testkey_public_rsa4096.bin
-endif
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mn/camera_config_imx8mn.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/camera_config_imx8mn.json
-
-# ONLY devices that meet the CDD's requirements may declare these features
-PRODUCT_COPY_FILES += \
-    frameworks/native/data/etc/android.hardware.audio.output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.audio.output.xml \
-    frameworks/native/data/etc/android.hardware.bluetooth_le.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.bluetooth_le.xml \
-    frameworks/native/data/etc/android.hardware.camera.external.xml:vendor/etc/permissions/android.hardware.camera.external.xml \
-    frameworks/native/data/etc/android.hardware.camera.front.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.front.xml \
-    frameworks/native/data/etc/android.hardware.camera.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.xml \
-    frameworks/native/data/etc/android.hardware.ethernet.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.ethernet.xml \
-    frameworks/native/data/etc/android.hardware.screen.landscape.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.screen.landscape.xml \
-    frameworks/native/data/etc/android.hardware.screen.portrait.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.screen.portrait.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.multitouch.distinct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.multitouch.distinct.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.multitouch.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.multitouch.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.xml \
-    frameworks/native/data/etc/android.hardware.usb.accessory.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.accessory.xml \
-    frameworks/native/data/etc/android.hardware.usb.host.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.host.xml \
-    frameworks/native/data/etc/android.hardware.vulkan.level-0.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.level-0.xml \
-    frameworks/native/data/etc/android.hardware.vulkan.version-1_1.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.version-1_1.xml \
-    frameworks/native/data/etc/android.software.vulkan.deqp.level-2020-03-01.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.vulkan.deqp.level-2020-03-01.xml \
-    frameworks/native/data/etc/android.hardware.wifi.direct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.direct.xml \
-    frameworks/native/data/etc/android.hardware.wifi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.xml \
-    frameworks/native/data/etc/android.hardware.wifi.passpoint.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.passpoint.xml \
-    frameworks/native/data/etc/android.software.app_widgets.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.app_widgets.xml \
-    frameworks/native/data/etc/android.software.backup.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.backup.xml \
-    frameworks/native/data/etc/android.software.device_admin.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.device_admin.xml \
-    frameworks/native/data/etc/android.software.managed_users.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.managed_users.xml \
-    frameworks/native/data/etc/android.software.midi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.midi.xml \
-    frameworks/native/data/etc/android.software.print.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.print.xml \
-    frameworks/native/data/etc/android.software.sip.voip.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.sip.voip.xml \
-    frameworks/native/data/etc/android.software.verified_boot.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.verified_boot.xml \
-    frameworks/native/data/etc/android.software.voice_recognizers.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.voice_recognizers.xml \
-    frameworks/native/data/etc/android.software.activities_on_secondary_displays.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.activities_on_secondary_displays.xml \
-    frameworks/native/data/etc/android.software.picture_in_picture.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.picture_in_picture.xml
-
-# Vendor seccomp policy files for media components:
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/seccomp/mediacodec-seccomp.policy:vendor/etc/seccomp_policy/mediacodec.policy \
-    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.base.policy:vendor/etc/seccomp_policy/codec2.vendor.base.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.ext.policy:vendor/etc/seccomp_policy/codec2.vendor.ext.policy
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mn/powerhint_imx8mn.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/powerhint_imx8mn.json
-
-# fastboot_imx_flashall scripts, fsl-sdcard-partition script uuu_imx_android_flash scripts
-PRODUCT_COPY_FILES += \
-    device/nxp/common/tools/fastboot_imx_flashall.bat:fastboot_imx_flashall.bat \
-    device/nxp/common/tools/fastboot_imx_flashall.sh:fastboot_imx_flashall.sh \
-    device/nxp/common/tools/imx-sdcard-partition.sh:imx-sdcard-partition.sh \
-    device/nxp/common/tools/uuu_imx_android_flash.bat:uuu_imx_android_flash.bat \
-    device/nxp/common/tools/uuu_imx_android_flash.sh:uuu_imx_android_flash.sh
-
-
-USE_XML_AUDIO_POLICY_CONF := 1
-
-DEVICE_PACKAGE_OVERLAYS := $(IMX_DEVICE_PATH)/overlay
-
-PRODUCT_CHARACTERISTICS := tablet
-
-PRODUCT_AAPT_CONFIG += xlarge large tvdpi hdpi xhdpi xxhdpi
-
-# GPU openCL g2d
-PRODUCT_COPY_FILES += \
-    $(IMX_PATH)/imx/opencl-2d/cl_g2d.cl:$(TARGET_COPY_OUT_VENDOR)/etc/cl_g2d.cl
-
-# HWC2 HAL
-PRODUCT_PACKAGES += \
-    android.hardware.graphics.composer@2.4-service
-
-# Charger Mode
-PRODUCT_PRODUCT_PROPERTIES += \
-    ro.charger.no_ui=false
-
-# Do not skip charger_not_need trigger by default
-PRODUCT_DEFAULT_PROPERTY_OVERRIDES += \
-    vendor.skip.charger_not_need=0
-
-# Gralloc HAL
-PRODUCT_PACKAGES += \
-    android.hardware.graphics.mapper@2.0-impl-2.1 \
-    android.hardware.graphics.allocator@2.0-impl \
-    android.hardware.graphics.allocator@2.0-service
-
-# RenderScript HAL
-PRODUCT_PACKAGES += \
-    android.hardware.renderscript@1.0-impl
-
-PRODUCT_PACKAGES += \
-    libEGL_VIVANTE \
-    libGLESv1_CM_VIVANTE \
-    libGLESv2_VIVANTE \
-    gralloc_viv.imx \
-    libGAL \
-    libGLSLC \
-    libVSC \
-    libgpuhelper \
-    libSPIRV_viv \
-    libvulkan_VIVANTE \
-    vulkan.imx \
-    libCLC \
-    libLLVM_viv \
-    libOpenCL \
-    libg2d-opencl \
-    libg2d-viv \
-    libOpenVX \
-    libOpenVXU \
-    libNNVXCBinary-evis \
-    libNNVXCBinary-evis2 \
-    libNNVXCBinary-lite \
-    libOvx12VXCBinary-evis \
-    libOvx12VXCBinary-evis2 \
-    libOvx12VXCBinary-lite \
-    libNNGPUBinary-evis \
-    libNNGPUBinary-evis2 \
-    libNNGPUBinary-lite \
-    libNNGPUBinary-ulite \
-    libNNArchPerf \
-    libarchmodelSw
-
-# Neural Network HAL and Lib
-PRODUCT_PACKAGES += \
-    libovxlib \
-    libnnrt \
-    android.hardware.neuralnetworks@1.2-service-vsi-npu-server
-
-PRODUCT_PACKAGES += \
-    android.hardware.audio@6.0-impl:32 \
-    android.hardware.audio@2.0-service \
-    android.hardware.audio.effect@6.0-impl:32 \
-    android.hardware.power@1.3-service.imx \
-    android.hardware.light@2.0-impl \
-    android.hardware.light@2.0-service \
-    android.hardware.configstore@1.1-service \
-    configstore@1.1.policy
-
-# Thermal HAL
-PRODUCT_PACKAGES += \
-    android.hardware.thermal@2.0-service.imx
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mn/thermal_info_config_imx8mn.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/thermal_info_config_imx8mn.json \
-    device/nxp/imx8m/evk_8mn/external_camera_config.xml:$(TARGET_COPY_OUT_VENDOR)/etc/external_camera_config.xml
-
-# Usb HAL
-PRODUCT_PACKAGES += \
-    android.hardware.usb@1.1-service.imx
-
-# Bluetooth HAL
-PRODUCT_PACKAGES += \
-    android.hardware.bluetooth@1.0-impl \
-    android.hardware.bluetooth@1.0-service
-
-# NXP 8987 Bluetooth vendor config
-PRODUCT_PACKAGES += \
-    bt_vendor.conf
-
-# WiFi HAL
-PRODUCT_PACKAGES += \
-    android.hardware.wifi@1.0-service \
-    wifilogd \
-    wificond
-
-# WiFi RROs
-PRODUCT_PACKAGES += \
-    WifiOverlay
-
-# NXP 8987 Wifi and Bluetooth Combo Firmware
-PRODUCT_COPY_FILES += \
-    vendor/nxp/imx-firmware/nxp/FwImage_8987/sdiouart8987_combo_v0.bin:vendor/firmware/sdiouart8987_combo_v0.bin \
-    vendor/nxp/imx-firmware/nxp/android_wifi_mod_para.conf:vendor/firmware/wifi_mod_para_sd8987.conf
-
-# Wifi regulatory
-PRODUCT_COPY_FILES += \
-    external/wireless-regdb/regulatory.db:vendor/firmware/regulatory.db \
-    external/wireless-regdb/regulatory.db.p7s:vendor/firmware/regulatory.db.p7s
-
-# Keymaster HAL
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_PACKAGES += \
-    android.hardware.keymaster@4.0-service.trusty
-endif
-
-PRODUCT_PACKAGES += \
-    android.hardware.keymaster@4.0-service-imx
-
-# DRM HAL
-TARGET_ENABLE_MEDIADRM_64 := true
-PRODUCT_PACKAGES += \
-    android.hardware.drm@1.0-impl \
-    android.hardware.drm@1.0-service
-
-# new gatekeeper HAL
-PRODUCT_PACKAGES += \
-    android.hardware.gatekeeper@1.0-service.software-imx
-
-ifneq ($(BUILD_TARGET_FS),ubifs)
-PRODUCT_PROPERTY_OVERRIDES += \
-    ro.frp.pst=/dev/block/by-name/presistdata
-endif
-
-PRODUCT_PACKAGES += \
-    DirectAudioPlayer
-
-# Tensorflow lite camera demo
-PRODUCT_PACKAGES += \
-                    tflitecamerademo
-
-# Add oem unlocking option in settings.
-PRODUCT_PROPERTY_OVERRIDES += ro.frp.pst=/dev/block/by-name/presistdata
-PRODUCT_COMPATIBLE_PROPERTY_OVERRIDE := true
-
-# Add Trusty OS backed gatekeeper and secure storage proxy
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_PACKAGES += \
-    android.hardware.gatekeeper@1.0-service.trusty \
-    storageproxyd
-endif
-
-#Dumpstate HAL 1.1 support
-PRODUCT_PACKAGES += \
-    android.hardware.dumpstate@1.1-service.imx
-
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-#Oemlock HAL 1.0 support
-PRODUCT_PACKAGES += \
-    android.hardware.oemlock@1.0-service.imx
-endif
-
-# Specify rollback index for boot and vbmeta partitions
-ifneq ($(AVB_RBINDEX),)
-BOARD_AVB_ROLLBACK_INDEX := $(AVB_RBINDEX)
-else
-BOARD_AVB_ROLLBACK_INDEX := 0
-endif
-
-ifneq ($(AVB_BOOT_RBINDEX),)
-BOARD_AVB_BOOT_ROLLBACK_INDEX := $(AVB_BOOT_RBINDEX)
-else
-BOARD_AVB_BOOT_ROLLBACK_INDEX := 0
-endif
-
-IMX-DEFAULT-G2D-LIB := libg2d-opencl
-
-ifeq ($(PREBUILT_FSL_IMX_CODEC),true)
-ifneq ($(IMX8_BUILD_32BIT_ROOTFS),true)
-INSTALL_64BIT_LIBRARY := true
-endif
--include $(FSL_CODEC_PATH)/fsl-codec/fsl-codec.mk
-endif
-
-# imx c2 codec binary
-PRODUCT_PACKAGES += \
-    c2_component_register \
-    c2_component_register_ms \
-    c2_component_register_ra
-
-# Resume on Reboot support
-PRODUCT_PACKAGES += \
-    android.hardware.rebootescrow-service.default
-
-PRODUCT_PROPERTY_OVERRIDES += \
-    ro.rebootescrow.device=/dev/block/pmem0
-
-PRODUCT_SOONG_NAMESPACES += hardware/google/camera
-PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/camera
-
-$(call  inherit-product-if-exists, vendor/nxp-private/security/nxp_security.mk)
-
-$(call inherit-product, $(SRC_TARGET_DIR)/product/emulated_storage.mk)
diff --git a/imx8m/evk_a100/init.imx8mn.rc b/imx8m/evk_a100/init.imx8mn.rc
index 8260036e..9eabc266 100755
--- a/imx8m/evk_a100/init.imx8mn.rc
+++ b/imx8m/evk_a100/init.imx8mn.rc
@@ -28,10 +28,6 @@ on property:sys.boot_completed=1
     # Set up and down limit to 200us/200us
     write /sys/devices/system/cpu/cpufreq/schedutil/up_rate_limit_us 200
     write /sys/devices/system/cpu/cpufreq/schedutil/down_rate_limit_us 200
-<<<<<<< HEAD
-=======
-    write /proc/sys/kernel/sched_util_clamp_min 512
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 on property:sys.boot_completed=1
     # update cpuset now that processors are up
@@ -48,7 +44,6 @@ on property:sys.boot_completed=1
     # system-background is for system tasks that should only run on
     # little cores, not on bigs to be used only by init
     write /dev/cpuset/system-background/cpus 0-2
-<<<<<<< HEAD
 
 on init
     #IDtech added for AB ota update bootloader
@@ -56,5 +51,3 @@ on init
     symlink   /dev/block/mmcblk2boot1p1   /dev/block/by-name/spl_b
     symlink   /dev/block/mmcblk2boot0p2   /dev/block/by-name/spl_bak_a
     symlink   /dev/block/mmcblk2boot1p2   /dev/block/by-name/spl_bak_b
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/evk_a100/init.rc b/imx8m/evk_a100/init.rc
index dd43ad3f..bd433731 100644
--- a/imx8m/evk_a100/init.rc
+++ b/imx8m/evk_a100/init.rc
@@ -1,28 +1,11 @@
 import /vendor/etc/init/hw/init.${ro.hardware}.usb.rc
 import /vendor/etc/init/hw/init.${ro.hardware}.${ro.boot.soc_type}.rc
-<<<<<<< HEAD
 import /init.idtech.rc
-=======
-
-service vendor.charger /system/bin/charger
-    class charger
-    user system
-    group system wakelock input
-    capabilities SYS_BOOT
-    file /dev/kmsg w
-    file /sys/fs/pstore/console-ramoops-0 r
-    file /sys/fs/pstore/console-ramoops r
-    file /proc/last_kmsg r
-
-on charger
-    start vendor.charger
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 on early-init
     # mount the debugfs
     mount debugfs none /sys/kernel/debug/ mode=0755
 
-<<<<<<< HEAD
     # Mount binderfs
     mkdir /dev/binderfs
     mount binder binder /dev/binderfs stats=global
@@ -39,12 +22,6 @@ on early-init
 
 on early-init
     start early_init_sh
-=======
-on early-init
-    start early_init_sh
-    # Set the host name which used in console
-    export HOSTNAME evk_8mn
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Due keymaster start very early so set prop here
     # Also gatekeeper share same role for keymaster
@@ -52,18 +29,7 @@ on early-init
     setprop ro.hardware.gatekeeper ${ro.boot.keystore}
     setprop vendor.storageproxyd ${ro.boot.keystore}
 
-<<<<<<< HEAD
 on init
-=======
-    # Use ro.boot.lcd_density to override ro.sf.lcd_density
-    setprop ro.sf.lcd_density ${ro.boot.lcd_density}
-
-# Skip charger_not_need trigger for charger mode
-on early-init && property:ro.boot.mode=charger
-    setprop vendor.skip.charger_not_need 1
-
-on init && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     start watchdogd
 
     # Support legacy paths
@@ -100,7 +66,6 @@ on init && property:vendor.skip.charger_not_need=0
     write /dev/stune/rt/schedtune.boost 50
     write /dev/stune/rt/schedtune.prefer_idle 1
 
-<<<<<<< HEAD
 on late-fs
     # Start keymaster service
     start vendor.keymaster-3-0-${ro.boot.keystore}
@@ -112,29 +77,11 @@ on late-fs && property:vendor.storageproxyd=trusty
     start vendor.oemlock-1-0
 
 on early-boot
-=======
-on late-fs && property:vendor.skip.charger_not_need=0
-    # Start keymaster/gatekeeper service
-    start vendor.gatekeeper-1-0-${ro.boot.keystore}
-    start vendor.keymaster-4-0-${ro.boot.keystore}
-    setprop vendor.powerhal.init 1
-
-    # Wait for keymaster
-    exec_start wait_for_keymaster
-
-    mount_all /vendor/etc/fstab.nxp --late
-
-on late-fs && property:vendor.storageproxyd=trusty && property:vendor.skip.charger_not_need=0
-    start vendor.oemlock-1-0
-
-on early-boot && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     # For evk_8mn, when swap used about 400M, upgrade the level.
     setprop ro.lmk.upgrade_pressure 80
     setprop ro.lmk.downgrade_pressure 95
     setprop ro.lmk.critical_upgrade true
 
-<<<<<<< HEAD
     # Set the host name which used in console
     export HOSTNAME evk_a100
 
@@ -149,16 +96,6 @@ on early-boot && property:vendor.skip.charger_not_need=0
     # fsl omx graphic manager media framework property
     setprop rw.VIDEO_RENDER_NAME video_render.surface
     setprop media.fsl_codec.flag 7
-=======
-    # Set permission for IIM node
-    symlink /dev/mxs_viim /dev/mxc_mem
-
-    setprop hwc.stretch.filter  1
-
-    # fsl omx graphic manager media framework property
-    setprop vendor.rw.VIDEO_RENDER_NAME video_render.surface
-    setprop vendor.media.fsl_codec.flag 7
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     setprop camera.disable_zsl_mode 1
 
@@ -169,7 +106,6 @@ on early-boot && property:vendor.skip.charger_not_need=0
     write /sys/block/mmcblk1/queue/read_ahead_kb 2048
     write /sys/block/mmcblk2/queue/read_ahead_kb 2048
 
-<<<<<<< HEAD
     # Set period_us for usb audio
     setprop ro.audio.usb.period_us 20000
 
@@ -192,12 +128,6 @@ on early-boot && property:vendor.skip.charger_not_need=0
 
     # prepare for ril
     setprop ro.ril.wake_lock_timeout 300
-=======
-    # Prepare for wifi
-    setprop wifi.interface wlan0
-    setprop wifi.direct.interface p2p0
-    setprop wifi.concurrent.interface wlan1
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Set tracefs permission to 755
     chmod 0755 /sys/kernel/debug/tracing
@@ -207,7 +137,6 @@ on early-boot && property:vendor.skip.charger_not_need=0
     chmod 0664 /sys/kernel/debug/sync/sw_sync
 
     # Default backlight device
-<<<<<<< HEAD
     #setprop hw.backlight.dev "32e10000.dsi_controller.0"
     setprop hw.backlight.dev "backlight"
     # Chmod/chown FSL specific sys entry
@@ -230,16 +159,6 @@ on early-boot && property:vendor.skip.charger_not_need=0
 
     # Dectect DSF streams when scanning media
     setprop ro.FSL_DSF_PARSER 1
-=======
-    setprop vendor.hw.backlight.dev "32e10000.dsi_controller.0"
-    # Chmod/chown FSL specific sys entry
-    chown system system /sys/class/backlight/32e10000.dsi_controller.0/brightness
-    chmod 0660 /sys/class/backlight/32e10000.dsi_controller.0/brightness
-
-    # Set light sensor sysfs path and light sensor threshold lux value
-    setprop ro.hardware.lightsensor "/sys/class/i2c-dev/i2c-0/device/0-0044/"
-    setprop vendor.ro.lightsensor.threshold  20
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Allow DSD file(duration larger than 10s) can play
     setprop audio.offload.min.duration.secs 10
@@ -259,10 +178,6 @@ service wpa_supplicant /vendor/bin/hw/wpa_supplicant \
     interface android.hardware.wifi.supplicant@1.0::ISupplicant default
     interface android.hardware.wifi.supplicant@1.1::ISupplicant default
     interface android.hardware.wifi.supplicant@1.2::ISupplicant default
-<<<<<<< HEAD
-=======
-    interface android.hardware.wifi.supplicant@1.3::ISupplicant default
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     class main
     socket wpa_wlan0 dgram 660 wifi wifi
     disabled
@@ -272,7 +187,6 @@ service sensor_fusion /vendor/bin/fsl_sensor_fusion
     class late_start
     seclabel u:r:sensors:s0
     user system
-<<<<<<< HEAD
     group input
     oneshot
 
@@ -282,11 +196,6 @@ service vendor.sensors-hal-1-0 /vendor/bin/hw/android.hardware.sensors@1.0-servi
     group system wakelock input root
     capabilities BLOCK_SUSPEND SYS_NICE
 
-=======
-    group system uhid
-    oneshot
-
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 # Set watchdog timer to 30 seconds and pet it every 10 seconds to get a 20 second margin
 service watchdogd /system/bin/watchdogd 10 20
     class core
@@ -340,25 +249,15 @@ service bugreport /system/bin/dumpstate -d -p -B -z \
     oneshot
     keycodes 114 115 116
 
-<<<<<<< HEAD
 on boot
-=======
-on boot && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     start audioserver
     start mediadrm
     start media
     start drm
 
-<<<<<<< HEAD
 on fs
 # mount ext4 partitions
     mount_all /vendor/etc/fstab.freescale --early
-=======
-on fs && property:vendor.skip.charger_not_need=0
-# mount ext4 partitions
-    mount_all /vendor/etc/fstab.nxp --early
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Adjust parameters for dm-verity device
     write /sys/block/dm-0/queue/read_ahead_kb 4096
@@ -366,26 +265,15 @@ on fs && property:vendor.skip.charger_not_need=0
     # Update dm-verity state and set partition.*.verified properties
     verity_update_state
 
-<<<<<<< HEAD
 on verity-logging
     exec u:r:slideshow:s0 -- /sbin/slideshow warning/verity_red_1 warning/verity_red_2
 
 on post-fs
-=======
-on verity-logging && property:vendor.skip.charger_not_need=0
-    exec u:r:slideshow:s0 -- /sbin/slideshow warning/verity_red_1 warning/verity_red_2
-
-on post-fs && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     # Set netd memlock rlimit to 8MB
     setrlimit 8 8388608 8388608
 
     # Turn on swap
-<<<<<<< HEAD
     swapon_all /vendor/etc/fstab.freescale
-=======
-    swapon_all /vendor/etc/fstab.nxp
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Swap in only 1 page at a time
     write /proc/sys/vm/page-cluster 0
@@ -394,11 +282,7 @@ on post-fs && property:vendor.skip.charger_not_need=0
     chown system system /proc/pagetypeinfo
     chmod 0440 /proc/pagetypeinfo
 
-<<<<<<< HEAD
 on post-fs-data
-=======
-on post-fs-data && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     setprop vold.post_fs_data_done 1
     # create temp node for secure storage proxy
     mkdir /data/vendor/ss 0700 system system
@@ -407,7 +291,6 @@ on post-fs-data && property:vendor.skip.charger_not_need=0
     setprop TMPDIR /data/vendor/.opencl-cache
     mkdir /data/vendor/.opencl-cache 0771 system camera
 
-<<<<<<< HEAD
 on zygote-start
     # Create the directories used by the Wireless subsystem
     mkdir /data/misc/wifi 0770 wifi wifi
@@ -419,36 +302,19 @@ on zygote-start
     chown dhcp dhcp /data/misc/dhcp
 
 service early_init_sh /vendor/bin/init.insmod.sh /vendor/etc/early.init.cfg sys.all.early_init.ready
-=======
-on zygote-start && property:vendor.skip.charger_not_need=0
-    # Create the directories used by the Wireless subsystem
-    mkdir /data/vendor/wifi 0771 wifi wifi
-    mkdir /data/vendor/wifi/wpa 0770 wifi wifi
-    mkdir /data/vendor/wifi/wpa/sockets 0770 wifi wifi
-
-service early_init_sh /vendor/bin/init.insmod.sh /vendor/etc/early.init.cfg vendor.all.early_init.ready
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     class main
     user root
     group root system
     disabled
     oneshot
 
-<<<<<<< HEAD
 on property:sys.boot_completed=1 && property:vendor.storageproxyd=trusty
-=======
-on property:sys.boot_completed=1 && property:vendor.storageproxyd=trusty && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     start storageproxyd
 
 service storageproxyd /vendor/bin/storageproxyd -p /data/vendor/ss -r /dev/mmcblk2rpmb -d /dev/trusty-ipc-dev0
    group system
 
-<<<<<<< HEAD
 on property:ro.boot.vendor.sysrq=1
-=======
-on property:ro.boot.vendor.sysrq=1 && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     write /proc/sys/kernel/sysrq 1
 
 # setenv append_bootargs androidboot.usb.debugging=1
diff --git a/imx8m/evk_a100/manifest.xml~post_merge_android-11.0.0_1.0.0_history b/imx8m/evk_a100/manifest.xml~post_merge_android-11.0.0_1.0.0_history
deleted file mode 100644
index 378c5e1e..00000000
--- a/imx8m/evk_a100/manifest.xml~post_merge_android-11.0.0_1.0.0_history
+++ /dev/null
@@ -1,171 +0,0 @@
-<manifest version="1.0" type="device" target-level="4">
-    <kernel  target-level="5" />
-    <hal format="hidl">
-	<name>android.hardware.graphics.allocator</name>
-        <transport>hwbinder</transport>
-	<impl level="generic"></impl>
-	<version>2.0</version>
-	<interface>
-	    <name>IAllocator</name>
-	    <instance>default</instance>
-	</interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.graphics.composer</name>
-        <transport>hwbinder</transport>
-        <version>2.4</version>
-        <interface>
-            <name>IComposer</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.keymaster</name>
-        <transport>hwbinder</transport>
-        <version>4.0</version>
-        <interface>
-            <name>IKeymasterDevice</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.drm</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>ICryptoFactory</name>
-            <instance>default</instance>
-        </interface>
-        <interface>
-            <name>IDrmFactory</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.gatekeeper</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IGatekeeper</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.graphics.mapper</name>
-        <transport arch="32+64">passthrough</transport>
-        <impl level="generic"></impl>
-        <version>2.1</version>
-        <interface>
-            <name>IMapper</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.renderscript</name>
-        <transport arch="32+64">passthrough</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IDevice</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.configstore</name>
-        <transport>hwbinder</transport>
-        <version>1.1</version>
-        <interface>
-            <name>ISurfaceFlingerConfigs</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.media.c2</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IComponentStore</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.media.omx</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IOmx</name>
-            <instance>default</instance>
-        </interface>
-        <interface>
-            <name>IOmxStore</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.light</name>
-        <transport>hwbinder</transport>
-        <version>2.0</version>
-        <interface>
-            <name>ILight</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.memtrack</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IMemtrack</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.audio</name>
-        <transport>hwbinder</transport>
-        <version>6.0</version>
-        <interface>
-            <name>IDevicesFactory</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.audio.effect</name>
-        <transport>hwbinder</transport>
-		<version>6.0</version>
-        <interface>
-            <name>IEffectsFactory</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.bluetooth</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IBluetoothHci</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.dumpstate</name>
-        <transport>hwbinder</transport>
-        <version>1.1</version>
-        <interface>
-            <name>IDumpstateDevice</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>nxp.hardware.display</name>
-            <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IDisplay</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-       <name>android.hardware.camera.provider</name>
-       <transport>hwbinder</transport>
-       <fqname>@2.4::ICameraProvider/external/0</fqname>
-    </hal>
-</manifest>
diff --git a/imx8m/evk_a200/AndroidBoard.mk b/imx8m/evk_a200/AndroidBoard.mk
index 9cce37db..a6a92de5 100644
--- a/imx8m/evk_a200/AndroidBoard.mk
+++ b/imx8m/evk_a200/AndroidBoard.mk
@@ -1,6 +1,5 @@
 LOCAL_PATH := $(call my-dir)
 
-<<<<<<< HEAD
 include device/idtech/common/build/dtbo.mk
 include device/idtech/common/build/imx-recovery.mk
 include device/idtech/common/build/gpt.mk
@@ -8,12 +7,3 @@ include device/idtech/common/build/userdata.mk
 #TODO add imx8mp target
 include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/media-profile/media-profile.mk
 include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/sensor/fsl-sensor.mk
-=======
-include device/nxp/common/build/dtbo.mk
-include device/nxp/common/build/imx-recovery.mk
-include device/nxp/common/build/gpt.mk
-#TODO add imx8mp target
-include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/media-profile/media-profile.mk
-include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/sensor/fsl-sensor.mk
--include $(IMX_MEDIA_CODEC_XML_PATH)/mediacodec-profile/mediacodec-profile.mk
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/evk_a200/AndroidUboot.mk b/imx8m/evk_a200/AndroidUboot.mk
index 8c590eeb..9405e681 100644
--- a/imx8m/evk_a200/AndroidUboot.mk
+++ b/imx8m/evk_a200/AndroidUboot.mk
@@ -16,11 +16,7 @@ define build_imx_uboot
 	cp $(UBOOT_OUT)/arch/arm/dts/imx8mp-evk.dtb $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
 	cp $(FSL_PROPRIETARY_PATH)/linux-firmware-imx/firmware/ddr/synopsys/lpddr4_pmu_train* $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
 	$(MAKE) -C $(IMX_PATH)/arm-trusted-firmware/ PLAT=`echo $(2) | cut -d '-' -f1` clean; \
-<<<<<<< HEAD
 	if [ `echo $(2) | cut -d '-' -f3` = "trusty" ]; then \
-=======
-	if [ `echo $(2) | cut -d '-' -f2` = "trusty" ]; then \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 		cp $(FSL_PROPRIETARY_PATH)/fsl-proprietary/uboot-firmware/imx8m/tee-imx8mp.bin $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/tee.bin; \
 		$(MAKE) -C $(IMX_PATH)/arm-trusted-firmware/ CROSS_COMPILE="$(ATF_CROSS_COMPILE)" PLAT=`echo $(2) | cut -d '-' -f1` bl31 -B SPD=trusty 1>/dev/null || exit 1; \
 	else \
diff --git a/imx8m/evk_a200/BoardConfig.mk b/imx8m/evk_a200/BoardConfig.mk
index c6699ccd..e272cdae 100644
--- a/imx8m/evk_a200/BoardConfig.mk
+++ b/imx8m/evk_a200/BoardConfig.mk
@@ -3,12 +3,8 @@
 #
 
 BOARD_SOC_TYPE := IMX8MP
-<<<<<<< HEAD
 BOARD_SOM_TYPE := a200
 BOARD_TYPE := DEVBOARD
-=======
-BOARD_TYPE := EVK
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 BOARD_HAVE_VPU := true
 BOARD_VPU_TYPE := hantro
 HAVE_FSL_IMX_GPU2D := false
@@ -17,10 +13,7 @@ HAVE_FSL_IMX_IPU := false
 HAVE_FSL_IMX_PXP := false
 BOARD_KERNEL_BASE := 0x40400000
 TARGET_GRALLOC_VERSION := v3
-<<<<<<< HEAD
 TARGET_HIGH_PERFORMANCE := true
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 TARGET_USES_HWC2 := true
 TARGET_HWCOMPOSER_VERSION := v2.0
 USE_OPENGL_RENDERER := true
@@ -40,20 +33,13 @@ SOONG_CONFIG_IMXPLUGIN_BOARD_VPU_ONLY = false
 # Product-specific compile-time definitions.
 #
 
-<<<<<<< HEAD
 IMX_DEVICE_PATH := device/idtech/imx8m/evk_a200
 
 include device/idtech/imx8m/BoardConfigCommon.mk
-=======
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mp
-
-include device/nxp/imx8m/BoardConfigCommon.mk
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 BUILD_TARGET_FS ?= ext4
 TARGET_USERIMAGES_USE_EXT4 := true
 
-<<<<<<< HEAD
 TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.freescale
 
 # Support gpt
@@ -73,27 +59,6 @@ else
     ADDITION_BPT_PARTITION = partition-table-28GB:device/idtech/common/partition/device-partitions-28GB-ab.bpt \
                              partition-table-dual:device/idtech/common/partition/device-partitions-14.4GB-ab-dual-bootloader.bpt \
                              partition-table-28GB-dual:device/idtech/common/partition/device-partitions-28GB-ab-dual-bootloader.bpt
-=======
-TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.nxp
-
-# Support gpt
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
-  BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab_super.bpt
-  ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab_super.bpt \
-                           partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader_super.bpt \
-                           partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader_super.bpt
-else
-  ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
-    BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab-no-product.bpt
-    ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab-no-product.bpt \
-                             partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader-no-product.bpt \
-                             partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader-no-product.bpt
-  else
-    BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab.bpt
-    ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab.bpt \
-                             partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader.bpt \
-                             partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader.bpt
->>>>>>> post_merge/android-11.0.0_1.0.0_history
   endif
 endif
 
@@ -121,12 +86,8 @@ BOARD_HAVE_BLUETOOTH_NXP := true
 # NXP 8997 BT
 BOARD_HAVE_BLUETOOTH_NXP := true
 
-<<<<<<< HEAD
 #BOARD_USE_SENSOR_FUSION := true
 BOARD_USE_ST_SENSOR_INPUT := true
-=======
-BOARD_USE_SENSOR_FUSION := true
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # we don't support sparse image.
 TARGET_USERIMAGES_SPARSE_EXT_DISABLED := false
@@ -140,19 +101,8 @@ USE_ION_ALLOCATOR := true
 USE_GPU_ALLOCATOR := false
 
 BOARD_AVB_ENABLE := true
-<<<<<<< HEAD
 BOARD_AVB_ALGORITHM := SHA256_RSA2048
 BOARD_AVB_KEY_PATH := device/idtech/common/security/idt_testkey_rsa2048.pem
-=======
-BOARD_AVB_ALGORITHM := SHA256_RSA4096
-# The testkey_rsa4096.pem is copied from external/avb/test/data/testkey_rsa4096.pem
-BOARD_AVB_KEY_PATH := device/nxp/common/security/testkey_rsa4096.pem
-
-BOARD_AVB_BOOT_KEY_PATH := external/avb/test/data/testkey_rsa2048.pem
-BOARD_AVB_BOOT_ALGORITHM := SHA256_RSA2048
-BOARD_AVB_BOOT_ROLLBACK_INDEX_LOCATION := 2
-
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 TARGET_USES_MKE2FS := true
 
 # define frame buffer count
@@ -160,28 +110,16 @@ NUM_FRAMEBUFFER_SURFACE_BUFFERS := 3
 
 CMASIZE=800M
 # NXP default config
-<<<<<<< HEAD
 BOARD_KERNEL_CMDLINE := init=/init androidboot.console=ttymxc1 androidboot.hardware=freescale firmware_class.path=/vendor/firmware loop.max_part=7
 
 # memory config
 BOARD_KERNEL_CMDLINE += transparent_hugepage=never
-=======
-BOARD_KERNEL_CMDLINE := init=/init androidboot.console=ttymxc1 androidboot.hardware=nxp firmware_class.path=/vendor/firmware loop.max_part=7
-
-# memory config
-BOARD_KERNEL_CMDLINE += transparent_hugepage=never
-BOARD_KERNEL_CMDLINE += swiotlb=65536
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # display config
 BOARD_KERNEL_CMDLINE += androidboot.lcd_density=240 androidboot.primary_display=imx-drm
 
 # wifi config
-<<<<<<< HEAD
 BOARD_KERNEL_CMDLINE += androidboot.wificountrycode=CN
-=======
-BOARD_KERNEL_CMDLINE += androidboot.wificountrycode=CN moal.mod_para=wifi_mod_para.conf
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # low memory device build config
 ifeq ($(LOW_MEMORY),true)
@@ -190,26 +128,15 @@ else
 BOARD_KERNEL_CMDLINE += cma=$(CMASIZE)@0x400M-0xb80M
 endif
 
-<<<<<<< HEAD
-=======
-ifneq (,$(filter userdebug eng,$(TARGET_BUILD_VARIANT)))
-BOARD_KERNEL_CMDLINE += androidboot.vendor.sysrq=1
-endif
-
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 ifeq ($(TARGET_USERIMAGES_USE_UBIFS),true)
 ifeq ($(TARGET_USERIMAGES_USE_EXT4),true)
 $(error "TARGET_USERIMAGES_USE_UBIFS and TARGET_USERIMAGES_USE_EXT4 config open in same time, please only choose one target file system image")
 endif
 endif
 
-<<<<<<< HEAD
 LOWER_BOARD_TYPE  = $(shell echo $(BOARD_TYPE) | tr A-Z a-z)
 LOWER_BOARD_SOC_TYPE  = $(shell echo $(BOARD_SOC_TYPE) | tr A-Z a-z)
 BOARD_PREBUILT_DTBOIMAGE := out/target/product/evk_a200/dtbo-$(BOARD_SOM_TYPE)-$(LOWER_BOARD_TYPE).img
-=======
-BOARD_PREBUILT_DTBOIMAGE := out/target/product/evk_8mp/dtbo-imx8mp.img
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
   ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
@@ -239,17 +166,10 @@ else # no dynamic parition feature
 endif
 
 BOARD_SEPOLICY_DIRS := \
-<<<<<<< HEAD
        device/idtech/imx8m/sepolicy \
        $(IMX_DEVICE_PATH)/sepolicy
 
 TARGET_BOARD_KERNEL_HEADERS := device/idtech/common/kernel-headers
-=======
-       device/nxp/imx8m/sepolicy \
-       $(IMX_DEVICE_PATH)/sepolicy
-
-TARGET_BOARD_KERNEL_HEADERS := device/nxp/common/kernel-headers
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ALL_DEFAULT_INSTALLED_MODULES += $(BOARD_VENDOR_KERNEL_MODULES)
 
diff --git a/imx8m/evk_a200/UbootKernelBoardConfig.mk b/imx8m/evk_a200/UbootKernelBoardConfig.mk
index 4a574b37..e65f2311 100644
--- a/imx8m/evk_a200/UbootKernelBoardConfig.mk
+++ b/imx8m/evk_a200/UbootKernelBoardConfig.mk
@@ -3,7 +3,6 @@ TARGET_BOOTLOADER_POSTFIX := bin
 UBOOT_POST_PROCESS := true
 
 # u-boot target
-<<<<<<< HEAD
 TARGET_BOOTLOADER_CONFIG := imx8mp-devboard:imx8mp_a200_devboard_android_defconfig
 TARGET_BOOTLOADER_CONFIG += imx8mp-devboard-trusty:imx8mp_a200_devboard_android_trusty_defconfig
 TARGET_BOOTLOADER_CONFIG += imx8mp-devboard-trusty-secure-unlock:imx8mp_a200_devboard_android_trusty_secure_unlock_defconfig
@@ -15,23 +14,6 @@ TARGET_KERNEL_DEFCONFIG := imx_v8_android_defconfig
 
 TARGET_KERNEL_ADDITION_DEFCONF := android_addition_defconfig
 TARGET_KERNEL_SECURE_DEFCONF ?= android_secure_defconfig
-=======
-TARGET_BOOTLOADER_CONFIG := imx8mp:imx8mp_evk_android_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mp-trusty:imx8mp_evk_android_trusty_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mp-trusty-secure-unlock:imx8mp_evk_android_trusty_secure_unlock_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mp-dual:imx8mp_evk_android_dual_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mp-trusty-dual:imx8mp_evk_android_trusty_dual_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mp-evk-uuu:imx8mp_evk_android_uuu_defconfig
-
-ifneq ($(IMX8MP_USES_GKI),)
-TARGET_KERNEL_DEFCONFIG := gki_defconfig
-TARGET_KERNEL_GKI_DEFCONF:= android_gki_defconfig
-else
-TARGET_KERNEL_DEFCONFIG := imx_v8_android_defconfig
-endif
-
-TARGET_KERNEL_ADDITION_DEFCONF := android_addition_defconfig
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 
 # absolute path is used, not the same as relative path used in AOSP make
diff --git a/imx8m/evk_a200/android_addition_defconfig b/imx8m/evk_a200/android_addition_defconfig
index d0547c3b..92a37046 100644
--- a/imx8m/evk_a200/android_addition_defconfig
+++ b/imx8m/evk_a200/android_addition_defconfig
@@ -1,4 +1,3 @@
-<<<<<<< HEAD
 CONFIG_CLD_HL_SDIO_CORE=y
 CONFIG_IDG_SPI=y
 # CONFIG_USB_NET_QMI_WWAN is not set
@@ -249,7 +248,3 @@ CONFIG_BCM_SBA_RAID=m
 # CONFIG_MMC_SDHCI_MSM is not set
 # CONFIG_MMC_SDHI is not set
 # CONFIG_MMC_DW_EXYNOS is not set
-=======
-CONFIG_LIBNVDIMM=y
-CONFIG_OF_PMEM=y
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/evk_a200/audio_policy_configuration.xml b/imx8m/evk_a200/audio_policy_configuration.xml
index a32492cf..250131bf 100644
--- a/imx8m/evk_a200/audio_policy_configuration.xml
+++ b/imx8m/evk_a200/audio_policy_configuration.xml
@@ -29,7 +29,6 @@
                     <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
                              samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
                 </mixPort>
-<<<<<<< HEAD
                 <mixPort name="esai output" role="source" flags="AUDIO_OUTPUT_FLAG_DIRECT|AUDIO_OUTPUT_FLAG_HW_AV_SYNC">
                     <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
                              samplingRates="48000,96000,192000,384000,768000"
@@ -41,11 +40,6 @@
                 <mixPort name="dsd output" role="source" flags="AUDIO_OUTPUT_FLAG_DIRECT|AUDIO_OUTPUT_FLAG_COMPRESS_OFFLOAD">
                     <profile name="" format="AUDIO_FORMAT_DSD"
                              samplingRates="2822400,5644800,11289600,22579200" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
-=======
-                <mixPort name="lpa output" role="source" flags="AUDIO_OUTPUT_FLAG_DIRECT|AUDIO_OUTPUT_FLAG_HW_AV_SYNC">
-                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
-                             samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
                 </mixPort>
                 <mixPort name="hdmi output" role="source">
                     <profile name="" format="AUDIO_FORMAT_PCM_8_24_BIT"
@@ -92,19 +86,11 @@
                 <route type="mix" sink="Speaker"
                        sources="primary output"/>
                 <route type="mix" sink="Wired Headphones"
-<<<<<<< HEAD
                        sources="dsd output,esai output,primary output"/>
                 <route type="mix" sink="Wired Headset"
                        sources="dsd output,esai output,primary output"/>
                 <route type="mix" sink="Line-Out"
                        sources="dsd output,esai output,primary output"/>
-=======
-                       sources="primary output"/>
-                <route type="mix" sink="Wired Headset"
-                       sources="primary output"/>
-                <route type="mix" sink="Line-Out"
-                       sources="lpa output,primary output"/>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
                 <route type="mix" sink="HDMI Out"
                        sources="hdmi output"/>
                 <route type="mix" sink="BT SCO Headset"
diff --git a/imx8m/evk_a200/camera_config_imx8mp.json b/imx8m/evk_a200/camera_config_imx8mp.json
index 04f5d0e4..5c4aa5b6 100644
--- a/imx8m/evk_a200/camera_config_imx8mp.json
+++ b/imx8m/evk_a200/camera_config_imx8mp.json
@@ -29,10 +29,6 @@
       "camera_type": "front",
       "camera_name": "mxc-isi-cap",
       "orientation": "0",
-<<<<<<< HEAD
-=======
-      "mplane": "1",
->>>>>>> post_merge/android-11.0.0_1.0.0_history
       "buffer_type": "dma",
       "ActiveArrayWidth": "2592",
       "ActiveArrayHeight": "1944",
diff --git a/imx8m/evk_a200/init.imx8mp.rc b/imx8m/evk_a200/init.imx8mp.rc
index 821f2815..2f28d0ea 100755
--- a/imx8m/evk_a200/init.imx8mp.rc
+++ b/imx8m/evk_a200/init.imx8mp.rc
@@ -25,10 +25,6 @@ on property:sys.boot_completed=1
     # Set up and down limit to 200us/200us
     write /sys/devices/system/cpu/cpufreq/schedutil/up_rate_limit_us 200
     write /sys/devices/system/cpu/cpufreq/schedutil/down_rate_limit_us 200
-<<<<<<< HEAD
-=======
-    write /proc/sys/kernel/sched_util_clamp_min 512
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 on property:sys.boot_completed=1
     # update cpuset now that processors are up
@@ -53,7 +49,6 @@ on early-boot
 service isp_media_server /vendor/bin/isp_media_server /vendor/etc/configs/isp/daA3840_30mc_1080P.json
     group camera
     oneshot
-<<<<<<< HEAD
 
 on init
     #IDtech added for AB ota update bootloader
@@ -61,5 +56,3 @@ on init
     symlink   /dev/block/mmcblk2boot1p1   /dev/block/by-name/spl_b
     symlink   /dev/block/mmcblk2boot0p2   /dev/block/by-name/spl_bak_a
     symlink   /dev/block/mmcblk2boot1p2   /dev/block/by-name/spl_bak_b
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/evk_a200/init.rc~post_merge_android-11.0.0_1.0.0_history b/imx8m/evk_a200/init.rc~post_merge_android-11.0.0_1.0.0_history
deleted file mode 100644
index 7f43e9a5..00000000
--- a/imx8m/evk_a200/init.rc~post_merge_android-11.0.0_1.0.0_history
+++ /dev/null
@@ -1,288 +0,0 @@
-import /vendor/etc/init/hw/init.${ro.hardware}.usb.rc
-import /vendor/etc/init/hw/init.${ro.hardware}.${ro.boot.soc_type}.rc
-
-service vendor.charger /system/bin/charger
-    class charger
-    user system
-    group system wakelock input
-    capabilities SYS_BOOT
-    file /dev/kmsg w
-    file /sys/fs/pstore/console-ramoops-0 r
-    file /sys/fs/pstore/console-ramoops r
-    file /proc/last_kmsg r
-
-on charger
-    start vendor.charger
-
-on early-init
-    # mount the debugfs
-    mount debugfs none /sys/kernel/debug/ mode=0755
-
-on early-init
-    start early_init_sh
-    # Set the host name which used in console
-    export HOSTNAME evk_8mp
-
-    # Due keymaster start very early so set prop here
-    # Also gatekeeper share same role for keymaster
-    setprop ro.hardware.keystore ${ro.boot.keystore}
-    setprop ro.hardware.gatekeeper ${ro.boot.keystore}
-    setprop vendor.storageproxyd ${ro.boot.keystore}
-
-    # Use ro.boot.lcd_density to override ro.sf.lcd_density
-    setprop ro.sf.lcd_density ${ro.boot.lcd_density}
-
-# Skip charger_not_need trigger for charger mode
-on early-init && property:ro.boot.mode=charger
-    setprop vendor.skip.charger_not_need 1
-
-on init && property:vendor.skip.charger_not_need=0
-    start watchdogd
-
-    # Support legacy paths
-    symlink /sdcard /mnt/sdcard
-    symlink /sdcard /storage/sdcard0
-
-    # setup the global environment
-    export CORE_REGISTER_FILE /vendor/etc/core_register
-    export COMPONENT_REGISTER_FILE /vendor/etc/component_register
-    export CONTENTPIPE_REGISTER_FILE /vendor/etc/contentpipe_register
-
-    # disable cursor blink for fbcon, if no splash screen support
-    write /sys/class/graphics/fbcon/cursor_blink 0
-
-    # deattch the fbcon as hdmi hotplug conflict with fbcon
-    write /sys/class/vtconsole/vtcon1/bind 0
-
-    chown system system /dev/stune/top-app/schedtune.boost
-    chmod 664 /dev/stune/top-app/schedtune.boost
-    chown system system /dev/stune/top-app/schedtune.prefer_idle
-    chmod 664 /dev/stune/top-app/schedtune.prefer_idle
-    chown system system /dev/stune/foreground/schedtune.boost
-    chmod 664 /dev/stune/foreground/schedtune.boost
-    chown system system /dev/stune/foreground/schedtune.prefer_idle
-    chmod 664 /dev/stune/foreground/schedtune.prefer_idle
-    chown system system /dev/stune/schedtune.boost
-    chmod 664 /dev/stune/schedtune.boost
-
-    # set default schedTune value for foreground/top-app (only affects EAS)
-    write /dev/stune/foreground/schedtune.boost 10
-    write /dev/stune/foreground/schedtune.prefer_idle 1
-    write /dev/stune/top-app/schedtune.boost 40
-    write /dev/stune/top-app/schedtune.prefer_idle 1
-    write /dev/stune/rt/schedtune.boost 50
-    write /dev/stune/rt/schedtune.prefer_idle 1
-
-on late-fs && property:vendor.skip.charger_not_need=0
-    # Start keymaster/gatekeeper service
-    start vendor.gatekeeper-1-0-${ro.boot.keystore}
-    start vendor.keymaster-4-0-${ro.boot.keystore}
-    setprop vendor.powerhal.init 1
-
-    # Wait for keymaster
-    exec_start wait_for_keymaster
-
-    mount_all /vendor/etc/fstab.nxp --late
-
-on late-fs && property:vendor.storageproxyd=trusty && property:vendor.skip.charger_not_need=0
-    start vendor.oemlock-1-0
-
-on early-boot && property:vendor.skip.charger_not_need=0
-    # For evk_8mp, when swap used about 400M, upgrade the level.
-    setprop ro.lmk.upgrade_pressure 93
-    setprop ro.lmk.downgrade_pressure 99
-    setprop ro.lmk.critical_upgrade true
-
-    # Set permission for IIM node
-    symlink /dev/mxs_viim /dev/mxc_mem
-
-    setprop hwc.stretch.filter  1
-
-    # Default g2d [dpu|pxp|viv] lib to be used
-    setprop vendor.imx.default-g2d viv
-
-    # fsl omx graphic manager media framework property
-    setprop vendor.rw.VIDEO_RENDER_NAME video_render.surface
-    setprop vendor.media.fsl_codec.flag 7
-
-    setprop camera.disable_zsl_mode 1
-
-    #Enable GPU 2D do CSC on imx8mp platform
-    setprop vendor.camera.2d.enable true
-
-   # Tweak the mmc device read ahead buffer size
-    write /sys/block/mmcblk1/queue/read_ahead_kb 2048
-    write /sys/block/mmcblk2/queue/read_ahead_kb 2048
-
-    # Prepare for wifi
-    setprop wifi.interface wlan0
-    setprop wifi.direct.interface p2p0
-    setprop wifi.concurrent.interface wlan1
-
-    # Set tracefs permission to 755
-    chmod 0755 /sys/kernel/debug/tracing
-
-    # Set sw_sync group to graphics and set permission to 664
-    chown root graphics /sys/kernel/debug/sync/sw_sync
-    chmod 0664 /sys/kernel/debug/sync/sw_sync
-
-    # Default backlight device
-    setprop vendor.hw.backlight.dev "32e60000.mipi_dsi.0"
-    # Chmod/chown FSL specific sys entry
-    chown system system /sys/class/backlight/32e60000.mipi_dsi.0/brightness
-    chmod 0660 /sys/class/backlight/32e60000.mipi_dsi.0/brightness
-
-    # Set light sensor sysfs path and light sensor threshold lux value
-    setprop ro.hardware.lightsensor "/sys/class/i2c-dev/i2c-0/device/0-0044/"
-    setprop vendor.ro.lightsensor.threshold  20
-
-    # Allow DSD file(duration larger than 10s) can play
-    setprop audio.offload.min.duration.secs 10
-
-    # Enlarge limition of audio buffer allocation
-    setprop ro.af.client_heap_size_kbyte 32768
-
-    # enlarge media max memory size to 3G.
-    setprop ro.media.maxmem 3221225471
-
-    start vendor.wifi_hal_legacy
-
-service wpa_supplicant /vendor/bin/hw/wpa_supplicant \
-    -O/data/vendor/wifi/wpa/sockets -puse_p2p_group_interface=1 \
-    -g@android:wpa_wlan0
-    interface android.hardware.wifi.supplicant@1.0::ISupplicant default
-    interface android.hardware.wifi.supplicant@1.1::ISupplicant default
-    interface android.hardware.wifi.supplicant@1.2::ISupplicant default
-    interface android.hardware.wifi.supplicant@1.3::ISupplicant default
-    class main
-    socket wpa_wlan0 dgram 660 wifi wifi
-    disabled
-    oneshot
-
-service sensor_fusion /vendor/bin/fsl_sensor_fusion
-    class late_start
-    seclabel u:r:sensors:s0
-    user system
-    group system uhid
-    oneshot
-
-# Set watchdog timer to 30 seconds and pet it every 10 seconds to get a 20 second margin
-service watchdogd /system/bin/watchdogd 10 20
-    class core
-    seclabel u:r:watchdogd:s0
-
-service dhcpcd_wlan0 /system/bin/dhcpcd -aABDKL
-    class main
-    disabled
-    oneshot
-
-service dhcpcd_p2p /system/bin/dhcpcd -aABKL
-    class main
-    disabled
-    oneshot
-
-service dhcpcd_eth0 /system/bin/dhcpcd -ABKL eth0
-    class main
-    disabled
-    oneshot
-
-service dhcpcd_bt-pan /system/bin/dhcpcd -ABKL
-    class main
-    disabled
-    oneshot
-
-service iprenew_wlan0 /system/bin/dhcpcd -n
-    class main
-    disabled
-    oneshot
-
-service iprenew_p2p /system/bin/dhcpcd -n
-    class main
-    disabled
-    oneshot
-
-service iprenew_eth0 /system/bin/dhcpcd -n eth0
-    class main
-    disabled
-    oneshot
-
-service iprenew_bt-pan /system/bin/dhcpcd -n
-    class main
-    disabled
-    oneshot
-
-# bugreport is triggered by holding down volume down, volume up and power
-service bugreport /system/bin/dumpstate -d -p -B -z \
-        -o /data/user_de/0/com.android.shell/files/bugreports/bugreport
-    class main
-    disabled
-    oneshot
-    keycodes 114 115 116
-
-on boot && property:vendor.skip.charger_not_need=0
-    start audioserver
-    start mediadrm
-    start media
-    start drm
-
-on fs && property:vendor.skip.charger_not_need=0
-# mount ext4 partitions
-    mount_all /vendor/etc/fstab.nxp --early
-
-    # Adjust parameters for dm-verity device
-    write /sys/block/dm-0/queue/read_ahead_kb 4096
-
-    # Update dm-verity state and set partition.*.verified properties
-    verity_update_state
-
-on verity-logging && property:vendor.skip.charger_not_need=0
-    exec u:r:slideshow:s0 -- /sbin/slideshow warning/verity_red_1 warning/verity_red_2
-
-on post-fs && property:vendor.skip.charger_not_need=0
-    # Set netd memlock rlimit to 8MB
-    setrlimit 8 8388608 8388608
-
-    # Turn on swap
-    swapon_all /vendor/etc/fstab.nxp
-
-    # Swap in only 1 page at a time
-    write /proc/sys/vm/page-cluster 0
-
-    # Grant permission for fetching available_pages info of statsd
-    chown system system /proc/pagetypeinfo
-    chmod 0440 /proc/pagetypeinfo
-
-on post-fs-data && property:vendor.skip.charger_not_need=0
-    setprop vold.post_fs_data_done 1
-    # create temp node for secure storage proxy
-    mkdir /data/vendor/ss 0700 system system
-
-    # tmp dir for opencl Compiler
-    setprop TMPDIR /data/vendor/.opencl-cache
-    mkdir /data/vendor/.opencl-cache 0771 system camera
-
-on zygote-start && property:vendor.skip.charger_not_need=0
-    # Create the directories used by the Wireless subsystem
-    mkdir /data/vendor/wifi 0771 wifi wifi
-    mkdir /data/vendor/wifi/wpa 0770 wifi wifi
-    mkdir /data/vendor/wifi/wpa/sockets 0770 wifi wifi
-
-service early_init_sh /vendor/bin/init.insmod.sh /vendor/etc/early.init.cfg vendor.all.early_init.ready
-    class main
-    user root
-    group root system
-    disabled
-    oneshot
-
-on property:sys.boot_completed=1 && property:vendor.storageproxyd=trusty && property:vendor.skip.charger_not_need=0
-    start storageproxyd
-
-service storageproxyd /vendor/bin/storageproxyd -p /data/vendor/ss -r /dev/mmcblk2rpmb -d /dev/trusty-ipc-dev0
-   group system
-
-on property:ro.boot.vendor.sysrq=1 && property:vendor.skip.charger_not_need=0
-    write /proc/sys/kernel/sysrq 1
-
-# setenv append_bootargs androidboot.usb.debugging=1
-on property:ro.boot.usb.debugging=1
-    setprop persist.sys.usb.config adb
diff --git a/imx8m/evk_a200/manifest.xml~post_merge_android-11.0.0_1.0.0_history b/imx8m/evk_a200/manifest.xml~post_merge_android-11.0.0_1.0.0_history
deleted file mode 100644
index db1a8ec0..00000000
--- a/imx8m/evk_a200/manifest.xml~post_merge_android-11.0.0_1.0.0_history
+++ /dev/null
@@ -1,173 +0,0 @@
-<manifest version="1.0" type="device" target-level="4">
-    <kernel  target-level="5" />
-    <hal format="hidl">
-	<name>android.hardware.graphics.allocator</name>
-        <transport>hwbinder</transport>
-	<impl level="generic"></impl>
-	<version>2.0</version>
-	<interface>
-	    <name>IAllocator</name>
-	    <instance>default</instance>
-	</interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.graphics.composer</name>
-        <transport>hwbinder</transport>
-        <version>2.4</version>
-        <interface>
-            <name>IComposer</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.keymaster</name>
-        <transport>hwbinder</transport>
-        <version>4.0</version>
-        <interface>
-            <name>IKeymasterDevice</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.drm</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>ICryptoFactory</name>
-            <instance>default</instance>
-        </interface>
-        <interface>
-            <name>IDrmFactory</name>
-            <instance>default</instance>
-        </interface>
-        <fqname>@1.3::ICryptoFactory/clearkey</fqname>
-        <fqname>@1.3::IDrmFactory/clearkey</fqname>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.gatekeeper</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IGatekeeper</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.graphics.mapper</name>
-        <transport arch="32+64">passthrough</transport>
-        <impl level="generic"></impl>
-        <version>2.1</version>
-        <interface>
-            <name>IMapper</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.renderscript</name>
-        <transport arch="32+64">passthrough</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IDevice</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.configstore</name>
-        <transport>hwbinder</transport>
-        <version>1.1</version>
-        <interface>
-            <name>ISurfaceFlingerConfigs</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.media.c2</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IComponentStore</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.media.omx</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IOmx</name>
-            <instance>default</instance>
-        </interface>
-        <interface>
-            <name>IOmxStore</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.light</name>
-        <transport>hwbinder</transport>
-        <version>2.0</version>
-        <interface>
-            <name>ILight</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.memtrack</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IMemtrack</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.audio</name>
-        <transport>hwbinder</transport>
-        <version>6.0</version>
-        <interface>
-            <name>IDevicesFactory</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.audio.effect</name>
-        <transport>hwbinder</transport>
-		<version>6.0</version>
-        <interface>
-            <name>IEffectsFactory</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.bluetooth</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IBluetoothHci</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.dumpstate</name>
-        <transport>hwbinder</transport>
-        <version>1.1</version>
-        <interface>
-            <name>IDumpstateDevice</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>nxp.hardware.display</name>
-            <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IDisplay</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-       <name>android.hardware.camera.provider</name>
-       <transport>hwbinder</transport>
-       <fqname>@2.4::ICameraProvider/external/0</fqname>
-    </hal>
-</manifest>
diff --git a/imx8m/evk_a300/AndroidBoard.mk b/imx8m/evk_a300/AndroidBoard.mk
index dcb09302..97d97bf5 100644
--- a/imx8m/evk_a300/AndroidBoard.mk
+++ b/imx8m/evk_a300/AndroidBoard.mk
@@ -1,17 +1,8 @@
 LOCAL_PATH := $(call my-dir)
 
-<<<<<<< HEAD
 include device/idtech/common/build/dtbo.mk
 include device/idtech/common/build/imx-recovery.mk
 include device/idtech/common/build/gpt.mk
 include device/idtech/common/build/userdata.mk
 include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/media-profile/media-profile.mk
 include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/sensor/fsl-sensor.mk
-=======
-include device/nxp/common/build/dtbo.mk
-include device/nxp/common/build/imx-recovery.mk
-include device/nxp/common/build/gpt.mk
-include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/media-profile/media-profile.mk
-include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/sensor/fsl-sensor.mk
--include $(IMX_MEDIA_CODEC_XML_PATH)/mediacodec-profile/mediacodec-profile.mk
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/evk_a300/AndroidTee.mk~post_merge_android-11.0.0_1.0.0_history b/imx8m/evk_a300/AndroidTee.mk~post_merge_android-11.0.0_1.0.0_history
deleted file mode 100644
index 21ba9b56..00000000
--- a/imx8m/evk_a300/AndroidTee.mk~post_merge_android-11.0.0_1.0.0_history
+++ /dev/null
@@ -1,13 +0,0 @@
-# uboot.imx in android combine scfw.bin and uboot.bin
-MAKE += SHELL=/bin/bash
-
-define build_uboot_w_tee
-	$(MAKE) -C bootable/bootloader/arm-trusted-firmware/ -B CROSS_COMPILE=aarch64-linux-android- PLAT=imx8mq V=1 SPD=opteed DECRYPTED_BUFFER_START=$(DECRYPTED_BUFFER_START) DECRYPTED_BUFFER_LEN=$(DECRYPTED_BUFFER_LEN) DECODED_BUFFER_START=$(DECODED_BUFFER_START) DECODED_BUFFER_LEN=$(DECODED_BUFFER_LEN) bl31; \
-	cp bootable/bootloader/arm-trusted-firmware/build/imx8mq/release/bl31.bin $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.;\
-	aarch64-linux-android-objcopy -O binary out/target/product/evk_8mq/optee/arm-plat-imx/core/tee.elf $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/tee.bin; \
-	$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ clean; \
-	$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ SOC=iMX8M  flash_hdmi_spl_uboot; \
-	cp $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/flash.bin $(PRODUCT_OUT)/u-boot-$(strip $(2)).imx;
-endef
-
-
diff --git a/imx8m/evk_a300/AndroidUboot.mk b/imx8m/evk_a300/AndroidUboot.mk
index cfea5dfc..06a2fe2a 100644
--- a/imx8m/evk_a300/AndroidUboot.mk
+++ b/imx8m/evk_a300/AndroidUboot.mk
@@ -17,11 +17,7 @@ define build_imx_uboot
 	cp $(FSL_PROPRIETARY_PATH)/linux-firmware-imx/firmware/hdmi/cadence/signed_hdmi_imx8m.bin  $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
 	cp $(FSL_PROPRIETARY_PATH)/linux-firmware-imx/firmware/ddr/synopsys/lpddr4_pmu_train* $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
 	$(MAKE) -C $(IMX_PATH)/arm-trusted-firmware/ PLAT=`echo $(2) | cut -d '-' -f1` clean; \
-<<<<<<< HEAD
 	if [ `echo $(2) | cut -d '-' -f3` = "trusty" ] && [ `echo $(2) | rev | cut -d '-' -f1` != "uuu" ]; then \
-=======
-	if [ `echo $(2) | cut -d '-' -f2` = "trusty" ] && [ `echo $(2) | rev | cut -d '-' -f1` != "uuu" ]; then \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 		cp $(FSL_PROPRIETARY_PATH)/fsl-proprietary/uboot-firmware/imx8m/tee-imx8mq.bin $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/tee.bin; \
 		$(MAKE) -C $(IMX_PATH)/arm-trusted-firmware/ CROSS_COMPILE="$(ATF_CROSS_COMPILE)" PLAT=`echo $(2) | cut -d '-' -f1` bl31 -B SPD=trusty 1>/dev/null || exit 1; \
 	else \
@@ -41,7 +37,6 @@ define build_imx_uboot
 	fi; \
 	if [ `echo $(2) | rev | cut -d '-' -f1 | rev` != "dual" ]; then \
 		cp $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/flash.bin $(UBOOT_COLLECTION)/u-boot-$(strip $(2)).imx; \
-<<<<<<< HEAD
 		if [ -f device/idtech/common/prebuilts/spl_tab_auxiliary.img ]; then \
 			dd if=device/idtech/common/prebuilts/spl_tab_auxiliary.img of=$(UBOOT_COLLECTION)/u-boot-$(strip $(2)).imx bs=1 seek=105984 conv=notrunc; \
 		fi; \
@@ -51,11 +46,6 @@ define build_imx_uboot
 		if [ -f device/idtech/common/prebuilts/spl_tab_auxiliary.img ]; then \
 			dd if=device/idtech/common/prebuilts/spl_tab_auxiliary.img of=$(UBOOT_COLLECTION)/spl-$(strip $(2)).bin bs=1 seek=105984 conv=notrunc; \
 		fi; \
-=======
-	else \
-		cp $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/flash.bin $(UBOOT_COLLECTION)/spl-$(strip $(2)).bin; \
-		cp $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/u-boot-ivt.itb $(UBOOT_COLLECTION)/bootloader-$(strip $(2)).img; \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 	fi;
 endef
 
diff --git a/imx8m/evk_a300/BoardConfig.mk b/imx8m/evk_a300/BoardConfig.mk
index 59b6873e..ef38ed59 100644
--- a/imx8m/evk_a300/BoardConfig.mk
+++ b/imx8m/evk_a300/BoardConfig.mk
@@ -3,12 +3,8 @@
 #
 
 BOARD_SOC_TYPE := IMX8MQ
-<<<<<<< HEAD
 BOARD_SOM_TYPE := a300
 BOARD_TYPE := DEVBOARD
-=======
-BOARD_TYPE := EVK
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 BOARD_HAVE_VPU := true
 BOARD_VPU_TYPE := hantro
 HAVE_FSL_IMX_GPU2D := false
@@ -17,10 +13,7 @@ HAVE_FSL_IMX_IPU := false
 HAVE_FSL_IMX_PXP := false
 BOARD_KERNEL_BASE := 0x40400000
 TARGET_GRALLOC_VERSION := v3
-<<<<<<< HEAD
 TARGET_HIGH_PERFORMANCE := true
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 TARGET_USES_HWC2 := true
 TARGET_HWCOMPOSER_VERSION := v2.0
 USE_OPENGL_RENDERER := true
@@ -40,20 +33,13 @@ SOONG_CONFIG_IMXPLUGIN_BOARD_VPU_ONLY = false
 # Product-specific compile-time definitions.
 #
 
-<<<<<<< HEAD
 IMX_DEVICE_PATH := device/idtech/imx8m/evk_a300
 
 include device/idtech/imx8m/BoardConfigCommon.mk
-=======
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mq
-
-include device/nxp/imx8m/BoardConfigCommon.mk
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 BUILD_TARGET_FS ?= ext4
 TARGET_USERIMAGES_USE_EXT4 := true
 
-<<<<<<< HEAD
 TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.freescale
 
 # Support gpt
@@ -73,27 +59,6 @@ else
     ADDITION_BPT_PARTITION = partition-table-28GB:device/idtech/common/partition/device-partitions-28GB-ab.bpt \
                              partition-table-dual:device/idtech/common/partition/device-partitions-14.4GB-ab-dual-bootloader.bpt \
                              partition-table-28GB-dual:device/idtech/common/partition/device-partitions-28GB-ab-dual-bootloader.bpt
-=======
-TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.nxp
-
-# Support gpt
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
-  BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab_super.bpt
-  ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab_super.bpt \
-                           partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader_super.bpt \
-                           partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader_super.bpt
-else
-  ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
-    BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab-no-product.bpt
-    ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab-no-product.bpt \
-                             partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader-no-product.bpt \
-                             partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader-no-product.bpt
-  else
-    BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab.bpt
-    ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab.bpt \
-                             partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader.bpt \
-                             partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader.bpt
->>>>>>> post_merge/android-11.0.0_1.0.0_history
   endif
 endif
 
@@ -105,18 +70,13 @@ TARGET_BOOTLOADER_BOARD_NAME := EVK
 
 USE_OPENGL_RENDERER := true
 
-<<<<<<< HEAD
 BOARD_WLAN_DEVICE            := bcmdhd
-=======
-BOARD_WLAN_DEVICE            := nxp
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 WPA_SUPPLICANT_VERSION       := VER_0_8_X
 BOARD_WPA_SUPPLICANT_DRIVER  := NL80211
 BOARD_HOSTAPD_DRIVER         := NL80211
 BOARD_HOSTAPD_PRIVATE_LIB           := lib_driver_cmd_$(BOARD_WLAN_DEVICE)
 BOARD_WPA_SUPPLICANT_PRIVATE_LIB    := lib_driver_cmd_$(BOARD_WLAN_DEVICE)
 
-<<<<<<< HEAD
 WIFI_DRIVER_FW_PATH_PARAM := "/sys/module/brcmfmac/parameters/alternative_fw_path"
 
 #WIFI_HIDL_FEATURE_DUAL_INTERFACE := true
@@ -128,16 +88,6 @@ BOARD_HAVE_BLUETOOTH_BCM := true
 
 #BOARD_USE_SENSOR_FUSION := true
 BOARD_USE_ST_SENSOR_INPUT := true
-=======
-WIFI_HIDL_FEATURE_DUAL_INTERFACE := true
-
-BOARD_BLUETOOTH_BDROID_BUILDCFG_INCLUDE_DIR := $(IMX_DEVICE_PATH)/bluetooth
-
-# NXP 8997 BT
-BOARD_HAVE_BLUETOOTH_NXP := true
-
-BOARD_USE_SENSOR_FUSION := true
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # we don't support sparse image.
 TARGET_USERIMAGES_SPARSE_EXT_DISABLED := false
@@ -150,18 +100,8 @@ USE_GPU_ALLOCATOR := false
 
 BOARD_AVB_ENABLE := true
 TARGET_USES_MKE2FS := true
-<<<<<<< HEAD
 BOARD_AVB_ALGORITHM := SHA256_RSA2048
 BOARD_AVB_KEY_PATH := device/idtech/common/security/idt_testkey_rsa2048.pem
-=======
-BOARD_AVB_ALGORITHM := SHA256_RSA4096
-# The testkey_rsa4096.pem is copied from external/avb/test/data/testkey_rsa4096.pem
-BOARD_AVB_KEY_PATH := device/nxp/common/security/testkey_rsa4096.pem
-
-BOARD_AVB_BOOT_KEY_PATH := external/avb/test/data/testkey_rsa2048.pem
-BOARD_AVB_BOOT_ALGORITHM := SHA256_RSA2048
-BOARD_AVB_BOOT_ROLLBACK_INDEX_LOCATION := 2
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # define frame buffer count
 NUM_FRAMEBUFFER_SURFACE_BUFFERS := 3
@@ -169,19 +109,11 @@ NUM_FRAMEBUFFER_SURFACE_BUFFERS := 3
 ifeq ($(PRODUCT_IMX_DRM),true)
 CMASIZE=736M
 else
-<<<<<<< HEAD
 CMASIZE=800M
 endif
 
 # NXP default config
 BOARD_KERNEL_CMDLINE := init=/init androidboot.console=ttymxc0 androidboot.hardware=freescale firmware_class.path=/vendor/firmware loop.max_part=7
-=======
-CMASIZE=1280M
-endif
-
-# NXP default config
-BOARD_KERNEL_CMDLINE := init=/init androidboot.console=ttymxc0 androidboot.hardware=nxp firmware_class.path=/vendor/firmware loop.max_part=7
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # framebuffer config
 BOARD_KERNEL_CMDLINE += androidboot.fbTileSupport=enable
@@ -190,21 +122,10 @@ BOARD_KERNEL_CMDLINE += androidboot.fbTileSupport=enable
 BOARD_KERNEL_CMDLINE += transparent_hugepage=never cma=$(CMASIZE)
 
 # display config
-<<<<<<< HEAD
 BOARD_KERNEL_CMDLINE += androidboot.lcd_density=240 androidboot.primary_display=mxsfb-drm androidboot.gui_resolution=1080p
 
 # wifi config
 BOARD_KERNEL_CMDLINE += androidboot.wificountrycode=CN
-=======
-BOARD_KERNEL_CMDLINE += androidboot.lcd_density=240 androidboot.primary_display=imx-dcss androidboot.gui_resolution=1080p
-
-# wifi config
-BOARD_KERNEL_CMDLINE += androidboot.wificountrycode=CN moal.mod_para=wifi_mod_para.conf
-
-ifneq (,$(filter userdebug eng,$(TARGET_BUILD_VARIANT)))
-BOARD_KERNEL_CMDLINE += androidboot.vendor.sysrq=1
-endif
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ifeq ($(TARGET_USERIMAGES_USE_UBIFS),true)
 ifeq ($(TARGET_USERIMAGES_USE_EXT4),true)
@@ -212,13 +133,9 @@ $(error "TARGET_USERIMAGES_USE_UBIFS and TARGET_USERIMAGES_USE_EXT4 config open
 endif
 endif
 
-<<<<<<< HEAD
 LOWER_BOARD_TYPE  = $(shell echo $(BOARD_TYPE) | tr A-Z a-z)
 LOWER_BOARD_SOC_TYPE  = $(shell echo $(BOARD_SOC_TYPE) | tr A-Z a-z)
 BOARD_PREBUILT_DTBOIMAGE := out/target/product/evk_a300/dtbo-$(BOARD_SOM_TYPE)-$(LOWER_BOARD_TYPE).img
-=======
-BOARD_PREBUILT_DTBOIMAGE := out/target/product/evk_8mq/dtbo-imx8mq.img
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
   ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
     TARGET_BOARD_DTS_CONFIG ?= imx8mq:imx8mq-evk-no-product.dtb
@@ -236,20 +153,12 @@ else # no dynamic parition feature
   ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
     TARGET_BOARD_DTS_CONFIG ?= imx8mq:imx8mq-evk-no-product-no-dynamic_partition.dtb
   else
-<<<<<<< HEAD
     TARGET_BOARD_DTS_CONFIG ?= imx8mq:imx8mq-evk-no-dynamic_partition.dtb
-=======
-	TARGET_BOARD_DTS_CONFIG ?= imx8mq:imx8mq-evk-no-dynamic_partition.dtb
->>>>>>> post_merge/android-11.0.0_1.0.0_history
   endif
 endif
 
 BOARD_SEPOLICY_DIRS := \
-<<<<<<< HEAD
        device/idtech/imx8m/sepolicy \
-=======
-       device/nxp/imx8m/sepolicy \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
        $(IMX_DEVICE_PATH)/sepolicy
 
 ifeq ($(PRODUCT_IMX_DRM),true)
@@ -257,20 +166,13 @@ BOARD_SEPOLICY_DIRS += \
        $(IMX_DEVICE_PATH)/sepolicy_drm
 endif
 
-<<<<<<< HEAD
 TARGET_BOARD_KERNEL_HEADERS := device/idtech/common/kernel-headers
-=======
-TARGET_BOARD_KERNEL_HEADERS := device/nxp/common/kernel-headers
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ALL_DEFAULT_INSTALLED_MODULES += $(BOARD_VENDOR_KERNEL_MODULES)
 
 BOARD_USES_METADATA_PARTITION := true
 BOARD_ROOT_EXTRA_FOLDERS += metadata
-<<<<<<< HEAD
 
 BOARD_PLAT_PRIVATE_SEPOLICY_DIR := device/idtech/imx8m/sepolicy_system/private
 
 AB_OTA_PARTITIONS += spl_bak
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/evk_a300/UbootKernelBoardConfig.mk b/imx8m/evk_a300/UbootKernelBoardConfig.mk
index 7d204ffb..1914ad3b 100644
--- a/imx8m/evk_a300/UbootKernelBoardConfig.mk
+++ b/imx8m/evk_a300/UbootKernelBoardConfig.mk
@@ -2,7 +2,6 @@ TARGET_BOOTLOADER_POSTFIX := bin
 UBOOT_POST_PROCESS := true
 
 # u-boot target for imx8mq_evk
-<<<<<<< HEAD
 TARGET_BOOTLOADER_CONFIG := imx8mq-devboard:imx8mq_a300_devboard_android_defconfig
 TARGET_BOOTLOADER_CONFIG += imx8mq-devboard-dual:imx8mq_a300_devboard_android_dual_defconfig
 ifeq ($(PRODUCT_IMX_TRUSTY),true)
@@ -17,21 +16,6 @@ TARGET_BOOTLOADER_CONFIG += imx8mq-devboard-evk-uuu:imx8mq_a300_devboard_android
 TARGET_KERNEL_DEFCONFIG := imx_v8_android_defconfig
 TARGET_KERNEL_ADDITION_DEFCONF ?= android_addition_defconfig
 TARGET_KERNEL_SECURE_DEFCONF ?= android_secure_defconfig
-=======
-TARGET_BOOTLOADER_CONFIG := imx8mq:imx8mq_evk_android_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mq-dual:imx8mq_evk_android_dual_defconfig
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-  TARGET_BOOTLOADER_CONFIG += imx8mq-trusty:imx8mq_evk_android_trusty_defconfig
-  TARGET_BOOTLOADER_CONFIG += imx8mq-trusty-secure-unlock:imx8mq_evk_android_trusty_secure_unlock_defconfig
-  TARGET_BOOTLOADER_CONFIG += imx8mq-trusty-dual:imx8mq_evk_android_trusty_dual_defconfig
-endif
-
-# u-boot target used by uuu for imx8mq_evk
-TARGET_BOOTLOADER_CONFIG += imx8mq-evk-uuu:imx8mq_evk_android_uuu_defconfig
-
-TARGET_KERNEL_DEFCONFIG := imx_v8_android_defconfig
-# TARGET_KERNEL_ADDITION_DEFCONF ?= android_addition_defconfig
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 
 # absolute path is used, not the same as relative path used in AOSP make
diff --git a/imx8m/evk_a300/audio_policy_configuration.xml b/imx8m/evk_a300/audio_policy_configuration.xml
index eeb06531..ec5349e6 100644
--- a/imx8m/evk_a300/audio_policy_configuration.xml
+++ b/imx8m/evk_a300/audio_policy_configuration.xml
@@ -21,18 +21,12 @@
         <module name="primary" halVersion="2.0">
             <attachedDevices>
                 <item>Speaker</item>
-<<<<<<< HEAD
                 <item>Wired Headphones</item>
                 <item>Built-In Mic</item>
                 <item>Wired-In Headsets</item>
             </attachedDevices>
             <defaultOutputDevice>Wired Headphones</defaultOutputDevice>
             <defaultInputDevice>Wired-In Headsets</defaultInputDevice>
-=======
-                <item>Built-In Mic</item>
-            </attachedDevices>
-            <defaultOutputDevice>Speaker</defaultOutputDevice>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
             <mixPorts>
                 <mixPort name="primary output" role="source" flags="AUDIO_OUTPUT_FLAG_PRIMARY">
                     <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
@@ -82,11 +76,8 @@
                 </devicePort>
                 <devicePort tagName="BT SCO Headset Mic" type="AUDIO_DEVICE_IN_BLUETOOTH_SCO_HEADSET" role="source">
                 </devicePort>
-<<<<<<< HEAD
                 <devicePort tagName="Wired-In Headsets" type="AUDIO_DEVICE_IN_WIRED_HEADSET" role="source">
                 </devicePort>
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
             </devicePorts>
             <routes>
                 <route type="mix" sink="Speaker"
@@ -103,11 +94,7 @@
                        sources="bt sco output"/>
 
                 <route type="mix" sink="primary input"
-<<<<<<< HEAD
                        sources="Wired-In Headsets,Built-In Mic,Spdif-In,BT SCO Headset Mic"/>
-=======
-                       sources="Built-In Mic,Spdif-In,BT SCO Headset Mic"/>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
             </routes>
         </module>
 
diff --git a/imx8m/evk_a300/camera_config_imx8mq.json~post_merge_android-11.0.0_1.0.0_history b/imx8m/evk_a300/camera_config_imx8mq.json~post_merge_android-11.0.0_1.0.0_history
deleted file mode 100644
index 49b57dee..00000000
--- a/imx8m/evk_a300/camera_config_imx8mq.json~post_merge_android-11.0.0_1.0.0_history
+++ /dev/null
@@ -1,40 +0,0 @@
-{
-  "__readme": [
-    "Basic Camera HAL v3 configuration."
-  ],
-
-  "hal_version": "3",
-  "cam_blit_copy": "GPU_3D",
-  "cam_blit_csc": "CPU",
-
-  "camera_metadata": [
-    {
-      "camera_type": "back",
-      "camera_name": "mx6s-csi",
-      "orientation": "0",
-      "buffer_type": "mmap",
-      "ActiveArrayWidth": "2592",
-      "ActiveArrayHeight": "1944",
-      "PixelArrayWidth": "2592",
-      "PixelArrayHeight": "1944",
-      "PhysicalWidth": "3.6288",
-      "PhysicalHeight": "2.7216",
-      "FocalLength": "3.37",
-      "MaxJpegSize": "8388608",
-      "MinFrameDuration": "33331760",
-      "MaxFrameDuration": "300000000",
-      "OmitFrame": [
-          {
-              "width": "2592",
-              "height": "1944",
-              "omit_num": "3"
-          },
-          {
-              "width": "1920",
-              "height": "1080",
-              "omit_num": "2"
-          }
-      ]
-    }
-  ]
-}
diff --git a/imx8m/evk_a300/init.imx8mq.rc b/imx8m/evk_a300/init.imx8mq.rc
index 745af310..038c07d6 100755
--- a/imx8m/evk_a300/init.imx8mq.rc
+++ b/imx8m/evk_a300/init.imx8mq.rc
@@ -28,10 +28,6 @@ on property:sys.boot_completed=1
     # Set up and down limit to 200us/200us
     write /sys/devices/system/cpu/cpufreq/schedutil/up_rate_limit_us 200
     write /sys/devices/system/cpu/cpufreq/schedutil/down_rate_limit_us 200
-<<<<<<< HEAD
-=======
-    write /proc/sys/kernel/sched_util_clamp_min 512
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 on property:sys.boot_completed=1
     # update cpuset now that processors are up
@@ -48,7 +44,6 @@ on property:sys.boot_completed=1
     # system-background is for system tasks that should only run on
     # little cores, not on bigs to be used only by init
     write /dev/cpuset/system-background/cpus 0-2
-<<<<<<< HEAD
 
 on init
     #IDtech added for AB ota update bootloader
@@ -56,5 +51,3 @@ on init
     symlink   /dev/block/mmcblk0boot1p1   /dev/block/by-name/spl_b
     symlink   /dev/block/mmcblk0boot0p2   /dev/block/by-name/spl_bak_a
     symlink   /dev/block/mmcblk0boot1p2   /dev/block/by-name/spl_bak_b
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/evk_a300/init.rc b/imx8m/evk_a300/init.rc
index 32e70f2e..f482abf0 100644
--- a/imx8m/evk_a300/init.rc
+++ b/imx8m/evk_a300/init.rc
@@ -1,28 +1,11 @@
 import /vendor/etc/init/hw/init.${ro.hardware}.usb.rc
 import /vendor/etc/init/hw/init.${ro.hardware}.${ro.boot.soc_type}.rc
-<<<<<<< HEAD
 import /init.idtech.rc
-=======
-
-service vendor.charger /system/bin/charger
-    class charger
-    user system
-    group system wakelock input
-    capabilities SYS_BOOT
-    file /dev/kmsg w
-    file /sys/fs/pstore/console-ramoops-0 r
-    file /sys/fs/pstore/console-ramoops r
-    file /proc/last_kmsg r
-
-on charger
-    start vendor.charger
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 on early-init
     # mount the debugfs
     mount debugfs none /sys/kernel/debug/ mode=0755
 
-<<<<<<< HEAD
     # Mount binderfs
     mkdir /dev/binderfs
     mount binder binder /dev/binderfs stats=global
@@ -39,12 +22,6 @@ on early-init
 
 on early-init
     start early_init_sh
-=======
-on early-init
-    start early_init_sh
-    # Set the host name which used in console
-    export HOSTNAME evk_8mq
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Due keymaster start very early so set prop here
     # Also gatekeeper share same role for keymaster
@@ -52,18 +29,7 @@ on early-init
     setprop ro.hardware.gatekeeper ${ro.boot.keystore}
     setprop vendor.storageproxyd ${ro.boot.keystore}
 
-<<<<<<< HEAD
 on init
-=======
-    # Use ro.boot.lcd_density to override ro.sf.lcd_density
-    setprop ro.sf.lcd_density ${ro.boot.lcd_density}
-
-# Skip charger_not_need trigger for charger mode
-on early-init && property:ro.boot.mode=charger
-    setprop vendor.skip.charger_not_need 1
-
-on init && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     start watchdogd
 
     # Support legacy paths
@@ -100,7 +66,6 @@ on init && property:vendor.skip.charger_not_need=0
     write /dev/stune/rt/schedtune.boost 50
     write /dev/stune/rt/schedtune.prefer_idle 1
 
-<<<<<<< HEAD
 on late-fs
     # Start keymaster service
     start vendor.keymaster-3-0-${ro.boot.keystore}
@@ -112,29 +77,11 @@ on late-fs && property:vendor.storageproxyd=trusty
     start vendor.oemlock-1-0
 
 on early-boot
-=======
-on late-fs && property:vendor.skip.charger_not_need=0
-    # Start keymaster/gatekeeper service
-    start vendor.gatekeeper-1-0-${ro.boot.keystore}
-    start vendor.keymaster-4-0-${ro.boot.keystore}
-    setprop vendor.powerhal.init 1
-
-    # Wait for keymaster
-    exec_start wait_for_keymaster
-
-    mount_all /vendor/etc/fstab.nxp --late
-
-on late-fs && property:vendor.storageproxyd=trusty && property:vendor.skip.charger_not_need=0
-    start vendor.oemlock-1-0
-
-on early-boot && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     # For evk_8mq, when swap used about 400M, upgrade the level.
     setprop ro.lmk.upgrade_pressure 87
     setprop ro.lmk.downgrade_pressure 95
     setprop ro.lmk.critical_upgrade true
 
-<<<<<<< HEAD
     # Set the host name which used in console
     export HOSTNAME evk_a300
 
@@ -144,11 +91,6 @@ on early-boot && property:vendor.skip.charger_not_need=0
     # Enable Tethering in the Settings
     setprop ro.tether.denied false
 
-=======
-    # Set permission for IIM node
-    symlink /dev/mxs_viim /dev/mxc_mem
-
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     setprop sys.hwc.disable     1
     setprop vendor.2d.composition 0
     setprop hwc.stretch.filter  1
@@ -157,7 +99,6 @@ on early-boot && property:vendor.skip.charger_not_need=0
     setprop VIVANTE_SDK_DIR /vendor/etc/viv_sdk
 
     # fsl omx graphic manager media framework property
-<<<<<<< HEAD
     setprop rw.VIDEO_RENDER_NAME video_render.surface
     setprop media.fsl_codec.flag 7
 
@@ -166,18 +107,11 @@ on early-boot && property:vendor.skip.charger_not_need=0
     setprop back_camera_orient 0
     setprop front_camera_name mx6s-csi1
     setprop front_camera_orient 0
-=======
-    setprop vendor.rw.VIDEO_RENDER_NAME video_render.surface
-    setprop vendor.media.fsl_codec.flag 7
-
-    setprop camera.disable_zsl_mode 1
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
    # Tweak the mmc device read ahead buffer size
     write /sys/block/mmcblk0/queue/read_ahead_kb 2048
     write /sys/block/mmcblk1/queue/read_ahead_kb 2048
 
-<<<<<<< HEAD
     # Set period_us for usb audio
     setprop ro.audio.usb.period_us 20000
 
@@ -199,12 +133,6 @@ on early-boot && property:vendor.skip.charger_not_need=0
 
     # Use ro.boot.lcd_density to override ro.sf.lcd_density
     setprop ro.sf.lcd_density ${ro.boot.lcd_density}
-=======
-    # Prepare for wifi
-    setprop wifi.interface wlan0
-    setprop wifi.direct.interface p2p0
-    setprop wifi.concurrent.interface wlan1
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Disable surfaceflinger back pressure propagate
     setprop debug.sf.disable_backpressure 1
@@ -217,7 +145,6 @@ on early-boot && property:vendor.skip.charger_not_need=0
     chmod 0664 /sys/kernel/debug/sync/sw_sync
 
     # Default backlight device
-<<<<<<< HEAD
     #setprop hw.backlight.dev "30a00000.mipi_dsi.0"
     # Chmod/chown FSL specific sys entry
     #chown system system /sys/class/backlight/30a00000.mipi_dsi.0/brightness
@@ -240,16 +167,6 @@ on early-boot && property:vendor.skip.charger_not_need=0
 
     # Dectect DSF streams when scanning media
     setprop ro.FSL_DSF_PARSER 1
-=======
-    setprop vendor.hw.backlight.dev "30a00000.mipi_dsi.0"
-    # Chmod/chown FSL specific sys entry
-    chown system system /sys/class/backlight/30a00000.mipi_dsi.0/brightness
-    chmod 0660 /sys/class/backlight/30a00000.mipi_dsi.0/brightness
-
-    # Set light sensor sysfs path and light sensor threshold lux value
-    setprop ro.hardware.lightsensor "/sys/class/i2c-dev/i2c-0/device/0-0044/"
-    setprop vendor.ro.lightsensor.threshold  20
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Allow DSD file(duration larger than 10s) can play
     setprop audio.offload.min.duration.secs 10
@@ -260,14 +177,10 @@ on early-boot && property:vendor.skip.charger_not_need=0
     # enlarge media max memory size to 3G.
     setprop ro.media.maxmem 3221225471
 
-<<<<<<< HEAD
     setprop wifi.direct.interface p2p-dev-wlan0
     start vendor.wifi_hal_legacy
 
 on boot
-=======
-on boot && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     start audioserver
     start mediadrm
     start media
@@ -279,10 +192,6 @@ service wpa_supplicant /vendor/bin/hw/wpa_supplicant \
     interface android.hardware.wifi.supplicant@1.0::ISupplicant default
     interface android.hardware.wifi.supplicant@1.1::ISupplicant default
     interface android.hardware.wifi.supplicant@1.2::ISupplicant default
-<<<<<<< HEAD
-=======
-    interface android.hardware.wifi.supplicant@1.3::ISupplicant default
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     class main
     socket wpa_wlan0 dgram 660 wifi wifi
     disabled
@@ -292,7 +201,6 @@ service sensor_fusion /vendor/bin/fsl_sensor_fusion
     class late_start
     seclabel u:r:sensors:s0
     user system
-<<<<<<< HEAD
     group input
     oneshot
 
@@ -302,11 +210,6 @@ service vendor.sensors-hal-1-0 /vendor/bin/hw/android.hardware.sensors@1.0-servi
     group system wakelock input root
     capabilities BLOCK_SUSPEND SYS_NICE
 
-=======
-    group system uhid
-    oneshot
-
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 # Set watchdog timer to 30 seconds and pet it every 10 seconds to get a 20 second margin
 service watchdogd /system/bin/watchdogd 10 20
     class core
@@ -360,15 +263,9 @@ service bugreport /system/bin/dumpstate -d -p -B -z \
     oneshot
     keycodes 114 115 116
 
-<<<<<<< HEAD
 on fs
 # mount ext4 partitions
     mount_all /vendor/etc/fstab.freescale --early
-=======
-on fs && property:vendor.skip.charger_not_need=0
-# mount ext4 partitions
-    mount_all /vendor/etc/fstab.nxp --early
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Adjust parameters for dm-verity device
     write /sys/block/dm-0/queue/read_ahead_kb 4096
@@ -376,26 +273,15 @@ on fs && property:vendor.skip.charger_not_need=0
     # Update dm-verity state and set partition.*.verified properties
     verity_update_state
 
-<<<<<<< HEAD
 on verity-logging
     exec u:r:slideshow:s0 -- /sbin/slideshow warning/verity_red_1 warning/verity_red_2
 
 on post-fs
-=======
-on verity-logging && property:vendor.skip.charger_not_need=0
-    exec u:r:slideshow:s0 -- /sbin/slideshow warning/verity_red_1 warning/verity_red_2
-
-on post-fs && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     # Set netd memlock rlimit to 8MB
     setrlimit 8 8388608 8388608
 
     # Turn on swap
-<<<<<<< HEAD
     swapon_all /vendor/etc/fstab.freescale
-=======
-    swapon_all /vendor/etc/fstab.nxp
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Swap in only 1 page at a time
     write /proc/sys/vm/page-cluster 0
@@ -404,11 +290,7 @@ on post-fs && property:vendor.skip.charger_not_need=0
     chown system system /proc/pagetypeinfo
     chmod 0440 /proc/pagetypeinfo
 
-<<<<<<< HEAD
 on post-fs-data
-=======
-on post-fs-data && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     setprop vold.post_fs_data_done 1
     # create temp node for secure storage proxy
     mkdir /data/vendor/ss 0700 system system
@@ -417,7 +299,6 @@ on post-fs-data && property:vendor.skip.charger_not_need=0
     setprop TMPDIR /data/vendor/.opencl-cache
     mkdir /data/vendor/.opencl-cache 0771 system camera
 
-<<<<<<< HEAD
 on zygote-start
     # Create the directories used by the Wireless subsystem
     mkdir /data/misc/wifi 0770 wifi wifi
@@ -429,37 +310,20 @@ on zygote-start
     chown dhcp dhcp /data/misc/dhcp
 
 service early_init_sh /vendor/bin/init.insmod.sh /vendor/etc/early.init.cfg sys.all.early_init.ready
-=======
-on zygote-start && property:vendor.skip.charger_not_need=0
-    # Create the directories used by the Wireless subsystem
-    mkdir /data/vendor/wifi 0771 wifi wifi
-    mkdir /data/vendor/wifi/wpa 0770 wifi wifi
-    mkdir /data/vendor/wifi/wpa/sockets 0770 wifi wifi
-
-service early_init_sh /vendor/bin/init.insmod.sh /vendor/etc/early.init.cfg vendor.all.early_init.ready
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     class main
     user root
     group root system
     disabled
     oneshot
 
-<<<<<<< HEAD
 on property:sys.boot_completed=1 && property:vendor.storageproxyd=trusty
-=======
-on property:sys.boot_completed=1 && property:vendor.storageproxyd=trusty && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     start storageproxyd
 
 service storageproxyd /vendor/bin/storageproxyd -p /data/vendor/ss -r /dev/mmcblk0rpmb -d /dev/trusty-ipc-dev0
    group system
 
 
-<<<<<<< HEAD
 on property:ro.boot.vendor.sysrq=1
-=======
-on property:ro.boot.vendor.sysrq=1 && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     write /proc/sys/kernel/sysrq 1
 
 # setenv append_bootargs androidboot.usb.debugging=1
diff --git a/imx8m/evk_a300/manifest.xml b/imx8m/evk_a300/manifest.xml
index 214887d5..88dcf3d5 100644
--- a/imx8m/evk_a300/manifest.xml
+++ b/imx8m/evk_a300/manifest.xml
@@ -1,8 +1,4 @@
 <manifest version="1.0" type="device" target-level="4">
-<<<<<<< HEAD
-=======
-    <kernel  target-level="5" />
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     <hal format="hidl">
 	<name>android.hardware.graphics.allocator</name>
         <transport>hwbinder</transport>
@@ -16,31 +12,16 @@
     <hal format="hidl">
         <name>android.hardware.graphics.composer</name>
         <transport>hwbinder</transport>
-<<<<<<< HEAD
         <version>2.3</version>
-=======
-        <version>2.4</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <interface>
             <name>IComposer</name>
             <instance>default</instance>
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
         <name>android.hardware.keymaster</name>
         <transport>hwbinder</transport>
         <version>3.0</version>
-=======
-       <name>android.hardware.camera.provider</name>
-       <transport>hwbinder</transport>
-       <fqname>@2.4::ICameraProvider/external/0</fqname>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.keymaster</name>
-        <transport>hwbinder</transport>
-        <version>4.0</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <interface>
             <name>IKeymasterDevice</name>
             <instance>default</instance>
@@ -58,13 +39,8 @@
             <name>IDrmFactory</name>
             <instance>default</instance>
         </interface>
-<<<<<<< HEAD
         <fqname>@1.2::ICryptoFactory/clearkey</fqname>
         <fqname>@1.2::IDrmFactory/clearkey</fqname>
-=======
-        <fqname>@1.3::ICryptoFactory/clearkey</fqname>
-        <fqname>@1.3::IDrmFactory/clearkey</fqname>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     </hal>
     <hal format="hidl">
         <name>android.hardware.gatekeeper</name>
@@ -95,7 +71,6 @@
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
         <name>android.hardware.sensors</name>
         <transport>hwbinder</transport>
         <version>1.0</version>
@@ -105,8 +80,6 @@
         </interface>
     </hal>
     <hal format="hidl">
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <name>android.hardware.configstore</name>
         <transport>hwbinder</transport>
         <version>1.1</version>
@@ -138,7 +111,6 @@
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
        <name>android.hardware.wifi</name>
        <transport>hwbinder</transport>
        <version>1.3</version>
@@ -176,8 +148,6 @@
 	</interface>
     </hal>
     <hal format="hidl">
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <name>android.hardware.light</name>
         <transport>hwbinder</transport>
         <version>2.0</version>
@@ -198,11 +168,7 @@
     <hal format="hidl">
         <name>android.hardware.audio</name>
         <transport>hwbinder</transport>
-<<<<<<< HEAD
         <version>5.0</version>
-=======
-        <version>6.0</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <interface>
             <name>IDevicesFactory</name>
             <instance>default</instance>
@@ -211,18 +177,13 @@
     <hal format="hidl">
         <name>android.hardware.audio.effect</name>
         <transport>hwbinder</transport>
-<<<<<<< HEAD
         <version>5.0</version>
-=======
-        <version>6.0</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <interface>
             <name>IEffectsFactory</name>
             <instance>default</instance>
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
         <name>android.hardware.usb</name>
         <transport>hwbinder</transport>
         <version>1.1</version>
@@ -241,8 +202,6 @@
         </interface>
     </hal>
     <hal format="hidl">
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <name>android.hardware.bluetooth</name>
         <transport>hwbinder</transport>
         <version>1.0</version>
@@ -254,18 +213,13 @@
     <hal format="hidl">
         <name>android.hardware.dumpstate</name>
         <transport>hwbinder</transport>
-<<<<<<< HEAD
         <version>1.0</version>
-=======
-        <version>1.1</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <interface>
             <name>IDumpstateDevice</name>
             <instance>default</instance>
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
         <name>android.hardware.oemlock</name>
         <transport>hwbinder</transport>
         <version>1.0</version>
@@ -284,8 +238,6 @@
         </interface>
     </hal>
     <hal format="hidl">
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <name>nxp.hardware.display</name>
             <transport>hwbinder</transport>
         <version>1.0</version>
@@ -294,7 +246,6 @@
             <instance>default</instance>
         </interface>
     </hal>
-<<<<<<< HEAD
     <hal format="hidl">
         <name>android.hardware.neuralnetworks</name>
         <transport>hwbinder</transport>
@@ -331,6 +282,4 @@
             <instance>slot1</instance>
         </interface>
     </hal>
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 </manifest>
diff --git a/imx8m/vp6820_8mn/AndroidBoard.mk b/imx8m/vp6820_8mn/AndroidBoard.mk
index dcb09302..7d2ec036 100644
--- a/imx8m/vp6820_8mn/AndroidBoard.mk
+++ b/imx8m/vp6820_8mn/AndroidBoard.mk
@@ -1,17 +1,9 @@
 LOCAL_PATH := $(call my-dir)
 
-<<<<<<< HEAD
 include device/idtech/common/build/dtbo.mk
 include device/idtech/common/build/imx-recovery.mk
 include device/idtech/common/build/gpt.mk
 include device/idtech/common/build/userdata.mk
 include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/media-profile/media-profile.mk
 include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/sensor/fsl-sensor.mk
-=======
-include device/nxp/common/build/dtbo.mk
-include device/nxp/common/build/imx-recovery.mk
-include device/nxp/common/build/gpt.mk
-include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/media-profile/media-profile.mk
-include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/sensor/fsl-sensor.mk
 -include $(IMX_MEDIA_CODEC_XML_PATH)/mediacodec-profile/mediacodec-profile.mk
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mn/AndroidUboot.mk b/imx8m/vp6820_8mn/AndroidUboot.mk
index d13a9ab9..8c7d6218 100644
--- a/imx8m/vp6820_8mn/AndroidUboot.mk
+++ b/imx8m/vp6820_8mn/AndroidUboot.mk
@@ -21,11 +21,7 @@ define build_imx_uboot
 		cp $(FSL_PROPRIETARY_PATH)/linux-firmware-imx/firmware/ddr/synopsys/lpddr4_pmu_train* $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
 	fi; \
 	$(MAKE) -C $(IMX_PATH)/arm-trusted-firmware/ PLAT=`echo $(2) | cut -d '-' -f1` clean; \
-<<<<<<< HEAD
 	if [ `echo $(2) | cut -d '-' -f3` = "trusty" ]; then \
-=======
-	if [ `echo $(2) | cut -d '-' -f2` = "trusty" ]; then \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 		cp $(FSL_PROPRIETARY_PATH)/fsl-proprietary/uboot-firmware/imx8m/tee-imx8mn.bin $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/tee.bin; \
 		$(MAKE) -C $(IMX_PATH)/arm-trusted-firmware/ CROSS_COMPILE="$(ATF_CROSS_COMPILE)" PLAT=`echo $(2) | cut -d '-' -f1` bl31 -B SPD=trusty 1>/dev/null || exit 1; \
 	else \
@@ -37,7 +33,6 @@ define build_imx_uboot
 	cp $(IMX_PATH)/arm-trusted-firmware/build/`echo $(2) | cut -d '-' -f1`/release/bl31.bin $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/bl31.bin; \
 	$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ clean; \
 	if [ `echo $(2) | cut -d '-' -f2` = "ddr4" ]; then \
-<<<<<<< HEAD
 		if [ `echo $(2) | rev | cut -d '-' -f1 | rev` != "dual" ]; then \
 		$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ SOC=iMX8MN flash_ddr4_evk || exit 1; \
 		$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ SOC=iMX8MN print_fit_hab_ddr4 || exit 1; \
@@ -53,16 +48,6 @@ define build_imx_uboot
 		$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ SOC=iMX8MN flash_evk_no_hdmi_dual_bootloader || exit 1; \
 		$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ SOC=iMX8MN PRINT_FIT_HAB_OFFSET=0x0 print_fit_hab || exit 1; \
 		fi; \
-=======
-		$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ SOC=iMX8MN  flash_ddr4_evk || exit 1; \
-		$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ SOC=iMX8MN print_fit_hab_ddr4 || exit 1; \
-	elif [ `echo $(2) | rev | cut -d '-' -f1 | rev` != "dual" ]; then \
-		$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ SOC=iMX8MN flash_spl_uboot || exit 1; \
-		$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ SOC=iMX8MN print_fit_hab || exit 1; \
-	else \
-		$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ SOC=iMX8MN flash_evk_no_hdmi_dual_bootloader || exit 1; \
-		$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ SOC=iMX8MN PRINT_FIT_HAB_OFFSET=0x0 print_fit_hab || exit 1; \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 	fi; \
 	if [ `echo $(2) | rev | cut -d '-' -f1 | rev` != "dual" ]; then \
 		cp $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/flash.bin $(UBOOT_COLLECTION)/u-boot-$(strip $(2)).imx; \
diff --git a/imx8m/vp6820_8mn/BoardConfig.mk b/imx8m/vp6820_8mn/BoardConfig.mk
index 01e0daa5..0def8dae 100644
--- a/imx8m/vp6820_8mn/BoardConfig.mk
+++ b/imx8m/vp6820_8mn/BoardConfig.mk
@@ -3,12 +3,8 @@
 #
 
 BOARD_SOC_TYPE := IMX8MN
-<<<<<<< HEAD
 BOARD_SOM_TYPE := a100
 BOARD_TYPE := DEVBOARD
-=======
-BOARD_TYPE := EVK
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 BOARD_HAVE_VPU := false
 HAVE_FSL_IMX_GPU2D := false
 HAVE_FSL_IMX_GPU3D := true
@@ -16,10 +12,6 @@ HAVE_FSL_IMX_IPU := false
 HAVE_FSL_IMX_PXP := false
 BOARD_KERNEL_BASE := 0x40400000
 TARGET_GRALLOC_VERSION := v3
-<<<<<<< HEAD
-TARGET_HIGH_PERFORMANCE := true
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 TARGET_USES_HWC2 := true
 TARGET_HWCOMPOSER_VERSION := v2.0
 USE_OPENGL_RENDERER := true
@@ -37,21 +29,14 @@ SOONG_CONFIG_IMXPLUGIN_BOARD_VPU_ONLY = false
 # Product-specific compile-time definitions.
 #
 
-<<<<<<< HEAD
 IMX_DEVICE_PATH := device/idtech/imx8m/vp6820_8mn
 
 include device/idtech/imx8m/BoardConfigCommon.mk
-=======
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mn
-
-include device/nxp/imx8m/BoardConfigCommon.mk
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 BUILD_TARGET_FS ?= ext4
 TARGET_USERIMAGES_USE_EXT4 := true
 
-<<<<<<< HEAD
-TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.freescale
+TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.nxp
 
 # Support gpt
 ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
@@ -70,27 +55,6 @@ else
     ADDITION_BPT_PARTITION = partition-table-28GB:device/idtech/common/partition/device-partitions-28GB-ab.bpt \
                              partition-table-dual:device/idtech/common/partition/device-partitions-14.4GB-ab-dual-bootloader.bpt \
                              partition-table-28GB-dual:device/idtech/common/partition/device-partitions-28GB-ab-dual-bootloader.bpt
-=======
-TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.nxp
-
-# Support gpt
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
-  BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab_super.bpt
-  ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab_super.bpt \
-                           partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader_super.bpt \
-                           partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader_super.bpt
-else
-  ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
-    BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab-no-product.bpt
-    ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab-no-product.bpt \
-                             partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader-no-product.bpt \
-                             partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader-no-product.bpt
-  else
-    BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab.bpt
-    ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab.bpt \
-                             partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader.bpt \
-                             partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader.bpt
->>>>>>> post_merge/android-11.0.0_1.0.0_history
   endif
 endif
 
@@ -102,40 +66,25 @@ TARGET_BOOTLOADER_BOARD_NAME := EVK
 
 USE_OPENGL_RENDERER := true
 
-<<<<<<< HEAD
 BOARD_WLAN_DEVICE            := bcmdhd
-=======
-BOARD_WLAN_DEVICE            := nxp
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 WPA_SUPPLICANT_VERSION       := VER_0_8_X
 BOARD_WPA_SUPPLICANT_DRIVER  := NL80211
 BOARD_HOSTAPD_DRIVER         := NL80211
 BOARD_HOSTAPD_PRIVATE_LIB               := lib_driver_cmd_$(BOARD_WLAN_DEVICE)
 BOARD_WPA_SUPPLICANT_PRIVATE_LIB        := lib_driver_cmd_$(BOARD_WLAN_DEVICE)
 
-<<<<<<< HEAD
 WIFI_DRIVER_FW_PATH_PARAM := "/sys/module/brcmfmac/parameters/alternative_fw_path"
 
 #BOARD_USE_SENSOR_FUSION := true
 BOARD_USE_ST_SENSOR_INPUT := true
-=======
-WIFI_HIDL_FEATURE_DUAL_INTERFACE := true
-
-BOARD_USE_SENSOR_FUSION := true
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # we don't support sparse image.
 TARGET_USERIMAGES_SPARSE_EXT_DISABLED := false
 
 BOARD_BLUETOOTH_BDROID_BUILDCFG_INCLUDE_DIR := $(IMX_DEVICE_PATH)/bluetooth
 
-<<<<<<< HEAD
 # BCM 1MW BT
 BOARD_HAVE_BLUETOOTH_BCM := true
-=======
-# NXP 8987 BT
-BOARD_HAVE_BLUETOOTH_NXP := true
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 BOARD_HAVE_USB_CAMERA := true
 BOARD_HAVE_USB_MJPEG_CAMERA := false
@@ -144,19 +93,13 @@ USE_ION_ALLOCATOR := true
 USE_GPU_ALLOCATOR := false
 
 BOARD_AVB_ENABLE := true
-<<<<<<< HEAD
 BOARD_AVB_ALGORITHM := SHA256_RSA2048
 BOARD_AVB_KEY_PATH := device/idtech/common/security/idt_testkey_rsa2048.pem
-=======
-BOARD_AVB_ALGORITHM := SHA256_RSA4096
-# The testkey_rsa4096.pem is copied from external/avb/test/data/testkey_rsa4096.pem
-BOARD_AVB_KEY_PATH := device/nxp/common/security/testkey_rsa4096.pem
 
 BOARD_AVB_BOOT_KEY_PATH := external/avb/test/data/testkey_rsa2048.pem
 BOARD_AVB_BOOT_ALGORITHM := SHA256_RSA2048
 BOARD_AVB_BOOT_ROLLBACK_INDEX_LOCATION := 2
 
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 TARGET_USES_MKE2FS := true
 
 # define frame buffer count
@@ -165,27 +108,16 @@ NUM_FRAMEBUFFER_SURFACE_BUFFERS := 3
 CMASIZE=800M
 
 # NXP default config
-<<<<<<< HEAD
-BOARD_KERNEL_CMDLINE := init=/init androidboot.console=ttymxc1 androidboot.hardware=freescale firmware_class.path=/vendor/firmware loop.max_part=7
-=======
 BOARD_KERNEL_CMDLINE := init=/init androidboot.console=ttymxc1 androidboot.hardware=nxp firmware_class.path=/vendor/firmware loop.max_part=7
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # memory config
 BOARD_KERNEL_CMDLINE += transparent_hugepage=never
 
 # display config
-<<<<<<< HEAD
 BOARD_KERNEL_CMDLINE += androidboot.lcd_density=294 androidboot.primary_display=imx-drm
 
-# wifi config
-BOARD_KERNEL_CMDLINE += androidboot.wificountrycode=CN
-=======
-BOARD_KERNEL_CMDLINE += androidboot.lcd_density=240 androidboot.primary_display=imx-drm
-
 # wifi config
 BOARD_KERNEL_CMDLINE += androidboot.wificountrycode=CN moal.mod_para=wifi_mod_para_sd8987.conf
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # low memory device build config
 ifeq ($(LOW_MEMORY),true)
@@ -194,32 +126,24 @@ else
 BOARD_KERNEL_CMDLINE += cma=$(CMASIZE)@0x400M-0xb80M
 endif
 
-<<<<<<< HEAD
-=======
 ifneq (,$(filter userdebug eng,$(TARGET_BUILD_VARIANT)))
 BOARD_KERNEL_CMDLINE += androidboot.vendor.sysrq=1
 endif
 
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 ifeq ($(TARGET_USERIMAGES_USE_UBIFS),true)
 ifeq ($(TARGET_USERIMAGES_USE_EXT4),true)
 $(error "TARGET_USERIMAGES_USE_UBIFS and TARGET_USERIMAGES_USE_EXT4 config open in same time, please only choose one target file system image")
 endif
 endif
 
-<<<<<<< HEAD
 LOWER_BOARD_TYPE  = $(shell echo $(BOARD_TYPE) | tr A-Z a-z)
 LOWER_BOARD_SOC_TYPE  = $(shell echo $(BOARD_SOC_TYPE) | tr A-Z a-z)
 BOARD_PREBUILT_DTBOIMAGE := out/target/product/vp6820_8mn/dtbo-$(BOARD_SOM_TYPE)-$(LOWER_BOARD_TYPE).img
-=======
-BOARD_PREBUILT_DTBOIMAGE := out/target/product/evk_8mn/dtbo-imx8mn.img
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
   ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
     TARGET_BOARD_DTS_CONFIG := imx8mn-ddr4:imx8mn-ddr4-evk-no-product.dtb
   else
-<<<<<<< HEAD
     # imx8mn with MIPI-HDMI display, BCM wifi and support trusty
     TARGET_BOARD_DTS_CONFIG := imx8mn-ddr4:imx8mn-ddr4-evk.dtb
     TARGET_BOARD_DTS_CONFIG += imx8mn:imx8mn-evk.dtb
@@ -230,18 +154,6 @@ ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
     # imx8mn with MIPI panel display and BCM wifi
     TARGET_BOARD_DTS_CONFIG += imx8mn-mipi-panel:imx8mn-evk-rm67191.dtb
     # imx8mn with MIPI-HDMI display and BCM wifi and M7 image
-=======
-    # imx8mn with MIPI-HDMI display, wifi and support trusty
-    TARGET_BOARD_DTS_CONFIG := imx8mn-ddr4:imx8mn-ddr4-evk.dtb
-    TARGET_BOARD_DTS_CONFIG += imx8mn:imx8mn-evk.dtb
-    # imx8mn with MIPI panel display and wifi
-    TARGET_BOARD_DTS_CONFIG += imx8mn-ddr4-mipi-panel:imx8mn-ddr4-evk-rm67191.dtb
-    # imx8mn with MIPI-HDMI display and wifi and M7 image
-    TARGET_BOARD_DTS_CONFIG += imx8mn-ddr4-rpmsg:imx8mn-ddr4-evk-rpmsg.dtb
-    # imx8mn with MIPI panel display and wifi
-    TARGET_BOARD_DTS_CONFIG += imx8mn-mipi-panel:imx8mn-evk-rm67191.dtb
-    # imx8mn with MIPI-HDMI display and wifi and M7 image
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     TARGET_BOARD_DTS_CONFIG += imx8mn-rpmsg:imx8mn-evk-rpmsg.dtb
   endif
 else
@@ -253,24 +165,14 @@ else
 endif
 
 BOARD_SEPOLICY_DIRS := \
-<<<<<<< HEAD
        device/idtech/imx8m/sepolicy \
        $(IMX_DEVICE_PATH)/sepolicy
 
 TARGET_BOARD_KERNEL_HEADERS := device/idtech/common/kernel-headers
-=======
-       device/nxp/imx8m/sepolicy \
-       $(IMX_DEVICE_PATH)/sepolicy
-
-TARGET_BOARD_KERNEL_HEADERS := device/nxp/common/kernel-headers
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ALL_DEFAULT_INSTALLED_MODULES += $(BOARD_VENDOR_KERNEL_MODULES)
 
 BOARD_USES_METADATA_PARTITION := true
 BOARD_ROOT_EXTRA_FOLDERS += metadata
-<<<<<<< HEAD
 
 BOARD_PLAT_PRIVATE_SEPOLICY_DIR := device/idtech/imx8m/sepolicy_system/private
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mn/SharedBoardConfig.mk b/imx8m/vp6820_8mn/SharedBoardConfig.mk
index 4ebbdc0a..d8ce857d 100644
--- a/imx8m/vp6820_8mn/SharedBoardConfig.mk
+++ b/imx8m/vp6820_8mn/SharedBoardConfig.mk
@@ -10,17 +10,10 @@ PRODUCT_IMX_TRUSTY := true
 #Enable this to disable product partition build.
 #IMX_NO_PRODUCT_PARTITION := true
 
-<<<<<<< HEAD
 # BCM fmac wifi driver module
 BOARD_VENDOR_KERNEL_MODULES += \
     $(KERNEL_OUT)/drivers/net/wireless/broadcom/brcm80211/brcmfmac/brcmfmac.ko \
     $(KERNEL_OUT)/drivers/net/wireless/broadcom/brcm80211/brcmutil/brcmutil.ko
-=======
-# NXP 8987 wifi driver module
-BOARD_VENDOR_KERNEL_MODULES += \
-    $(KERNEL_OUT)/drivers/net/wireless/nxp/mxm_wifiex/wlan_src/mlan.ko \
-    $(KERNEL_OUT)/drivers/net/wireless/nxp/mxm_wifiex/wlan_src/moal.ko \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # mipi-panel touch driver module
 BOARD_VENDOR_KERNEL_MODULES += \
diff --git a/imx8m/vp6820_8mn/UbootKernelBoardConfig.mk b/imx8m/vp6820_8mn/UbootKernelBoardConfig.mk
index 932b093d..55ae875b 100644
--- a/imx8m/vp6820_8mn/UbootKernelBoardConfig.mk
+++ b/imx8m/vp6820_8mn/UbootKernelBoardConfig.mk
@@ -2,7 +2,6 @@
 TARGET_BOOTLOADER_POSTFIX := bin
 UBOOT_POST_PROCESS := true
 
-<<<<<<< HEAD
 # u-boot target for a100 devboard
 TARGET_BOOTLOADER_CONFIG := imx8mn-lpddr4:vp6820_8mn_evk_android_defconfig:signed
 TARGET_BOOTLOADER_CONFIG += imx8mn-lpddr4-dual:vp6820_8mn_evk_android_dual_defconfig:signed
@@ -26,25 +25,6 @@ TARGET_BOOTLOADER_CONFIG += imx8mn-ddr4-evk-uuu-mic2g:vp6820_8mn_ddr4_evk_androi
 TARGET_KERNEL_DEFCONFIG := imx_v8_android_defconfig
 TARGET_KERNEL_ADDITION_DEFCONF := android_addition_defconfig
 TARGET_KERNEL_SECURE_DEFCONF ?= android_secure_defconfig
-=======
-# u-boot target for stand config and Trusty OS config
-TARGET_BOOTLOADER_CONFIG := imx8mn-ddr4:imx8mn_ddr4_evk_android_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mn:imx8mn_evk_android_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mn-dual:imx8mn_evk_android_dual_defconfig
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-  TARGET_BOOTLOADER_CONFIG += imx8mn-trusty:imx8mn_evk_android_trusty_defconfig
-  TARGET_BOOTLOADER_CONFIG += imx8mn-trusty-dual:imx8mn_evk_android_trusty_dual_defconfig
-  TARGET_BOOTLOADER_CONFIG += imx8mn-trusty-secure-unlock:imx8mn_evk_android_trusty_secure_unlock_defconfig
-endif
-
-# u-boot target used by uuu for imx8mn_evk
-TARGET_BOOTLOADER_CONFIG += imx8mn-ddr4-evk-uuu:imx8mn_ddr4_evk_android_uuu_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mn-evk-uuu:imx8mn_evk_android_uuu_defconfig
-
-TARGET_KERNEL_DEFCONFIG := imx_v8_android_defconfig
-
-TARGET_KERNEL_ADDITION_DEFCONF := android_addition_defconfig
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 
 # absolute path is used, not the same as relative path used in AOSP make
diff --git a/imx8m/vp6820_8mn/android_addition_defconfig b/imx8m/vp6820_8mn/android_addition_defconfig
index 0b69f902..9f6f26f6 100644
--- a/imx8m/vp6820_8mn/android_addition_defconfig
+++ b/imx8m/vp6820_8mn/android_addition_defconfig
@@ -1,7 +1,5 @@
-<<<<<<< HEAD
-CONFIG_WLAN_VENDOR_NXP=y
-CONFIG_MXMWIFIEX=m
-CONFIG_CLD_HL_SDIO_CORE=y
+CONFIG_LIBNVDIMM=y
+CONFIG_OF_PMEM=y
 CONFIG_IDG_SPI=y
 # CONFIG_USB_NET_QMI_WWAN is not set
 CONFIG_SINGLE_LOGO=y
@@ -250,7 +248,3 @@ CONFIG_BCM_SBA_RAID=m
 # CONFIG_MMC_SDHCI_MSM is not set
 # CONFIG_MMC_SDHI is not set
 # CONFIG_MMC_DW_EXYNOS is not set
-=======
-CONFIG_LIBNVDIMM=y
-CONFIG_OF_PMEM=y
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mn/audio_policy_configuration.xml b/imx8m/vp6820_8mn/audio_policy_configuration.xml
index 98334f03..61800f55 100644
--- a/imx8m/vp6820_8mn/audio_policy_configuration.xml
+++ b/imx8m/vp6820_8mn/audio_policy_configuration.xml
@@ -21,38 +21,16 @@
         <module name="primary" halVersion="2.0">
             <attachedDevices>
                 <item>Speaker</item>
-<<<<<<< HEAD
                 <item>Wired Headphones</item>
                 <item>Built-In Mic</item>
                 <item>Wired-In Headsets</item>
             </attachedDevices>
-            <defaultOutputDevice>Wired Headphones</defaultOutputDevice>
-            <defaultInputDevice>Wired-In Headsets</defaultInputDevice>
-=======
-                <item>Built-In Mic</item>
-            </attachedDevices>
             <defaultOutputDevice>Speaker</defaultOutputDevice>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
             <mixPorts>
                 <mixPort name="primary output" role="source" flags="AUDIO_OUTPUT_FLAG_PRIMARY">
                     <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
                              samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
                 </mixPort>
-<<<<<<< HEAD
-                <mixPort name="esai output" role="source" flags="AUDIO_OUTPUT_FLAG_DIRECT|AUDIO_OUTPUT_FLAG_HW_AV_SYNC">
-                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
-                             samplingRates="48000,96000,192000,384000,768000"
-                             channelMasks="AUDIO_CHANNEL_OUT_STEREO,AUDIO_CHANNEL_OUT_QUAD,AUDIO_CHANNEL_OUT_5POINT1,AUDIO_CHANNEL_OUT_7POINT1"/>
-                    <profile name="" format="AUDIO_FORMAT_PCM_FLOAT"
-                             samplingRates="48000,96000,192000,384000,768000"
-                             channelMasks="AUDIO_CHANNEL_OUT_STEREO,AUDIO_CHANNEL_OUT_QUAD,AUDIO_CHANNEL_OUT_5POINT1,AUDIO_CHANNEL_OUT_7POINT1"/>
-                </mixPort>
-                <mixPort name="dsd output" role="source" flags="AUDIO_OUTPUT_FLAG_DIRECT|AUDIO_OUTPUT_FLAG_COMPRESS_OFFLOAD">
-                    <profile name="" format="AUDIO_FORMAT_DSD"
-                             samplingRates="2822400,5644800,11289600,22579200" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
-                </mixPort>
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
                 <mixPort name="bt sco output" role="source">
                     <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
                              samplingRates="16000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
@@ -69,11 +47,6 @@
                 </devicePort>
                 <devicePort tagName="Wired Headphones" type="AUDIO_DEVICE_OUT_WIRED_HEADPHONE" role="sink">
                 </devicePort>
-<<<<<<< HEAD
-                <devicePort tagName="Line-Out" type="AUDIO_DEVICE_OUT_LINE" role="sink">
-                </devicePort>
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
                 <devicePort tagName="BT SCO Headset" type="AUDIO_DEVICE_OUT_BLUETOOTH_SCO_HEADSET" role="sink">
                 </devicePort>
                 <devicePort tagName="BT SCO CarKit" type="AUDIO_DEVICE_OUT_BLUETOOTH_SCO_CARKIT" role="sink">
@@ -85,11 +58,8 @@
                 </devicePort>
                 <devicePort tagName="Spdif-In" type="AUDIO_DEVICE_IN_AUX_DIGITAL" role="source">
                 </devicePort>
-<<<<<<< HEAD
                 <devicePort tagName="Wired-In Headsets" type="AUDIO_DEVICE_IN_WIRED_HEADSET" role="source">
                 </devicePort>
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
                 <devicePort tagName="BT SCO Headset Mic" type="AUDIO_DEVICE_IN_BLUETOOTH_SCO_HEADSET" role="source">
                 </devicePort>
             </devicePorts>
@@ -97,28 +67,16 @@
                 <route type="mix" sink="Speaker"
                        sources="primary output"/>
                 <route type="mix" sink="Wired Headphones"
-<<<<<<< HEAD
-                       sources="dsd output,esai output,primary output"/>
-                <route type="mix" sink="Line-Out"
-                       sources="dsd output,esai output,primary output"/>
-                <route type="mix" sink="BT SCO Headset"
-                       sources="bt sco output"/>
-=======
                        sources="primary output"/>
                 <route type="mix" sink="BT SCO Headset"
                         sources="bt sco output"/>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
                 <route type="mix" sink="BT SCO CarKit"
                        sources="bt sco output"/>
                 <route type="mix" sink="BT SCO"
                        sources="bt sco output"/>
 
                 <route type="mix" sink="primary input"
-<<<<<<< HEAD
                        sources="Wired-In Headsets,Built-In Mic,Spdif-In,BT SCO Headset Mic"/>
-=======
-                       sources="Built-In Mic,Spdif-In,BT SCO Headset Mic"/>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
             </routes>
         </module>
 
diff --git a/imx8m/vp6820_8mn/camera_config_imx8mn.json b/imx8m/vp6820_8mn/camera_config_imx8mn.json
index 12e760a9..5ac58bf9 100644
--- a/imx8m/vp6820_8mn/camera_config_imx8mn.json
+++ b/imx8m/vp6820_8mn/camera_config_imx8mn.json
@@ -12,26 +12,7 @@
       "camera_type": "back",
       "camera_name": "mxc-isi-cap",
       "orientation": "0",
-<<<<<<< HEAD
-      "buffer_type": "dma",
-      "ActiveArrayWidth": "1920",
-      "ActiveArrayHeight": "1080",
-      "PixelArrayWidth": "1920",
-      "PixelArrayHeight": "1080",
-      "PhysicalWidth": "2.688",
-      "PhysicalHeight": "1.512",
-      "FocalLength": "3.42",
-      "MaxJpegSize": "4194304",
-      "MinFrameDuration": "33331760",
-      "MaxFrameDuration": "300000000"
-    },
-    {
-      "camera_type": "front",
-      "camera_name": "uvc",
-      "orientation": "0",
-=======
       "mplane": "1",
->>>>>>> post_merge/android-11.0.0_1.0.0_history
       "buffer_type": "dma",
       "ActiveArrayWidth": "1920",
       "ActiveArrayHeight": "1080",
diff --git a/imx8m/vp6820_8mn/early.init.cfg b/imx8m/vp6820_8mn/early.init.cfg
index e9ccb225..9dd16032 100644
--- a/imx8m/vp6820_8mn/early.init.cfg
+++ b/imx8m/vp6820_8mn/early.init.cfg
@@ -1,9 +1,2 @@
-<<<<<<< HEAD
-insmod vendor/lib/modules/brcmutil.ko
-insmod vendor/lib/modules/brcmfmac.ko
-insmod vendor/lib/modules/wlan.ko
-insmod vendor/lib/modules/synaptics_dsx_i2c.ko
-=======
 # support insmod xx.ko; setprop xx xx; modeprobe
 modprobe
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mn/init.imx8mn.rc b/imx8m/vp6820_8mn/init.imx8mn.rc
index 8260036e..eb60298f 100755
--- a/imx8m/vp6820_8mn/init.imx8mn.rc
+++ b/imx8m/vp6820_8mn/init.imx8mn.rc
@@ -28,10 +28,7 @@ on property:sys.boot_completed=1
     # Set up and down limit to 200us/200us
     write /sys/devices/system/cpu/cpufreq/schedutil/up_rate_limit_us 200
     write /sys/devices/system/cpu/cpufreq/schedutil/down_rate_limit_us 200
-<<<<<<< HEAD
-=======
     write /proc/sys/kernel/sched_util_clamp_min 512
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 on property:sys.boot_completed=1
     # update cpuset now that processors are up
@@ -48,7 +45,6 @@ on property:sys.boot_completed=1
     # system-background is for system tasks that should only run on
     # little cores, not on bigs to be used only by init
     write /dev/cpuset/system-background/cpus 0-2
-<<<<<<< HEAD
 
 on init
     #IDtech added for AB ota update bootloader
@@ -56,5 +52,3 @@ on init
     symlink   /dev/block/mmcblk2boot1p1   /dev/block/by-name/spl_b
     symlink   /dev/block/mmcblk2boot0p2   /dev/block/by-name/spl_bak_a
     symlink   /dev/block/mmcblk2boot1p2   /dev/block/by-name/spl_bak_b
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mn/init.rc b/imx8m/vp6820_8mn/init.rc
index aa5e1d10..2ea9c8fc 100644
--- a/imx8m/vp6820_8mn/init.rc
+++ b/imx8m/vp6820_8mn/init.rc
@@ -1,8 +1,6 @@
 import /vendor/etc/init/hw/init.${ro.hardware}.usb.rc
 import /vendor/etc/init/hw/init.${ro.hardware}.${ro.boot.soc_type}.rc
-<<<<<<< HEAD
 import /product/etc/init/hw/init.idt.common.rc
-=======
 
 service vendor.charger /system/bin/charger
     class charger
@@ -16,35 +14,15 @@ service vendor.charger /system/bin/charger
 
 on charger
     start vendor.charger
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 on early-init
     # mount the debugfs
     mount debugfs none /sys/kernel/debug/ mode=0755
 
-<<<<<<< HEAD
-    # Mount binderfs
-    mkdir /dev/binderfs
-    mount binder binder /dev/binderfs stats=global
-    chmod 0755 /dev/binderfs
-
-    symlink /dev/binderfs/binder /dev/binder
-    symlink /dev/binderfs/hwbinder /dev/hwbinder
-    symlink /dev/binderfs/vndbinder /dev/vndbinder
-
-    chmod 0666 /dev/binderfs/hwbinder
-    chmod 0666 /dev/binderfs/binder
-    chmod 0666 /dev/binderfs/vndbinder
-
-
-on early-init
-    start early_init_sh
-=======
 on early-init
     start early_init_sh
     # Set the host name which used in console
-    export HOSTNAME evk_8mn
->>>>>>> post_merge/android-11.0.0_1.0.0_history
+    export HOSTNAME vp6820_8mn
 
     # Due keymaster start very early so set prop here
     # Also gatekeeper share same role for keymaster
@@ -52,9 +30,6 @@ on early-init
     setprop ro.hardware.gatekeeper ${ro.boot.keystore}
     setprop vendor.storageproxyd ${ro.boot.keystore}
 
-<<<<<<< HEAD
-on init
-=======
     # Use ro.boot.lcd_density to override ro.sf.lcd_density
     setprop ro.sf.lcd_density ${ro.boot.lcd_density}
 
@@ -63,7 +38,6 @@ on early-init && property:ro.boot.mode=charger
     setprop vendor.skip.charger_not_need 1
 
 on init && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     start watchdogd
 
     # Support legacy paths
@@ -100,19 +74,6 @@ on init && property:vendor.skip.charger_not_need=0
     write /dev/stune/rt/schedtune.boost 50
     write /dev/stune/rt/schedtune.prefer_idle 1
 
-<<<<<<< HEAD
-on late-fs
-    # Start keymaster service
-    start vendor.keymaster-3-0-${ro.boot.keystore}
-    setprop vendor.powerhal.init 1
-
-    mount_all /vendor/etc/fstab.freescale --late
-
-on late-fs && property:vendor.storageproxyd=trusty
-    start vendor.oemlock-1-0
-
-on early-boot
-=======
 on late-fs && property:vendor.skip.charger_not_need=0
     # Start keymaster/gatekeeper service
     start vendor.gatekeeper-1-0-${ro.boot.keystore}
@@ -128,28 +89,11 @@ on late-fs && property:vendor.storageproxyd=trusty && property:vendor.skip.charg
     start vendor.oemlock-1-0
 
 on early-boot && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     # For evk_8mn, when swap used about 400M, upgrade the level.
     setprop ro.lmk.upgrade_pressure 80
     setprop ro.lmk.downgrade_pressure 95
     setprop ro.lmk.critical_upgrade true
 
-<<<<<<< HEAD
-    # Set the host name which used in console
-    export HOSTNAME vp6820_8mn
-
-    # Set permission for IIM node
-    symlink /dev/mxs_viim /dev/mxc_mem
-
-    # Enable Tethering in the Settings
-    setprop ro.tether.denied false
-
-    setprop hwc.stretch.filter  1
-
-    # fsl omx graphic manager media framework property
-    setprop rw.VIDEO_RENDER_NAME video_render.surface
-    setprop media.fsl_codec.flag 7
-=======
     # Set permission for IIM node
     symlink /dev/mxs_viim /dev/mxc_mem
 
@@ -158,7 +102,6 @@ on early-boot && property:vendor.skip.charger_not_need=0
     # fsl omx graphic manager media framework property
     setprop vendor.rw.VIDEO_RENDER_NAME video_render.surface
     setprop vendor.media.fsl_codec.flag 7
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     setprop camera.disable_zsl_mode 1
 
@@ -169,10 +112,6 @@ on early-boot && property:vendor.skip.charger_not_need=0
     write /sys/block/mmcblk1/queue/read_ahead_kb 2048
     write /sys/block/mmcblk2/queue/read_ahead_kb 2048
 
-<<<<<<< HEAD
-    # Set period_us for usb audio
-    setprop ro.audio.usb.period_us 20000
-
     # Wifi firmware reload path
     chown wifi wifi /sys/module/brcmfmac/parameters/alternative_fw_path
 
@@ -185,20 +124,6 @@ on early-boot && property:vendor.skip.charger_not_need=0
     chown bluetooth bluetooth /sys/class/rfkill/rfkill0/state
     write /sys/class/rfkill/rfkill0/state 0
 
-    setprop persist.service.bdroid.bdaddr 22:22:67:C6:69:73
-
-    # Use ro.boot.lcd_density to override ro.sf.lcd_density
-    setprop ro.sf.lcd_density ${ro.boot.lcd_density}
-
-    # prepare for ril
-    setprop ro.ril.wake_lock_timeout 300
-=======
-    # Prepare for wifi
-    setprop wifi.interface wlan0
-    setprop wifi.direct.interface p2p0
-    setprop wifi.concurrent.interface wlan1
->>>>>>> post_merge/android-11.0.0_1.0.0_history
-
     # Set tracefs permission to 755
     chmod 0755 /sys/kernel/debug/tracing
 
@@ -207,9 +132,8 @@ on early-boot && property:vendor.skip.charger_not_need=0
     chmod 0664 /sys/kernel/debug/sync/sw_sync
 
     # Default backlight device
-<<<<<<< HEAD
-    #setprop hw.backlight.dev "32e10000.dsi_controller.0"
-    setprop hw.backlight.dev "backlight"
+    #setprop vendor.hw.backlight.dev "32e10000.dsi_controller.0"
+    setprop vendor.hw.backlight.dev "backlight"
     # Chmod/chown FSL specific sys entry
     #chown system system /sys/class/backlight/32e10000.dsi_controller.0/brightness
     #chmod 0660 /sys/class/backlight/32e10000.dsi_controller.0/brightness
@@ -224,22 +148,9 @@ on early-boot && property:vendor.skip.charger_not_need=0
     chmod 0660 /sys/class/backlight/pwm_3/brightness
     chmod 0660 /sys/class/backlight/pwm_4/brightness
 
-    # Set light sensor sysfs path and light sensor threshold lux value
-    setprop ro.hardware.lightsensor "/sys/class/i2c-dev/i2c-0/device/0-0044/"
-    setprop ro.lightsensor.threshold  20
-
-    # Dectect DSF streams when scanning media
-    setprop ro.FSL_DSF_PARSER 1
-=======
-    setprop vendor.hw.backlight.dev "32e10000.dsi_controller.0"
-    # Chmod/chown FSL specific sys entry
-    chown system system /sys/class/backlight/32e10000.dsi_controller.0/brightness
-    chmod 0660 /sys/class/backlight/32e10000.dsi_controller.0/brightness
-
     # Set light sensor sysfs path and light sensor threshold lux value
     setprop ro.hardware.lightsensor "/sys/class/i2c-dev/i2c-0/device/0-0044/"
     setprop vendor.ro.lightsensor.threshold  20
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Allow DSD file(duration larger than 10s) can play
     setprop audio.offload.min.duration.secs 10
@@ -259,10 +170,7 @@ service wpa_supplicant /vendor/bin/hw/wpa_supplicant \
     interface android.hardware.wifi.supplicant@1.0::ISupplicant default
     interface android.hardware.wifi.supplicant@1.1::ISupplicant default
     interface android.hardware.wifi.supplicant@1.2::ISupplicant default
-<<<<<<< HEAD
-=======
     interface android.hardware.wifi.supplicant@1.3::ISupplicant default
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     class main
     socket wpa_wlan0 dgram 660 wifi wifi
     disabled
@@ -272,8 +180,7 @@ service sensor_fusion /vendor/bin/fsl_sensor_fusion
     class late_start
     seclabel u:r:sensors:s0
     user system
-<<<<<<< HEAD
-    group input
+    group system uhid
     oneshot
 
 service vendor.sensors-hal-1-0 /vendor/bin/hw/android.hardware.sensors@1.0-service
@@ -282,11 +189,6 @@ service vendor.sensors-hal-1-0 /vendor/bin/hw/android.hardware.sensors@1.0-servi
     group system wakelock input root
     capabilities BLOCK_SUSPEND SYS_NICE
 
-=======
-    group system uhid
-    oneshot
-
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 # Set watchdog timer to 30 seconds and pet it every 10 seconds to get a 20 second margin
 service watchdogd /system/bin/watchdogd 10 20
     class core
@@ -340,25 +242,15 @@ service bugreport /system/bin/dumpstate -d -p -B -z \
     oneshot
     keycodes 114 115 116
 
-<<<<<<< HEAD
-on boot
-=======
 on boot && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     start audioserver
     start mediadrm
     start media
     start drm
 
-<<<<<<< HEAD
-on fs
-# mount ext4 partitions
-    mount_all /vendor/etc/fstab.freescale --early
-=======
 on fs && property:vendor.skip.charger_not_need=0
 # mount ext4 partitions
     mount_all /vendor/etc/fstab.nxp --early
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Adjust parameters for dm-verity device
     write /sys/block/dm-0/queue/read_ahead_kb 4096
@@ -366,26 +258,15 @@ on fs && property:vendor.skip.charger_not_need=0
     # Update dm-verity state and set partition.*.verified properties
     verity_update_state
 
-<<<<<<< HEAD
-on verity-logging
-    exec u:r:slideshow:s0 -- /sbin/slideshow warning/verity_red_1 warning/verity_red_2
-
-on post-fs
-=======
 on verity-logging && property:vendor.skip.charger_not_need=0
     exec u:r:slideshow:s0 -- /sbin/slideshow warning/verity_red_1 warning/verity_red_2
 
 on post-fs && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     # Set netd memlock rlimit to 8MB
     setrlimit 8 8388608 8388608
 
     # Turn on swap
-<<<<<<< HEAD
-    swapon_all /vendor/etc/fstab.freescale
-=======
     swapon_all /vendor/etc/fstab.nxp
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Swap in only 1 page at a time
     write /proc/sys/vm/page-cluster 0
@@ -394,11 +275,7 @@ on post-fs && property:vendor.skip.charger_not_need=0
     chown system system /proc/pagetypeinfo
     chmod 0440 /proc/pagetypeinfo
 
-<<<<<<< HEAD
-on post-fs-data
-=======
 on post-fs-data && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     setprop vold.post_fs_data_done 1
     # create temp node for secure storage proxy
     mkdir /data/vendor/ss 0700 system system
@@ -407,19 +284,6 @@ on post-fs-data && property:vendor.skip.charger_not_need=0
     setprop TMPDIR /data/vendor/.opencl-cache
     mkdir /data/vendor/.opencl-cache 0771 system camera
 
-<<<<<<< HEAD
-on zygote-start
-    # Create the directories used by the Wireless subsystem
-    mkdir /data/misc/wifi 0770 wifi wifi
-    mkdir /data/misc/wifi/wpa_supplicant 0770 wifi wifi
-    mkdir /data/vendor/wifi 0771 wifi wifi
-    mkdir /data/vendor/wifi/wpa 0770 wifi wifi
-    mkdir /data/vendor/wifi/wpa/sockets 0770 wifi wifi
-    mkdir /data/misc/dhcp 0770 dhcp dhcp
-    chown dhcp dhcp /data/misc/dhcp
-
-service early_init_sh /vendor/bin/init.insmod.sh /vendor/etc/early.init.cfg sys.all.early_init.ready
-=======
 on zygote-start && property:vendor.skip.charger_not_need=0
     # Create the directories used by the Wireless subsystem
     mkdir /data/vendor/wifi 0771 wifi wifi
@@ -427,28 +291,19 @@ on zygote-start && property:vendor.skip.charger_not_need=0
     mkdir /data/vendor/wifi/wpa/sockets 0770 wifi wifi
 
 service early_init_sh /vendor/bin/init.insmod.sh /vendor/etc/early.init.cfg vendor.all.early_init.ready
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     class main
     user root
     group root system
     disabled
     oneshot
 
-<<<<<<< HEAD
-on property:sys.boot_completed=1 && property:vendor.storageproxyd=trusty
-=======
 on property:sys.boot_completed=1 && property:vendor.storageproxyd=trusty && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     start storageproxyd
 
 service storageproxyd /vendor/bin/storageproxyd -p /data/vendor/ss -r /dev/mmcblk2rpmb -d /dev/trusty-ipc-dev0
    group system
 
-<<<<<<< HEAD
-on property:ro.boot.vendor.sysrq=1
-=======
 on property:ro.boot.vendor.sysrq=1 && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     write /proc/sys/kernel/sysrq 1
 
 # setenv append_bootargs androidboot.usb.debugging=1
diff --git a/imx8m/vp6820_8mn/manifest.xml b/imx8m/vp6820_8mn/manifest.xml
index 6cc56b37..6603e3ef 100644
--- a/imx8m/vp6820_8mn/manifest.xml
+++ b/imx8m/vp6820_8mn/manifest.xml
@@ -1,4 +1,5 @@
 <manifest version="1.0" type="device" target-level="4">
+    <kernel  target-level="5" />
     <hal format="hidl">
 	<name>android.hardware.graphics.allocator</name>
         <transport>hwbinder</transport>
@@ -12,7 +13,7 @@
     <hal format="hidl">
         <name>android.hardware.graphics.composer</name>
         <transport>hwbinder</transport>
-        <version>2.3</version>
+        <version>2.4</version>
         <interface>
             <name>IComposer</name>
             <instance>default</instance>
@@ -21,7 +22,7 @@
     <hal format="hidl">
         <name>android.hardware.keymaster</name>
         <transport>hwbinder</transport>
-        <version>3.0</version>
+        <version>4.0</version>
         <interface>
             <name>IKeymasterDevice</name>
             <instance>default</instance>
@@ -108,43 +109,6 @@
             <instance>default</instance>
         </interface>
     </hal>
-    <hal format="hidl">
-       <name>android.hardware.wifi</name>
-       <transport>hwbinder</transport>
-       <version>1.3</version>
-       <interface>
-           <name>IWifi</name>
-           <instance>default</instance>
-       </interface>
-    </hal>
-    <hal format="hidl">
-       <name>android.hardware.wifi.supplicant</name>
-       <transport>hwbinder</transport>
-       <version>1.2</version>
-       <interface>
-           <name>ISupplicant</name>
-           <instance>default</instance>
-       </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.wifi.hostapd</name>
-        <transport>hwbinder</transport>
-        <version>1.1</version>
-        <interface>
-            <name>IHostapd</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-       <name>android.hardware.camera.provider</name>
-	<transport>hwbinder</transport>
-	<impl level="generic"></impl>
-	<version>2.4</version>
-	<interface>
-	    <name>ICameraProvider</name>
-	    <instance>legacy/0</instance>
-	</interface>
-    </hal>
     <hal format="hidl">
         <name>android.hardware.light</name>
         <transport>hwbinder</transport>
@@ -166,7 +130,7 @@
     <hal format="hidl">
         <name>android.hardware.audio</name>
         <transport>hwbinder</transport>
-        <version>5.0</version>
+        <version>6.0</version>
         <interface>
             <name>IDevicesFactory</name>
             <instance>default</instance>
@@ -175,30 +139,12 @@
     <hal format="hidl">
         <name>android.hardware.audio.effect</name>
         <transport>hwbinder</transport>
-		<version>5.0</version>
+		<version>6.0</version>
         <interface>
             <name>IEffectsFactory</name>
             <instance>default</instance>
         </interface>
     </hal>
-    <hal format="hidl">
-        <name>android.hardware.usb</name>
-        <transport>hwbinder</transport>
-        <version>1.1</version>
-        <interface>
-            <name>IUsb</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.usb.gadget</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IUsbGadget</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
     <hal format="hidl">
         <name>android.hardware.bluetooth</name>
         <transport>hwbinder</transport>
@@ -211,30 +157,12 @@
     <hal format="hidl">
         <name>android.hardware.dumpstate</name>
         <transport>hwbinder</transport>
-        <version>1.0</version>
+        <version>1.1</version>
         <interface>
             <name>IDumpstateDevice</name>
             <instance>default</instance>
         </interface>
     </hal>
-    <hal format="hidl">
-        <name>android.hardware.oemlock</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IOemLock</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.health</name>
-        <transport>hwbinder</transport>
-        <version>2.0</version>
-        <interface>
-            <name>IHealth</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
     <hal format="hidl">
         <name>nxp.hardware.display</name>
             <transport>hwbinder</transport>
@@ -245,12 +173,8 @@
         </interface>
     </hal>
     <hal format="hidl">
-        <name>android.hardware.neuralnetworks</name>
-        <transport>hwbinder</transport>
-        <version>1.2</version>
-        <interface>
-            <name>IDevice</name>
-            <instance>vsi-npu</instance>
-        </interface>
+       <name>android.hardware.camera.provider</name>
+       <transport>hwbinder</transport>
+       <fqname>@2.4::ICameraProvider/external/0</fqname>
     </hal>
 </manifest>
diff --git a/imx8m/vp6820_8mn/manifest.xml~post_merge_android-11.0.0_1.0.0_history b/imx8m/vp6820_8mn/manifest.xml~post_merge_android-11.0.0_1.0.0_history
deleted file mode 100644
index 378c5e1e..00000000
--- a/imx8m/vp6820_8mn/manifest.xml~post_merge_android-11.0.0_1.0.0_history
+++ /dev/null
@@ -1,171 +0,0 @@
-<manifest version="1.0" type="device" target-level="4">
-    <kernel  target-level="5" />
-    <hal format="hidl">
-	<name>android.hardware.graphics.allocator</name>
-        <transport>hwbinder</transport>
-	<impl level="generic"></impl>
-	<version>2.0</version>
-	<interface>
-	    <name>IAllocator</name>
-	    <instance>default</instance>
-	</interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.graphics.composer</name>
-        <transport>hwbinder</transport>
-        <version>2.4</version>
-        <interface>
-            <name>IComposer</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.keymaster</name>
-        <transport>hwbinder</transport>
-        <version>4.0</version>
-        <interface>
-            <name>IKeymasterDevice</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.drm</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>ICryptoFactory</name>
-            <instance>default</instance>
-        </interface>
-        <interface>
-            <name>IDrmFactory</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.gatekeeper</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IGatekeeper</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.graphics.mapper</name>
-        <transport arch="32+64">passthrough</transport>
-        <impl level="generic"></impl>
-        <version>2.1</version>
-        <interface>
-            <name>IMapper</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.renderscript</name>
-        <transport arch="32+64">passthrough</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IDevice</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.configstore</name>
-        <transport>hwbinder</transport>
-        <version>1.1</version>
-        <interface>
-            <name>ISurfaceFlingerConfigs</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.media.c2</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IComponentStore</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.media.omx</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IOmx</name>
-            <instance>default</instance>
-        </interface>
-        <interface>
-            <name>IOmxStore</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.light</name>
-        <transport>hwbinder</transport>
-        <version>2.0</version>
-        <interface>
-            <name>ILight</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.memtrack</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IMemtrack</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.audio</name>
-        <transport>hwbinder</transport>
-        <version>6.0</version>
-        <interface>
-            <name>IDevicesFactory</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.audio.effect</name>
-        <transport>hwbinder</transport>
-		<version>6.0</version>
-        <interface>
-            <name>IEffectsFactory</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.bluetooth</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IBluetoothHci</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.dumpstate</name>
-        <transport>hwbinder</transport>
-        <version>1.1</version>
-        <interface>
-            <name>IDumpstateDevice</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>nxp.hardware.display</name>
-            <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IDisplay</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-       <name>android.hardware.camera.provider</name>
-       <transport>hwbinder</transport>
-       <fqname>@2.4::ICameraProvider/external/0</fqname>
-    </hal>
-</manifest>
diff --git a/imx8m/vp6820_8mn/overlay/frameworks/base/core/res/res/values/config.xml b/imx8m/vp6820_8mn/overlay/frameworks/base/core/res/res/values/config.xml
index 099ec3b6..416ce4ff 100644
--- a/imx8m/vp6820_8mn/overlay/frameworks/base/core/res/res/values/config.xml
+++ b/imx8m/vp6820_8mn/overlay/frameworks/base/core/res/res/values/config.xml
@@ -185,30 +185,9 @@
     <!-- This device is not "voice capable"; it's data-only. -->
     <bool name="config_voice_capable">false</bool>
 
-    <!-- Boolean indicating whether the wifi chipset has dual frequency band support -->
-    <bool translatable="false" name="config_wifi_dual_band_support">true</bool>
-
     <!-- Boolean indicating whether system support sustained performance mode. -->
     <bool name="config_sustainedPerformanceModeSupported">true</bool>
 
-    <!-- Enable 802.11ac for Wifi hotspot (SAP) -->
-    <bool translatable="false" name="config_wifi_softap_ieee80211ac_supported">true</bool>
-
-    <!-- Enable ACS (auto channel selection) for Wifi hotspot (SAP) -->
-    <bool translatable="false" name="config_wifi_softap_acs_supported">true</bool>
-
-    <!-- Boolean indicating whether 802.11r Fast BSS Transition is enabled on this platform -->
-    <bool translatable="false" name="config_wifi_fast_bss_transition_enabled">true</bool>
-
-    <!-- Boolean indicating whether the wifi chipset has background scan support -->
-    <bool translatable="false" name="config_wifi_background_scan_support">true</bool>
-
-    <!-- Indicates that connected MAC randomization is supported on this device -->
-    <bool translatable="false" name="config_wifi_connected_mac_randomization_supported">true</bool>
-
-    <!-- Indicates that p2p MAC randomization is supported on this device -->
-    <bool translatable="false" name="config_wifi_p2p_mac_randomization_supported">true</bool>
-
     <!-- The default gravity for the picture-in-picture window.
          Currently, this maps to Gravity.TOP | Gravity.RIGHT -->
     <integer name="config_defaultPictureInPictureGravity">0x35</integer>
diff --git a/imx8m/vp6820_8mn/overlay/frameworks/base/core/res/res/values/config.xml~post_merge_android-11.0.0_1.0.0_history b/imx8m/vp6820_8mn/overlay/frameworks/base/core/res/res/values/config.xml~post_merge_android-11.0.0_1.0.0_history
deleted file mode 100644
index 0d89ad5b..00000000
--- a/imx8m/vp6820_8mn/overlay/frameworks/base/core/res/res/values/config.xml~post_merge_android-11.0.0_1.0.0_history
+++ /dev/null
@@ -1,190 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<!--
-/*
-** Copyright 2011, The Android Open Source Project
-**
-** Licensed under the Apache License, Version 2.0 (the "License");
-** you may not use this file except in compliance with the License.
-** You may obtain a copy of the License at
-**
-**     http://www.apache.org/licenses/LICENSE-2.0
-**
-** Unless required by applicable law or agreed to in writing, software
-** distributed under the License is distributed on an "AS IS" BASIS,
-** WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-** See the License for the specific language governing permissions and
-** limitations under the License.
-*/
--->
-
-<!-- These resources are around just to allow their values to be customized
-     for different hardware and product builds. -->
-<resources>
-
-    <!--For Android we support eth0 now -->
-    <string translatable="false" name="config_ethernet_iface_regex">eth0</string>
-
-    <!-- List of regexpressions describing the interface (if any) that represent tetherable
-         USB interfaces.  If the device doesn't want to support tething over USB this should
-         be empty.  An example would be "usb.*" -->
-     <string-array translatable="false" name="config_tether_usb_regexs">
-       <item>usb0</item>
-     </string-array>
-
-    <!-- List of regexpressions describing the interface (if any) that represent tetherable
-         Wifi interfaces.  If the device doesn't want to support tethering over Wifi this
-         should be empty.  An example would be "softap.*" -->
-    <string-array translatable="false" name="config_tether_wifi_regexs">
-      <item>"wlan0"</item>
-    </string-array>
-
-    <!-- List of regexpressions describing the interface (if any) that represent tetherable
-         bluetooth interfaces.  If the device doesn't want to support tethering over bluetooth this
-         should be empty. -->
-    <string-array translatable="false" name="config_tether_bluetooth_regexs">
-        <item>"bt-pan"</item>
-        </string-array>
-
-    <!-- Array of ConnectivityManager.TYPE_xxxx values allowable for tethering -->
-    <!-- Common options are [1, 4] for TYPE_WIFI and TYPE_MOBILE_DUN or
-    <!== [0,1,5,7,9] for TYPE_MOBILE, TYPE_WIFI, TYPE_MOBILE_HIPRI, TYPE_BLUETOOTH and TYPE_ETHERNET -->
-    <integer-array translatable="false" name="config_tether_upstream_types">
-        <item>0</item>
-        <item>1</item>
-        <item>5</item>
-        <item>9</item>
-    </integer-array>
-
-    <!-- Flag indicating whether we should enable the automatic brightness in Settings.
-         config_hardware_automatic_brightness_available is not set, so we will use software implementation -->
-    <bool name="config_automatic_brightness_available">true</bool>
-
-    <!-- An Array of "[ConnectivityManager connectionType],
-                      [# simultaneous connection types]"  -->
-    <string-array translatable="false" name="radioAttributes">
-        <item>"1,1"</item>
-        <item>"9,1"</item>
-    </string-array>
-
-    <!-- An Array of "[Connection name],[ConnectivityManager.TYPE_xxxx],
-         [associated radio-type],[priority],[restoral-timer(ms)],[dependencyMet]  -->
-    <!-- the 5th element "resore-time" indicates the number of milliseconds to delay
-         before automatically restore the default connection.  Set -1 if the connection
-         does not require auto-restore. -->
-    <!-- the 6th element indicates boot-time dependency-met value. -->
-    <string-array translatable="false" name="networkAttributes">
-        <item>"wifi,1,1,1,-1,true"</item>
-        <item>"bluetooth,7,7,2,-1,true"</item>
-        <item>"ethernet,9,9,2,-1,true"</item>
-    </string-array>
-
-    <!-- Array of light sensor LUX values to define our levels for auto backlight brightness support.
-         The N entries of this array define N + 1 zones as follows:
-
-         Zone 0:        0 <= LUX < array[0]
-         Zone 1:        array[0] <= LUX < array[1]
-         ...
-         Zone N:        array[N - 1] <= LUX < array[N]
-         Zone N + 1:    array[N] <= LUX < infinity
-
-         Must be overridden in platform specific overlays -->
-    <integer-array name="config_autoBrightnessLevels">
-        <item>5</item>
-        <item>15</item>
-        <item>50</item>
-        <item>100</item>
-        <item>200</item>
-        <item>400</item>
-        <item>1000</item>
-        <item>2000</item>
-        <item>3000</item>
-        <item>5000</item>
-        <item>10000</item>
-        <item>30000</item>
-    </integer-array>
-
-    <!-- Array of output values for LCD backlight corresponding to the LUX values
-         in the config_autoBrightnessLevels array.  This array should have size one greater
-         than the size of the config_autoBrightnessLevels array.
-         This must be overridden in platform specific overlays -->
-    <integer-array name="config_autoBrightnessLcdBacklightValues">
-        <item>5</item>    <!-- 0-5 -->
-        <item>20</item>   <!-- 5-15 -->
-        <item>30</item>   <!-- 15-50 -->
-        <item>40</item>   <!-- 50-100 -->
-        <item>50</item>   <!-- 100-200 -->
-        <item>60</item>   <!-- 200-400 -->
-        <item>70</item>   <!-- 400-1000 -->
-        <item>80</item>   <!-- 1000-2000 -->
-        <item>130</item>  <!-- 2000-3000 -->
-        <item>180</item>  <!-- 3000-5000 -->
-        <item>255</item>  <!-- 5000-10000 -->
-        <item>255</item>  <!-- 10000-30000 -->
-        <item>255</item>  <!-- 30000+ -->
-    </integer-array>
-
-    <!-- Array of output values for button backlight corresponding to the LUX values
-         in the config_autoBrightnessLevels array.  This array should have size one greater
-         than the size of the config_autoBrightnessLevels array.
-         This must be overridden in platform specific overlays -->
-    <integer-array name="config_autoBrightnessButtonBacklightValues">
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-    </integer-array>
-
-    <!-- Array of output values for keyboard backlight corresponding to the LUX values
-         in the config_autoBrightnessLevels array.  This array should have size one greater
-         than the size of the config_autoBrightnessLevels array.
-         This must be overridden in platform specific overlays -->
-    <integer-array name="config_autoBrightnessKeyboardBacklightValues">
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-    </integer-array>
-
-    <integer name="config_screenBrightnessDim">5</integer>
-
-    <!--  Maximum number of supported users -->
-    <integer name="config_multiuserMaximumUsers">8</integer>
-    <!--  Whether Multiuser UI should be shown -->
-    <bool name="config_enableMultiUserUI">true</bool>
-
-    <!-- Whether a software navigation bar should be shown. NOTE: in the future this may be
-         autodetected from the Configuration. -->
-    <bool name="config_showNavigationBar">true</bool>
-
-    <!-- This device is not "voice capable"; it's data-only. -->
-    <bool name="config_voice_capable">false</bool>
-
-    <!-- Boolean indicating whether system support sustained performance mode. -->
-    <bool name="config_sustainedPerformanceModeSupported">true</bool>
-</resources>
diff --git a/imx8m/vp6820_8mn/overlay/frameworks/base/packages/SettingsProvider/res/values/defaults.xml b/imx8m/vp6820_8mn/overlay/frameworks/base/packages/SettingsProvider/res/values/defaults.xml
index bd32383c..0bf9ee21 100644
--- a/imx8m/vp6820_8mn/overlay/frameworks/base/packages/SettingsProvider/res/values/defaults.xml
+++ b/imx8m/vp6820_8mn/overlay/frameworks/base/packages/SettingsProvider/res/values/defaults.xml
@@ -21,8 +21,5 @@
     <bool name="def_user_setup_complete">true</bool>
     <bool name="def_bluetooth_on">false</bool>
     <bool name="def_stay_on_while_plugged_in">true</bool>
-<<<<<<< HEAD
     <string name="def_immersive_mode_confirmations" translatable="false">confirmed</string>
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 </resources>
diff --git a/imx8m/vp6820_8mn/powerhint_imx8mn.json b/imx8m/vp6820_8mn/powerhint_imx8mn.json
index 272966e6..06f1feef 100644
--- a/imx8m/vp6820_8mn/powerhint_imx8mn.json
+++ b/imx8m/vp6820_8mn/powerhint_imx8mn.json
@@ -80,11 +80,7 @@
       "PowerHint": "INTERACTION",
       "Node": "CPULittleClusterMinFreq",
       "Duration": 0,
-<<<<<<< HEAD
-      "Value": "1400000"
-=======
       "Value": "1500000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "INTERACTION",
@@ -93,15 +89,12 @@
       "Value": "60"
     },
     {
-<<<<<<< HEAD
-=======
       "PowerHint": "INTERACTION",
       "Node": "PMQoSCpuDmaLatency",
       "Duration": 500,
       "Value": "0"
     },
     {
->>>>>>> post_merge/android-11.0.0_1.0.0_history
       "PowerHint": "LAUNCH",
       "Node": "CPULittleClusterMinFreq",
       "Duration": 5000,
@@ -122,24 +115,14 @@
     {
       "PowerHint": "CAMERA_LAUNCH",
       "Node": "CPULittleClusterMinFreq",
-<<<<<<< HEAD
-      "Duration": 1000,
-      "Value": "1200000"
-=======
       "Duration": 5000,
       "Value": "1500000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "CAMERA_LAUNCH",
       "Node": "CPULittleClusterMaxFreq",
-<<<<<<< HEAD
-      "Duration": 1000,
-      "Value": "1200000"
-=======
       "Duration": 5000,
       "Value": "1500000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "CAMERA_LAUNCH",
@@ -162,22 +145,13 @@
     {
       "PowerHint": "CAMERA_SHOT",
       "Node": "CPULittleClusterMinFreq",
-<<<<<<< HEAD
-      "Duration": 1000,
-      "Value": "1200000"
-=======
       "Duration": 5000,
       "Value": "1500000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "CAMERA_SHOT",
       "Node": "CPULittleClusterMaxFreq",
-<<<<<<< HEAD
-      "Duration": 1000,
-=======
       "Duration": 5000,
->>>>>>> post_merge/android-11.0.0_1.0.0_history
       "Value": "1500000"
     },
     {
diff --git a/imx8m/vp6820_8mn/sepolicy/file_contexts b/imx8m/vp6820_8mn/sepolicy/file_contexts
index 9d06e290..b86af770 100644
--- a/imx8m/vp6820_8mn/sepolicy/file_contexts
+++ b/imx8m/vp6820_8mn/sepolicy/file_contexts
@@ -23,15 +23,12 @@
 /dev/block/platform/soc@0/30800000.bus/30b60000\.mmc/by-name/userdata         u:object_r:userdata_block_device:s0
 /dev/block/platform/soc@0/30800000.bus/30b60000\.mmc/by-name/vbmeta_[ab]      u:object_r:vbmeta_block_device:s0
 /dev/block/platform/soc@0/30800000.bus/30b60000\.mmc/by-name/super            u:object_r:super_block_device:s0
-<<<<<<< HEAD
 /dev/block/platform/soc@0/30800000.bus/30b60000\.mmc/by-name/bootloader_[ab]  u:object_r:bootloader_block_device:s0
 /dev/block/platform/soc@0/30800000.bus/30b60000\.mmc/by-name/mem_info_[ab]    u:object_r:bootloader_block_device:s0
 
 # spl
 /dev/block/mmcblk2boot[01]            u:object_r:spl_block_device:s0
 /dev/block/mmcblk2boot[01]p[1-9]      u:object_r:spl_block_device:s0
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 #peripheral
 /vendor/bin/magd                u:object_r:sensors_exec:s0
@@ -50,8 +47,5 @@
 
 #Neural Network HAL service
 /vendor/bin/hw/android\.hardware\.neuralnetworks@1\.2-service-vsi-npu-server      u:object_r:hal_neuralnetworks_imx_exec:s0
-<<<<<<< HEAD
-=======
 
 /dev/block/pmem0  u:object_r:rebootescrow_device:s0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mn/sepolicy/genfs_contexts b/imx8m/vp6820_8mn/sepolicy/genfs_contexts
index dee8813e..7a63dc55 100644
--- a/imx8m/vp6820_8mn/sepolicy/genfs_contexts
+++ b/imx8m/vp6820_8mn/sepolicy/genfs_contexts
@@ -5,16 +5,11 @@ genfscon sysfs /devices/platform/soc@0/30800000.bus/30b50000.mmc/mmc_host/mmc1/m
 genfscon sysfs /devices/platform/soc@0/30800000.bus/30b60000.mmc/mmc_host/mmc2/mmc2:0001/block/mmcblk2 u:object_r:sysfs_block_devices:s0
 genfscon sysfs /devices/platform/soc@0/30800000.bus/30bb0000.spi/spi_master/spi3/spi3.0/mtd/mtd0/mtdblock0/ u:object_r:sysfs_block_devices:s0
 genfscon sysfs /devices/platform/soc@0/32c00000.bus/32e10000.dsi_controller/32e10000.dsi_controller.0/backlight u:object_r:sysfs_leds:s0
-<<<<<<< HEAD
 genfscon sysfs /devices/platform/backlight/backlight/backlight u:object_r:sysfs_leds:s0
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 #sys/class/net
 genfscon sysfs /devices/platform/soc@0/30800000.bus/30be0000.ethernet/net                                u:object_r:sysfs_net:s0
 genfscon sysfs /devices/platform/soc@0/30800000.bus/30b40000.mmc/mmc_host/mmc0/mmc0:0001/mmc0:0001:1/net u:object_r:sysfs_net:s0
-<<<<<<< HEAD
-=======
 
 # android.system.suspend@1.0-service
 genfscon sysfs /devices/platform/soc@0/30800000.bus/30be0000.ethernet/net/eth0/wakeup0                                            u:object_r:sysfs_wakeup:s0
@@ -27,4 +22,3 @@ genfscon sysfs /devices/platform/soc@0/30800000.bus/30a30000.i2c/i2c-1/1-0050/po
 
 # for dumpstate to access the stat file
 genfscon sysfs /devices/platform/b8500000.pmem/ndbus0/region0/namespace0.0/block/pmem0                                            u:object_r:sysfs_block_devices:s0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mn/vp6820_8mn.mk b/imx8m/vp6820_8mn/vp6820_8mn.mk
index 245122d5..f5069184 100644
--- a/imx8m/vp6820_8mn/vp6820_8mn.mk
+++ b/imx8m/vp6820_8mn/vp6820_8mn.mk
@@ -1,21 +1,16 @@
 # This is a FSL Android Reference Design platform based on i.MX8QP ARD board
 # It will inherit from FSL core product which in turn inherit from Google generic
 
-<<<<<<< HEAD
 IMX_DEVICE_PATH := device/idtech/imx8m/vp6820_8mn
-=======
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mn
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # configs shared between uboot, kernel and Android rootfs
 include $(IMX_DEVICE_PATH)/SharedBoardConfig.mk
 
-<<<<<<< HEAD
 -include device/idtech/common/imx_path/ImxPathConfig.mk
 include device/idtech/imx8m/ProductConfigCommon.mk
 
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.freescale),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab.freescale)
+ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.nxp),)
+$(shell touch $(IMX_DEVICE_PATH)/fstab.nxp)
 endif
 
 # Overrides
@@ -23,34 +18,16 @@ PRODUCT_NAME := vp6820_8mn
 PRODUCT_DEVICE := vp6820_8mn
 PRODUCT_MODEL := VP6820_8MN
 
-PRODUCT_FULL_TREBLE_OVERRIDE := true
-=======
--include device/nxp/common/imx_path/ImxPathConfig.mk
-include device/nxp/imx8m/ProductConfigCommon.mk
-
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.nxp),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab.nxp)
-endif
-
-# Overrides
-PRODUCT_NAME := evk_8mn
-PRODUCT_DEVICE := evk_8mn
-PRODUCT_MODEL := EVK_8MN
-
 PRODUCT_FULL_TREBLE_OVERRIDE := true
 PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/power
 PRODUCT_SOONG_NAMESPACES += hardware/google/pixel
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 #Enable this to choose 32 bit user space build
 #IMX8_BUILD_32BIT_ROOTFS := true
 
-<<<<<<< HEAD
-=======
 # Enable this to support vendor boot and boot header v3, this would be a MUST for GKI
 TARGET_USE_VENDOR_BOOT ?= true
 
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 #Enable this to use dynamic partitions for the readonly partitions not touched by bootloader
 TARGET_USE_DYNAMIC_PARTITIONS ?= true
 #If the device is retrofit to have dynamic partition feature, set this variable to true to build
@@ -58,16 +35,10 @@ TARGET_USE_DYNAMIC_PARTITIONS ?= true
 TARGET_USE_RETROFIT_DYNAMIC_PARTITION ?= false
 
 ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
-<<<<<<< HEAD
-  PRODUCT_USE_DYNAMIC_PARTITIONS := true
-  BOARD_BUILD_SUPER_IMAGE_BY_DEFAULT := true
-  BOARD_SUPER_IMAGE_IN_UPDATE_PACKAGE := false
-=======
   $(call inherit-product, $(SRC_TARGET_DIR)/product/virtual_ab_ota.mk)
   PRODUCT_USE_DYNAMIC_PARTITIONS := true
   BOARD_BUILD_SUPER_IMAGE_BY_DEFAULT := true
-  BOARD_SUPER_IMAGE_IN_UPDATE_PACKAGE := true
->>>>>>> post_merge/android-11.0.0_1.0.0_history
+  BOARD_SUPER_IMAGE_IN_UPDATE_PACKAGE := false
   ifeq ($(TARGET_USE_RETROFIT_DYNAMIC_PARTITION),true)
     PRODUCT_RETROFIT_DYNAMIC_PARTITIONS := true
     BOARD_SUPER_PARTITION_METADATA_DEVICE := system
@@ -84,12 +55,6 @@ ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
   endif
 endif
 
-<<<<<<< HEAD
-#Enable this to config 1GB ddr on vp6820_8mn
-#LOW_MEMORY := true
-
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 # Include keystore attestation keys and certificates.
 ifeq ($(PRODUCT_IMX_TRUSTY),true)
 -include $(IMX_SECURITY_PATH)/attestation/imx_attestation.mk
@@ -107,15 +72,14 @@ PRODUCT_COPY_FILES += \
     $(IMX_DEVICE_PATH)/audio_effects.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_effects.xml \
     $(IMX_DEVICE_PATH)/audio_policy_configuration.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
     $(IMX_DEVICE_PATH)/usb_audio_policy_configuration-direct-output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/usb_audio_policy_configuration-direct-output.xml \
-<<<<<<< HEAD
-    $(IMX_DEVICE_PATH)/fstab.freescale:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.freescale \
-    $(IMX_DEVICE_PATH)/init.imx8mn.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.freescale.imx8mn.rc \
-    $(IMX_DEVICE_PATH)/init.recovery.freescale.rc:root/init.recovery.freescale.rc \
+    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.nxp \
+    $(IMX_DEVICE_PATH)/init.imx8mn.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mn.rc \
+    $(IMX_DEVICE_PATH)/init.recovery.nxp.rc:root/init.recovery.nxp.rc \
     $(IMX_DEVICE_PATH)/early.init.cfg:$(TARGET_COPY_OUT_VENDOR)/etc/early.init.cfg \
-    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.freescale.rc \
-    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.freescale.usb.rc \
+    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.rc \
+    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.usb.rc \
     $(IMX_DEVICE_PATH)/required_hardware.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/required_hardware.xml \
-    $(IMX_DEVICE_PATH)/ueventd.freescale.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
+    $(IMX_DEVICE_PATH)/ueventd.nxp.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
     $(LINUX_FIRMWARE_IMX_PATH)/linux-firmware-imx/firmware/sdma/sdma-imx7d.bin:$(TARGET_COPY_OUT_VENDOR)/firmware/imx/sdma/sdma-imx7d.bin \
     device/idtech/common/init/init.insmod.sh:$(TARGET_COPY_OUT_VENDOR)/bin/init.insmod.sh \
     device/idtech/common/wifi/p2p_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/p2p_supplicant_overlay.conf \
@@ -127,36 +91,16 @@ PRODUCT_COPY_FILES += \
     device/idtech/common/prebuilts/mem_info.txt:$(PRODUCT_OUT)/mem_info.txt \
     device/idtech/imx8m/device_policy.sh:$(TARGET_COPY_OUT_PRODUCT)/etc/init/hw/device_policy.sh
 
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
-PRODUCT_COPY_FILES += \
-    $(FSL_PROPRIETARY_PATH)/fsl-proprietary/dynamic_partiton_tools/lpmake:lpmake \
-    $(FSL_PROPRIETARY_PATH)/fsl-proprietary/dynamic_partiton_tools/lpmake.exe:lpmake.exe
-=======
-    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.nxp \
-    $(IMX_DEVICE_PATH)/init.imx8mn.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mn.rc \
-    $(IMX_DEVICE_PATH)/init.recovery.nxp.rc:root/init.recovery.nxp.rc \
-    $(IMX_DEVICE_PATH)/early.init.cfg:$(TARGET_COPY_OUT_VENDOR)/etc/early.init.cfg \
-    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.rc \
-    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.usb.rc \
-    $(IMX_DEVICE_PATH)/required_hardware.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/required_hardware.xml \
-    $(IMX_DEVICE_PATH)/ueventd.nxp.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
-    $(LINUX_FIRMWARE_IMX_PATH)/linux-firmware-imx/firmware/sdma/sdma-imx7d.bin:$(TARGET_COPY_OUT_VENDOR)/firmware/imx/sdma/sdma-imx7d.bin \
-    device/nxp/common/init/init.insmod.sh:$(TARGET_COPY_OUT_VENDOR)/bin/init.insmod.sh \
-    device/nxp/common/wifi/p2p_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/p2p_supplicant_overlay.conf \
-    device/nxp/common/wifi/wpa_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/wpa_supplicant_overlay.conf
-
 # We load the fstab from device tree so this is not needed, but since no kernel modules are installed to vendor
 # boot ramdisk so far, we need this step to generate the vendor-ramdisk folder or build process would fail. This
 # can be deleted once we figure out what kernel modules should be put into the vendor boot ramdisk.
 ifeq ($(TARGET_USE_VENDOR_BOOT),true)
 PRODUCT_COPY_FILES += \
     $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR_RAMDISK)/first_stage_ramdisk/fstab.nxp
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 endif
 
 # Audio card json
 PRODUCT_COPY_FILES += \
-<<<<<<< HEAD
     device/idtech/common/audio-json/wm8524_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/wm8524_config.json \
     device/idtech/common/audio-json/spdif_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/spdif_config.json \
     device/idtech/common/audio-json/micfil_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/micfil_config.json \
@@ -172,31 +116,12 @@ endif
 
 PRODUCT_COPY_FILES += \
     device/idtech/imx8m/vp6820_8mn/camera_config_imx8mn.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/camera_config_imx8mn.json
-=======
-    device/nxp/common/audio-json/wm8524_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/wm8524_config.json \
-    device/nxp/common/audio-json/spdif_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/spdif_config.json \
-    device/nxp/common/audio-json/micfil_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/micfil_config.json \
-    device/nxp/common/audio-json/btsco_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/btsco_config.json \
-    device/nxp/common/audio-json/readme.txt:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/readme.txt
-
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_COPY_FILES += \
-    device/nxp/common/security/rpmb_key_test.bin:rpmb_key_test.bin \
-    device/nxp/common/security/testkey_public_rsa4096.bin:testkey_public_rsa4096.bin
-endif
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mn/camera_config_imx8mn.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/camera_config_imx8mn.json
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # ONLY devices that meet the CDD's requirements may declare these features
 PRODUCT_COPY_FILES += \
     frameworks/native/data/etc/android.hardware.audio.output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.audio.output.xml \
     frameworks/native/data/etc/android.hardware.bluetooth_le.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.bluetooth_le.xml \
-<<<<<<< HEAD
-=======
     frameworks/native/data/etc/android.hardware.camera.external.xml:vendor/etc/permissions/android.hardware.camera.external.xml \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     frameworks/native/data/etc/android.hardware.camera.front.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.front.xml \
     frameworks/native/data/etc/android.hardware.camera.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.xml \
     frameworks/native/data/etc/android.hardware.ethernet.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.ethernet.xml \
@@ -209,10 +134,7 @@ PRODUCT_COPY_FILES += \
     frameworks/native/data/etc/android.hardware.usb.host.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.host.xml \
     frameworks/native/data/etc/android.hardware.vulkan.level-0.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.level-0.xml \
     frameworks/native/data/etc/android.hardware.vulkan.version-1_1.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.version-1_1.xml \
-<<<<<<< HEAD
-=======
     frameworks/native/data/etc/android.software.vulkan.deqp.level-2020-03-01.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.vulkan.deqp.level-2020-03-01.xml \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     frameworks/native/data/etc/android.hardware.wifi.direct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.direct.xml \
     frameworks/native/data/etc/android.hardware.wifi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.xml \
     frameworks/native/data/etc/android.hardware.wifi.passpoint.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.passpoint.xml \
@@ -220,10 +142,7 @@ PRODUCT_COPY_FILES += \
     frameworks/native/data/etc/android.software.backup.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.backup.xml \
     frameworks/native/data/etc/android.software.device_admin.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.device_admin.xml \
     frameworks/native/data/etc/android.software.managed_users.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.managed_users.xml \
-<<<<<<< HEAD
-=======
     frameworks/native/data/etc/android.software.midi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.midi.xml \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     frameworks/native/data/etc/android.software.print.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.print.xml \
     frameworks/native/data/etc/android.software.sip.voip.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.sip.voip.xml \
     frameworks/native/data/etc/android.software.verified_boot.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.verified_boot.xml \
@@ -234,8 +153,9 @@ PRODUCT_COPY_FILES += \
 # Vendor seccomp policy files for media components:
 PRODUCT_COPY_FILES += \
     $(IMX_DEVICE_PATH)/seccomp/mediacodec-seccomp.policy:vendor/etc/seccomp_policy/mediacodec.policy \
-<<<<<<< HEAD
-    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy
+    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy \
+    device/idtech/common/seccomp_policy/codec2.vendor.base.policy:vendor/etc/seccomp_policy/codec2.vendor.base.policy \
+    device/idtech/common/seccomp_policy/codec2.vendor.ext.policy:vendor/etc/seccomp_policy/codec2.vendor.ext.policy
 
 PRODUCT_COPY_FILES += \
     device/idtech/imx8m/vp6820_8mn/powerhint_imx8mn.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/powerhint_imx8mn.json
@@ -244,32 +164,10 @@ PRODUCT_COPY_FILES += \
 PRODUCT_COPY_FILES += \
     device/idtech/common/tools/fastboot_imx_flashall.bat:fastboot_imx_flashall.bat \
     device/idtech/common/tools/fastboot_imx_flashall.sh:fastboot_imx_flashall.sh \
-    device/idtech/common/tools/fsl-sdcard-partition.sh:fsl-sdcard-partition.sh \
+    device/idtech/common/tools/imx-sdcard-partition.sh:imx-sdcard-partition.sh \
     device/idtech/common/tools/uuu_imx_android_flash.bat:uuu_imx_android_flash.bat \
     device/idtech/common/tools/uuu_imx_android_flash.sh:uuu_imx_android_flash.sh
 
-# Copy media_codecs.xml for 1GB vp6820_8mn board
-ifeq ($(LOW_MEMORY),true)
-PRODUCT_COPY_FILES += \
-    $(FSL_PROPRIETARY_PATH)/fsl-proprietary/media-profile/imx8mn/media_codecs_no_vpu.xml:$(TARGET_COPY_OUT_VENDOR)/etc/media_codecs.xml
-endif
-=======
-    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.base.policy:vendor/etc/seccomp_policy/codec2.vendor.base.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.ext.policy:vendor/etc/seccomp_policy/codec2.vendor.ext.policy
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mn/powerhint_imx8mn.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/powerhint_imx8mn.json
-
-# fastboot_imx_flashall scripts, fsl-sdcard-partition script uuu_imx_android_flash scripts
-PRODUCT_COPY_FILES += \
-    device/nxp/common/tools/fastboot_imx_flashall.bat:fastboot_imx_flashall.bat \
-    device/nxp/common/tools/fastboot_imx_flashall.sh:fastboot_imx_flashall.sh \
-    device/nxp/common/tools/imx-sdcard-partition.sh:imx-sdcard-partition.sh \
-    device/nxp/common/tools/uuu_imx_android_flash.bat:uuu_imx_android_flash.bat \
-    device/nxp/common/tools/uuu_imx_android_flash.sh:uuu_imx_android_flash.sh
-
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 USE_XML_AUDIO_POLICY_CONF := 1
 
@@ -285,9 +183,6 @@ PRODUCT_COPY_FILES += \
 
 # HWC2 HAL
 PRODUCT_PACKAGES += \
-<<<<<<< HEAD
-    android.hardware.graphics.composer@2.3-service
-=======
     android.hardware.graphics.composer@2.4-service
 
 # Charger Mode
@@ -297,7 +192,6 @@ PRODUCT_PRODUCT_PROPERTIES += \
 # Do not skip charger_not_need trigger by default
 PRODUCT_DEFAULT_PROPERTY_OVERRIDES += \
     vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # Gralloc HAL
 PRODUCT_PACKAGES += \
@@ -339,12 +233,7 @@ PRODUCT_PACKAGES += \
     libNNGPUBinary-lite \
     libNNGPUBinary-ulite \
     libNNArchPerf \
-<<<<<<< HEAD
-    libarchmodelSw \
-    gatekeeper.imx
-=======
     libarchmodelSw
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # Neural Network HAL and Lib
 PRODUCT_PACKAGES += \
@@ -353,24 +242,15 @@ PRODUCT_PACKAGES += \
     android.hardware.neuralnetworks@1.2-service-vsi-npu-server
 
 PRODUCT_PACKAGES += \
-<<<<<<< HEAD
-    android.hardware.audio@5.0-impl:32 \
+    android.hardware.audio@6.0-impl:32 \
     android.hardware.audio@2.0-service \
-    android.hardware.audio.effect@5.0-impl:32 \
+    android.hardware.audio.effect@6.0-impl:32 \
     android.hardware.power@1.3-service.imx \
     android.hardware.light@2.0-impl \
     android.hardware.light@2.0-service \
     android.hardware.sensors@1.0-impl \
     android.hardware.sensors@1.0-convert \
     android.hardware.sensors@1.0-service \
-=======
-    android.hardware.audio@6.0-impl:32 \
-    android.hardware.audio@2.0-service \
-    android.hardware.audio.effect@6.0-impl:32 \
-    android.hardware.power@1.3-service.imx \
-    android.hardware.light@2.0-impl \
-    android.hardware.light@2.0-service \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     android.hardware.configstore@1.1-service \
     configstore@1.1.policy
 
@@ -378,12 +258,8 @@ PRODUCT_PACKAGES += \
 PRODUCT_PACKAGES += \
     android.hardware.thermal@2.0-service.imx
 PRODUCT_COPY_FILES += \
-<<<<<<< HEAD
-    device/idtech/imx8m/vp6820_8mn/thermal_info_config_imx8mn.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/thermal_info_config_imx8mn.json
-=======
-    device/nxp/imx8m/evk_8mn/thermal_info_config_imx8mn.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/thermal_info_config_imx8mn.json \
-    device/nxp/imx8m/evk_8mn/external_camera_config.xml:$(TARGET_COPY_OUT_VENDOR)/etc/external_camera_config.xml
->>>>>>> post_merge/android-11.0.0_1.0.0_history
+    device/idtech/imx8m/evk_8mn/thermal_info_config_imx8mn.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/thermal_info_config_imx8mn.json \
+    device/idtech/imx8m/evk_8mn/external_camera_config.xml:$(TARGET_COPY_OUT_VENDOR)/etc/external_camera_config.xml
 
 # Usb HAL
 PRODUCT_PACKAGES += \
@@ -394,7 +270,6 @@ PRODUCT_PACKAGES += \
     android.hardware.bluetooth@1.0-impl \
     android.hardware.bluetooth@1.0-service
 
-<<<<<<< HEAD
 # BCM Bluetooth vendor config
 PRODUCT_PACKAGES += \
     bt_vendor.conf
@@ -403,35 +278,22 @@ PRODUCT_PACKAGES += \
 PRODUCT_COPY_FILES += \
     vendor/nxp/imx-firmware/cyw-wifi-bt/1MW_CYW43455/BCM4345C0.1MW.hcd:$(TARGET_COPY_OUT_VENDOR)/firmware/brcm/CYW4345C0.1MW.hcd
 
-=======
-# NXP 8987 Bluetooth vendor config
-PRODUCT_PACKAGES += \
-    bt_vendor.conf
-
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 # WiFi HAL
 PRODUCT_PACKAGES += \
     android.hardware.wifi@1.0-service \
     wifilogd \
     wificond
 
-<<<<<<< HEAD
 # BCM 1MW Wifi Firmware
 PRODUCT_COPY_FILES += \
     vendor/nxp/imx-firmware/cyw-wifi-bt/1MW_CYW43455/brcmfmac43455-sdio.bin:$(TARGET_COPY_OUT_VENDOR)/firmware/brcm/brcmfmac43455-sdio.bin \
     vendor/nxp/imx-firmware/cyw-wifi-bt/1MW_CYW43455/brcmfmac43455-sdio.clm_blob:$(TARGET_COPY_OUT_VENDOR)/firmware/brcm/brcmfmac43455-sdio.clm_blob \
     vendor/nxp/imx-firmware/cyw-wifi-bt/1MW_CYW43455/brcmfmac43455-sdio.txt:$(TARGET_COPY_OUT_VENDOR)/firmware/brcm/brcmfmac43455-sdio.txt
-=======
+
 # WiFi RROs
 PRODUCT_PACKAGES += \
     WifiOverlay
 
-# NXP 8987 Wifi and Bluetooth Combo Firmware
-PRODUCT_COPY_FILES += \
-    vendor/nxp/imx-firmware/nxp/FwImage_8987/sdiouart8987_combo_v0.bin:vendor/firmware/sdiouart8987_combo_v0.bin \
-    vendor/nxp/imx-firmware/nxp/android_wifi_mod_para.conf:vendor/firmware/wifi_mod_para_sd8987.conf
->>>>>>> post_merge/android-11.0.0_1.0.0_history
-
 # Wifi regulatory
 PRODUCT_COPY_FILES += \
     external/wireless-regdb/regulatory.db:vendor/firmware/regulatory.db \
@@ -440,20 +302,11 @@ PRODUCT_COPY_FILES += \
 # Keymaster HAL
 ifeq ($(PRODUCT_IMX_TRUSTY),true)
 PRODUCT_PACKAGES += \
-<<<<<<< HEAD
-    android.hardware.keymaster@3.0-service.trusty
-endif
-
-PRODUCT_PACKAGES += \
-    android.hardware.keymaster@3.0-impl \
-    android.hardware.keymaster@3.0-service
-=======
     android.hardware.keymaster@4.0-service.trusty
 endif
 
 PRODUCT_PACKAGES += \
     android.hardware.keymaster@4.0-service-imx
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # DRM HAL
 TARGET_ENABLE_MEDIADRM_64 := true
@@ -463,23 +316,13 @@ PRODUCT_PACKAGES += \
 
 # new gatekeeper HAL
 PRODUCT_PACKAGES += \
-<<<<<<< HEAD
-    android.hardware.gatekeeper@1.0-impl \
-    android.hardware.gatekeeper@1.0-service
-=======
     android.hardware.gatekeeper@1.0-service.software-imx
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ifneq ($(BUILD_TARGET_FS),ubifs)
 PRODUCT_PROPERTY_OVERRIDES += \
     ro.frp.pst=/dev/block/by-name/presistdata
 endif
 
-<<<<<<< HEAD
-# ro.product.first_api_level indicates the first api level the device has commercially launched on.
-PRODUCT_PROPERTY_OVERRIDES += \
-    ro.product.first_api_level=28
-
 PRODUCT_PACKAGES += \
     DirectAudioPlayer
 ifneq (user,$(TARGET_BUILD_VARIANT))
@@ -487,14 +330,6 @@ ifneq (user,$(TARGET_BUILD_VARIANT))
 PRODUCT_PACKAGES += \
                     tflitecamerademo
 endif
-=======
-PRODUCT_PACKAGES += \
-    DirectAudioPlayer
-
-# Tensorflow lite camera demo
-PRODUCT_PACKAGES += \
-                    tflitecamerademo
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # Add oem unlocking option in settings.
 PRODUCT_PROPERTY_OVERRIDES += ro.frp.pst=/dev/block/by-name/presistdata
@@ -503,15 +338,6 @@ PRODUCT_COMPATIBLE_PROPERTY_OVERRIDE := true
 # Add Trusty OS backed gatekeeper and secure storage proxy
 ifeq ($(PRODUCT_IMX_TRUSTY),true)
 PRODUCT_PACKAGES += \
-<<<<<<< HEAD
-    gatekeeper.trusty \
-    storageproxyd
-endif
-
-#Dumpstate HAL 1.0 support
-PRODUCT_PACKAGES += \
-    android.hardware.dumpstate@1.0-service.imx
-=======
     android.hardware.gatekeeper@1.0-service.trusty \
     storageproxyd
 endif
@@ -519,7 +345,6 @@ endif
 #Dumpstate HAL 1.1 support
 PRODUCT_PACKAGES += \
     android.hardware.dumpstate@1.1-service.imx
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ifeq ($(PRODUCT_IMX_TRUSTY),true)
 #Oemlock HAL 1.0 support
@@ -527,32 +352,21 @@ PRODUCT_PACKAGES += \
     android.hardware.oemlock@1.0-service.imx
 endif
 
-<<<<<<< HEAD
 # Multi-Display launcher
 PRODUCT_PACKAGES += \
     MultiClientInputMethod
 
-# Specify rollback index for bootloader and for AVB
-=======
 # Specify rollback index for boot and vbmeta partitions
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 ifneq ($(AVB_RBINDEX),)
 BOARD_AVB_ROLLBACK_INDEX := $(AVB_RBINDEX)
 else
 BOARD_AVB_ROLLBACK_INDEX := 0
 endif
 
-<<<<<<< HEAD
-ifneq (,$(filter userdebug eng,$(TARGET_BUILD_VARIANT)))
-$(call inherit-product, $(SRC_TARGET_DIR)/product/gsi_keys.mk)
-PRODUCT_PACKAGES += \
-    adb_debug.prop
-=======
 ifneq ($(AVB_BOOT_RBINDEX),)
 BOARD_AVB_BOOT_ROLLBACK_INDEX := $(AVB_BOOT_RBINDEX)
 else
 BOARD_AVB_BOOT_ROLLBACK_INDEX := 0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 endif
 
 IMX-DEFAULT-G2D-LIB := libg2d-opencl
@@ -570,9 +384,20 @@ PRODUCT_PACKAGES += \
     c2_component_register_ms \
     c2_component_register_ra
 
-<<<<<<< HEAD
+# Resume on Reboot support
+PRODUCT_PACKAGES += \
+    android.hardware.rebootescrow-service.default
+
+PRODUCT_PROPERTY_OVERRIDES += \
+    ro.rebootescrow.device=/dev/block/pmem0
+
+PRODUCT_SOONG_NAMESPACES += hardware/google/camera
+PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/camera
+
 $(call  inherit-product-if-exists, vendor/nxp-private/security/nxp_security.mk)
 
+$(call inherit-product, $(SRC_TARGET_DIR)/product/emulated_storage.mk)
+
 # Copy Quectel vendor RIL
 PRODUCT_COPY_FILES += \
     vendor/quectel/libstdc++.so:/vendor/lib64/libstdc++.so \
@@ -606,18 +431,3 @@ PRODUCT_PACKAGES += \
 # Enable kernel log for diagnosis
 PRODUCT_PROPERTY_OVERRIDES += \
     ro.logd.kernel=true
-=======
-# Resume on Reboot support
-PRODUCT_PACKAGES += \
-    android.hardware.rebootescrow-service.default
-
-PRODUCT_PROPERTY_OVERRIDES += \
-    ro.rebootescrow.device=/dev/block/pmem0
-
-PRODUCT_SOONG_NAMESPACES += hardware/google/camera
-PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/camera
-
-$(call  inherit-product-if-exists, vendor/nxp-private/security/nxp_security.mk)
-
-$(call inherit-product, $(SRC_TARGET_DIR)/product/emulated_storage.mk)
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mp/AndroidBoard.mk b/imx8m/vp6820_8mp/AndroidBoard.mk
index 9cce37db..7d2ec036 100644
--- a/imx8m/vp6820_8mp/AndroidBoard.mk
+++ b/imx8m/vp6820_8mp/AndroidBoard.mk
@@ -1,19 +1,9 @@
 LOCAL_PATH := $(call my-dir)
 
-<<<<<<< HEAD
 include device/idtech/common/build/dtbo.mk
 include device/idtech/common/build/imx-recovery.mk
 include device/idtech/common/build/gpt.mk
 include device/idtech/common/build/userdata.mk
-#TODO add imx8mp target
-include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/media-profile/media-profile.mk
-include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/sensor/fsl-sensor.mk
-=======
-include device/nxp/common/build/dtbo.mk
-include device/nxp/common/build/imx-recovery.mk
-include device/nxp/common/build/gpt.mk
-#TODO add imx8mp target
 include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/media-profile/media-profile.mk
 include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/sensor/fsl-sensor.mk
 -include $(IMX_MEDIA_CODEC_XML_PATH)/mediacodec-profile/mediacodec-profile.mk
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mp/AndroidUboot.mk b/imx8m/vp6820_8mp/AndroidUboot.mk
index 8c590eeb..9405e681 100644
--- a/imx8m/vp6820_8mp/AndroidUboot.mk
+++ b/imx8m/vp6820_8mp/AndroidUboot.mk
@@ -16,11 +16,7 @@ define build_imx_uboot
 	cp $(UBOOT_OUT)/arch/arm/dts/imx8mp-evk.dtb $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
 	cp $(FSL_PROPRIETARY_PATH)/linux-firmware-imx/firmware/ddr/synopsys/lpddr4_pmu_train* $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
 	$(MAKE) -C $(IMX_PATH)/arm-trusted-firmware/ PLAT=`echo $(2) | cut -d '-' -f1` clean; \
-<<<<<<< HEAD
 	if [ `echo $(2) | cut -d '-' -f3` = "trusty" ]; then \
-=======
-	if [ `echo $(2) | cut -d '-' -f2` = "trusty" ]; then \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 		cp $(FSL_PROPRIETARY_PATH)/fsl-proprietary/uboot-firmware/imx8m/tee-imx8mp.bin $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/tee.bin; \
 		$(MAKE) -C $(IMX_PATH)/arm-trusted-firmware/ CROSS_COMPILE="$(ATF_CROSS_COMPILE)" PLAT=`echo $(2) | cut -d '-' -f1` bl31 -B SPD=trusty 1>/dev/null || exit 1; \
 	else \
diff --git a/imx8m/vp6820_8mp/BoardConfig.mk b/imx8m/vp6820_8mp/BoardConfig.mk
index 5b34f07a..cb0ac6a2 100644
--- a/imx8m/vp6820_8mp/BoardConfig.mk
+++ b/imx8m/vp6820_8mp/BoardConfig.mk
@@ -3,12 +3,8 @@
 #
 
 BOARD_SOC_TYPE := IMX8MP
-<<<<<<< HEAD
 BOARD_SOM_TYPE := a200
 BOARD_TYPE := DEVBOARD
-=======
-BOARD_TYPE := EVK
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 BOARD_HAVE_VPU := true
 BOARD_VPU_TYPE := hantro
 HAVE_FSL_IMX_GPU2D := false
@@ -17,10 +13,6 @@ HAVE_FSL_IMX_IPU := false
 HAVE_FSL_IMX_PXP := false
 BOARD_KERNEL_BASE := 0x40400000
 TARGET_GRALLOC_VERSION := v3
-<<<<<<< HEAD
-TARGET_HIGH_PERFORMANCE := true
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 TARGET_USES_HWC2 := true
 TARGET_HWCOMPOSER_VERSION := v2.0
 USE_OPENGL_RENDERER := true
@@ -40,21 +32,14 @@ SOONG_CONFIG_IMXPLUGIN_BOARD_VPU_ONLY = false
 # Product-specific compile-time definitions.
 #
 
-<<<<<<< HEAD
 IMX_DEVICE_PATH := device/idtech/imx8m/vp6820_8mp
 
 include device/idtech/imx8m/BoardConfigCommon.mk
-=======
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mp
-
-include device/nxp/imx8m/BoardConfigCommon.mk
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 BUILD_TARGET_FS ?= ext4
 TARGET_USERIMAGES_USE_EXT4 := true
 
-<<<<<<< HEAD
-TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.freescale
+TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.nxp
 
 # Support gpt
 ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
@@ -73,27 +58,6 @@ else
     ADDITION_BPT_PARTITION = partition-table-28GB:device/idtech/common/partition/device-partitions-28GB-ab.bpt \
                              partition-table-dual:device/idtech/common/partition/device-partitions-14.4GB-ab-dual-bootloader.bpt \
                              partition-table-28GB-dual:device/idtech/common/partition/device-partitions-28GB-ab-dual-bootloader.bpt
-=======
-TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.nxp
-
-# Support gpt
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
-  BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab_super.bpt
-  ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab_super.bpt \
-                           partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader_super.bpt \
-                           partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader_super.bpt
-else
-  ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
-    BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab-no-product.bpt
-    ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab-no-product.bpt \
-                             partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader-no-product.bpt \
-                             partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader-no-product.bpt
-  else
-    BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab.bpt
-    ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab.bpt \
-                             partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader.bpt \
-                             partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader.bpt
->>>>>>> post_merge/android-11.0.0_1.0.0_history
   endif
 endif
 
@@ -121,12 +85,8 @@ BOARD_HAVE_BLUETOOTH_NXP := true
 # NXP 8997 BT
 BOARD_HAVE_BLUETOOTH_NXP := true
 
-<<<<<<< HEAD
 #BOARD_USE_SENSOR_FUSION := true
 BOARD_USE_ST_SENSOR_INPUT := true
-=======
-BOARD_USE_SENSOR_FUSION := true
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # we don't support sparse image.
 TARGET_USERIMAGES_SPARSE_EXT_DISABLED := false
@@ -140,19 +100,13 @@ USE_ION_ALLOCATOR := true
 USE_GPU_ALLOCATOR := false
 
 BOARD_AVB_ENABLE := true
-<<<<<<< HEAD
 BOARD_AVB_ALGORITHM := SHA256_RSA2048
 BOARD_AVB_KEY_PATH := device/idtech/common/security/idt_testkey_rsa2048.pem
-=======
-BOARD_AVB_ALGORITHM := SHA256_RSA4096
-# The testkey_rsa4096.pem is copied from external/avb/test/data/testkey_rsa4096.pem
-BOARD_AVB_KEY_PATH := device/nxp/common/security/testkey_rsa4096.pem
 
 BOARD_AVB_BOOT_KEY_PATH := external/avb/test/data/testkey_rsa2048.pem
 BOARD_AVB_BOOT_ALGORITHM := SHA256_RSA2048
 BOARD_AVB_BOOT_ROLLBACK_INDEX_LOCATION := 2
 
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 TARGET_USES_MKE2FS := true
 
 # define frame buffer count
@@ -160,28 +114,17 @@ NUM_FRAMEBUFFER_SURFACE_BUFFERS := 3
 
 CMASIZE=800M
 # NXP default config
-<<<<<<< HEAD
-BOARD_KERNEL_CMDLINE := init=/init androidboot.console=ttymxc1 androidboot.hardware=freescale firmware_class.path=/vendor/firmware loop.max_part=7
-
-# memory config
-BOARD_KERNEL_CMDLINE += transparent_hugepage=never
-=======
 BOARD_KERNEL_CMDLINE := init=/init androidboot.console=ttymxc1 androidboot.hardware=nxp firmware_class.path=/vendor/firmware loop.max_part=7
 
 # memory config
 BOARD_KERNEL_CMDLINE += transparent_hugepage=never
 BOARD_KERNEL_CMDLINE += swiotlb=65536
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # display config
 BOARD_KERNEL_CMDLINE += androidboot.lcd_density=240 androidboot.primary_display=imx-drm
 
 # wifi config
-<<<<<<< HEAD
-BOARD_KERNEL_CMDLINE += androidboot.wificountrycode=CN
-=======
 BOARD_KERNEL_CMDLINE += androidboot.wificountrycode=CN moal.mod_para=wifi_mod_para.conf
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # low memory device build config
 ifeq ($(LOW_MEMORY),true)
@@ -190,26 +133,19 @@ else
 BOARD_KERNEL_CMDLINE += cma=$(CMASIZE)@0x400M-0xb80M
 endif
 
-<<<<<<< HEAD
-=======
 ifneq (,$(filter userdebug eng,$(TARGET_BUILD_VARIANT)))
 BOARD_KERNEL_CMDLINE += androidboot.vendor.sysrq=1
 endif
 
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 ifeq ($(TARGET_USERIMAGES_USE_UBIFS),true)
 ifeq ($(TARGET_USERIMAGES_USE_EXT4),true)
 $(error "TARGET_USERIMAGES_USE_UBIFS and TARGET_USERIMAGES_USE_EXT4 config open in same time, please only choose one target file system image")
 endif
 endif
 
-<<<<<<< HEAD
 LOWER_BOARD_TYPE  = $(shell echo $(BOARD_TYPE) | tr A-Z a-z)
 LOWER_BOARD_SOC_TYPE  = $(shell echo $(BOARD_SOC_TYPE) | tr A-Z a-z)
 BOARD_PREBUILT_DTBOIMAGE := out/target/product/vp6820_8mp/dtbo-$(BOARD_SOM_TYPE)-$(LOWER_BOARD_TYPE).img
-=======
-BOARD_PREBUILT_DTBOIMAGE := out/target/product/evk_8mp/dtbo-imx8mp.img
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
   ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
@@ -239,24 +175,14 @@ else # no dynamic parition feature
 endif
 
 BOARD_SEPOLICY_DIRS := \
-<<<<<<< HEAD
        device/idtech/imx8m/sepolicy \
        $(IMX_DEVICE_PATH)/sepolicy
 
 TARGET_BOARD_KERNEL_HEADERS := device/idtech/common/kernel-headers
-=======
-       device/nxp/imx8m/sepolicy \
-       $(IMX_DEVICE_PATH)/sepolicy
-
-TARGET_BOARD_KERNEL_HEADERS := device/nxp/common/kernel-headers
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ALL_DEFAULT_INSTALLED_MODULES += $(BOARD_VENDOR_KERNEL_MODULES)
 
 BOARD_USES_METADATA_PARTITION := true
 BOARD_ROOT_EXTRA_FOLDERS += metadata
-<<<<<<< HEAD
 
 BOARD_PLAT_PRIVATE_SEPOLICY_DIR := device/idtech/imx8m/sepolicy_system/private
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mp/SharedBoardConfig.mk b/imx8m/vp6820_8mp/SharedBoardConfig.mk
index b881326a..f3f19f8e 100644
--- a/imx8m/vp6820_8mp/SharedBoardConfig.mk
+++ b/imx8m/vp6820_8mp/SharedBoardConfig.mk
@@ -1,9 +1,6 @@
 KERNEL_NAME := Image
 TARGET_KERNEL_ARCH := arm64
-<<<<<<< HEAD
-=======
 IMX8MP_USES_GKI := true
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 #Enable this to config 1GB ddr on evk_imx8mp
 #LOW_MEMORY := true
@@ -16,16 +13,6 @@ PRODUCT_IMX_TRUSTY := true
 
 #NXP 8997 wifi driver module
 BOARD_VENDOR_KERNEL_MODULES += \
-<<<<<<< HEAD
-    $(KERNEL_OUT)/drivers/net/wireless/marvell/mrvl8997/wlan_src/mlan.ko \
-    $(KERNEL_OUT)/drivers/net/wireless/marvell/mrvl8997/wlan_src/pcie8xxx.ko \
-# mipi-panel touch driver module
-BOARD_VENDOR_KERNEL_MODULES += \
-    $(KERNEL_OUT)/drivers/input/touchscreen/synaptics_dsx/synaptics_dsx_i2c.ko
-
-# isp vvcam driver module
-BOARD_VENDOR_KERNEL_MODULES += \
-=======
     $(KERNEL_OUT)/drivers/net/wireless/nxp/mxm_wifiex/wlan_src/mlan.ko \
     $(KERNEL_OUT)/drivers/net/wireless/nxp/mxm_wifiex/wlan_src/moal.ko
 
@@ -224,12 +211,8 @@ BOARD_VENDOR_RAMDISK_KERNEL_MODULES +=     \
     $(KERNEL_OUT)/drivers/staging/media/imx/imx8-isi-hw.ko \
     $(KERNEL_OUT)/drivers/staging/media/imx/imx8-isi-m2m.ko \
     $(KERNEL_OUT)/drivers/staging/media/imx/imx8-mipi-csi2-sam.ko \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     $(TARGET_OUT_INTERMEDIATES)/VVCAM_OBJ/vvcam-video.ko \
     $(TARGET_OUT_INTERMEDIATES)/VVCAM_OBJ/vvcam-isp.ko \
     $(TARGET_OUT_INTERMEDIATES)/VVCAM_OBJ/vvcam-dwe.ko \
     $(TARGET_OUT_INTERMEDIATES)/VVCAM_OBJ/basler-camera-driver-vvcam.ko
-<<<<<<< HEAD
-=======
 endif
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mp/UbootKernelBoardConfig.mk b/imx8m/vp6820_8mp/UbootKernelBoardConfig.mk
index 7a26b770..9fb574d6 100644
--- a/imx8m/vp6820_8mp/UbootKernelBoardConfig.mk
+++ b/imx8m/vp6820_8mp/UbootKernelBoardConfig.mk
@@ -3,7 +3,6 @@ TARGET_BOOTLOADER_POSTFIX := bin
 UBOOT_POST_PROCESS := true
 
 # u-boot target
-<<<<<<< HEAD
 TARGET_BOOTLOADER_CONFIG := imx8mp-lpddr4:vp6820_8mp_evk_android_defconfig:signed
 TARGET_BOOTLOADER_CONFIG += imx8mp-lpddr4-trusty:vp6820_8mp_evk_android_trusty_defconfig
 TARGET_BOOTLOADER_CONFIG += imx8mp-lpddr4-trusty-secure-unlock:vp6820_8mp_evk_android_trusty_secure_unlock_defconfig
@@ -11,18 +10,6 @@ TARGET_BOOTLOADER_CONFIG += imx8mp-lpddr4-dual:vp6820_8mp_evk_android_dual_defco
 TARGET_BOOTLOADER_CONFIG += imx8mp-lpddr4-trusty-dual:vp6820_8mp_evk_android_trusty_dual_defconfig
 TARGET_BOOTLOADER_CONFIG += imx8mp-lpddr4-evk-uuu-mic6g:vp6820_8mp_evk_android_uuu_mic6g_defconfig:signed
 
-TARGET_KERNEL_DEFCONFIG := imx_v8_android_defconfig
-
-TARGET_KERNEL_ADDITION_DEFCONF := android_addition_defconfig
-TARGET_KERNEL_SECURE_DEFCONF ?= android_secure_defconfig
-=======
-TARGET_BOOTLOADER_CONFIG := imx8mp:imx8mp_evk_android_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mp-trusty:imx8mp_evk_android_trusty_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mp-trusty-secure-unlock:imx8mp_evk_android_trusty_secure_unlock_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mp-dual:imx8mp_evk_android_dual_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mp-trusty-dual:imx8mp_evk_android_trusty_dual_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mp-evk-uuu:imx8mp_evk_android_uuu_defconfig
-
 ifneq ($(IMX8MP_USES_GKI),)
 TARGET_KERNEL_DEFCONFIG := gki_defconfig
 TARGET_KERNEL_GKI_DEFCONF:= android_gki_defconfig
@@ -31,7 +18,7 @@ TARGET_KERNEL_DEFCONFIG := imx_v8_android_defconfig
 endif
 
 TARGET_KERNEL_ADDITION_DEFCONF := android_addition_defconfig
->>>>>>> post_merge/android-11.0.0_1.0.0_history
+TARGET_KERNEL_SECURE_DEFCONF ?= android_secure_defconfig
 
 
 # absolute path is used, not the same as relative path used in AOSP make
diff --git a/imx8m/vp6820_8mp/android_addition_defconfig b/imx8m/vp6820_8mp/android_addition_defconfig
index 15d4cd7d..6c15a77b 100644
--- a/imx8m/vp6820_8mp/android_addition_defconfig
+++ b/imx8m/vp6820_8mp/android_addition_defconfig
@@ -1,5 +1,5 @@
-<<<<<<< HEAD
-CONFIG_CLD_HL_SDIO_CORE=y
+CONFIG_LIBNVDIMM=y
+CONFIG_OF_PMEM=y
 CONFIG_IDG_SPI=y
 # CONFIG_USB_NET_QMI_WWAN is not set
 CONFIG_SINGLE_LOGO=y
@@ -252,7 +252,3 @@ CONFIG_WLAN_VENDOR_MARVELL=m
 # CONFIG_MMC_SDHCI_MSM is not set
 # CONFIG_MMC_SDHI is not set
 # CONFIG_MMC_DW_EXYNOS is not set
-=======
-CONFIG_LIBNVDIMM=y
-CONFIG_OF_PMEM=y
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mp/audio_policy_configuration.xml b/imx8m/vp6820_8mp/audio_policy_configuration.xml
index a32492cf..ceeb3476 100644
--- a/imx8m/vp6820_8mp/audio_policy_configuration.xml
+++ b/imx8m/vp6820_8mp/audio_policy_configuration.xml
@@ -29,23 +29,9 @@
                     <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
                              samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
                 </mixPort>
-<<<<<<< HEAD
-                <mixPort name="esai output" role="source" flags="AUDIO_OUTPUT_FLAG_DIRECT|AUDIO_OUTPUT_FLAG_HW_AV_SYNC">
-                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
-                             samplingRates="48000,96000,192000,384000,768000"
-                             channelMasks="AUDIO_CHANNEL_OUT_STEREO,AUDIO_CHANNEL_OUT_QUAD,AUDIO_CHANNEL_OUT_5POINT1,AUDIO_CHANNEL_OUT_7POINT1"/>
-                    <profile name="" format="AUDIO_FORMAT_PCM_FLOAT"
-                             samplingRates="48000,96000,192000,384000,768000"
-                             channelMasks="AUDIO_CHANNEL_OUT_STEREO,AUDIO_CHANNEL_OUT_QUAD,AUDIO_CHANNEL_OUT_5POINT1,AUDIO_CHANNEL_OUT_7POINT1"/>
-                </mixPort>
-                <mixPort name="dsd output" role="source" flags="AUDIO_OUTPUT_FLAG_DIRECT|AUDIO_OUTPUT_FLAG_COMPRESS_OFFLOAD">
-                    <profile name="" format="AUDIO_FORMAT_DSD"
-                             samplingRates="2822400,5644800,11289600,22579200" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
-=======
                 <mixPort name="lpa output" role="source" flags="AUDIO_OUTPUT_FLAG_DIRECT|AUDIO_OUTPUT_FLAG_HW_AV_SYNC">
                     <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
                              samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
                 </mixPort>
                 <mixPort name="hdmi output" role="source">
                     <profile name="" format="AUDIO_FORMAT_PCM_8_24_BIT"
@@ -92,19 +78,11 @@
                 <route type="mix" sink="Speaker"
                        sources="primary output"/>
                 <route type="mix" sink="Wired Headphones"
-<<<<<<< HEAD
-                       sources="dsd output,esai output,primary output"/>
-                <route type="mix" sink="Wired Headset"
-                       sources="dsd output,esai output,primary output"/>
-                <route type="mix" sink="Line-Out"
-                       sources="dsd output,esai output,primary output"/>
-=======
                        sources="primary output"/>
                 <route type="mix" sink="Wired Headset"
                        sources="primary output"/>
                 <route type="mix" sink="Line-Out"
                        sources="lpa output,primary output"/>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
                 <route type="mix" sink="HDMI Out"
                        sources="hdmi output"/>
                 <route type="mix" sink="BT SCO Headset"
diff --git a/imx8m/vp6820_8mp/camera_config_imx8mp.json b/imx8m/vp6820_8mp/camera_config_imx8mp.json
index 04f5d0e4..68e881ca 100644
--- a/imx8m/vp6820_8mp/camera_config_imx8mp.json
+++ b/imx8m/vp6820_8mp/camera_config_imx8mp.json
@@ -29,10 +29,7 @@
       "camera_type": "front",
       "camera_name": "mxc-isi-cap",
       "orientation": "0",
-<<<<<<< HEAD
-=======
       "mplane": "1",
->>>>>>> post_merge/android-11.0.0_1.0.0_history
       "buffer_type": "dma",
       "ActiveArrayWidth": "2592",
       "ActiveArrayHeight": "1944",
diff --git a/imx8m/vp6820_8mp/early.init.cfg b/imx8m/vp6820_8mp/early.init.cfg
index b3bd340f..9dd16032 100644
--- a/imx8m/vp6820_8mp/early.init.cfg
+++ b/imx8m/vp6820_8mp/early.init.cfg
@@ -1,12 +1,2 @@
-<<<<<<< HEAD
-insmod vendor/lib/modules/mlan.ko
-insmod vendor/lib/modules/pcie8xxx.ko sta_name=wlan uap_name=wlan wfd_name=p2p max_vir_bss=1 ps_mode=2 auto_ds=2 cfg80211_wext=0xf cal_data_cfg=none p2p_enh=1 fw_name=pcieuart8997_combo_v4.bin
-insmod vendor/lib/modules/synaptics_dsx_i2c.ko
-insmod /vendor/lib/modules/vvcam-video.ko
-insmod /vendor/lib/modules/vvcam-isp.ko
-insmod /vendor/lib/modules/vvcam-dwe.ko
-insmod /vendor/lib/modules/basler-camera-driver-vvcam.ko
-=======
 # support insmod xx.ko; setprop xx xx; modeprobe
 modprobe
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mp/evk_8mp.mk b/imx8m/vp6820_8mp/evk_8mp.mk
deleted file mode 100644
index 7d552bcb..00000000
--- a/imx8m/vp6820_8mp/evk_8mp.mk
+++ /dev/null
@@ -1,453 +0,0 @@
-# This is a FSL Android Reference Design platform based on i.MX8QP ARD board
-# It will inherit from FSL core product which in turn inherit from Google generic
-
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mp
-
-# configs shared between uboot, kernel and Android rootfs
-include $(IMX_DEVICE_PATH)/SharedBoardConfig.mk
-
--include device/nxp/common/imx_path/ImxPathConfig.mk
-include device/nxp/imx8m/ProductConfigCommon.mk
-
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.nxp),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab.nxp)
-endif
-
-# Overrides
-PRODUCT_NAME := evk_8mp
-PRODUCT_DEVICE := evk_8mp
-PRODUCT_MODEL := EVK_8MP
-
-PRODUCT_FULL_TREBLE_OVERRIDE := true
-PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/power
-PRODUCT_SOONG_NAMESPACES += hardware/google/pixel
-
-#Enable this to choose 32 bit user space build
-#IMX8_BUILD_32BIT_ROOTFS := true
-
-# Enable this to support vendor boot and boot header v3, this would be a MUST for GKI
-TARGET_USE_VENDOR_BOOT ?= true
-
-#Enable this to use dynamic partitions for the readonly partitions not touched by bootloader
-TARGET_USE_DYNAMIC_PARTITIONS ?= true
-#If the device is retrofit to have dynamic partition feature, set this variable to true to build
-#the images and OTA package. Here is a demo to update 10.0.0_1.0.0 to 10.0.0_2.0.0 or higher
-TARGET_USE_RETROFIT_DYNAMIC_PARTITION ?= false
-
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
-  $(call inherit-product, $(SRC_TARGET_DIR)/product/virtual_ab_ota.mk)
-  PRODUCT_USE_DYNAMIC_PARTITIONS := true
-  BOARD_BUILD_SUPER_IMAGE_BY_DEFAULT := true
-  BOARD_SUPER_IMAGE_IN_UPDATE_PACKAGE := true
-  ifeq ($(TARGET_USE_RETROFIT_DYNAMIC_PARTITION),true)
-    PRODUCT_RETROFIT_DYNAMIC_PARTITIONS := true
-    BOARD_SUPER_PARTITION_METADATA_DEVICE := system
-    ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
-      BOARD_SUPER_PARTITION_BLOCK_DEVICES := system vendor
-      BOARD_SUPER_PARTITION_SYSTEM_DEVICE_SIZE := 2952790016
-      BOARD_SUPER_PARTITION_VENDOR_DEVICE_SIZE := 536870912
-    else
-      BOARD_SUPER_PARTITION_BLOCK_DEVICES := system vendor product
-      BOARD_SUPER_PARTITION_SYSTEM_DEVICE_SIZE := 1610612736
-      BOARD_SUPER_PARTITION_VENDOR_DEVICE_SIZE := 536870912
-      BOARD_SUPER_PARTITION_PRODUCT_DEVICE_SIZE := 1879048192
-    endif
-  endif
-endif
-
-# Include keystore attestation keys and certificates.
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
--include $(IMX_SECURITY_PATH)/attestation/imx_attestation.mk
-endif
-
-# Include Android Go config for low memory device.
-ifeq ($(LOW_MEMORY),true)
-$(call inherit-product, build/target/product/go_defaults.mk)
-endif
-
-# Copy device related config and binary to board
-PRODUCT_COPY_FILES += \
-    $(FSL_PROPRIETARY_PATH)/fsl-proprietary/mcu-sdk/imx8mp/imx8mp_mcu_demo.img:imx8mp_mcu_demo.img \
-    $(IMX_DEVICE_PATH)/app_whitelist.xml:system/etc/sysconfig/app_whitelist.xml \
-    $(IMX_DEVICE_PATH)/audio_effects.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_effects.xml \
-    $(IMX_DEVICE_PATH)/audio_policy_configuration.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
-    $(IMX_DEVICE_PATH)/usb_audio_policy_configuration-direct-output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/usb_audio_policy_configuration-direct-output.xml \
-    $(IMX_DEVICE_PATH)/input-port-associations.xml:$(TARGET_COPY_OUT_VENDOR)/etc/input-port-associations.xml \
-    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.nxp \
-    $(IMX_DEVICE_PATH)/init.imx8mp.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mp.rc \
-    $(IMX_DEVICE_PATH)/init.recovery.nxp.rc:root/init.recovery.nxp.rc \
-    $(IMX_DEVICE_PATH)/early.init.cfg:$(TARGET_COPY_OUT_VENDOR)/etc/early.init.cfg \
-    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.rc \
-    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.usb.rc \
-    $(IMX_DEVICE_PATH)/required_hardware.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/required_hardware.xml \
-    $(IMX_DEVICE_PATH)/ueventd.nxp.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
-    $(LINUX_FIRMWARE_IMX_PATH)/linux-firmware-imx/firmware/sdma/sdma-imx7d.bin:$(TARGET_COPY_OUT_VENDOR)/firmware/imx/sdma/sdma-imx7d.bin \
-    device/nxp/common/init/init.insmod.sh:$(TARGET_COPY_OUT_VENDOR)/bin/init.insmod.sh \
-    device/nxp/common/wifi/p2p_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/p2p_supplicant_overlay.conf \
-    device/nxp/common/wifi/wpa_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/wpa_supplicant_overlay.conf
-
-# Copy isp files to board
-ISP_PROPRIETARY := $(FSL_PROPRIETARY_PATH)/fsl-proprietary/isp
-PRODUCT_COPY_FILES += \
-    $(call find-copy-subdir-files,*,$(ISP_PROPRIETARY)/bin,$(TARGET_COPY_OUT_VENDOR)/bin) \
-    $(call find-copy-subdir-files,*,$(ISP_PROPRIETARY)/lib64,$(TARGET_COPY_OUT_VENDOR)/lib64) \
-    $(call find-copy-subdir-files,*,$(ISP_PROPRIETARY)/config,$(TARGET_COPY_OUT_VENDOR)/etc/configs/isp)
-
-# We load the fstab from device tree so this is not needed, but since no kernel modules are installed to vendor
-# boot ramdisk so far, we need this step to generate the vendor-ramdisk folder or build process would fail. This
-# can be deleted once we figure out what kernel modules should be put into the vendor boot ramdisk.
-ifeq ($(TARGET_USE_VENDOR_BOOT),true)
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR_RAMDISK)/first_stage_ramdisk/fstab.nxp
-endif
-
-
-# Audio card json
-PRODUCT_COPY_FILES += \
-    device/nxp/common/audio-json/wm8960_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/wm8960_config.json \
-    device/nxp/common/audio-json/micfil_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/micfil_config.json \
-    device/nxp/common/audio-json/hdmi_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/hdmi_config.json \
-    device/nxp/common/audio-json/btsco_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/btsco_config.json \
-    device/nxp/common/audio-json/readme.txt:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/readme.txt
-
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_COPY_FILES += \
-    device/nxp/common/security/rpmb_key_test.bin:rpmb_key_test.bin \
-    device/nxp/common/security/testkey_public_rsa4096.bin:testkey_public_rsa4096.bin
-endif
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mp/camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/camera_config_imx8mp.json \
-    device/nxp/imx8m/evk_8mp/ov5640_camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/ov5640_camera_config_imx8mp.json \
-    device/nxp/imx8m/evk_8mp/isp_camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/isp_camera_config_imx8mp.json \
-    device/nxp/imx8m/evk_8mp/external_camera_config.xml:$(TARGET_COPY_OUT_VENDOR)/etc/external_camera_config.xml
-
-# ONLY devices that meet the CDD's requirements may declare these features
-PRODUCT_COPY_FILES += \
-    frameworks/native/data/etc/android.hardware.audio.output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.audio.output.xml \
-    frameworks/native/data/etc/android.hardware.bluetooth_le.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.bluetooth_le.xml \
-    frameworks/native/data/etc/android.hardware.camera.external.xml:vendor/etc/permissions/android.hardware.camera.external.xml \
-    frameworks/native/data/etc/android.hardware.camera.front.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.front.xml \
-    frameworks/native/data/etc/android.hardware.camera.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.xml \
-    frameworks/native/data/etc/android.hardware.ethernet.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.ethernet.xml \
-    frameworks/native/data/etc/android.hardware.screen.landscape.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.screen.landscape.xml \
-    frameworks/native/data/etc/android.hardware.screen.portrait.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.screen.portrait.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.multitouch.distinct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.multitouch.distinct.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.multitouch.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.multitouch.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.xml \
-    frameworks/native/data/etc/android.hardware.usb.accessory.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.accessory.xml \
-    frameworks/native/data/etc/android.hardware.usb.host.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.host.xml \
-    frameworks/native/data/etc/android.hardware.vulkan.level-0.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.level-0.xml \
-    frameworks/native/data/etc/android.hardware.vulkan.version-1_1.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.version-1_1.xml \
-    frameworks/native/data/etc/android.software.vulkan.deqp.level-2020-03-01.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.vulkan.deqp.level-2020-03-01.xml \
-    frameworks/native/data/etc/android.hardware.wifi.direct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.direct.xml \
-    frameworks/native/data/etc/android.hardware.wifi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.xml \
-    frameworks/native/data/etc/android.hardware.wifi.passpoint.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.passpoint.xml \
-    frameworks/native/data/etc/android.software.app_widgets.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.app_widgets.xml \
-    frameworks/native/data/etc/android.software.backup.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.backup.xml \
-    frameworks/native/data/etc/android.software.device_admin.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.device_admin.xml \
-    frameworks/native/data/etc/android.software.managed_users.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.managed_users.xml \
-    frameworks/native/data/etc/android.software.midi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.midi.xml \
-    frameworks/native/data/etc/android.software.print.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.print.xml \
-    frameworks/native/data/etc/android.software.sip.voip.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.sip.voip.xml \
-    frameworks/native/data/etc/android.software.verified_boot.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.verified_boot.xml \
-    frameworks/native/data/etc/android.software.voice_recognizers.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.voice_recognizers.xml \
-    frameworks/native/data/etc/android.software.activities_on_secondary_displays.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.activities_on_secondary_displays.xml \
-    frameworks/native/data/etc/android.software.picture_in_picture.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.picture_in_picture.xml
-
-# Vendor seccomp policy files for media components:
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/seccomp/mediacodec-seccomp.policy:vendor/etc/seccomp_policy/mediacodec.policy \
-    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.base.policy:vendor/etc/seccomp_policy/codec2.vendor.base.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.ext.policy:vendor/etc/seccomp_policy/codec2.vendor.ext.policy
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mp/powerhint_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/powerhint_imx8mp.json
-
-# fastboot_imx_flashall scripts, fsl-sdcard-partition script uuu_imx_android_flash scripts
-PRODUCT_COPY_FILES += \
-    device/nxp/common/tools/fastboot_imx_flashall.bat:fastboot_imx_flashall.bat \
-    device/nxp/common/tools/fastboot_imx_flashall.sh:fastboot_imx_flashall.sh \
-    device/nxp/common/tools/imx-sdcard-partition.sh:imx-sdcard-partition.sh \
-    device/nxp/common/tools/uuu_imx_android_flash.bat:uuu_imx_android_flash.bat \
-    device/nxp/common/tools/uuu_imx_android_flash.sh:uuu_imx_android_flash.sh
-
-# Set permission for GMS packages
-PRODUCT_COPY_FILES += \
-	  device/nxp/imx8m/permissions/privapp-permissions-imx.xml:$(TARGET_COPY_OUT_PRODUCT)/etc/permissions/privapp.permissions-imx.xml \
-
-USE_XML_AUDIO_POLICY_CONF := 1
-
-DEVICE_PACKAGE_OVERLAYS := $(IMX_DEVICE_PATH)/overlay
-
-PRODUCT_CHARACTERISTICS := tablet
-
-PRODUCT_AAPT_CONFIG += xlarge large tvdpi hdpi xhdpi xxhdpi
-
-# GPU openCL g2d
-PRODUCT_COPY_FILES += \
-    $(IMX_PATH)/imx/opencl-2d/cl_g2d.cl:$(TARGET_COPY_OUT_VENDOR)/etc/cl_g2d.cl
-
-# HWC2 HAL
-PRODUCT_PACKAGES += \
-    android.hardware.graphics.composer@2.4-service
-
-# Charger Mode
-PRODUCT_PRODUCT_PROPERTIES += \
-    ro.charger.no_ui=false
-
-# Do not skip charger_not_need trigger by default
-PRODUCT_DEFAULT_PROPERTY_OVERRIDES += \
-    vendor.skip.charger_not_need=0
-
-# Gralloc HAL
-PRODUCT_PACKAGES += \
-    android.hardware.graphics.mapper@2.0-impl-2.1 \
-    android.hardware.graphics.allocator@2.0-impl \
-    android.hardware.graphics.allocator@2.0-service
-
-# RenderScript HAL
-PRODUCT_PACKAGES += \
-    android.hardware.renderscript@1.0-impl
-
-PRODUCT_PACKAGES += \
-    libEGL_VIVANTE \
-    libGLESv1_CM_VIVANTE \
-    libGLESv2_VIVANTE \
-    gralloc_viv.imx \
-    libGAL \
-    libGLSLC \
-    libVSC \
-    libgpuhelper \
-    libSPIRV_viv \
-    libvulkan_VIVANTE \
-    vulkan.imx \
-    libCLC \
-    libLLVM_viv \
-    libOpenCL \
-    libg2d-opencl \
-    libg2d-viv \
-    libOpenVX \
-    libOpenVXU \
-    libNNVXCBinary-evis \
-    libNNVXCBinary-evis2 \
-    libNNVXCBinary-lite \
-    libOvx12VXCBinary-evis \
-    libOvx12VXCBinary-evis2 \
-    libOvx12VXCBinary-lite \
-    libNNGPUBinary-evis \
-    libNNGPUBinary-evis2 \
-    libNNGPUBinary-lite \
-    libNNGPUBinary-ulite \
-    libNNArchPerf \
-    libarchmodelSw
-
-PRODUCT_PACKAGES += \
-    android.hardware.audio@6.0-impl:32 \
-    android.hardware.audio@2.0-service \
-    android.hardware.audio.effect@6.0-impl:32 \
-    android.hardware.power@1.3-service.imx \
-    android.hardware.light@2.0-impl \
-    android.hardware.light@2.0-service \
-    android.hardware.configstore@1.1-service \
-    configstore@1.1.policy
-
-ifneq ($(IMX8MP_USES_GKI), true)
-# Thermal HAL
-PRODUCT_PACKAGES += \
-    android.hardware.thermal@2.0-service.imx
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mp/thermal_info_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/thermal_info_config_imx8mp.json
-endif
-
-# Neural Network HAL and lib
-PRODUCT_PACKAGES += \
-    libovxlib \
-    libnnrt \
-    android.hardware.neuralnetworks@1.2-service-vsi-npu-server
-
-# Usb HAL
-PRODUCT_PACKAGES += \
-    android.hardware.usb@1.1-service.imx
-
-# Bluetooth HAL
-PRODUCT_PACKAGES += \
-    android.hardware.bluetooth@1.0-impl \
-    android.hardware.bluetooth@1.0-service
-
-#nxp 8997 Bluetooth vendor config
-PRODUCT_PACKAGES += \
-    bt_vendor.conf
-
-# WiFi HAL
-PRODUCT_PACKAGES += \
-    android.hardware.wifi@1.0-service \
-    wifilogd \
-    wificond
-
-# WiFi RRO
-PRODUCT_PACKAGES += \
-    WifiOverlay
-
-# nxp 8997 wifi and bluetooth combo Firmware
-PRODUCT_COPY_FILES += \
-    vendor/nxp/imx-firmware/nxp/FwImage_8997/pcieuart8997_combo_v4.bin:vendor/firmware/pcieuart8997_combo_v4.bin \
-    vendor/nxp/imx-firmware/nxp/android_wifi_mod_para.conf:vendor/firmware/wifi_mod_para.conf
-
-# Wifi regulatory
-PRODUCT_COPY_FILES += \
-    external/wireless-regdb/regulatory.db:vendor/firmware/regulatory.db \
-    external/wireless-regdb/regulatory.db.p7s:vendor/firmware/regulatory.db.p7s
-
-# Keymaster HAL
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_PACKAGES += \
-    android.hardware.keymaster@4.0-service.trusty
-endif
-
-PRODUCT_PACKAGES += \
-    android.hardware.keymaster@4.0-service-imx
-
-# DRM HAL
-TARGET_ENABLE_MEDIADRM_64 := true
-PRODUCT_PACKAGES += \
-    android.hardware.drm@1.0-impl \
-    android.hardware.drm@1.0-service
-
-# new gatekeeper HAL
-PRODUCT_PACKAGES += \
-    android.hardware.gatekeeper@1.0-service.software-imx
-
-ifneq ($(BUILD_TARGET_FS),ubifs)
-PRODUCT_PROPERTY_OVERRIDES += \
-    ro.frp.pst=/dev/block/by-name/presistdata
-endif
-
-PRODUCT_PACKAGES += \
-    libg1 \
-    libhantro \
-    libcodec \
-    libhantro_vc8000e
-
-# imx c2 codec binary
-PRODUCT_PACKAGES += \
-    lib_vpu_wrapper \
-    lib_imx_c2_videodec_common \
-    lib_imx_c2_videodec \
-    lib_imx_c2_vpuwrapper_dec \
-    lib_imx_c2_videoenc_common \
-    lib_imx_c2_videoenc \
-    lib_imx_c2_vpuwrapper_enc \
-    lib_imx_c2_process \
-    lib_imx_c2_process_dummy_post \
-    lib_imx_c2_process_g2d_pre \
-    c2_component_register \
-    c2_component_register_ms \
-    c2_component_register_ra
-
-# dsp decoder
-PRODUCT_PACKAGES += \
-    media_codecs_c2_dsp.xml \
-    media_codecs_c2_dsp_aacp.xml \
-    media_codecs_c2_dsp_wma.xml \
-    lib_dsp_aac_dec \
-    lib_dsp_bsac_dec \
-    lib_dsp_codec_wrap \
-    lib_dsp_mp3_dec \
-    lib_dsp_wrap_arm12_android \
-    lib_dsp_mp3_dec_ext \
-    lib_dsp_codec_wrap_ext \
-    lib_aacd_wrap_dsp \
-    lib_mp3d_wrap_dsp \
-    lib_wma10d_wrap_dsp \
-    c2_component_register_dsp \
-    c2_component_register_dsp_wma \
-    c2_component_register_dsp_aacp
-
-
-PRODUCT_PACKAGES += \
-    DirectAudioPlayer
-
-# Tensorflow lite camera demo
-PRODUCT_PACKAGES += \
-                    tflitecamerademo
-
-# Multi-Display launcher
-PRODUCT_PACKAGES += \
-    MultiDisplay
-
-# Add oem unlocking option in settings.
-PRODUCT_PROPERTY_OVERRIDES += ro.frp.pst=/dev/block/by-name/presistdata
-PRODUCT_COMPATIBLE_PROPERTY_OVERRIDE := true
-
-# Add Trusty OS backed gatekeeper and secure storage proxy
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_PACKAGES += \
-    android.hardware.gatekeeper@1.0-service.trusty \
-    storageproxyd
-endif
-
-#DRM Widevine 1.2 L3 support
-PRODUCT_PACKAGES += \
-    android.hardware.drm@1.0-impl \
-    android.hardware.drm@1.0-service \
-    android.hardware.drm@1.3-service.widevine \
-    android.hardware.drm@1.3-service.clearkey \
-    libwvdrmcryptoplugin \
-    libwvhidl \
-    libwvdrmengine \
-
-#Dumpstate HAL 1.1 support
-PRODUCT_PACKAGES += \
-    android.hardware.dumpstate@1.1-service.imx
-
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-#Oemlock HAL 1.0 support
-PRODUCT_PACKAGES += \
-    android.hardware.oemlock@1.0-service.imx
-endif
-
-# Specify rollback index for boot and vbmeta partitions
-ifneq ($(AVB_RBINDEX),)
-BOARD_AVB_ROLLBACK_INDEX := $(AVB_RBINDEX)
-else
-BOARD_AVB_ROLLBACK_INDEX := 0
-endif
-
-ifneq ($(AVB_BOOT_RBINDEX),)
-BOARD_AVB_BOOT_ROLLBACK_INDEX := $(AVB_BOOT_RBINDEX)
-else
-BOARD_AVB_BOOT_ROLLBACK_INDEX := 0
-endif
-
-IMX-DEFAULT-G2D-LIB := libg2d-opencl
-
-ifeq ($(PREBUILT_FSL_IMX_CODEC),true)
-ifneq ($(IMX8_BUILD_32BIT_ROOTFS),true)
-INSTALL_64BIT_LIBRARY := true
-endif
--include $(FSL_CODEC_PATH)/fsl-codec/fsl-codec.mk
--include $(FSL_RESTRICTED_CODEC_PATH)/fsl-restricted-codec/imx_dsp_aacp_dec/imx_dsp_aacp_dec.mk
--include $(FSL_RESTRICTED_CODEC_PATH)/fsl-restricted-codec/imx_dsp_codec/imx_dsp_codec.mk
--include $(FSL_RESTRICTED_CODEC_PATH)/fsl-restricted-codec/imx_dsp_wma_dec/imx_dsp_wma_dec.mk
--include $(FSL_RESTRICTED_CODEC_PATH)/fsl-restricted-codec/imx_dsp/imx_dsp_8mp.mk
-endif
-
-# Included GMS package
-$(call inherit-product-if-exists, vendor/partner_gms/products/gms.mk)
-PRODUCT_SOONG_NAMESPACES += vendor/partner_gms
-
-# Resume on Reboot support
-PRODUCT_PACKAGES += \
-    android.hardware.rebootescrow-service.default
-
-PRODUCT_PROPERTY_OVERRIDES += \
-    ro.rebootescrow.device=/dev/block/pmem0
-
-PRODUCT_SOONG_NAMESPACES += hardware/google/camera
-PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/camera
-
-$(call  inherit-product-if-exists, vendor/nxp-private/security/nxp_security.mk)
-
-$(call inherit-product, $(SRC_TARGET_DIR)/product/emulated_storage.mk)
diff --git a/imx8m/vp6820_8mp/init.imx8mp.rc b/imx8m/vp6820_8mp/init.imx8mp.rc
index 821f2815..875a1342 100755
--- a/imx8m/vp6820_8mp/init.imx8mp.rc
+++ b/imx8m/vp6820_8mp/init.imx8mp.rc
@@ -25,10 +25,7 @@ on property:sys.boot_completed=1
     # Set up and down limit to 200us/200us
     write /sys/devices/system/cpu/cpufreq/schedutil/up_rate_limit_us 200
     write /sys/devices/system/cpu/cpufreq/schedutil/down_rate_limit_us 200
-<<<<<<< HEAD
-=======
     write /proc/sys/kernel/sched_util_clamp_min 512
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 on property:sys.boot_completed=1
     # update cpuset now that processors are up
@@ -53,7 +50,6 @@ on early-boot
 service isp_media_server /vendor/bin/isp_media_server /vendor/etc/configs/isp/daA3840_30mc_1080P.json
     group camera
     oneshot
-<<<<<<< HEAD
 
 on init
     #IDtech added for AB ota update bootloader
@@ -61,5 +57,3 @@ on init
     symlink   /dev/block/mmcblk2boot1p1   /dev/block/by-name/spl_b
     symlink   /dev/block/mmcblk2boot0p2   /dev/block/by-name/spl_bak_a
     symlink   /dev/block/mmcblk2boot1p2   /dev/block/by-name/spl_bak_b
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mp/init.rc b/imx8m/vp6820_8mp/init.rc
index ab6aac80..29624540 100644
--- a/imx8m/vp6820_8mp/init.rc
+++ b/imx8m/vp6820_8mp/init.rc
@@ -2,26 +2,27 @@ import /vendor/etc/init/hw/init.${ro.hardware}.usb.rc
 import /vendor/etc/init/hw/init.${ro.hardware}.${ro.boot.soc_type}.rc
 import /product/etc/init/hw/init.idt.common.rc
 
+service vendor.charger /system/bin/charger
+    class charger
+    user system
+    group system wakelock input
+    capabilities SYS_BOOT
+    file /dev/kmsg w
+    file /sys/fs/pstore/console-ramoops-0 r
+    file /sys/fs/pstore/console-ramoops r
+    file /proc/last_kmsg r
+
+on charger
+    start vendor.charger
+
 on early-init
     # mount the debugfs
     mount debugfs none /sys/kernel/debug/ mode=0755
 
-    # Mount binderfs
-    mkdir /dev/binderfs
-    mount binder binder /dev/binderfs stats=global
-    chmod 0755 /dev/binderfs
-
-    symlink /dev/binderfs/binder /dev/binder
-    symlink /dev/binderfs/hwbinder /dev/hwbinder
-    symlink /dev/binderfs/vndbinder /dev/vndbinder
-
-    chmod 0666 /dev/binderfs/hwbinder
-    chmod 0666 /dev/binderfs/binder
-    chmod 0666 /dev/binderfs/vndbinder
-
-
 on early-init
     start early_init_sh
+    # Set the host name which used in console
+    export HOSTNAME vp6820_8mp
 
     # Due keymaster start very early so set prop here
     # Also gatekeeper share same role for keymaster
@@ -29,7 +30,14 @@ on early-init
     setprop ro.hardware.gatekeeper ${ro.boot.keystore}
     setprop vendor.storageproxyd ${ro.boot.keystore}
 
-on init
+    # Use ro.boot.lcd_density to override ro.sf.lcd_density
+    setprop ro.sf.lcd_density ${ro.boot.lcd_density}
+
+# Skip charger_not_need trigger for charger mode
+on early-init && property:ro.boot.mode=charger
+    setprop vendor.skip.charger_not_need 1
+
+on init && property:vendor.skip.charger_not_need=0
     start watchdogd
 
     # Support legacy paths
@@ -66,39 +74,37 @@ on init
     write /dev/stune/rt/schedtune.boost 50
     write /dev/stune/rt/schedtune.prefer_idle 1
 
-on late-fs
-    # Start keymaster service
-    start vendor.keymaster-3-0-${ro.boot.keystore}
+on late-fs && property:vendor.skip.charger_not_need=0
+    # Start keymaster/gatekeeper service
+    start vendor.gatekeeper-1-0-${ro.boot.keystore}
+    start vendor.keymaster-4-0-${ro.boot.keystore}
     setprop vendor.powerhal.init 1
 
-    mount_all /vendor/etc/fstab.freescale --late
+    # Wait for keymaster
+    exec_start wait_for_keymaster
 
-on late-fs && property:vendor.storageproxyd=trusty
+    mount_all /vendor/etc/fstab.nxp --late
+
+on late-fs && property:vendor.storageproxyd=trusty && property:vendor.skip.charger_not_need=0
     start vendor.oemlock-1-0
 
-on early-boot
+on early-boot && property:vendor.skip.charger_not_need=0
     # For evk_8mp, when swap used about 400M, upgrade the level.
     setprop ro.lmk.upgrade_pressure 93
     setprop ro.lmk.downgrade_pressure 99
     setprop ro.lmk.critical_upgrade true
 
-    # Set the host name which used in console
-    export HOSTNAME vp6820_8mp
-
     # Set permission for IIM node
     symlink /dev/mxs_viim /dev/mxc_mem
 
-    # Enable Tethering in the Settings
-    setprop ro.tether.denied false
-
     setprop hwc.stretch.filter  1
 
     # Default g2d [dpu|pxp|viv] lib to be used
     setprop vendor.imx.default-g2d viv
 
     # fsl omx graphic manager media framework property
-    setprop rw.VIDEO_RENDER_NAME video_render.surface
-    setprop media.fsl_codec.flag 7
+    setprop vendor.rw.VIDEO_RENDER_NAME video_render.surface
+    setprop vendor.media.fsl_codec.flag 7
 
     setprop camera.disable_zsl_mode 1
 
@@ -109,22 +115,11 @@ on early-boot
     write /sys/block/mmcblk1/queue/read_ahead_kb 2048
     write /sys/block/mmcblk2/queue/read_ahead_kb 2048
 
-    # Set period_us for usb audio
-    setprop ro.audio.usb.period_us 20000
-
     # Prepare for wifi
     setprop wifi.interface wlan0
     setprop wifi.direct.interface p2p0
     setprop wifi.concurrent.interface wlan1
 
-    setprop persist.service.bdroid.bdaddr 22:22:67:C6:69:73
-
-    # Use ro.boot.lcd_density to override ro.sf.lcd_density
-    setprop ro.sf.lcd_density ${ro.boot.lcd_density}
-
-    # prepare for ril
-    setprop ro.ril.wake_lock_timeout 300
-
     # Set tracefs permission to 755
     chmod 0755 /sys/kernel/debug/tracing
 
@@ -133,17 +128,14 @@ on early-boot
     chmod 0664 /sys/kernel/debug/sync/sw_sync
 
     # Default backlight device
-    setprop hw.backlight.dev "32e60000.mipi_dsi.0"
+    setprop vendor.hw.backlight.dev "32e60000.mipi_dsi.0"
     # Chmod/chown FSL specific sys entry
     chown system system /sys/class/backlight/32e60000.mipi_dsi.0/brightness
     chmod 0660 /sys/class/backlight/32e60000.mipi_dsi.0/brightness
 
     # Set light sensor sysfs path and light sensor threshold lux value
     setprop ro.hardware.lightsensor "/sys/class/i2c-dev/i2c-0/device/0-0044/"
-    setprop ro.lightsensor.threshold  20
-
-    # Dectect DSF streams when scanning media
-    setprop ro.FSL_DSF_PARSER 1
+    setprop vendor.ro.lightsensor.threshold  20
 
     # Allow DSD file(duration larger than 10s) can play
     setprop audio.offload.min.duration.secs 10
@@ -162,6 +154,7 @@ service wpa_supplicant /vendor/bin/hw/wpa_supplicant \
     interface android.hardware.wifi.supplicant@1.0::ISupplicant default
     interface android.hardware.wifi.supplicant@1.1::ISupplicant default
     interface android.hardware.wifi.supplicant@1.2::ISupplicant default
+    interface android.hardware.wifi.supplicant@1.3::ISupplicant default
     class main
     socket wpa_wlan0 dgram 660 wifi wifi
     disabled
@@ -171,7 +164,7 @@ service sensor_fusion /vendor/bin/fsl_sensor_fusion
     class late_start
     seclabel u:r:sensors:s0
     user system
-    group input
+    group system uhid
     oneshot
 
 service vendor.sensors-hal-1-0 /vendor/bin/hw/android.hardware.sensors@1.0-service
@@ -233,15 +226,15 @@ service bugreport /system/bin/dumpstate -d -p -B -z \
     oneshot
     keycodes 114 115 116
 
-on boot
+on boot && property:vendor.skip.charger_not_need=0
     start audioserver
     start mediadrm
     start media
     start drm
 
-on fs
+on fs && property:vendor.skip.charger_not_need=0
 # mount ext4 partitions
-    mount_all /vendor/etc/fstab.freescale --early
+    mount_all /vendor/etc/fstab.nxp --early
 
     # Adjust parameters for dm-verity device
     write /sys/block/dm-0/queue/read_ahead_kb 4096
@@ -249,15 +242,15 @@ on fs
     # Update dm-verity state and set partition.*.verified properties
     verity_update_state
 
-on verity-logging
+on verity-logging && property:vendor.skip.charger_not_need=0
     exec u:r:slideshow:s0 -- /sbin/slideshow warning/verity_red_1 warning/verity_red_2
 
-on post-fs
+on post-fs && property:vendor.skip.charger_not_need=0
     # Set netd memlock rlimit to 8MB
     setrlimit 8 8388608 8388608
 
     # Turn on swap
-    swapon_all /vendor/etc/fstab.freescale
+    swapon_all /vendor/etc/fstab.nxp
 
     # Swap in only 1 page at a time
     write /proc/sys/vm/page-cluster 0
@@ -266,7 +259,7 @@ on post-fs
     chown system system /proc/pagetypeinfo
     chmod 0440 /proc/pagetypeinfo
 
-on post-fs-data
+on post-fs-data && property:vendor.skip.charger_not_need=0
     setprop vold.post_fs_data_done 1
     # create temp node for secure storage proxy
     mkdir /data/vendor/ss 0700 system system
@@ -275,30 +268,26 @@ on post-fs-data
     setprop TMPDIR /data/vendor/.opencl-cache
     mkdir /data/vendor/.opencl-cache 0771 system camera
 
-on zygote-start
+on zygote-start && property:vendor.skip.charger_not_need=0
     # Create the directories used by the Wireless subsystem
-    mkdir /data/misc/wifi 0770 wifi wifi
-    mkdir /data/misc/wifi/wpa_supplicant 0770 wifi wifi
     mkdir /data/vendor/wifi 0771 wifi wifi
     mkdir /data/vendor/wifi/wpa 0770 wifi wifi
     mkdir /data/vendor/wifi/wpa/sockets 0770 wifi wifi
-    mkdir /data/misc/dhcp 0770 dhcp dhcp
-    chown dhcp dhcp /data/misc/dhcp
 
-service early_init_sh /vendor/bin/init.insmod.sh /vendor/etc/early.init.cfg sys.all.early_init.ready
+service early_init_sh /vendor/bin/init.insmod.sh /vendor/etc/early.init.cfg vendor.all.early_init.ready
     class main
     user root
     group root system
     disabled
     oneshot
 
-on property:sys.boot_completed=1 && property:vendor.storageproxyd=trusty
+on property:sys.boot_completed=1 && property:vendor.storageproxyd=trusty && property:vendor.skip.charger_not_need=0
     start storageproxyd
 
 service storageproxyd /vendor/bin/storageproxyd -p /data/vendor/ss -r /dev/mmcblk2rpmb -d /dev/trusty-ipc-dev0
    group system
 
-on property:ro.boot.vendor.sysrq=1
+on property:ro.boot.vendor.sysrq=1 && property:vendor.skip.charger_not_need=0
     write /proc/sys/kernel/sysrq 1
 
 # setenv append_bootargs androidboot.usb.debugging=1
diff --git a/imx8m/vp6820_8mp/init.rc~post_merge_android-11.0.0_1.0.0_history b/imx8m/vp6820_8mp/init.rc~post_merge_android-11.0.0_1.0.0_history
deleted file mode 100644
index 7f43e9a5..00000000
--- a/imx8m/vp6820_8mp/init.rc~post_merge_android-11.0.0_1.0.0_history
+++ /dev/null
@@ -1,288 +0,0 @@
-import /vendor/etc/init/hw/init.${ro.hardware}.usb.rc
-import /vendor/etc/init/hw/init.${ro.hardware}.${ro.boot.soc_type}.rc
-
-service vendor.charger /system/bin/charger
-    class charger
-    user system
-    group system wakelock input
-    capabilities SYS_BOOT
-    file /dev/kmsg w
-    file /sys/fs/pstore/console-ramoops-0 r
-    file /sys/fs/pstore/console-ramoops r
-    file /proc/last_kmsg r
-
-on charger
-    start vendor.charger
-
-on early-init
-    # mount the debugfs
-    mount debugfs none /sys/kernel/debug/ mode=0755
-
-on early-init
-    start early_init_sh
-    # Set the host name which used in console
-    export HOSTNAME evk_8mp
-
-    # Due keymaster start very early so set prop here
-    # Also gatekeeper share same role for keymaster
-    setprop ro.hardware.keystore ${ro.boot.keystore}
-    setprop ro.hardware.gatekeeper ${ro.boot.keystore}
-    setprop vendor.storageproxyd ${ro.boot.keystore}
-
-    # Use ro.boot.lcd_density to override ro.sf.lcd_density
-    setprop ro.sf.lcd_density ${ro.boot.lcd_density}
-
-# Skip charger_not_need trigger for charger mode
-on early-init && property:ro.boot.mode=charger
-    setprop vendor.skip.charger_not_need 1
-
-on init && property:vendor.skip.charger_not_need=0
-    start watchdogd
-
-    # Support legacy paths
-    symlink /sdcard /mnt/sdcard
-    symlink /sdcard /storage/sdcard0
-
-    # setup the global environment
-    export CORE_REGISTER_FILE /vendor/etc/core_register
-    export COMPONENT_REGISTER_FILE /vendor/etc/component_register
-    export CONTENTPIPE_REGISTER_FILE /vendor/etc/contentpipe_register
-
-    # disable cursor blink for fbcon, if no splash screen support
-    write /sys/class/graphics/fbcon/cursor_blink 0
-
-    # deattch the fbcon as hdmi hotplug conflict with fbcon
-    write /sys/class/vtconsole/vtcon1/bind 0
-
-    chown system system /dev/stune/top-app/schedtune.boost
-    chmod 664 /dev/stune/top-app/schedtune.boost
-    chown system system /dev/stune/top-app/schedtune.prefer_idle
-    chmod 664 /dev/stune/top-app/schedtune.prefer_idle
-    chown system system /dev/stune/foreground/schedtune.boost
-    chmod 664 /dev/stune/foreground/schedtune.boost
-    chown system system /dev/stune/foreground/schedtune.prefer_idle
-    chmod 664 /dev/stune/foreground/schedtune.prefer_idle
-    chown system system /dev/stune/schedtune.boost
-    chmod 664 /dev/stune/schedtune.boost
-
-    # set default schedTune value for foreground/top-app (only affects EAS)
-    write /dev/stune/foreground/schedtune.boost 10
-    write /dev/stune/foreground/schedtune.prefer_idle 1
-    write /dev/stune/top-app/schedtune.boost 40
-    write /dev/stune/top-app/schedtune.prefer_idle 1
-    write /dev/stune/rt/schedtune.boost 50
-    write /dev/stune/rt/schedtune.prefer_idle 1
-
-on late-fs && property:vendor.skip.charger_not_need=0
-    # Start keymaster/gatekeeper service
-    start vendor.gatekeeper-1-0-${ro.boot.keystore}
-    start vendor.keymaster-4-0-${ro.boot.keystore}
-    setprop vendor.powerhal.init 1
-
-    # Wait for keymaster
-    exec_start wait_for_keymaster
-
-    mount_all /vendor/etc/fstab.nxp --late
-
-on late-fs && property:vendor.storageproxyd=trusty && property:vendor.skip.charger_not_need=0
-    start vendor.oemlock-1-0
-
-on early-boot && property:vendor.skip.charger_not_need=0
-    # For evk_8mp, when swap used about 400M, upgrade the level.
-    setprop ro.lmk.upgrade_pressure 93
-    setprop ro.lmk.downgrade_pressure 99
-    setprop ro.lmk.critical_upgrade true
-
-    # Set permission for IIM node
-    symlink /dev/mxs_viim /dev/mxc_mem
-
-    setprop hwc.stretch.filter  1
-
-    # Default g2d [dpu|pxp|viv] lib to be used
-    setprop vendor.imx.default-g2d viv
-
-    # fsl omx graphic manager media framework property
-    setprop vendor.rw.VIDEO_RENDER_NAME video_render.surface
-    setprop vendor.media.fsl_codec.flag 7
-
-    setprop camera.disable_zsl_mode 1
-
-    #Enable GPU 2D do CSC on imx8mp platform
-    setprop vendor.camera.2d.enable true
-
-   # Tweak the mmc device read ahead buffer size
-    write /sys/block/mmcblk1/queue/read_ahead_kb 2048
-    write /sys/block/mmcblk2/queue/read_ahead_kb 2048
-
-    # Prepare for wifi
-    setprop wifi.interface wlan0
-    setprop wifi.direct.interface p2p0
-    setprop wifi.concurrent.interface wlan1
-
-    # Set tracefs permission to 755
-    chmod 0755 /sys/kernel/debug/tracing
-
-    # Set sw_sync group to graphics and set permission to 664
-    chown root graphics /sys/kernel/debug/sync/sw_sync
-    chmod 0664 /sys/kernel/debug/sync/sw_sync
-
-    # Default backlight device
-    setprop vendor.hw.backlight.dev "32e60000.mipi_dsi.0"
-    # Chmod/chown FSL specific sys entry
-    chown system system /sys/class/backlight/32e60000.mipi_dsi.0/brightness
-    chmod 0660 /sys/class/backlight/32e60000.mipi_dsi.0/brightness
-
-    # Set light sensor sysfs path and light sensor threshold lux value
-    setprop ro.hardware.lightsensor "/sys/class/i2c-dev/i2c-0/device/0-0044/"
-    setprop vendor.ro.lightsensor.threshold  20
-
-    # Allow DSD file(duration larger than 10s) can play
-    setprop audio.offload.min.duration.secs 10
-
-    # Enlarge limition of audio buffer allocation
-    setprop ro.af.client_heap_size_kbyte 32768
-
-    # enlarge media max memory size to 3G.
-    setprop ro.media.maxmem 3221225471
-
-    start vendor.wifi_hal_legacy
-
-service wpa_supplicant /vendor/bin/hw/wpa_supplicant \
-    -O/data/vendor/wifi/wpa/sockets -puse_p2p_group_interface=1 \
-    -g@android:wpa_wlan0
-    interface android.hardware.wifi.supplicant@1.0::ISupplicant default
-    interface android.hardware.wifi.supplicant@1.1::ISupplicant default
-    interface android.hardware.wifi.supplicant@1.2::ISupplicant default
-    interface android.hardware.wifi.supplicant@1.3::ISupplicant default
-    class main
-    socket wpa_wlan0 dgram 660 wifi wifi
-    disabled
-    oneshot
-
-service sensor_fusion /vendor/bin/fsl_sensor_fusion
-    class late_start
-    seclabel u:r:sensors:s0
-    user system
-    group system uhid
-    oneshot
-
-# Set watchdog timer to 30 seconds and pet it every 10 seconds to get a 20 second margin
-service watchdogd /system/bin/watchdogd 10 20
-    class core
-    seclabel u:r:watchdogd:s0
-
-service dhcpcd_wlan0 /system/bin/dhcpcd -aABDKL
-    class main
-    disabled
-    oneshot
-
-service dhcpcd_p2p /system/bin/dhcpcd -aABKL
-    class main
-    disabled
-    oneshot
-
-service dhcpcd_eth0 /system/bin/dhcpcd -ABKL eth0
-    class main
-    disabled
-    oneshot
-
-service dhcpcd_bt-pan /system/bin/dhcpcd -ABKL
-    class main
-    disabled
-    oneshot
-
-service iprenew_wlan0 /system/bin/dhcpcd -n
-    class main
-    disabled
-    oneshot
-
-service iprenew_p2p /system/bin/dhcpcd -n
-    class main
-    disabled
-    oneshot
-
-service iprenew_eth0 /system/bin/dhcpcd -n eth0
-    class main
-    disabled
-    oneshot
-
-service iprenew_bt-pan /system/bin/dhcpcd -n
-    class main
-    disabled
-    oneshot
-
-# bugreport is triggered by holding down volume down, volume up and power
-service bugreport /system/bin/dumpstate -d -p -B -z \
-        -o /data/user_de/0/com.android.shell/files/bugreports/bugreport
-    class main
-    disabled
-    oneshot
-    keycodes 114 115 116
-
-on boot && property:vendor.skip.charger_not_need=0
-    start audioserver
-    start mediadrm
-    start media
-    start drm
-
-on fs && property:vendor.skip.charger_not_need=0
-# mount ext4 partitions
-    mount_all /vendor/etc/fstab.nxp --early
-
-    # Adjust parameters for dm-verity device
-    write /sys/block/dm-0/queue/read_ahead_kb 4096
-
-    # Update dm-verity state and set partition.*.verified properties
-    verity_update_state
-
-on verity-logging && property:vendor.skip.charger_not_need=0
-    exec u:r:slideshow:s0 -- /sbin/slideshow warning/verity_red_1 warning/verity_red_2
-
-on post-fs && property:vendor.skip.charger_not_need=0
-    # Set netd memlock rlimit to 8MB
-    setrlimit 8 8388608 8388608
-
-    # Turn on swap
-    swapon_all /vendor/etc/fstab.nxp
-
-    # Swap in only 1 page at a time
-    write /proc/sys/vm/page-cluster 0
-
-    # Grant permission for fetching available_pages info of statsd
-    chown system system /proc/pagetypeinfo
-    chmod 0440 /proc/pagetypeinfo
-
-on post-fs-data && property:vendor.skip.charger_not_need=0
-    setprop vold.post_fs_data_done 1
-    # create temp node for secure storage proxy
-    mkdir /data/vendor/ss 0700 system system
-
-    # tmp dir for opencl Compiler
-    setprop TMPDIR /data/vendor/.opencl-cache
-    mkdir /data/vendor/.opencl-cache 0771 system camera
-
-on zygote-start && property:vendor.skip.charger_not_need=0
-    # Create the directories used by the Wireless subsystem
-    mkdir /data/vendor/wifi 0771 wifi wifi
-    mkdir /data/vendor/wifi/wpa 0770 wifi wifi
-    mkdir /data/vendor/wifi/wpa/sockets 0770 wifi wifi
-
-service early_init_sh /vendor/bin/init.insmod.sh /vendor/etc/early.init.cfg vendor.all.early_init.ready
-    class main
-    user root
-    group root system
-    disabled
-    oneshot
-
-on property:sys.boot_completed=1 && property:vendor.storageproxyd=trusty && property:vendor.skip.charger_not_need=0
-    start storageproxyd
-
-service storageproxyd /vendor/bin/storageproxyd -p /data/vendor/ss -r /dev/mmcblk2rpmb -d /dev/trusty-ipc-dev0
-   group system
-
-on property:ro.boot.vendor.sysrq=1 && property:vendor.skip.charger_not_need=0
-    write /proc/sys/kernel/sysrq 1
-
-# setenv append_bootargs androidboot.usb.debugging=1
-on property:ro.boot.usb.debugging=1
-    setprop persist.sys.usb.config adb
diff --git a/imx8m/vp6820_8mp/isp_camera_config_imx8mp.json b/imx8m/vp6820_8mp/isp_camera_config_imx8mp.json
index 2ab05f9a..e753b863 100644
--- a/imx8m/vp6820_8mp/isp_camera_config_imx8mp.json
+++ b/imx8m/vp6820_8mp/isp_camera_config_imx8mp.json
@@ -18,15 +18,9 @@
       "ActiveArrayHeight": "1080",
       "PixelArrayWidth": "1920",
       "PixelArrayHeight": "1080",
-<<<<<<< HEAD
-      "PhysicalWidth": "3.6288",
-      "PhysicalHeight": "2.7216",
-      "FocalLength": "3.37",
-=======
       "PhysicalWidth": "4.032",
       "PhysicalHeight": "2.268",
       "FocalLength": "4.0",
->>>>>>> post_merge/android-11.0.0_1.0.0_history
       "MaxJpegSize": "4194304",
       "MinFrameDuration": "33331760",
       "MaxFrameDuration": "300000000"
diff --git a/imx8m/vp6820_8mp/manifest.xml b/imx8m/vp6820_8mp/manifest.xml
index ddfb8f6d..8ad5615b 100644
--- a/imx8m/vp6820_8mp/manifest.xml
+++ b/imx8m/vp6820_8mp/manifest.xml
@@ -1,8 +1,5 @@
 <manifest version="1.0" type="device" target-level="4">
-<<<<<<< HEAD
-=======
     <kernel  target-level="5" />
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     <hal format="hidl">
 	<name>android.hardware.graphics.allocator</name>
         <transport>hwbinder</transport>
@@ -16,11 +13,7 @@
     <hal format="hidl">
         <name>android.hardware.graphics.composer</name>
         <transport>hwbinder</transport>
-<<<<<<< HEAD
-        <version>2.3</version>
-=======
         <version>2.4</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <interface>
             <name>IComposer</name>
             <instance>default</instance>
@@ -29,11 +22,7 @@
     <hal format="hidl">
         <name>android.hardware.keymaster</name>
         <transport>hwbinder</transport>
-<<<<<<< HEAD
-        <version>3.0</version>
-=======
         <version>4.0</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <interface>
             <name>IKeymasterDevice</name>
             <instance>default</instance>
@@ -51,13 +40,8 @@
             <name>IDrmFactory</name>
             <instance>default</instance>
         </interface>
-<<<<<<< HEAD
-        <fqname>@1.2::ICryptoFactory/clearkey</fqname>
-        <fqname>@1.2::IDrmFactory/clearkey</fqname>
-=======
         <fqname>@1.3::ICryptoFactory/clearkey</fqname>
         <fqname>@1.3::IDrmFactory/clearkey</fqname>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     </hal>
     <hal format="hidl">
         <name>android.hardware.gatekeeper</name>
@@ -88,7 +72,6 @@
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
         <name>android.hardware.sensors</name>
         <transport>hwbinder</transport>
         <version>1.0</version>
@@ -98,8 +81,6 @@
         </interface>
     </hal>
     <hal format="hidl">
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <name>android.hardware.configstore</name>
         <transport>hwbinder</transport>
         <version>1.1</version>
@@ -131,46 +112,6 @@
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
-       <name>android.hardware.wifi</name>
-       <transport>hwbinder</transport>
-       <version>1.3</version>
-       <interface>
-           <name>IWifi</name>
-           <instance>default</instance>
-       </interface>
-    </hal>
-    <hal format="hidl">
-       <name>android.hardware.wifi.supplicant</name>
-       <transport>hwbinder</transport>
-       <version>1.2</version>
-       <interface>
-           <name>ISupplicant</name>
-           <instance>default</instance>
-       </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.wifi.hostapd</name>
-        <transport>hwbinder</transport>
-        <version>1.1</version>
-        <interface>
-            <name>IHostapd</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-       <name>android.hardware.camera.provider</name>
-	<transport>hwbinder</transport>
-	<impl level="generic"></impl>
-	<version>2.4</version>
-	<interface>
-	    <name>ICameraProvider</name>
-	    <instance>legacy/0</instance>
-	</interface>
-    </hal>
-    <hal format="hidl">
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <name>android.hardware.light</name>
         <transport>hwbinder</transport>
         <version>2.0</version>
@@ -191,11 +132,7 @@
     <hal format="hidl">
         <name>android.hardware.audio</name>
         <transport>hwbinder</transport>
-<<<<<<< HEAD
-        <version>5.0</version>
-=======
         <version>6.0</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <interface>
             <name>IDevicesFactory</name>
             <instance>default</instance>
@@ -204,38 +141,13 @@
     <hal format="hidl">
         <name>android.hardware.audio.effect</name>
         <transport>hwbinder</transport>
-<<<<<<< HEAD
-		<version>5.0</version>
-=======
-		<version>6.0</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
+        <version>6.0</version>
         <interface>
             <name>IEffectsFactory</name>
             <instance>default</instance>
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
-        <name>android.hardware.usb</name>
-        <transport>hwbinder</transport>
-        <version>1.1</version>
-        <interface>
-            <name>IUsb</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.usb.gadget</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IUsbGadget</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <name>android.hardware.bluetooth</name>
         <transport>hwbinder</transport>
         <version>1.0</version>
@@ -247,38 +159,13 @@
     <hal format="hidl">
         <name>android.hardware.dumpstate</name>
         <transport>hwbinder</transport>
-<<<<<<< HEAD
-        <version>1.0</version>
-=======
         <version>1.1</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <interface>
             <name>IDumpstateDevice</name>
             <instance>default</instance>
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
-        <name>android.hardware.oemlock</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IOemLock</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.health</name>
-        <transport>hwbinder</transport>
-        <version>2.0</version>
-        <interface>
-            <name>IHealth</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <name>nxp.hardware.display</name>
             <transport>hwbinder</transport>
         <version>1.0</version>
@@ -288,18 +175,8 @@
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
-        <name>android.hardware.neuralnetworks</name>
-        <transport>hwbinder</transport>
-        <version>1.2</version>
-        <interface>
-            <name>IDevice</name>
-            <instance>vsi-npu</instance>
-        </interface>
-=======
        <name>android.hardware.camera.provider</name>
        <transport>hwbinder</transport>
        <fqname>@2.4::ICameraProvider/external/0</fqname>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     </hal>
 </manifest>
diff --git a/imx8m/vp6820_8mp/ov5640_camera_config_imx8mp.json b/imx8m/vp6820_8mp/ov5640_camera_config_imx8mp.json
index 55c0971e..e1f28176 100644
--- a/imx8m/vp6820_8mp/ov5640_camera_config_imx8mp.json
+++ b/imx8m/vp6820_8mp/ov5640_camera_config_imx8mp.json
@@ -12,10 +12,7 @@
       "camera_type": "back",
       "camera_name": "mxc-isi-cap",
       "orientation": "0",
-<<<<<<< HEAD
-=======
       "mplane": "1",
->>>>>>> post_merge/android-11.0.0_1.0.0_history
       "buffer_type": "dma",
       "ActiveArrayWidth": "2592",
       "ActiveArrayHeight": "1944",
diff --git a/imx8m/vp6820_8mp/overlay/frameworks/base/core/res/res/values/config.xml b/imx8m/vp6820_8mp/overlay/frameworks/base/core/res/res/values/config.xml
index 099ec3b6..416ce4ff 100644
--- a/imx8m/vp6820_8mp/overlay/frameworks/base/core/res/res/values/config.xml
+++ b/imx8m/vp6820_8mp/overlay/frameworks/base/core/res/res/values/config.xml
@@ -185,30 +185,9 @@
     <!-- This device is not "voice capable"; it's data-only. -->
     <bool name="config_voice_capable">false</bool>
 
-    <!-- Boolean indicating whether the wifi chipset has dual frequency band support -->
-    <bool translatable="false" name="config_wifi_dual_band_support">true</bool>
-
     <!-- Boolean indicating whether system support sustained performance mode. -->
     <bool name="config_sustainedPerformanceModeSupported">true</bool>
 
-    <!-- Enable 802.11ac for Wifi hotspot (SAP) -->
-    <bool translatable="false" name="config_wifi_softap_ieee80211ac_supported">true</bool>
-
-    <!-- Enable ACS (auto channel selection) for Wifi hotspot (SAP) -->
-    <bool translatable="false" name="config_wifi_softap_acs_supported">true</bool>
-
-    <!-- Boolean indicating whether 802.11r Fast BSS Transition is enabled on this platform -->
-    <bool translatable="false" name="config_wifi_fast_bss_transition_enabled">true</bool>
-
-    <!-- Boolean indicating whether the wifi chipset has background scan support -->
-    <bool translatable="false" name="config_wifi_background_scan_support">true</bool>
-
-    <!-- Indicates that connected MAC randomization is supported on this device -->
-    <bool translatable="false" name="config_wifi_connected_mac_randomization_supported">true</bool>
-
-    <!-- Indicates that p2p MAC randomization is supported on this device -->
-    <bool translatable="false" name="config_wifi_p2p_mac_randomization_supported">true</bool>
-
     <!-- The default gravity for the picture-in-picture window.
          Currently, this maps to Gravity.TOP | Gravity.RIGHT -->
     <integer name="config_defaultPictureInPictureGravity">0x35</integer>
diff --git a/imx8m/vp6820_8mp/overlay/frameworks/base/core/res/res/values/config.xml~post_merge_android-11.0.0_1.0.0_history b/imx8m/vp6820_8mp/overlay/frameworks/base/core/res/res/values/config.xml~post_merge_android-11.0.0_1.0.0_history
deleted file mode 100644
index 0d89ad5b..00000000
--- a/imx8m/vp6820_8mp/overlay/frameworks/base/core/res/res/values/config.xml~post_merge_android-11.0.0_1.0.0_history
+++ /dev/null
@@ -1,190 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<!--
-/*
-** Copyright 2011, The Android Open Source Project
-**
-** Licensed under the Apache License, Version 2.0 (the "License");
-** you may not use this file except in compliance with the License.
-** You may obtain a copy of the License at
-**
-**     http://www.apache.org/licenses/LICENSE-2.0
-**
-** Unless required by applicable law or agreed to in writing, software
-** distributed under the License is distributed on an "AS IS" BASIS,
-** WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-** See the License for the specific language governing permissions and
-** limitations under the License.
-*/
--->
-
-<!-- These resources are around just to allow their values to be customized
-     for different hardware and product builds. -->
-<resources>
-
-    <!--For Android we support eth0 now -->
-    <string translatable="false" name="config_ethernet_iface_regex">eth0</string>
-
-    <!-- List of regexpressions describing the interface (if any) that represent tetherable
-         USB interfaces.  If the device doesn't want to support tething over USB this should
-         be empty.  An example would be "usb.*" -->
-     <string-array translatable="false" name="config_tether_usb_regexs">
-       <item>usb0</item>
-     </string-array>
-
-    <!-- List of regexpressions describing the interface (if any) that represent tetherable
-         Wifi interfaces.  If the device doesn't want to support tethering over Wifi this
-         should be empty.  An example would be "softap.*" -->
-    <string-array translatable="false" name="config_tether_wifi_regexs">
-      <item>"wlan0"</item>
-    </string-array>
-
-    <!-- List of regexpressions describing the interface (if any) that represent tetherable
-         bluetooth interfaces.  If the device doesn't want to support tethering over bluetooth this
-         should be empty. -->
-    <string-array translatable="false" name="config_tether_bluetooth_regexs">
-        <item>"bt-pan"</item>
-        </string-array>
-
-    <!-- Array of ConnectivityManager.TYPE_xxxx values allowable for tethering -->
-    <!-- Common options are [1, 4] for TYPE_WIFI and TYPE_MOBILE_DUN or
-    <!== [0,1,5,7,9] for TYPE_MOBILE, TYPE_WIFI, TYPE_MOBILE_HIPRI, TYPE_BLUETOOTH and TYPE_ETHERNET -->
-    <integer-array translatable="false" name="config_tether_upstream_types">
-        <item>0</item>
-        <item>1</item>
-        <item>5</item>
-        <item>9</item>
-    </integer-array>
-
-    <!-- Flag indicating whether we should enable the automatic brightness in Settings.
-         config_hardware_automatic_brightness_available is not set, so we will use software implementation -->
-    <bool name="config_automatic_brightness_available">true</bool>
-
-    <!-- An Array of "[ConnectivityManager connectionType],
-                      [# simultaneous connection types]"  -->
-    <string-array translatable="false" name="radioAttributes">
-        <item>"1,1"</item>
-        <item>"9,1"</item>
-    </string-array>
-
-    <!-- An Array of "[Connection name],[ConnectivityManager.TYPE_xxxx],
-         [associated radio-type],[priority],[restoral-timer(ms)],[dependencyMet]  -->
-    <!-- the 5th element "resore-time" indicates the number of milliseconds to delay
-         before automatically restore the default connection.  Set -1 if the connection
-         does not require auto-restore. -->
-    <!-- the 6th element indicates boot-time dependency-met value. -->
-    <string-array translatable="false" name="networkAttributes">
-        <item>"wifi,1,1,1,-1,true"</item>
-        <item>"bluetooth,7,7,2,-1,true"</item>
-        <item>"ethernet,9,9,2,-1,true"</item>
-    </string-array>
-
-    <!-- Array of light sensor LUX values to define our levels for auto backlight brightness support.
-         The N entries of this array define N + 1 zones as follows:
-
-         Zone 0:        0 <= LUX < array[0]
-         Zone 1:        array[0] <= LUX < array[1]
-         ...
-         Zone N:        array[N - 1] <= LUX < array[N]
-         Zone N + 1:    array[N] <= LUX < infinity
-
-         Must be overridden in platform specific overlays -->
-    <integer-array name="config_autoBrightnessLevels">
-        <item>5</item>
-        <item>15</item>
-        <item>50</item>
-        <item>100</item>
-        <item>200</item>
-        <item>400</item>
-        <item>1000</item>
-        <item>2000</item>
-        <item>3000</item>
-        <item>5000</item>
-        <item>10000</item>
-        <item>30000</item>
-    </integer-array>
-
-    <!-- Array of output values for LCD backlight corresponding to the LUX values
-         in the config_autoBrightnessLevels array.  This array should have size one greater
-         than the size of the config_autoBrightnessLevels array.
-         This must be overridden in platform specific overlays -->
-    <integer-array name="config_autoBrightnessLcdBacklightValues">
-        <item>5</item>    <!-- 0-5 -->
-        <item>20</item>   <!-- 5-15 -->
-        <item>30</item>   <!-- 15-50 -->
-        <item>40</item>   <!-- 50-100 -->
-        <item>50</item>   <!-- 100-200 -->
-        <item>60</item>   <!-- 200-400 -->
-        <item>70</item>   <!-- 400-1000 -->
-        <item>80</item>   <!-- 1000-2000 -->
-        <item>130</item>  <!-- 2000-3000 -->
-        <item>180</item>  <!-- 3000-5000 -->
-        <item>255</item>  <!-- 5000-10000 -->
-        <item>255</item>  <!-- 10000-30000 -->
-        <item>255</item>  <!-- 30000+ -->
-    </integer-array>
-
-    <!-- Array of output values for button backlight corresponding to the LUX values
-         in the config_autoBrightnessLevels array.  This array should have size one greater
-         than the size of the config_autoBrightnessLevels array.
-         This must be overridden in platform specific overlays -->
-    <integer-array name="config_autoBrightnessButtonBacklightValues">
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-    </integer-array>
-
-    <!-- Array of output values for keyboard backlight corresponding to the LUX values
-         in the config_autoBrightnessLevels array.  This array should have size one greater
-         than the size of the config_autoBrightnessLevels array.
-         This must be overridden in platform specific overlays -->
-    <integer-array name="config_autoBrightnessKeyboardBacklightValues">
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-        <item>0</item>
-    </integer-array>
-
-    <integer name="config_screenBrightnessDim">5</integer>
-
-    <!--  Maximum number of supported users -->
-    <integer name="config_multiuserMaximumUsers">8</integer>
-    <!--  Whether Multiuser UI should be shown -->
-    <bool name="config_enableMultiUserUI">true</bool>
-
-    <!-- Whether a software navigation bar should be shown. NOTE: in the future this may be
-         autodetected from the Configuration. -->
-    <bool name="config_showNavigationBar">true</bool>
-
-    <!-- This device is not "voice capable"; it's data-only. -->
-    <bool name="config_voice_capable">false</bool>
-
-    <!-- Boolean indicating whether system support sustained performance mode. -->
-    <bool name="config_sustainedPerformanceModeSupported">true</bool>
-</resources>
diff --git a/imx8m/vp6820_8mp/overlay/frameworks/base/packages/SettingsProvider/res/values/defaults.xml b/imx8m/vp6820_8mp/overlay/frameworks/base/packages/SettingsProvider/res/values/defaults.xml
index bd32383c..0bf9ee21 100644
--- a/imx8m/vp6820_8mp/overlay/frameworks/base/packages/SettingsProvider/res/values/defaults.xml
+++ b/imx8m/vp6820_8mp/overlay/frameworks/base/packages/SettingsProvider/res/values/defaults.xml
@@ -21,8 +21,5 @@
     <bool name="def_user_setup_complete">true</bool>
     <bool name="def_bluetooth_on">false</bool>
     <bool name="def_stay_on_while_plugged_in">true</bool>
-<<<<<<< HEAD
     <string name="def_immersive_mode_confirmations" translatable="false">confirmed</string>
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 </resources>
diff --git a/imx8m/vp6820_8mp/powerhint_imx8mp.json b/imx8m/vp6820_8mp/powerhint_imx8mp.json
index b4b47d1a..d926e59a 100644
--- a/imx8m/vp6820_8mp/powerhint_imx8mp.json
+++ b/imx8m/vp6820_8mp/powerhint_imx8mp.json
@@ -80,11 +80,7 @@
       "PowerHint": "INTERACTION",
       "Node": "CPULittleClusterMinFreq",
       "Duration": 0,
-<<<<<<< HEAD
-      "Value": "1600000"
-=======
       "Value": "1800000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "INTERACTION",
@@ -93,15 +89,12 @@
       "Value": "60"
     },
     {
-<<<<<<< HEAD
-=======
       "PowerHint": "INTERACTION",
       "Node": "PMQoSCpuDmaLatency",
       "Duration": 500,
       "Value": "0"
     },
     {
->>>>>>> post_merge/android-11.0.0_1.0.0_history
       "PowerHint": "LAUNCH",
       "Node": "CPULittleClusterMinFreq",
       "Duration": 5000,
@@ -122,24 +115,14 @@
     {
       "PowerHint": "CAMERA_LAUNCH",
       "Node": "CPULittleClusterMinFreq",
-<<<<<<< HEAD
-      "Duration": 1000,
-      "Value": "1200000"
-=======
       "Duration": 5000,
       "Value": "1800000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "CAMERA_LAUNCH",
       "Node": "CPULittleClusterMaxFreq",
-<<<<<<< HEAD
-      "Duration": 1000,
-      "Value": "1200000"
-=======
       "Duration": 5000,
       "Value": "1800000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "CAMERA_LAUNCH",
@@ -162,22 +145,13 @@
     {
       "PowerHint": "CAMERA_SHOT",
       "Node": "CPULittleClusterMinFreq",
-<<<<<<< HEAD
-      "Duration": 1000,
-      "Value": "1200000"
-=======
       "Duration": 5000,
       "Value": "1800000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "CAMERA_SHOT",
       "Node": "CPULittleClusterMaxFreq",
-<<<<<<< HEAD
-      "Duration": 1000,
-=======
       "Duration": 5000,
->>>>>>> post_merge/android-11.0.0_1.0.0_history
       "Value": "1800000"
     },
     {
diff --git a/imx8m/vp6820_8mp/sepolicy/file_contexts b/imx8m/vp6820_8mp/sepolicy/file_contexts
index 00861fc3..09e5c4b6 100644
--- a/imx8m/vp6820_8mp/sepolicy/file_contexts
+++ b/imx8m/vp6820_8mp/sepolicy/file_contexts
@@ -23,15 +23,12 @@
 /dev/block/platform/soc@0/30800000.bus/30b60000\.mmc/by-name/userdata         u:object_r:userdata_block_device:s0
 /dev/block/platform/soc@0/30800000.bus/30b60000\.mmc/by-name/vbmeta_[ab]      u:object_r:vbmeta_block_device:s0
 /dev/block/platform/soc@0/30800000.bus/30b60000\.mmc/by-name/super            u:object_r:super_block_device:s0
-<<<<<<< HEAD
 /dev/block/platform/soc@0/30800000.bus/30b60000\.mmc/by-name/bootloader_[ab]  u:object_r:bootloader_block_device:s0
 /dev/block/platform/soc@0/30800000.bus/30b60000\.mmc/by-name/mem_info_[ab]    u:object_r:bootloader_block_device:s0
 
 # spl
 /dev/block/mmcblk2boot[01]            u:object_r:spl_block_device:s0
 /dev/block/mmcblk2boot[01]p[1-9]      u:object_r:spl_block_device:s0
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 #peripheral
 /vendor/bin/magd                u:object_r:sensors_exec:s0
@@ -51,11 +48,8 @@
 # Media Codec2 service
 /vendor/bin/hw/android\.hardware\.media\.c2@1\.0-service    u:object_r:mediacodec_exec:s0
 
-<<<<<<< HEAD
-=======
 /dev/block/pmem0  u:object_r:rebootescrow_device:s0
 
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 # isp related
 /vendor/bin/vvext                           u:object_r:isp_exec:s0
 /vendor/bin/video_test                      u:object_r:isp_exec:s0
diff --git a/imx8m/vp6820_8mp/sepolicy/genfs_contexts b/imx8m/vp6820_8mp/sepolicy/genfs_contexts
index 3256c12b..2fcd3d72 100644
--- a/imx8m/vp6820_8mp/sepolicy/genfs_contexts
+++ b/imx8m/vp6820_8mp/sepolicy/genfs_contexts
@@ -3,10 +3,7 @@ genfscon sysfs /devices/platform/soc@0/30800000.bus/30b50000.mmc/mmc_host/mmc1/m
 genfscon sysfs /devices/platform/soc@0/30800000.bus/30b60000.mmc/mmc_host/mmc2/mmc2:0001/block/mmcblk2 u:object_r:sysfs_block_devices:s0
 genfscon sysfs /devices/platform/soc@0/30800000.bus/30bb0000.spi/spi_master/spi0/spi0.0/mtd/mtd0/mtdblock0 u:object_r:sysfs_block_devices:s0
 genfscon sysfs /devices/platform/soc@0/32c00000.bus/32e60000.mipi_dsi/32e60000.mipi_dsi.0/backlight u:object_r:sysfs_leds:s0
-<<<<<<< HEAD
 genfscon sysfs /devices/platform/backlight/backlight/backlight u:object_r:sysfs_leds:s0
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 #sys/class/net
 genfscon sysfs /devices/platform/soc@0/30800000.bus/30be0000.ethernet/net                u:object_r:sysfs_net:s0
@@ -15,8 +12,6 @@ genfscon sysfs /devices/platform/33800000.pcie/pci0000:00/0000:00:00.0/0000:01:0
 genfscon sysfs /devices/platform/32f10100.usb/38100000.dwc3/gadget/net                   u:object_r:sysfs_net:s0
 
 genfscon sysfs /devices/platform/soc@0/30800000.bus/30a30000.i2c/i2c-1/1-0050/extcon u:object_r:sysfs_extcon:s0
-<<<<<<< HEAD
-=======
 
 # android.system.suspend@1.0-service
 genfscon sysfs /devices/platform/soc@0/30000000.bus/30370000.snvs/30370000.snvs:snvs-powerkey/wakeup                         u:object_r:sysfs_wakeup:s0
@@ -29,4 +24,3 @@ genfscon sysfs /devices/platform/soc@0/30800000.bus/30a30000.i2c/i2c-1/1-0050/po
 
 # for dumpstate to access the stat file
 genfscon sysfs /devices/platform/94400000.pmem/ndbus0/region0/namespace0.0/block/pmem0                                       u:object_r:sysfs_block_devices:s0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mp/vp6820_8mp.mk b/imx8m/vp6820_8mp/vp6820_8mp.mk
index f383ec65..ac084d28 100644
--- a/imx8m/vp6820_8mp/vp6820_8mp.mk
+++ b/imx8m/vp6820_8mp/vp6820_8mp.mk
@@ -1,21 +1,16 @@
 # This is a FSL Android Reference Design platform based on i.MX8QP ARD board
 # It will inherit from FSL core product which in turn inherit from Google generic
 
-<<<<<<< HEAD
 IMX_DEVICE_PATH := device/idtech/imx8m/vp6820_8mp
-=======
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mp
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # configs shared between uboot, kernel and Android rootfs
 include $(IMX_DEVICE_PATH)/SharedBoardConfig.mk
 
-<<<<<<< HEAD
 -include device/idtech/common/imx_path/ImxPathConfig.mk
 include device/idtech/imx8m/ProductConfigCommon.mk
 
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.freescale),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab.freescale)
+ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.nxp),)
+$(shell touch $(IMX_DEVICE_PATH)/fstab.nxp)
 endif
 
 # Overrides
@@ -23,34 +18,16 @@ PRODUCT_NAME := vp6820_8mp
 PRODUCT_DEVICE := vp6820_8mp
 PRODUCT_MODEL := VP6820_8MP
 
-PRODUCT_FULL_TREBLE_OVERRIDE := true
-=======
--include device/nxp/common/imx_path/ImxPathConfig.mk
-include device/nxp/imx8m/ProductConfigCommon.mk
-
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.nxp),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab.nxp)
-endif
-
-# Overrides
-PRODUCT_NAME := evk_8mp
-PRODUCT_DEVICE := evk_8mp
-PRODUCT_MODEL := EVK_8MP
-
 PRODUCT_FULL_TREBLE_OVERRIDE := true
 PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/power
 PRODUCT_SOONG_NAMESPACES += hardware/google/pixel
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 #Enable this to choose 32 bit user space build
 #IMX8_BUILD_32BIT_ROOTFS := true
 
-<<<<<<< HEAD
-=======
 # Enable this to support vendor boot and boot header v3, this would be a MUST for GKI
 TARGET_USE_VENDOR_BOOT ?= true
 
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 #Enable this to use dynamic partitions for the readonly partitions not touched by bootloader
 TARGET_USE_DYNAMIC_PARTITIONS ?= true
 #If the device is retrofit to have dynamic partition feature, set this variable to true to build
@@ -58,16 +35,10 @@ TARGET_USE_DYNAMIC_PARTITIONS ?= true
 TARGET_USE_RETROFIT_DYNAMIC_PARTITION ?= false
 
 ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
-<<<<<<< HEAD
-  PRODUCT_USE_DYNAMIC_PARTITIONS := true
-  BOARD_BUILD_SUPER_IMAGE_BY_DEFAULT := true
-  BOARD_SUPER_IMAGE_IN_UPDATE_PACKAGE := false
-=======
   $(call inherit-product, $(SRC_TARGET_DIR)/product/virtual_ab_ota.mk)
   PRODUCT_USE_DYNAMIC_PARTITIONS := true
   BOARD_BUILD_SUPER_IMAGE_BY_DEFAULT := true
-  BOARD_SUPER_IMAGE_IN_UPDATE_PACKAGE := true
->>>>>>> post_merge/android-11.0.0_1.0.0_history
+  BOARD_SUPER_IMAGE_IN_UPDATE_PACKAGE := false
   ifeq ($(TARGET_USE_RETROFIT_DYNAMIC_PARTITION),true)
     PRODUCT_RETROFIT_DYNAMIC_PARTITIONS := true
     BOARD_SUPER_PARTITION_METADATA_DEVICE := system
@@ -102,15 +73,14 @@ PRODUCT_COPY_FILES += \
     $(IMX_DEVICE_PATH)/audio_policy_configuration.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
     $(IMX_DEVICE_PATH)/usb_audio_policy_configuration-direct-output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/usb_audio_policy_configuration-direct-output.xml \
     $(IMX_DEVICE_PATH)/input-port-associations.xml:$(TARGET_COPY_OUT_VENDOR)/etc/input-port-associations.xml \
-<<<<<<< HEAD
-    $(IMX_DEVICE_PATH)/fstab.freescale:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.freescale \
-    $(IMX_DEVICE_PATH)/init.imx8mp.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.freescale.imx8mp.rc \
-    $(IMX_DEVICE_PATH)/init.recovery.freescale.rc:root/init.recovery.freescale.rc \
+    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.nxp \
+    $(IMX_DEVICE_PATH)/init.imx8mp.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mp.rc \
+    $(IMX_DEVICE_PATH)/init.recovery.nxp.rc:root/init.recovery.nxp.rc \
     $(IMX_DEVICE_PATH)/early.init.cfg:$(TARGET_COPY_OUT_VENDOR)/etc/early.init.cfg \
-    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.freescale.rc \
-    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.freescale.usb.rc \
+    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.rc \
+    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.usb.rc \
     $(IMX_DEVICE_PATH)/required_hardware.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/required_hardware.xml \
-    $(IMX_DEVICE_PATH)/ueventd.freescale.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
+    $(IMX_DEVICE_PATH)/ueventd.nxp.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
     $(LINUX_FIRMWARE_IMX_PATH)/linux-firmware-imx/firmware/sdma/sdma-imx7d.bin:$(TARGET_COPY_OUT_VENDOR)/firmware/imx/sdma/sdma-imx7d.bin \
     device/idtech/common/init/init.insmod.sh:$(TARGET_COPY_OUT_VENDOR)/bin/init.insmod.sh \
     device/idtech/common/wifi/p2p_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/p2p_supplicant_overlay.conf \
@@ -121,20 +91,6 @@ PRODUCT_COPY_FILES += \
     device/idtech/common/prebuilts/mem_info.img:$(PRODUCT_OUT)/mem_info.img \
     device/idtech/common/prebuilts/mem_info.txt:$(PRODUCT_OUT)/mem_info.txt \
     device/idtech/imx8m/device_policy.sh:$(TARGET_COPY_OUT_PRODUCT)/etc/init/hw/device_policy.sh
-=======
-    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.nxp \
-    $(IMX_DEVICE_PATH)/init.imx8mp.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mp.rc \
-    $(IMX_DEVICE_PATH)/init.recovery.nxp.rc:root/init.recovery.nxp.rc \
-    $(IMX_DEVICE_PATH)/early.init.cfg:$(TARGET_COPY_OUT_VENDOR)/etc/early.init.cfg \
-    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.rc \
-    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.usb.rc \
-    $(IMX_DEVICE_PATH)/required_hardware.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/required_hardware.xml \
-    $(IMX_DEVICE_PATH)/ueventd.nxp.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
-    $(LINUX_FIRMWARE_IMX_PATH)/linux-firmware-imx/firmware/sdma/sdma-imx7d.bin:$(TARGET_COPY_OUT_VENDOR)/firmware/imx/sdma/sdma-imx7d.bin \
-    device/nxp/common/init/init.insmod.sh:$(TARGET_COPY_OUT_VENDOR)/bin/init.insmod.sh \
-    device/nxp/common/wifi/p2p_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/p2p_supplicant_overlay.conf \
-    device/nxp/common/wifi/wpa_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/wpa_supplicant_overlay.conf
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # Copy isp files to board
 ISP_PROPRIETARY := $(FSL_PROPRIETARY_PATH)/fsl-proprietary/isp
@@ -143,13 +99,15 @@ PRODUCT_COPY_FILES += \
     $(call find-copy-subdir-files,*,$(ISP_PROPRIETARY)/lib64,$(TARGET_COPY_OUT_VENDOR)/lib64) \
     $(call find-copy-subdir-files,*,$(ISP_PROPRIETARY)/config,$(TARGET_COPY_OUT_VENDOR)/etc/configs/isp)
 
-<<<<<<< HEAD
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
+# We load the fstab from device tree so this is not needed, but since no kernel modules are installed to vendor
+# boot ramdisk so far, we need this step to generate the vendor-ramdisk folder or build process would fail. This
+# can be deleted once we figure out what kernel modules should be put into the vendor boot ramdisk.
+ifeq ($(TARGET_USE_VENDOR_BOOT),true)
 PRODUCT_COPY_FILES += \
-    $(FSL_PROPRIETARY_PATH)/fsl-proprietary/dynamic_partiton_tools/lpmake:lpmake \
-    $(FSL_PROPRIETARY_PATH)/fsl-proprietary/dynamic_partiton_tools/lpmake.exe:lpmake.exe
+    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR_RAMDISK)/first_stage_ramdisk/fstab.nxp
 endif
 
+
 # Audio card json
 PRODUCT_COPY_FILES += \
     device/idtech/common/audio-json/wm8960_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/wm8960_config.json \
@@ -168,46 +126,14 @@ endif
 PRODUCT_COPY_FILES += \
     device/idtech/imx8m/vp6820_8mp/camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/camera_config_imx8mp.json \
     device/idtech/imx8m/vp6820_8mp/ov5640_camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/ov5640_camera_config_imx8mp.json \
-    device/idtech/imx8m/vp6820_8mp/isp_camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/isp_camera_config_imx8mp.json
-=======
-# We load the fstab from device tree so this is not needed, but since no kernel modules are installed to vendor
-# boot ramdisk so far, we need this step to generate the vendor-ramdisk folder or build process would fail. This
-# can be deleted once we figure out what kernel modules should be put into the vendor boot ramdisk.
-ifeq ($(TARGET_USE_VENDOR_BOOT),true)
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR_RAMDISK)/first_stage_ramdisk/fstab.nxp
-endif
-
-
-# Audio card json
-PRODUCT_COPY_FILES += \
-    device/nxp/common/audio-json/wm8960_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/wm8960_config.json \
-    device/nxp/common/audio-json/micfil_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/micfil_config.json \
-    device/nxp/common/audio-json/hdmi_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/hdmi_config.json \
-    device/nxp/common/audio-json/btsco_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/btsco_config.json \
-    device/nxp/common/audio-json/readme.txt:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/readme.txt
-
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_COPY_FILES += \
-    device/nxp/common/security/rpmb_key_test.bin:rpmb_key_test.bin \
-    device/nxp/common/security/testkey_public_rsa4096.bin:testkey_public_rsa4096.bin
-endif
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mp/camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/camera_config_imx8mp.json \
-    device/nxp/imx8m/evk_8mp/ov5640_camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/ov5640_camera_config_imx8mp.json \
-    device/nxp/imx8m/evk_8mp/isp_camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/isp_camera_config_imx8mp.json \
-    device/nxp/imx8m/evk_8mp/external_camera_config.xml:$(TARGET_COPY_OUT_VENDOR)/etc/external_camera_config.xml
->>>>>>> post_merge/android-11.0.0_1.0.0_history
+    device/idtech/imx8m/vp6820_8mp/isp_camera_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/isp_camera_config_imx8mp.json \
+    device/idtech/imx8m/vp6820_8mp/external_camera_config.xml:$(TARGET_COPY_OUT_VENDOR)/etc/external_camera_config.xml
 
 # ONLY devices that meet the CDD's requirements may declare these features
 PRODUCT_COPY_FILES += \
     frameworks/native/data/etc/android.hardware.audio.output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.audio.output.xml \
     frameworks/native/data/etc/android.hardware.bluetooth_le.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.bluetooth_le.xml \
-<<<<<<< HEAD
-=======
     frameworks/native/data/etc/android.hardware.camera.external.xml:vendor/etc/permissions/android.hardware.camera.external.xml \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     frameworks/native/data/etc/android.hardware.camera.front.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.front.xml \
     frameworks/native/data/etc/android.hardware.camera.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.xml \
     frameworks/native/data/etc/android.hardware.ethernet.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.ethernet.xml \
@@ -220,10 +146,7 @@ PRODUCT_COPY_FILES += \
     frameworks/native/data/etc/android.hardware.usb.host.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.host.xml \
     frameworks/native/data/etc/android.hardware.vulkan.level-0.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.level-0.xml \
     frameworks/native/data/etc/android.hardware.vulkan.version-1_1.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.version-1_1.xml \
-<<<<<<< HEAD
-=======
     frameworks/native/data/etc/android.software.vulkan.deqp.level-2020-03-01.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.vulkan.deqp.level-2020-03-01.xml \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     frameworks/native/data/etc/android.hardware.wifi.direct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.direct.xml \
     frameworks/native/data/etc/android.hardware.wifi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.xml \
     frameworks/native/data/etc/android.hardware.wifi.passpoint.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.passpoint.xml \
@@ -231,10 +154,7 @@ PRODUCT_COPY_FILES += \
     frameworks/native/data/etc/android.software.backup.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.backup.xml \
     frameworks/native/data/etc/android.software.device_admin.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.device_admin.xml \
     frameworks/native/data/etc/android.software.managed_users.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.managed_users.xml \
-<<<<<<< HEAD
-=======
     frameworks/native/data/etc/android.software.midi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.midi.xml \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     frameworks/native/data/etc/android.software.print.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.print.xml \
     frameworks/native/data/etc/android.software.sip.voip.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.sip.voip.xml \
     frameworks/native/data/etc/android.software.verified_boot.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.verified_boot.xml \
@@ -245,8 +165,9 @@ PRODUCT_COPY_FILES += \
 # Vendor seccomp policy files for media components:
 PRODUCT_COPY_FILES += \
     $(IMX_DEVICE_PATH)/seccomp/mediacodec-seccomp.policy:vendor/etc/seccomp_policy/mediacodec.policy \
-<<<<<<< HEAD
-    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy
+    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy \
+    device/idtech/common/seccomp_policy/codec2.vendor.base.policy:vendor/etc/seccomp_policy/codec2.vendor.base.policy \
+    device/idtech/common/seccomp_policy/codec2.vendor.ext.policy:vendor/etc/seccomp_policy/codec2.vendor.ext.policy
 
 PRODUCT_COPY_FILES += \
     device/idtech/imx8m/vp6820_8mp/powerhint_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/powerhint_imx8mp.json
@@ -255,35 +176,13 @@ PRODUCT_COPY_FILES += \
 PRODUCT_COPY_FILES += \
     device/idtech/common/tools/fastboot_imx_flashall.bat:fastboot_imx_flashall.bat \
     device/idtech/common/tools/fastboot_imx_flashall.sh:fastboot_imx_flashall.sh \
-    device/idtech/common/tools/fsl-sdcard-partition.sh:fsl-sdcard-partition.sh \
+    device/idtech/common/tools/imx-sdcard-partition.sh:imx-sdcard-partition.sh \
     device/idtech/common/tools/uuu_imx_android_flash.bat:uuu_imx_android_flash.bat \
     device/idtech/common/tools/uuu_imx_android_flash.sh:uuu_imx_android_flash.sh
 
-# Copy media_codecs.xml for 1GB vp6820_8mp board
-ifeq ($(LOW_MEMORY),true)
-PRODUCT_COPY_FILES += \
-    $(FSL_PROPRIETARY_PATH)/fsl-proprietary/media-profile/imx8mp/media_codecs_no_vpu.xml:$(TARGET_COPY_OUT_VENDOR)/etc/media_codecs.xml
-endif
-=======
-    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.base.policy:vendor/etc/seccomp_policy/codec2.vendor.base.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.ext.policy:vendor/etc/seccomp_policy/codec2.vendor.ext.policy
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mp/powerhint_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/powerhint_imx8mp.json
-
-# fastboot_imx_flashall scripts, fsl-sdcard-partition script uuu_imx_android_flash scripts
-PRODUCT_COPY_FILES += \
-    device/nxp/common/tools/fastboot_imx_flashall.bat:fastboot_imx_flashall.bat \
-    device/nxp/common/tools/fastboot_imx_flashall.sh:fastboot_imx_flashall.sh \
-    device/nxp/common/tools/imx-sdcard-partition.sh:imx-sdcard-partition.sh \
-    device/nxp/common/tools/uuu_imx_android_flash.bat:uuu_imx_android_flash.bat \
-    device/nxp/common/tools/uuu_imx_android_flash.sh:uuu_imx_android_flash.sh
-
 # Set permission for GMS packages
 PRODUCT_COPY_FILES += \
-	  device/nxp/imx8m/permissions/privapp-permissions-imx.xml:$(TARGET_COPY_OUT_PRODUCT)/etc/permissions/privapp.permissions-imx.xml \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
+	  device/idtech/imx8m/permissions/privapp-permissions-imx.xml:$(TARGET_COPY_OUT_PRODUCT)/etc/permissions/privapp.permissions-imx.xml \
 
 USE_XML_AUDIO_POLICY_CONF := 1
 
@@ -299,9 +198,6 @@ PRODUCT_COPY_FILES += \
 
 # HWC2 HAL
 PRODUCT_PACKAGES += \
-<<<<<<< HEAD
-    android.hardware.graphics.composer@2.3-service
-=======
     android.hardware.graphics.composer@2.4-service
 
 # Charger Mode
@@ -311,7 +207,6 @@ PRODUCT_PRODUCT_PROPERTIES += \
 # Do not skip charger_not_need trigger by default
 PRODUCT_DEFAULT_PROPERTY_OVERRIDES += \
     vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # Gralloc HAL
 PRODUCT_PACKAGES += \
@@ -353,24 +248,6 @@ PRODUCT_PACKAGES += \
     libNNGPUBinary-lite \
     libNNGPUBinary-ulite \
     libNNArchPerf \
-<<<<<<< HEAD
-    libarchmodelSw \
-    gatekeeper.imx
-
-PRODUCT_PACKAGES += \
-    android.hardware.audio@5.0-impl:32 \
-    android.hardware.audio@2.0-service \
-    android.hardware.audio.effect@5.0-impl:32 \
-    android.hardware.power@1.3-service.imx \
-    android.hardware.light@2.0-impl \
-    android.hardware.light@2.0-service \
-    android.hardware.sensors@1.0-impl \
-    android.hardware.sensors@1.0-convert \
-    android.hardware.sensors@1.0-service \
-    android.hardware.configstore@1.1-service \
-    configstore@1.1.policy
-
-=======
     libarchmodelSw
 
 PRODUCT_PACKAGES += \
@@ -380,21 +257,19 @@ PRODUCT_PACKAGES += \
     android.hardware.power@1.3-service.imx \
     android.hardware.light@2.0-impl \
     android.hardware.light@2.0-service \
+    android.hardware.sensors@1.0-impl \
+    android.hardware.sensors@1.0-convert \
+    android.hardware.sensors@1.0-service \
     android.hardware.configstore@1.1-service \
     configstore@1.1.policy
 
 ifneq ($(IMX8MP_USES_GKI), true)
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 # Thermal HAL
 PRODUCT_PACKAGES += \
     android.hardware.thermal@2.0-service.imx
 PRODUCT_COPY_FILES += \
-<<<<<<< HEAD
     device/idtech/imx8m/vp6820_8mp/thermal_info_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/thermal_info_config_imx8mp.json
-=======
-    device/nxp/imx8m/evk_8mp/thermal_info_config_imx8mp.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/thermal_info_config_imx8mp.json
 endif
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # Neural Network HAL and lib
 PRODUCT_PACKAGES += \
@@ -421,11 +296,6 @@ PRODUCT_PACKAGES += \
     wifilogd \
     wificond
 
-<<<<<<< HEAD
-# nxp 8997 wifi and bluetooth combo Firmware
-PRODUCT_COPY_FILES += \
-    vendor/nxp/imx-firmware/nxp/FwImage_8997/pcieuart8997_combo_v4.bin:vendor/firmware/pcieuart8997_combo_v4.bin
-=======
 # WiFi RRO
 PRODUCT_PACKAGES += \
     WifiOverlay
@@ -434,7 +304,6 @@ PRODUCT_PACKAGES += \
 PRODUCT_COPY_FILES += \
     vendor/nxp/imx-firmware/nxp/FwImage_8997/pcieuart8997_combo_v4.bin:vendor/firmware/pcieuart8997_combo_v4.bin \
     vendor/nxp/imx-firmware/nxp/android_wifi_mod_para.conf:vendor/firmware/wifi_mod_para.conf
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # Wifi regulatory
 PRODUCT_COPY_FILES += \
@@ -444,20 +313,11 @@ PRODUCT_COPY_FILES += \
 # Keymaster HAL
 ifeq ($(PRODUCT_IMX_TRUSTY),true)
 PRODUCT_PACKAGES += \
-<<<<<<< HEAD
-    android.hardware.keymaster@3.0-service.trusty
-endif
-
-PRODUCT_PACKAGES += \
-    android.hardware.keymaster@3.0-impl \
-    android.hardware.keymaster@3.0-service
-=======
     android.hardware.keymaster@4.0-service.trusty
 endif
 
 PRODUCT_PACKAGES += \
     android.hardware.keymaster@4.0-service-imx
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # DRM HAL
 TARGET_ENABLE_MEDIADRM_64 := true
@@ -467,25 +327,13 @@ PRODUCT_PACKAGES += \
 
 # new gatekeeper HAL
 PRODUCT_PACKAGES += \
-<<<<<<< HEAD
-    android.hardware.gatekeeper@1.0-impl \
-    android.hardware.gatekeeper@1.0-service
-=======
     android.hardware.gatekeeper@1.0-service.software-imx
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ifneq ($(BUILD_TARGET_FS),ubifs)
 PRODUCT_PROPERTY_OVERRIDES += \
     ro.frp.pst=/dev/block/by-name/presistdata
 endif
 
-<<<<<<< HEAD
-# ro.product.first_api_level indicates the first api level the device has commercially launched on.
-PRODUCT_PROPERTY_OVERRIDES += \
-    ro.product.first_api_level=28
-
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 PRODUCT_PACKAGES += \
     libg1 \
     libhantro \
@@ -531,10 +379,7 @@ PRODUCT_PACKAGES += \
 PRODUCT_PACKAGES += \
     DirectAudioPlayer
 
-<<<<<<< HEAD
 ifneq (user,$(TARGET_BUILD_VARIANT))
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 # Tensorflow lite camera demo
 PRODUCT_PACKAGES += \
                     tflitecamerademo
@@ -542,10 +387,7 @@ PRODUCT_PACKAGES += \
 # Multi-Display launcher
 PRODUCT_PACKAGES += \
     MultiDisplay
-<<<<<<< HEAD
 endif
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # Add oem unlocking option in settings.
 PRODUCT_PROPERTY_OVERRIDES += ro.frp.pst=/dev/block/by-name/presistdata
@@ -554,11 +396,7 @@ PRODUCT_COMPATIBLE_PROPERTY_OVERRIDE := true
 # Add Trusty OS backed gatekeeper and secure storage proxy
 ifeq ($(PRODUCT_IMX_TRUSTY),true)
 PRODUCT_PACKAGES += \
-<<<<<<< HEAD
-    gatekeeper.trusty \
-=======
     android.hardware.gatekeeper@1.0-service.trusty \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     storageproxyd
 endif
 
@@ -566,26 +404,15 @@ endif
 PRODUCT_PACKAGES += \
     android.hardware.drm@1.0-impl \
     android.hardware.drm@1.0-service \
-<<<<<<< HEAD
-    android.hardware.drm@1.2-service.widevine \
-    android.hardware.drm@1.2-service.clearkey \
-=======
     android.hardware.drm@1.3-service.widevine \
     android.hardware.drm@1.3-service.clearkey \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     libwvdrmcryptoplugin \
     libwvhidl \
     libwvdrmengine \
 
-<<<<<<< HEAD
-#Dumpstate HAL 1.0 support
-PRODUCT_PACKAGES += \
-    android.hardware.dumpstate@1.0-service.imx
-=======
 #Dumpstate HAL 1.1 support
 PRODUCT_PACKAGES += \
     android.hardware.dumpstate@1.1-service.imx
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ifeq ($(PRODUCT_IMX_TRUSTY),true)
 #Oemlock HAL 1.0 support
@@ -593,32 +420,21 @@ PRODUCT_PACKAGES += \
     android.hardware.oemlock@1.0-service.imx
 endif
 
-<<<<<<< HEAD
 # Multi-Display launcher
 PRODUCT_PACKAGES += \
     MultiClientInputMethod
 
-# Specify rollback index for bootloader and for AVB
-=======
 # Specify rollback index for boot and vbmeta partitions
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 ifneq ($(AVB_RBINDEX),)
 BOARD_AVB_ROLLBACK_INDEX := $(AVB_RBINDEX)
 else
 BOARD_AVB_ROLLBACK_INDEX := 0
 endif
 
-<<<<<<< HEAD
-ifneq (,$(filter userdebug eng,$(TARGET_BUILD_VARIANT)))
-$(call inherit-product, $(SRC_TARGET_DIR)/product/gsi_keys.mk)
-PRODUCT_PACKAGES += \
-    adb_debug.prop
-=======
 ifneq ($(AVB_BOOT_RBINDEX),)
 BOARD_AVB_BOOT_ROLLBACK_INDEX := $(AVB_BOOT_RBINDEX)
 else
 BOARD_AVB_BOOT_ROLLBACK_INDEX := 0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 endif
 
 IMX-DEFAULT-G2D-LIB := libg2d-opencl
@@ -636,10 +452,22 @@ endif
 
 # Included GMS package
 $(call inherit-product-if-exists, vendor/partner_gms/products/gms.mk)
-<<<<<<< HEAD
+PRODUCT_SOONG_NAMESPACES += vendor/partner_gms
+
+# Resume on Reboot support
+PRODUCT_PACKAGES += \
+    android.hardware.rebootescrow-service.default
+
+PRODUCT_PROPERTY_OVERRIDES += \
+    ro.rebootescrow.device=/dev/block/pmem0
+
+PRODUCT_SOONG_NAMESPACES += hardware/google/camera
+PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/camera
 
 $(call  inherit-product-if-exists, vendor/nxp-private/security/nxp_security.mk)
 
+$(call inherit-product, $(SRC_TARGET_DIR)/product/emulated_storage.mk)
+
 # Copy Quectel vendor RIL
 PRODUCT_COPY_FILES += \
     vendor/quectel/libstdc++.so:/vendor/lib64/libstdc++.so \
@@ -673,20 +501,3 @@ PRODUCT_PACKAGES += \
 # Enable kernel log for diagnosis
 PRODUCT_PROPERTY_OVERRIDES += \
     ro.logd.kernel=true
-=======
-PRODUCT_SOONG_NAMESPACES += vendor/partner_gms
-
-# Resume on Reboot support
-PRODUCT_PACKAGES += \
-    android.hardware.rebootescrow-service.default
-
-PRODUCT_PROPERTY_OVERRIDES += \
-    ro.rebootescrow.device=/dev/block/pmem0
-
-PRODUCT_SOONG_NAMESPACES += hardware/google/camera
-PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/camera
-
-$(call  inherit-product-if-exists, vendor/nxp-private/security/nxp_security.mk)
-
-$(call inherit-product, $(SRC_TARGET_DIR)/product/emulated_storage.mk)
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mq/AndroidBoard.mk b/imx8m/vp6820_8mq/AndroidBoard.mk
index dcb09302..7d2ec036 100644
--- a/imx8m/vp6820_8mq/AndroidBoard.mk
+++ b/imx8m/vp6820_8mq/AndroidBoard.mk
@@ -1,17 +1,9 @@
 LOCAL_PATH := $(call my-dir)
 
-<<<<<<< HEAD
 include device/idtech/common/build/dtbo.mk
 include device/idtech/common/build/imx-recovery.mk
 include device/idtech/common/build/gpt.mk
 include device/idtech/common/build/userdata.mk
 include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/media-profile/media-profile.mk
 include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/sensor/fsl-sensor.mk
-=======
-include device/nxp/common/build/dtbo.mk
-include device/nxp/common/build/imx-recovery.mk
-include device/nxp/common/build/gpt.mk
-include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/media-profile/media-profile.mk
-include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/sensor/fsl-sensor.mk
 -include $(IMX_MEDIA_CODEC_XML_PATH)/mediacodec-profile/mediacodec-profile.mk
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mq/AndroidTee.mk b/imx8m/vp6820_8mq/AndroidTee.mk
index 34b92d82..ef1138fb 100644
--- a/imx8m/vp6820_8mq/AndroidTee.mk
+++ b/imx8m/vp6820_8mq/AndroidTee.mk
@@ -4,11 +4,7 @@ MAKE += SHELL=/bin/bash
 define build_uboot_w_tee
 	$(MAKE) -C bootable/bootloader/arm-trusted-firmware/ -B CROSS_COMPILE=aarch64-linux-android- PLAT=imx8mq V=1 SPD=opteed DECRYPTED_BUFFER_START=$(DECRYPTED_BUFFER_START) DECRYPTED_BUFFER_LEN=$(DECRYPTED_BUFFER_LEN) DECODED_BUFFER_START=$(DECODED_BUFFER_START) DECODED_BUFFER_LEN=$(DECODED_BUFFER_LEN) bl31; \
 	cp bootable/bootloader/arm-trusted-firmware/build/imx8mq/release/bl31.bin $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.;\
-<<<<<<< HEAD
 	aarch64-linux-android-objcopy -O binary out/target/product/vp6820_8mq/optee/arm-plat-imx/core/tee.elf $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/tee.bin; \
-=======
-	aarch64-linux-android-objcopy -O binary out/target/product/evk_8mq/optee/arm-plat-imx/core/tee.elf $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/tee.bin; \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 	$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ clean; \
 	$(MAKE) -C $(IMX_MKIMAGE_PATH)/imx-mkimage/ SOC=iMX8M  flash_hdmi_spl_uboot; \
 	cp $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/flash.bin $(PRODUCT_OUT)/u-boot-$(strip $(2)).imx;
diff --git a/imx8m/vp6820_8mq/AndroidUboot.mk b/imx8m/vp6820_8mq/AndroidUboot.mk
index a29f549b..587fb8d5 100644
--- a/imx8m/vp6820_8mq/AndroidUboot.mk
+++ b/imx8m/vp6820_8mq/AndroidUboot.mk
@@ -13,19 +13,11 @@ define build_imx_uboot
 	cp $(UBOOT_OUT)/u-boot-nodtb.$(strip $(1)) $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
 	cp $(UBOOT_OUT)/spl/u-boot-spl.bin  $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
 	cp $(UBOOT_OUT)/tools/mkimage  $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/mkimage_uboot; \
-<<<<<<< HEAD
 	cp $(UBOOT_OUT)/arch/arm/dts/idt_a300_evt-0_devboard_evt-1.dtb  $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/imx8mq-evk.dtb; \
 	cp $(FSL_PROPRIETARY_PATH)/linux-firmware-imx/firmware/hdmi/cadence/signed_hdmi_imx8m.bin  $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
 	cp $(FSL_PROPRIETARY_PATH)/linux-firmware-imx/firmware/ddr/synopsys/lpddr4_pmu_train* $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
 	$(MAKE) -C $(IMX_PATH)/arm-trusted-firmware/ PLAT=`echo $(2) | cut -d '-' -f1` clean; \
 	if [ `echo $(2) | cut -d '-' -f3` = "trusty" ] && [ `echo $(2) | rev | cut -d '-' -f1` != "uuu" ]; then \
-=======
-	cp $(UBOOT_OUT)/arch/arm/dts/imx8mq-evk.dtb  $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
-	cp $(FSL_PROPRIETARY_PATH)/linux-firmware-imx/firmware/hdmi/cadence/signed_hdmi_imx8m.bin  $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
-	cp $(FSL_PROPRIETARY_PATH)/linux-firmware-imx/firmware/ddr/synopsys/lpddr4_pmu_train* $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/.; \
-	$(MAKE) -C $(IMX_PATH)/arm-trusted-firmware/ PLAT=`echo $(2) | cut -d '-' -f1` clean; \
-	if [ `echo $(2) | cut -d '-' -f2` = "trusty" ] && [ `echo $(2) | rev | cut -d '-' -f1` != "uuu" ]; then \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 		cp $(FSL_PROPRIETARY_PATH)/fsl-proprietary/uboot-firmware/imx8m/tee-imx8mq.bin $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/tee.bin; \
 		$(MAKE) -C $(IMX_PATH)/arm-trusted-firmware/ CROSS_COMPILE="$(ATF_CROSS_COMPILE)" PLAT=`echo $(2) | cut -d '-' -f1` bl31 -B SPD=trusty 1>/dev/null || exit 1; \
 	else \
@@ -45,7 +37,6 @@ define build_imx_uboot
 	fi; \
 	if [ `echo $(2) | rev | cut -d '-' -f1 | rev` != "dual" ]; then \
 		cp $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/flash.bin $(UBOOT_COLLECTION)/u-boot-$(strip $(2)).imx; \
-<<<<<<< HEAD
 		if [ -f device/idtech/common/prebuilts/spl_tab_auxiliary.img ]; then \
 			dd if=device/idtech/common/prebuilts/spl_tab_auxiliary.img of=$(UBOOT_COLLECTION)/u-boot-$(strip $(2)).imx bs=1 seek=105984 conv=notrunc; \
 		fi; \
@@ -55,11 +46,6 @@ define build_imx_uboot
 		if [ -f device/idtech/common/prebuilts/spl_tab_auxiliary.img ]; then \
 			dd if=device/idtech/common/prebuilts/spl_tab_auxiliary.img of=$(UBOOT_COLLECTION)/spl-$(strip $(2)).bin bs=1 seek=105984 conv=notrunc; \
 		fi; \
-=======
-	else \
-		cp $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/flash.bin $(UBOOT_COLLECTION)/spl-$(strip $(2)).bin; \
-		cp $(IMX_MKIMAGE_PATH)/imx-mkimage/iMX8M/u-boot-ivt.itb $(UBOOT_COLLECTION)/bootloader-$(strip $(2)).img; \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 	fi;
 endef
 
diff --git a/imx8m/vp6820_8mq/BoardConfig.mk b/imx8m/vp6820_8mq/BoardConfig.mk
index 82077829..c3c21e12 100644
--- a/imx8m/vp6820_8mq/BoardConfig.mk
+++ b/imx8m/vp6820_8mq/BoardConfig.mk
@@ -3,12 +3,8 @@
 #
 
 BOARD_SOC_TYPE := IMX8MQ
-<<<<<<< HEAD
 BOARD_SOM_TYPE := a300
 BOARD_TYPE := DEVBOARD
-=======
-BOARD_TYPE := EVK
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 BOARD_HAVE_VPU := true
 BOARD_VPU_TYPE := hantro
 HAVE_FSL_IMX_GPU2D := false
@@ -17,10 +13,6 @@ HAVE_FSL_IMX_IPU := false
 HAVE_FSL_IMX_PXP := false
 BOARD_KERNEL_BASE := 0x40400000
 TARGET_GRALLOC_VERSION := v3
-<<<<<<< HEAD
-TARGET_HIGH_PERFORMANCE := true
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 TARGET_USES_HWC2 := true
 TARGET_HWCOMPOSER_VERSION := v2.0
 USE_OPENGL_RENDERER := true
@@ -40,21 +32,14 @@ SOONG_CONFIG_IMXPLUGIN_BOARD_VPU_ONLY = false
 # Product-specific compile-time definitions.
 #
 
-<<<<<<< HEAD
 IMX_DEVICE_PATH := device/idtech/imx8m/vp6820_8mq
 
 include device/idtech/imx8m/BoardConfigCommon.mk
-=======
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mq
-
-include device/nxp/imx8m/BoardConfigCommon.mk
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 BUILD_TARGET_FS ?= ext4
 TARGET_USERIMAGES_USE_EXT4 := true
 
-<<<<<<< HEAD
-TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.freescale
+TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.nxp
 
 # Support gpt
 ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
@@ -73,27 +58,6 @@ else
     ADDITION_BPT_PARTITION = partition-table-28GB:device/idtech/common/partition/device-partitions-28GB-ab.bpt \
                              partition-table-dual:device/idtech/common/partition/device-partitions-14.4GB-ab-dual-bootloader.bpt \
                              partition-table-28GB-dual:device/idtech/common/partition/device-partitions-28GB-ab-dual-bootloader.bpt
-=======
-TARGET_RECOVERY_FSTAB = $(IMX_DEVICE_PATH)/fstab.nxp
-
-# Support gpt
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
-  BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab_super.bpt
-  ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab_super.bpt \
-                           partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader_super.bpt \
-                           partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader_super.bpt
-else
-  ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
-    BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab-no-product.bpt
-    ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab-no-product.bpt \
-                             partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader-no-product.bpt \
-                             partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader-no-product.bpt
-  else
-    BOARD_BPT_INPUT_FILES += device/nxp/common/partition/device-partitions-13GB-ab.bpt
-    ADDITION_BPT_PARTITION = partition-table-28GB:device/nxp/common/partition/device-partitions-28GB-ab.bpt \
-                             partition-table-dual:device/nxp/common/partition/device-partitions-13GB-ab-dual-bootloader.bpt \
-                             partition-table-28GB-dual:device/nxp/common/partition/device-partitions-28GB-ab-dual-bootloader.bpt
->>>>>>> post_merge/android-11.0.0_1.0.0_history
   endif
 endif
 
@@ -105,18 +69,13 @@ TARGET_BOOTLOADER_BOARD_NAME := EVK
 
 USE_OPENGL_RENDERER := true
 
-<<<<<<< HEAD
 BOARD_WLAN_DEVICE            := bcmdhd
-=======
-BOARD_WLAN_DEVICE            := nxp
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 WPA_SUPPLICANT_VERSION       := VER_0_8_X
 BOARD_WPA_SUPPLICANT_DRIVER  := NL80211
 BOARD_HOSTAPD_DRIVER         := NL80211
 BOARD_HOSTAPD_PRIVATE_LIB           := lib_driver_cmd_$(BOARD_WLAN_DEVICE)
 BOARD_WPA_SUPPLICANT_PRIVATE_LIB    := lib_driver_cmd_$(BOARD_WLAN_DEVICE)
 
-<<<<<<< HEAD
 WIFI_DRIVER_FW_PATH_PARAM := "/sys/module/brcmfmac/parameters/alternative_fw_path"
 
 #WIFI_HIDL_FEATURE_DUAL_INTERFACE := true
@@ -128,16 +87,6 @@ BOARD_HAVE_BLUETOOTH_BCM := true
 
 #BOARD_USE_SENSOR_FUSION := true
 BOARD_USE_ST_SENSOR_INPUT := true
-=======
-WIFI_HIDL_FEATURE_DUAL_INTERFACE := true
-
-BOARD_BLUETOOTH_BDROID_BUILDCFG_INCLUDE_DIR := $(IMX_DEVICE_PATH)/bluetooth
-
-# NXP 8997 BT
-BOARD_HAVE_BLUETOOTH_NXP := true
-
-BOARD_USE_SENSOR_FUSION := true
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # we don't support sparse image.
 TARGET_USERIMAGES_SPARSE_EXT_DISABLED := false
@@ -150,18 +99,12 @@ USE_GPU_ALLOCATOR := false
 
 BOARD_AVB_ENABLE := true
 TARGET_USES_MKE2FS := true
-<<<<<<< HEAD
 BOARD_AVB_ALGORITHM := SHA256_RSA2048
 BOARD_AVB_KEY_PATH := device/idtech/common/security/idt_testkey_rsa2048.pem
-=======
-BOARD_AVB_ALGORITHM := SHA256_RSA4096
-# The testkey_rsa4096.pem is copied from external/avb/test/data/testkey_rsa4096.pem
-BOARD_AVB_KEY_PATH := device/nxp/common/security/testkey_rsa4096.pem
 
 BOARD_AVB_BOOT_KEY_PATH := external/avb/test/data/testkey_rsa2048.pem
 BOARD_AVB_BOOT_ALGORITHM := SHA256_RSA2048
 BOARD_AVB_BOOT_ROLLBACK_INDEX_LOCATION := 2
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # define frame buffer count
 NUM_FRAMEBUFFER_SURFACE_BUFFERS := 3
@@ -169,19 +112,11 @@ NUM_FRAMEBUFFER_SURFACE_BUFFERS := 3
 ifeq ($(PRODUCT_IMX_DRM),true)
 CMASIZE=736M
 else
-<<<<<<< HEAD
 CMASIZE=800M
 endif
 
-# NXP default config
-BOARD_KERNEL_CMDLINE := init=/init androidboot.console=ttymxc0 androidboot.hardware=freescale firmware_class.path=/vendor/firmware loop.max_part=7
-=======
-CMASIZE=1280M
-endif
-
 # NXP default config
 BOARD_KERNEL_CMDLINE := init=/init androidboot.console=ttymxc0 androidboot.hardware=nxp firmware_class.path=/vendor/firmware loop.max_part=7
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # framebuffer config
 BOARD_KERNEL_CMDLINE += androidboot.fbTileSupport=enable
@@ -190,21 +125,14 @@ BOARD_KERNEL_CMDLINE += androidboot.fbTileSupport=enable
 BOARD_KERNEL_CMDLINE += transparent_hugepage=never cma=$(CMASIZE)
 
 # display config
-<<<<<<< HEAD
 BOARD_KERNEL_CMDLINE += androidboot.lcd_density=294 androidboot.primary_display=mxsfb-drm androidboot.gui_resolution=1080p
 
-# wifi config
-BOARD_KERNEL_CMDLINE += androidboot.wificountrycode=CN
-=======
-BOARD_KERNEL_CMDLINE += androidboot.lcd_density=240 androidboot.primary_display=imx-dcss androidboot.gui_resolution=1080p
-
 # wifi config
 BOARD_KERNEL_CMDLINE += androidboot.wificountrycode=CN moal.mod_para=wifi_mod_para.conf
 
 ifneq (,$(filter userdebug eng,$(TARGET_BUILD_VARIANT)))
 BOARD_KERNEL_CMDLINE += androidboot.vendor.sysrq=1
 endif
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ifeq ($(TARGET_USERIMAGES_USE_UBIFS),true)
 ifeq ($(TARGET_USERIMAGES_USE_EXT4),true)
@@ -212,13 +140,9 @@ $(error "TARGET_USERIMAGES_USE_UBIFS and TARGET_USERIMAGES_USE_EXT4 config open
 endif
 endif
 
-<<<<<<< HEAD
 LOWER_BOARD_TYPE  = $(shell echo $(BOARD_TYPE) | tr A-Z a-z)
 LOWER_BOARD_SOC_TYPE  = $(shell echo $(BOARD_SOC_TYPE) | tr A-Z a-z)
 BOARD_PREBUILT_DTBOIMAGE := out/target/product/vp6820_8mq/dtbo-$(BOARD_SOM_TYPE)-$(LOWER_BOARD_TYPE).img
-=======
-BOARD_PREBUILT_DTBOIMAGE := out/target/product/evk_8mq/dtbo-imx8mq.img
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
   ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
     TARGET_BOARD_DTS_CONFIG ?= imx8mq:imx8mq-evk-no-product.dtb
@@ -236,20 +160,12 @@ else # no dynamic parition feature
   ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
     TARGET_BOARD_DTS_CONFIG ?= imx8mq:imx8mq-evk-no-product-no-dynamic_partition.dtb
   else
-<<<<<<< HEAD
     TARGET_BOARD_DTS_CONFIG ?= imx8mq:imx8mq-evk-no-dynamic_partition.dtb
-=======
-	TARGET_BOARD_DTS_CONFIG ?= imx8mq:imx8mq-evk-no-dynamic_partition.dtb
->>>>>>> post_merge/android-11.0.0_1.0.0_history
   endif
 endif
 
 BOARD_SEPOLICY_DIRS := \
-<<<<<<< HEAD
        device/idtech/imx8m/sepolicy \
-=======
-       device/nxp/imx8m/sepolicy \
->>>>>>> post_merge/android-11.0.0_1.0.0_history
        $(IMX_DEVICE_PATH)/sepolicy
 
 ifeq ($(PRODUCT_IMX_DRM),true)
@@ -257,20 +173,13 @@ BOARD_SEPOLICY_DIRS += \
        $(IMX_DEVICE_PATH)/sepolicy_drm
 endif
 
-<<<<<<< HEAD
 TARGET_BOARD_KERNEL_HEADERS := device/idtech/common/kernel-headers
-=======
-TARGET_BOARD_KERNEL_HEADERS := device/nxp/common/kernel-headers
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 ALL_DEFAULT_INSTALLED_MODULES += $(BOARD_VENDOR_KERNEL_MODULES)
 
 BOARD_USES_METADATA_PARTITION := true
 BOARD_ROOT_EXTRA_FOLDERS += metadata
-<<<<<<< HEAD
 
 BOARD_PLAT_PRIVATE_SEPOLICY_DIR := device/idtech/imx8m/sepolicy_system/private
 
 AB_OTA_PARTITIONS += spl_bak
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mq/SharedBoardConfig.mk b/imx8m/vp6820_8mq/SharedBoardConfig.mk
index 28609277..98fc2d66 100644
--- a/imx8m/vp6820_8mq/SharedBoardConfig.mk
+++ b/imx8m/vp6820_8mq/SharedBoardConfig.mk
@@ -7,17 +7,10 @@ PRODUCT_IMX_TRUSTY := true
 #Enable this to disable product partition build.
 #IMX_NO_PRODUCT_PARTITION := true
 
-<<<<<<< HEAD
 # BCM fmac wifi driver module
 BOARD_VENDOR_KERNEL_MODULES += \
     $(KERNEL_OUT)/drivers/net/wireless/broadcom/brcm80211/brcmfmac/brcmfmac.ko \
     $(KERNEL_OUT)/drivers/net/wireless/broadcom/brcm80211/brcmutil/brcmutil.ko
-=======
-#NXP 8997 wifi driver module
-BOARD_VENDOR_KERNEL_MODULES += \
-    $(KERNEL_OUT)/drivers/net/wireless/nxp/mxm_wifiex/wlan_src/mlan.ko \
-    $(KERNEL_OUT)/drivers/net/wireless/nxp/mxm_wifiex/wlan_src/moal.ko
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 # mipi-panel touch driver module
 BOARD_VENDOR_KERNEL_MODULES += \
diff --git a/imx8m/vp6820_8mq/UbootKernelBoardConfig.mk b/imx8m/vp6820_8mq/UbootKernelBoardConfig.mk
index 4b8b6860..98346baa 100644
--- a/imx8m/vp6820_8mq/UbootKernelBoardConfig.mk
+++ b/imx8m/vp6820_8mq/UbootKernelBoardConfig.mk
@@ -2,7 +2,6 @@ TARGET_BOOTLOADER_POSTFIX := bin
 UBOOT_POST_PROCESS := true
 
 # u-boot target for imx8mq_evk
-<<<<<<< HEAD
 TARGET_BOOTLOADER_CONFIG := imx8mq-lpddr4:vp6820_8mq_evk_android_defconfig:signed
 TARGET_BOOTLOADER_CONFIG += imx8mq-lpddr4-dual:vp6820_8mq_evk_android_dual_defconfig:signed
 ifeq ($(PRODUCT_IMX_TRUSTY),true)
@@ -19,21 +18,6 @@ TARGET_BOOTLOADER_CONFIG += imx8mq-lpddr4-evk-uuu-ktc4g:vp6820_8mq_evk_android_u
 TARGET_KERNEL_DEFCONFIG := imx_v8_android_defconfig
 TARGET_KERNEL_ADDITION_DEFCONF ?= android_addition_defconfig
 TARGET_KERNEL_SECURE_DEFCONF ?= android_secure_defconfig
-=======
-TARGET_BOOTLOADER_CONFIG := imx8mq:imx8mq_evk_android_defconfig
-TARGET_BOOTLOADER_CONFIG += imx8mq-dual:imx8mq_evk_android_dual_defconfig
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-  TARGET_BOOTLOADER_CONFIG += imx8mq-trusty:imx8mq_evk_android_trusty_defconfig
-  TARGET_BOOTLOADER_CONFIG += imx8mq-trusty-secure-unlock:imx8mq_evk_android_trusty_secure_unlock_defconfig
-  TARGET_BOOTLOADER_CONFIG += imx8mq-trusty-dual:imx8mq_evk_android_trusty_dual_defconfig
-endif
-
-# u-boot target used by uuu for imx8mq_evk
-TARGET_BOOTLOADER_CONFIG += imx8mq-evk-uuu:imx8mq_evk_android_uuu_defconfig
-
-TARGET_KERNEL_DEFCONFIG := imx_v8_android_defconfig
-# TARGET_KERNEL_ADDITION_DEFCONF ?= android_addition_defconfig
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 
 # absolute path is used, not the same as relative path used in AOSP make
diff --git a/imx8m/vp6820_8mq/audio_policy_configuration.xml b/imx8m/vp6820_8mq/audio_policy_configuration.xml
index eeb06531..a9ce6cfe 100644
--- a/imx8m/vp6820_8mq/audio_policy_configuration.xml
+++ b/imx8m/vp6820_8mq/audio_policy_configuration.xml
@@ -21,18 +21,11 @@
         <module name="primary" halVersion="2.0">
             <attachedDevices>
                 <item>Speaker</item>
-<<<<<<< HEAD
                 <item>Wired Headphones</item>
                 <item>Built-In Mic</item>
                 <item>Wired-In Headsets</item>
             </attachedDevices>
-            <defaultOutputDevice>Wired Headphones</defaultOutputDevice>
-            <defaultInputDevice>Wired-In Headsets</defaultInputDevice>
-=======
-                <item>Built-In Mic</item>
-            </attachedDevices>
             <defaultOutputDevice>Speaker</defaultOutputDevice>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
             <mixPorts>
                 <mixPort name="primary output" role="source" flags="AUDIO_OUTPUT_FLAG_PRIMARY">
                     <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
@@ -82,11 +75,8 @@
                 </devicePort>
                 <devicePort tagName="BT SCO Headset Mic" type="AUDIO_DEVICE_IN_BLUETOOTH_SCO_HEADSET" role="source">
                 </devicePort>
-<<<<<<< HEAD
                 <devicePort tagName="Wired-In Headsets" type="AUDIO_DEVICE_IN_WIRED_HEADSET" role="source">
                 </devicePort>
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
             </devicePorts>
             <routes>
                 <route type="mix" sink="Speaker"
@@ -103,11 +93,7 @@
                        sources="bt sco output"/>
 
                 <route type="mix" sink="primary input"
-<<<<<<< HEAD
                        sources="Wired-In Headsets,Built-In Mic,Spdif-In,BT SCO Headset Mic"/>
-=======
-                       sources="Built-In Mic,Spdif-In,BT SCO Headset Mic"/>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
             </routes>
         </module>
 
diff --git a/imx8m/vp6820_8mq/camera_config_imx8mq.json~post_merge_android-11.0.0_1.0.0_history b/imx8m/vp6820_8mq/camera_config_imx8mq.json~post_merge_android-11.0.0_1.0.0_history
deleted file mode 100644
index 49b57dee..00000000
--- a/imx8m/vp6820_8mq/camera_config_imx8mq.json~post_merge_android-11.0.0_1.0.0_history
+++ /dev/null
@@ -1,40 +0,0 @@
-{
-  "__readme": [
-    "Basic Camera HAL v3 configuration."
-  ],
-
-  "hal_version": "3",
-  "cam_blit_copy": "GPU_3D",
-  "cam_blit_csc": "CPU",
-
-  "camera_metadata": [
-    {
-      "camera_type": "back",
-      "camera_name": "mx6s-csi",
-      "orientation": "0",
-      "buffer_type": "mmap",
-      "ActiveArrayWidth": "2592",
-      "ActiveArrayHeight": "1944",
-      "PixelArrayWidth": "2592",
-      "PixelArrayHeight": "1944",
-      "PhysicalWidth": "3.6288",
-      "PhysicalHeight": "2.7216",
-      "FocalLength": "3.37",
-      "MaxJpegSize": "8388608",
-      "MinFrameDuration": "33331760",
-      "MaxFrameDuration": "300000000",
-      "OmitFrame": [
-          {
-              "width": "2592",
-              "height": "1944",
-              "omit_num": "3"
-          },
-          {
-              "width": "1920",
-              "height": "1080",
-              "omit_num": "2"
-          }
-      ]
-    }
-  ]
-}
diff --git a/imx8m/vp6820_8mq/early.init.cfg b/imx8m/vp6820_8mq/early.init.cfg
index e9ccb225..9dd16032 100644
--- a/imx8m/vp6820_8mq/early.init.cfg
+++ b/imx8m/vp6820_8mq/early.init.cfg
@@ -1,9 +1,2 @@
-<<<<<<< HEAD
-insmod vendor/lib/modules/brcmutil.ko
-insmod vendor/lib/modules/brcmfmac.ko
-insmod vendor/lib/modules/wlan.ko
-insmod vendor/lib/modules/synaptics_dsx_i2c.ko
-=======
 # support insmod xx.ko; setprop xx xx; modeprobe
 modprobe
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mq/evk_8mq.mk b/imx8m/vp6820_8mq/evk_8mq.mk
deleted file mode 100644
index 020f88f9..00000000
--- a/imx8m/vp6820_8mq/evk_8mq.mk
+++ /dev/null
@@ -1,407 +0,0 @@
-# This is a FSL Android Reference Design platform based on i.MX8QP ARD board
-# It will inherit from FSL core product which in turn inherit from Google generic
-
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mq
-
-# configs shared between uboot, kernel and Android rootfs
-include $(IMX_DEVICE_PATH)/SharedBoardConfig.mk
-
--include device/nxp/common/imx_path/ImxPathConfig.mk
-include device/nxp/imx8m/ProductConfigCommon.mk
-
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab_nand.nxp),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab_nand.nxp)
-endif
-
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.nxp),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab.nxp)
-endif
-
-# Overrides
-PRODUCT_NAME := evk_8mq
-PRODUCT_DEVICE := evk_8mq
-PRODUCT_MODEL := EVK_8MQ
-
-PRODUCT_FULL_TREBLE_OVERRIDE := true
-PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/power
-PRODUCT_SOONG_NAMESPACES += hardware/google/pixel
-
-#Enable this to choose 32 bit user space build
-#IMX8_BUILD_32BIT_ROOTFS := true
-
-# Enable this to support vendor boot and boot header v3, this would be a MUST for GKI
-TARGET_USE_VENDOR_BOOT ?= true
-
-#Enable this to use dynamic partitions for the readonly partitions not touched by bootloader
-TARGET_USE_DYNAMIC_PARTITIONS ?= true
-#If the device is retrofit to have dynamic partition feature, set this variable to true to build
-#the images and OTA package. Here is a demo to update 10.0.0_1.0.0 to 10.0.0_2.0.0 or higher
-TARGET_USE_RETROFIT_DYNAMIC_PARTITION ?= false
-
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
-  $(call inherit-product, $(SRC_TARGET_DIR)/product/virtual_ab_ota.mk)
-  PRODUCT_USE_DYNAMIC_PARTITIONS := true
-  BOARD_BUILD_SUPER_IMAGE_BY_DEFAULT := true
-  BOARD_SUPER_IMAGE_IN_UPDATE_PACKAGE := true
-  ifeq ($(TARGET_USE_RETROFIT_DYNAMIC_PARTITION),true)
-    PRODUCT_RETROFIT_DYNAMIC_PARTITIONS := true
-    BOARD_SUPER_PARTITION_METADATA_DEVICE := system
-    ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
-      BOARD_SUPER_PARTITION_BLOCK_DEVICES := system vendor
-      BOARD_SUPER_PARTITION_SYSTEM_DEVICE_SIZE := 2952790016
-      BOARD_SUPER_PARTITION_VENDOR_DEVICE_SIZE := 536870912
-    else
-      BOARD_SUPER_PARTITION_BLOCK_DEVICES := system vendor product
-      BOARD_SUPER_PARTITION_SYSTEM_DEVICE_SIZE := 1610612736
-      BOARD_SUPER_PARTITION_VENDOR_DEVICE_SIZE := 536870912
-      BOARD_SUPER_PARTITION_PRODUCT_DEVICE_SIZE := 1879048192
-    endif
-  endif
-endif
-
-# Include keystore attestation keys and certificates.
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
--include $(IMX_SECURITY_PATH)/attestation/imx_attestation.mk
-endif
-
-# Copy device related config and binary to board
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/app_whitelist.xml:system/etc/sysconfig/app_whitelist.xml \
-    $(IMX_DEVICE_PATH)/audio_effects.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_effects.xml \
-    $(IMX_DEVICE_PATH)/audio_policy_configuration.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
-    $(IMX_DEVICE_PATH)/input-port-associations.xml:$(TARGET_COPY_OUT_VENDOR)/etc/input-port-associations.xml \
-    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.nxp \
-    $(IMX_DEVICE_PATH)/init.imx8mq.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mq.rc \
-    $(IMX_DEVICE_PATH)/init.recovery.nxp.rc:root/init.recovery.nxp.rc \
-    $(IMX_DEVICE_PATH)/early.init.cfg:$(TARGET_COPY_OUT_VENDOR)/etc/early.init.cfg \
-    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.rc \
-    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.usb.rc \
-    $(IMX_DEVICE_PATH)/required_hardware.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/required_hardware.xml \
-    $(IMX_DEVICE_PATH)/ueventd.nxp.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
-    $(LINUX_FIRMWARE_IMX_PATH)/linux-firmware-imx/firmware/sdma/sdma-imx7d.bin:$(TARGET_COPY_OUT_VENDOR)/firmware/imx/sdma/sdma-imx7d.bin \
-    device/nxp/common/init/init.insmod.sh:$(TARGET_COPY_OUT_VENDOR)/bin/init.insmod.sh \
-    device/nxp/common/wifi/p2p_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/p2p_supplicant_overlay.conf \
-    device/nxp/common/wifi/wpa_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/wpa_supplicant_overlay.conf
-
-# We load the fstab from device tree so this is not needed, but since no kernel modules are installed to vendor
-# boot ramdisk so far, we need this step to generate the vendor-ramdisk folder or build process would fail. This
-# can be deleted once we figure out what kernel modules should be put into the vendor boot ramdisk.
-ifeq ($(TARGET_USE_VENDOR_BOOT),true)
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR_RAMDISK)/first_stage_ramdisk/fstab.nxp
-endif
-
-
-# Audio card json
-PRODUCT_COPY_FILES += \
-    device/nxp/common/audio-json/wm8524_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/wm8524_config.json \
-    device/nxp/common/audio-json/spdif_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/spdif_config.json \
-    device/nxp/common/audio-json/cdnhdmi_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/cdnhdmi_config.json \
-    device/nxp/common/audio-json/ak4458_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/ak4458_config.json \
-    device/nxp/common/audio-json/ak5558_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/ak5558_config.json \
-    device/nxp/common/audio-json/btsco_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/btsco_config.json \
-    device/nxp/common/audio-json/readme.txt:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/readme.txt
-
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_COPY_FILES += \
-    device/nxp/common/security/rpmb_key_test.bin:rpmb_key_test.bin \
-    device/nxp/common/security/testkey_public_rsa4096.bin:testkey_public_rsa4096.bin
-endif
-
-# ONLY devices that meet the CDD's requirements may declare these features
-PRODUCT_COPY_FILES += \
-    frameworks/native/data/etc/android.hardware.audio.output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.audio.output.xml \
-    frameworks/native/data/etc/android.hardware.bluetooth_le.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.bluetooth_le.xml \
-    frameworks/native/data/etc/android.hardware.camera.external.xml:vendor/etc/permissions/android.hardware.camera.external.xml \
-    frameworks/native/data/etc/android.hardware.camera.front.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.front.xml \
-    frameworks/native/data/etc/android.hardware.camera.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.xml \
-    frameworks/native/data/etc/android.hardware.ethernet.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.ethernet.xml \
-    frameworks/native/data/etc/android.hardware.screen.landscape.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.screen.landscape.xml \
-    frameworks/native/data/etc/android.hardware.screen.portrait.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.screen.portrait.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.multitouch.distinct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.multitouch.distinct.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.multitouch.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.multitouch.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.xml \
-    frameworks/native/data/etc/android.hardware.usb.accessory.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.accessory.xml \
-    frameworks/native/data/etc/android.hardware.usb.host.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.host.xml \
-    frameworks/native/data/etc/android.hardware.vulkan.level-0.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.level-0.xml \
-    frameworks/native/data/etc/android.hardware.vulkan.version-1_1.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.version-1_1.xml \
-    frameworks/native/data/etc/android.software.vulkan.deqp.level-2020-03-01.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.vulkan.deqp.level-2020-03-01.xml \
-    frameworks/native/data/etc/android.hardware.wifi.direct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.direct.xml \
-    frameworks/native/data/etc/android.hardware.wifi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.xml \
-    frameworks/native/data/etc/android.hardware.wifi.passpoint.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.passpoint.xml \
-    frameworks/native/data/etc/android.software.app_widgets.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.app_widgets.xml \
-    frameworks/native/data/etc/android.software.backup.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.backup.xml \
-    frameworks/native/data/etc/android.software.device_admin.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.device_admin.xml \
-    frameworks/native/data/etc/android.software.managed_users.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.managed_users.xml \
-    frameworks/native/data/etc/android.software.midi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.midi.xml \
-    frameworks/native/data/etc/android.software.print.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.print.xml \
-    frameworks/native/data/etc/android.software.sip.voip.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.sip.voip.xml \
-    frameworks/native/data/etc/android.software.verified_boot.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.verified_boot.xml \
-    frameworks/native/data/etc/android.software.voice_recognizers.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.voice_recognizers.xml \
-    frameworks/native/data/etc/android.software.activities_on_secondary_displays.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.activities_on_secondary_displays.xml \
-    frameworks/native/data/etc/android.software.picture_in_picture.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.picture_in_picture.xml
-
-# Vendor seccomp policy files for media components:
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/seccomp/mediacodec-seccomp.policy:vendor/etc/seccomp_policy/mediacodec.policy \
-    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.base.policy:vendor/etc/seccomp_policy/codec2.vendor.base.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.ext.policy:vendor/etc/seccomp_policy/codec2.vendor.ext.policy
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mq/powerhint_imx8mq.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/powerhint_imx8mq.json
-
-# fastboot_imx_flashall scripts, fsl-sdcard-partition script and uuu_imx_android_flash scripts
-PRODUCT_COPY_FILES += \
-    device/nxp/common/tools/fastboot_imx_flashall.bat:fastboot_imx_flashall.bat \
-    device/nxp/common/tools/fastboot_imx_flashall.sh:fastboot_imx_flashall.sh \
-    device/nxp/common/tools/imx-sdcard-partition.sh:imx-sdcard-partition.sh \
-    device/nxp/common/tools/uuu_imx_android_flash.bat:uuu_imx_android_flash.bat \
-    device/nxp/common/tools/uuu_imx_android_flash.sh:uuu_imx_android_flash.sh
-
-USE_XML_AUDIO_POLICY_CONF := 1
-
-DEVICE_PACKAGE_OVERLAYS := $(IMX_DEVICE_PATH)/overlay
-
-PRODUCT_CHARACTERISTICS := tablet
-
-PRODUCT_AAPT_CONFIG += xlarge large tvdpi hdpi xhdpi xxhdpi
-
-# GPU openCL g2d
-PRODUCT_COPY_FILES += \
-    $(IMX_PATH)/imx/opencl-2d/cl_g2d.cl:$(TARGET_COPY_OUT_VENDOR)/etc/cl_g2d.cl
-
-# GPU openCL SDK header file
--include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/include/CL/cl_sdk.mk
-
-# GPU openVX SDK header file
--include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/include/nnxc_kernels/nnxc_kernels.mk
-
-# GPU openCL icdloader config file
--include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/gpu-viv/icdloader/icdloader.mk
-
-# HWC2 HAL
-PRODUCT_PACKAGES += \
-    android.hardware.graphics.composer@2.4-service
-
-# Charger Mode
-PRODUCT_PRODUCT_PROPERTIES += \
-    ro.charger.no_ui=false
-
-# Do not skip charger_not_need trigger by default
-PRODUCT_DEFAULT_PROPERTY_OVERRIDES += \
-    vendor.skip.charger_not_need=0
-
-# Gralloc HAL
-PRODUCT_PACKAGES += \
-    android.hardware.graphics.mapper@2.0-impl-2.1 \
-    android.hardware.graphics.allocator@2.0-impl \
-    android.hardware.graphics.allocator@2.0-service
-
-# RenderScript HAL
-PRODUCT_PACKAGES += \
-    android.hardware.renderscript@1.0-impl
-
-PRODUCT_PACKAGES += \
-        libEGL_VIVANTE \
-        libGLESv1_CM_VIVANTE \
-        libGLESv2_VIVANTE \
-        gralloc_viv.imx \
-        libGAL \
-        libGLSLC \
-        libVSC \
-        libgpuhelper \
-        libSPIRV_viv \
-        libvulkan_VIVANTE \
-        vulkan.imx \
-        libCLC \
-        libLLVM_viv \
-        libOpenCL \
-        libg2d-opencl \
-        libg2d-viv \
-        libOpenVX \
-        libOpenVXU \
-        libNNVXCBinary-evis \
-        libNNVXCBinary-evis2 \
-        libNNVXCBinary-lite \
-        libOvx12VXCBinary-evis \
-        libOvx12VXCBinary-evis2 \
-        libOvx12VXCBinary-lite \
-        libNNGPUBinary-evis \
-        libNNGPUBinary-evis2 \
-        libNNGPUBinary-lite \
-        libNNGPUBinary-ulite \
-        libNNArchPerf \
-        libarchmodelSw
-
-PRODUCT_PACKAGES += \
-    android.hardware.audio@6.0-impl:32 \
-    android.hardware.audio@2.0-service \
-    android.hardware.audio.effect@6.0-impl:32 \
-    android.hardware.power@1.3-service.imx \
-    android.hardware.light@2.0-impl \
-    android.hardware.light@2.0-service \
-    android.hardware.configstore@1.1-service \
-    configstore@1.1.policy
-
-# Thermal HAL
-PRODUCT_PACKAGES += \
-    android.hardware.thermal@2.0-service.imx
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mq/thermal_info_config_imx8mq.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/thermal_info_config_imx8mq.json
-
-# Neural Network HAL and lib
-PRODUCT_PACKAGES += \
-    libovxlib \
-    libnnrt \
-    android.hardware.neuralnetworks@1.2-service-vsi-npu-server
-
-# Usb HAL
-PRODUCT_PACKAGES += \
-    android.hardware.usb@1.1-service.imx
-
-# Bluetooth HAL
-PRODUCT_PACKAGES += \
-    android.hardware.bluetooth@1.0-impl \
-    android.hardware.bluetooth@1.0-service
-
-# WiFi HAL
-PRODUCT_PACKAGES += \
-    android.hardware.wifi@1.0-service \
-    wifilogd \
-    wificond
-
-# WiFi RRO
-PRODUCT_PACKAGES += \
-    WifiOverlay
-
-# NXP 8997 Bluetooth vendor config
-PRODUCT_PACKAGES += \
-    bt_vendor.conf
-
-# NXP 8997 Wifi and Bluetooth Combo Firmware
-PRODUCT_COPY_FILES += \
-    vendor/nxp/imx-firmware/nxp/FwImage_8997/pcieuart8997_combo_v4.bin:vendor/firmware/pcieuart8997_combo_v4.bin \
-    vendor/nxp/imx-firmware/nxp/android_wifi_mod_para.conf:vendor/firmware/wifi_mod_para.conf
-
-# Wifi regulatory
-PRODUCT_COPY_FILES += \
-    external/wireless-regdb/regulatory.db:vendor/firmware/regulatory.db \
-    external/wireless-regdb/regulatory.db.p7s:vendor/firmware/regulatory.db.p7s
-
-# hardware backed keymaster service
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_PACKAGES += \
-    android.hardware.keymaster@4.0-service.trusty
-endif
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mq/camera_config_imx8mq.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/camera_config_imx8mq.json \
-    device/nxp/imx8m/evk_8mq/external_camera_config.xml:$(TARGET_COPY_OUT_VENDOR)/etc/external_camera_config.xml
-
-# Keymaster HAL
-PRODUCT_PACKAGES += \
-    android.hardware.keymaster@4.0-service-imx
-
-# DRM HAL
-TARGET_ENABLE_MEDIADRM_64 := true
-PRODUCT_PACKAGES += \
-    android.hardware.drm@1.0-impl \
-    android.hardware.drm@1.0-service
-
-# new gatekeeper HAL
-PRODUCT_PACKAGES += \
-    android.hardware.gatekeeper@1.0-service.software-imx
-
-# Add Trusty OS backed gatekeeper and secure storage proxy
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_PACKAGES += \
-    android.hardware.gatekeeper@1.0-service.trusty \
-    storageproxyd
-endif
-
-#Dumpstate HAL 1.1 support
-PRODUCT_PACKAGES += \
-    android.hardware.dumpstate@1.1-service.imx
-
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-#Oemlock HAL 1.0 support
-PRODUCT_PACKAGES += \
-    android.hardware.oemlock@1.0-service.imx
-endif
-
-ifneq ($(BUILD_TARGET_FS),ubifs)
-PRODUCT_PROPERTY_OVERRIDES += \
-    ro.frp.pst=/dev/block/by-name/presistdata
-endif
-
-PRODUCT_PACKAGES += \
-    libg1 \
-    libhantro \
-    libcodec
-
-# imx c2 codec binary
-PRODUCT_PACKAGES += \
-    lib_vpu_wrapper \
-    lib_imx_c2_videodec_common \
-    lib_imx_c2_videodec \
-    lib_imx_c2_vpuwrapper_dec \
-    lib_imx_c2_process \
-    lib_imx_c2_process_dummy_post \
-    c2_component_register \
-    c2_component_register_ms \
-    c2_component_register_wmv9 \
-    c2_component_register_ra \
-    c2_component_register_rv
-
-# Add oem unlocking option in settings.
-PRODUCT_PROPERTY_OVERRIDES += ro.frp.pst=/dev/block/by-name/presistdata
-PRODUCT_COMPATIBLE_PROPERTY_OVERRIDE := true
-
-# Tensorflow lite camera demo
-PRODUCT_PACKAGES += \
-                    tflitecamerademo
-
-# Multi-Display launcher
-PRODUCT_PACKAGES += \
-    MultiClientInputMethod \
-    MultiDisplay
-
-# Specify rollback index for boot and vbmeta partitions
-ifneq ($(AVB_RBINDEX),)
-BOARD_AVB_ROLLBACK_INDEX := $(AVB_RBINDEX)
-else
-BOARD_AVB_ROLLBACK_INDEX := 0
-endif
-
-ifneq ($(AVB_BOOT_RBINDEX),)
-BOARD_AVB_BOOT_ROLLBACK_INDEX := $(AVB_BOOT_RBINDEX)
-else
-BOARD_AVB_BOOT_ROLLBACK_INDEX := 0
-endif
-
-#DRM Widevine 1.2 L3 support
-PRODUCT_PACKAGES += \
-    android.hardware.drm@1.0-impl \
-    android.hardware.drm@1.0-service \
-    android.hardware.drm@1.3-service.widevine \
-    android.hardware.drm@1.3-service.clearkey \
-    libwvdrmcryptoplugin \
-    libwvhidl \
-    libwvdrmengine \
-
-IMX-DEFAULT-G2D-LIB := libg2d-viv
-
-ifeq ($(PREBUILT_FSL_IMX_CODEC),true)
-ifneq ($(IMX8_BUILD_32BIT_ROOTFS),true)
-INSTALL_64BIT_LIBRARY := true
-endif
--include $(FSL_CODEC_PATH)/fsl-codec/fsl-codec.mk
-endif
-
-PRODUCT_SOONG_NAMESPACES += hardware/google/camera
-PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/camera
-
-$(call  inherit-product-if-exists, vendor/nxp-private/security/nxp_security.mk)
-
-$(call inherit-product, $(SRC_TARGET_DIR)/product/emulated_storage.mk)
diff --git a/imx8m/vp6820_8mq/evk_8mq_drm.mk b/imx8m/vp6820_8mq/evk_8mq_drm.mk
deleted file mode 100644
index fe4b31ad..00000000
--- a/imx8m/vp6820_8mq/evk_8mq_drm.mk
+++ /dev/null
@@ -1,72 +0,0 @@
-# This is a FSL Android Reference Design platform based on i.MX8MQ board
-# It will inherit from FSL core product which in turn inherit from Google generic
-
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mq
-
-PRODUCT_IMX_DRM := true
-
-# copy drm specific files before inherit evk_8mq.mk, otherwise copy is ignored
-PRODUCT_COPY_FILES += \
-	$(IMX_DEVICE_PATH)/audio_policy_configuration_drm.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
-	$(IMX_DEVICE_PATH)/init.imx8mq.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mq.main.rc \
-	$(IMX_DEVICE_PATH)/init.imx8mq.drm.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mq.rc \
-	$(TOPDIR)device/nxp/imx8m/tee-supplicant.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/tee-supplicant.rc \
-
-
-$(call inherit-product, $(TOPDIR)device/nxp/imx8m/optee-packages.mk)
-$(call inherit-product, $(TOPDIR)$(IMX_DEVICE_PATH)/evk_8mq.mk)
-
-TARGET_KERNEL_DEFCONFIG := imx_v8_android_defconfig
-
-
-# Overrides
-PRODUCT_NAME := evk_8mq_drm
-
-CFG_DRM_SECURE_DATA_PATH ?= y
-CFG_RDC_SECURE_DATA_PATH ?= y
-
-ifeq ($(CFG_DRM_SECURE_DATA_PATH),y)
-CFG_SECURE_DATA_PATH := y
-SOONG_CONFIG_IMXPLUGIN += CFG_SECURE_DATA_PATH
-SOONG_CONFIG_IMXPLUGIN_CFG_SECURE_DATA_PATH = y
-CFG_TEE_SDP_MEM_BASE := 0xcc000000
-CFG_TEE_SDP_MEM_SIZE := 0x02000000
-ifeq ($(CFG_RDC_SECURE_DATA_PATH),y)
-DECRYPTED_BUFFER_START	:= $(CFG_TEE_SDP_MEM_BASE)
-DECRYPTED_BUFFER_LEN	:= $(CFG_TEE_SDP_MEM_SIZE)
-DECODED_BUFFER_START	:= 0xCE000000
-DECODED_BUFFER_LEN		:= 0x30000000
-endif
-endif
-
-TARGET_BOARD_DTS_CONFIG := imx8mq:imx8mq-evk-drm.dtb imx8mq-mipi:imx8mq-evk-lcdif-adv7535.dtb imx8mq-dual:imx8mq-evk-dual-display.dtb
-
-# Exoplayer
-PRODUCT_PACKAGES += \
-	exoplayer \
-
-# Playready
-PRODUCT_COPY_FILES += \
-	vendor/nxp/drm_artifacts/playready/Samples/devcert.dat:$(TARGET_COPY_OUT_VENDOR)/playready/devcert.dat \
-	vendor/nxp/drm_artifacts/playready/Samples/priv.dat:$(TARGET_COPY_OUT_VENDOR)/playready/priv.dat \
-	vendor/nxp/drm_artifacts/playready/bgroupcert.dat:$(TARGET_COPY_OUT_VENDOR)/playready/bgroupcert.dat \
-	vendor/nxp/drm_artifacts/playready/zgpriv_protected.dat:$(TARGET_COPY_OUT_VENDOR)/playready/zgpriv_protected.dat \
-
-ifneq ($(CFG_BUILD_DRM_FROM_SOURCES),y)
-PRODUCT_COPY_FILES += \
-	vendor/nxp/drm_artifacts/playready/ta/82dbae9c-9ce0-47e0-a1cb4048cfdb84aa.ta:$(TARGET_COPY_OUT_VENDOR)/lib/optee_armtz/82dbae9c-9ce0-47e0-a1cb4048cfdb84aa.ta \
-	vendor/nxp/drm_artifacts/playready/libdrmplayreadyplugin.so:$(TARGET_COPY_OUT_VENDOR)/lib64/mediadrm/libdrmplayreadyplugin.so \
-	vendor/nxp/drm_artifacts/playready/optee_playready_test:$(TARGET_COPY_OUT_VENDOR)/bin/optee_playready_test
-endif
-
-ifneq ($(CFG_BUILD_DRM_FROM_SOURCES),y)
-# Widevine
-PRODUCT_COPY_FILES += \
-	vendor/nxp/drm_artifacts/widevine/lib/liboemcrypto.so:$(TARGET_COPY_OUT_VENDOR)/lib/liboemcrypto.so \
-	vendor/nxp/drm_artifacts/widevine/lib/libwvdrmengine.so:$(TARGET_COPY_OUT_VENDOR)/lib/mediadrm/libwvdrmengine.so \
-	vendor/nxp/drm_artifacts/widevine/lib/libvtswidevine.so:$(TARGET_COPY_OUT_VENDOR)/lib/drm-vts-test-libs/libvtswidevine.so \
-	vendor/nxp/drm_artifacts/widevine/lib64/liboemcrypto.so:$(TARGET_COPY_OUT_VENDOR)/lib64/liboemcrypto.so \
-	vendor/nxp/drm_artifacts/widevine/lib64/libwvdrmengine.so:$(TARGET_COPY_OUT_VENDOR)/lib64/mediadrm/libwvdrmengine.so \
-	vendor/nxp/drm_artifacts/widevine/lib64/libvtswidevine.so:$(TARGET_COPY_OUT_VENDOR)/lib64/drm-vts-test-libs/libvtswidevine.so \
-	vendor/nxp/drm_artifacts/widevine/ta/706f6574-7765-6469-77656e6942656665.ta:$(TARGET_COPY_OUT_VENDOR)/lib/optee_armtz/706f6574-7765-6469-77656e6942656665.ta
-endif
diff --git a/imx8m/vp6820_8mq/init.imx8mq.rc b/imx8m/vp6820_8mq/init.imx8mq.rc
index 114f319c..9e0b3c05 100755
--- a/imx8m/vp6820_8mq/init.imx8mq.rc
+++ b/imx8m/vp6820_8mq/init.imx8mq.rc
@@ -19,11 +19,9 @@ on early-boot
     chown root system /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_cur_freq
     chmod 0440 /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_cur_freq
     chown root system /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_frequencies
-<<<<<<< HEAD
+
     # disable 3D composition overlay to fix video rotate problem
-    setprop hwc.enable.overlay 0
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
+    setprop vendor.hwc.enable.overlay 0
 
 on property:sys.boot_completed=1
     # Set default CPU frequency governor
@@ -33,10 +31,7 @@ on property:sys.boot_completed=1
     # Set up and down limit to 200us/200us
     write /sys/devices/system/cpu/cpufreq/schedutil/up_rate_limit_us 200
     write /sys/devices/system/cpu/cpufreq/schedutil/down_rate_limit_us 200
-<<<<<<< HEAD
-=======
     write /proc/sys/kernel/sched_util_clamp_min 512
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 on property:sys.boot_completed=1
     # update cpuset now that processors are up
@@ -53,7 +48,6 @@ on property:sys.boot_completed=1
     # system-background is for system tasks that should only run on
     # little cores, not on bigs to be used only by init
     write /dev/cpuset/system-background/cpus 0-2
-<<<<<<< HEAD
 
 on init
     #IDtech added for AB ota update bootloader
@@ -61,5 +55,3 @@ on init
     symlink   /dev/block/mmcblk0boot1p1   /dev/block/by-name/spl_b
     symlink   /dev/block/mmcblk0boot0p2   /dev/block/by-name/spl_bak_a
     symlink   /dev/block/mmcblk0boot1p2   /dev/block/by-name/spl_bak_b
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mq/init.rc b/imx8m/vp6820_8mq/init.rc
index 85d5dc8b..4d542ba4 100644
--- a/imx8m/vp6820_8mq/init.rc
+++ b/imx8m/vp6820_8mq/init.rc
@@ -1,8 +1,6 @@
 import /vendor/etc/init/hw/init.${ro.hardware}.usb.rc
 import /vendor/etc/init/hw/init.${ro.hardware}.${ro.boot.soc_type}.rc
-<<<<<<< HEAD
 import /product/etc/init/hw/init.idt.common.rc
-=======
 
 service vendor.charger /system/bin/charger
     class charger
@@ -16,35 +14,15 @@ service vendor.charger /system/bin/charger
 
 on charger
     start vendor.charger
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 on early-init
     # mount the debugfs
     mount debugfs none /sys/kernel/debug/ mode=0755
 
-<<<<<<< HEAD
-    # Mount binderfs
-    mkdir /dev/binderfs
-    mount binder binder /dev/binderfs stats=global
-    chmod 0755 /dev/binderfs
-
-    symlink /dev/binderfs/binder /dev/binder
-    symlink /dev/binderfs/hwbinder /dev/hwbinder
-    symlink /dev/binderfs/vndbinder /dev/vndbinder
-
-    chmod 0666 /dev/binderfs/hwbinder
-    chmod 0666 /dev/binderfs/binder
-    chmod 0666 /dev/binderfs/vndbinder
-
-
-on early-init
-    start early_init_sh
-=======
 on early-init
     start early_init_sh
     # Set the host name which used in console
-    export HOSTNAME evk_8mq
->>>>>>> post_merge/android-11.0.0_1.0.0_history
+    export HOSTNAME vp6820_8mq
 
     # Due keymaster start very early so set prop here
     # Also gatekeeper share same role for keymaster
@@ -52,9 +30,6 @@ on early-init
     setprop ro.hardware.gatekeeper ${ro.boot.keystore}
     setprop vendor.storageproxyd ${ro.boot.keystore}
 
-<<<<<<< HEAD
-on init
-=======
     # Use ro.boot.lcd_density to override ro.sf.lcd_density
     setprop ro.sf.lcd_density ${ro.boot.lcd_density}
 
@@ -63,7 +38,6 @@ on early-init && property:ro.boot.mode=charger
     setprop vendor.skip.charger_not_need 1
 
 on init && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     start watchdogd
 
     # Support legacy paths
@@ -100,19 +74,6 @@ on init && property:vendor.skip.charger_not_need=0
     write /dev/stune/rt/schedtune.boost 50
     write /dev/stune/rt/schedtune.prefer_idle 1
 
-<<<<<<< HEAD
-on late-fs
-    # Start keymaster service
-    start vendor.keymaster-3-0-${ro.boot.keystore}
-    setprop vendor.powerhal.init 1
-
-    mount_all /vendor/etc/fstab.freescale --late
-
-on late-fs && property:vendor.storageproxyd=trusty
-    start vendor.oemlock-1-0
-
-on early-boot
-=======
 on late-fs && property:vendor.skip.charger_not_need=0
     # Start keymaster/gatekeeper service
     start vendor.gatekeeper-1-0-${ro.boot.keystore}
@@ -128,27 +89,14 @@ on late-fs && property:vendor.storageproxyd=trusty && property:vendor.skip.charg
     start vendor.oemlock-1-0
 
 on early-boot && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     # For evk_8mq, when swap used about 400M, upgrade the level.
     setprop ro.lmk.upgrade_pressure 87
     setprop ro.lmk.downgrade_pressure 95
     setprop ro.lmk.critical_upgrade true
 
-<<<<<<< HEAD
-    # Set the host name which used in console
-    export HOSTNAME vp6820_8mq
-
-    # Set permission for IIM node
-    symlink /dev/mxs_viim /dev/mxc_mem
-
-    # Enable Tethering in the Settings
-    setprop ro.tether.denied false
-
-=======
     # Set permission for IIM node
     symlink /dev/mxs_viim /dev/mxc_mem
 
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     setprop sys.hwc.disable     1
     setprop vendor.2d.composition 0
     setprop hwc.stretch.filter  1
@@ -157,54 +105,32 @@ on early-boot && property:vendor.skip.charger_not_need=0
     setprop VIVANTE_SDK_DIR /vendor/etc/viv_sdk
 
     # fsl omx graphic manager media framework property
-<<<<<<< HEAD
-    setprop rw.VIDEO_RENDER_NAME video_render.surface
-    setprop media.fsl_codec.flag 7
+    setprop vendor.rw.VIDEO_RENDER_NAME video_render.surface
+    setprop vendor.media.fsl_codec.flag 7
 
     setprop camera.disable_zsl_mode 1
     setprop back_camera_name mx6s-csi0
     setprop back_camera_orient 0
     setprop front_camera_name mx6s-csi1
     setprop front_camera_orient 0
-=======
-    setprop vendor.rw.VIDEO_RENDER_NAME video_render.surface
-    setprop vendor.media.fsl_codec.flag 7
-
-    setprop camera.disable_zsl_mode 1
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
    # Tweak the mmc device read ahead buffer size
     write /sys/block/mmcblk0/queue/read_ahead_kb 2048
     write /sys/block/mmcblk1/queue/read_ahead_kb 2048
 
-<<<<<<< HEAD
-    # Set period_us for usb audio
-    setprop ro.audio.usb.period_us 20000
-
     # Wifi firmware reload path
     chown wifi wifi /sys/module/brcmfmac/parameters/alternative_fw_path
 
     # Prepare for wifi
     setprop wifi.interface wlan0
 
-    setprop persist.service.bdroid.bdaddr 22:22:67:C6:69:73
-
     # Prepare for bluetooth
     chmod 665 /sys/class/rfkill/rfkill0/state
     chown bluetooth bluetooth /sys/class/rfkill/rfkill0/state
     write /sys/class/rfkill/rfkill0/state 0
 
-    # Prepare for RIL
-    setprop ro.ril.wake_lock_timeout 300
-
     # Use ro.boot.lcd_density to override ro.sf.lcd_density
     setprop ro.sf.lcd_density ${ro.boot.lcd_density}
-=======
-    # Prepare for wifi
-    setprop wifi.interface wlan0
-    setprop wifi.direct.interface p2p0
-    setprop wifi.concurrent.interface wlan1
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Disable surfaceflinger back pressure propagate
     setprop debug.sf.disable_backpressure 1
@@ -217,12 +143,11 @@ on early-boot && property:vendor.skip.charger_not_need=0
     chmod 0664 /sys/kernel/debug/sync/sw_sync
 
     # Default backlight device
-<<<<<<< HEAD
-    #setprop hw.backlight.dev "30a00000.mipi_dsi.0"
+    #setprop vendor.hw.backlight.dev "30a00000.mipi_dsi.0"
     # Chmod/chown FSL specific sys entry
     #chown system system /sys/class/backlight/30a00000.mipi_dsi.0/brightness
     #chmod 0660 /sys/class/backlight/30a00000.mipi_dsi.0/brightness
-    setprop hw.backlight.dev "backlight"
+    setprop vendor.hw.backlight.dev "backlight"
     chown system system /sys/class/backlight/backlight/brightness
     chmod 0660 /sys/class/backlight/backlight/brightness
 
@@ -234,22 +159,9 @@ on early-boot && property:vendor.skip.charger_not_need=0
     chmod 0660 /sys/class/backlight/pwm_3/brightness
     chmod 0660 /sys/class/backlight/pwm_4/brightness
 
-    # Set light sensor sysfs path and light sensor threshold lux value
-    setprop ro.hardware.lightsensor "/sys/class/i2c-dev/i2c-0/device/0-0044/"
-    setprop ro.lightsensor.threshold  20
-
-    # Dectect DSF streams when scanning media
-    setprop ro.FSL_DSF_PARSER 1
-=======
-    setprop vendor.hw.backlight.dev "30a00000.mipi_dsi.0"
-    # Chmod/chown FSL specific sys entry
-    chown system system /sys/class/backlight/30a00000.mipi_dsi.0/brightness
-    chmod 0660 /sys/class/backlight/30a00000.mipi_dsi.0/brightness
-
     # Set light sensor sysfs path and light sensor threshold lux value
     setprop ro.hardware.lightsensor "/sys/class/i2c-dev/i2c-0/device/0-0044/"
     setprop vendor.ro.lightsensor.threshold  20
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Allow DSD file(duration larger than 10s) can play
     setprop audio.offload.min.duration.secs 10
@@ -260,14 +172,10 @@ on early-boot && property:vendor.skip.charger_not_need=0
     # enlarge media max memory size to 3G.
     setprop ro.media.maxmem 3221225471
 
-<<<<<<< HEAD
     setprop wifi.direct.interface p2p-dev-wlan0
     start vendor.wifi_hal_legacy
 
-on boot
-=======
 on boot && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     start audioserver
     start mediadrm
     start media
@@ -279,10 +187,7 @@ service wpa_supplicant /vendor/bin/hw/wpa_supplicant \
     interface android.hardware.wifi.supplicant@1.0::ISupplicant default
     interface android.hardware.wifi.supplicant@1.1::ISupplicant default
     interface android.hardware.wifi.supplicant@1.2::ISupplicant default
-<<<<<<< HEAD
-=======
     interface android.hardware.wifi.supplicant@1.3::ISupplicant default
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     class main
     socket wpa_wlan0 dgram 660 wifi wifi
     disabled
@@ -292,8 +197,7 @@ service sensor_fusion /vendor/bin/fsl_sensor_fusion
     class late_start
     seclabel u:r:sensors:s0
     user system
-<<<<<<< HEAD
-    group input
+    group system uhid
     oneshot
 
 service vendor.sensors-hal-1-0 /vendor/bin/hw/android.hardware.sensors@1.0-service
@@ -302,11 +206,6 @@ service vendor.sensors-hal-1-0 /vendor/bin/hw/android.hardware.sensors@1.0-servi
     group system wakelock input root
     capabilities BLOCK_SUSPEND SYS_NICE
 
-=======
-    group system uhid
-    oneshot
-
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 # Set watchdog timer to 30 seconds and pet it every 10 seconds to get a 20 second margin
 service watchdogd /system/bin/watchdogd 10 20
     class core
@@ -360,15 +259,9 @@ service bugreport /system/bin/dumpstate -d -p -B -z \
     oneshot
     keycodes 114 115 116
 
-<<<<<<< HEAD
-on fs
-# mount ext4 partitions
-    mount_all /vendor/etc/fstab.freescale --early
-=======
 on fs && property:vendor.skip.charger_not_need=0
 # mount ext4 partitions
     mount_all /vendor/etc/fstab.nxp --early
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Adjust parameters for dm-verity device
     write /sys/block/dm-0/queue/read_ahead_kb 4096
@@ -376,26 +269,15 @@ on fs && property:vendor.skip.charger_not_need=0
     # Update dm-verity state and set partition.*.verified properties
     verity_update_state
 
-<<<<<<< HEAD
-on verity-logging
-    exec u:r:slideshow:s0 -- /sbin/slideshow warning/verity_red_1 warning/verity_red_2
-
-on post-fs
-=======
 on verity-logging && property:vendor.skip.charger_not_need=0
     exec u:r:slideshow:s0 -- /sbin/slideshow warning/verity_red_1 warning/verity_red_2
 
 on post-fs && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     # Set netd memlock rlimit to 8MB
     setrlimit 8 8388608 8388608
 
     # Turn on swap
-<<<<<<< HEAD
-    swapon_all /vendor/etc/fstab.freescale
-=======
     swapon_all /vendor/etc/fstab.nxp
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     # Swap in only 1 page at a time
     write /proc/sys/vm/page-cluster 0
@@ -404,11 +286,7 @@ on post-fs && property:vendor.skip.charger_not_need=0
     chown system system /proc/pagetypeinfo
     chmod 0440 /proc/pagetypeinfo
 
-<<<<<<< HEAD
-on post-fs-data
-=======
 on post-fs-data && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     setprop vold.post_fs_data_done 1
     # create temp node for secure storage proxy
     mkdir /data/vendor/ss 0700 system system
@@ -417,19 +295,6 @@ on post-fs-data && property:vendor.skip.charger_not_need=0
     setprop TMPDIR /data/vendor/.opencl-cache
     mkdir /data/vendor/.opencl-cache 0771 system camera
 
-<<<<<<< HEAD
-on zygote-start
-    # Create the directories used by the Wireless subsystem
-    mkdir /data/misc/wifi 0770 wifi wifi
-    mkdir /data/misc/wifi/wpa_supplicant 0770 wifi wifi
-    mkdir /data/vendor/wifi 0771 wifi wifi
-    mkdir /data/vendor/wifi/wpa 0770 wifi wifi
-    mkdir /data/vendor/wifi/wpa/sockets 0770 wifi wifi
-    mkdir /data/misc/dhcp 0770 dhcp dhcp
-    chown dhcp dhcp /data/misc/dhcp
-
-service early_init_sh /vendor/bin/init.insmod.sh /vendor/etc/early.init.cfg sys.all.early_init.ready
-=======
 on zygote-start && property:vendor.skip.charger_not_need=0
     # Create the directories used by the Wireless subsystem
     mkdir /data/vendor/wifi 0771 wifi wifi
@@ -437,29 +302,20 @@ on zygote-start && property:vendor.skip.charger_not_need=0
     mkdir /data/vendor/wifi/wpa/sockets 0770 wifi wifi
 
 service early_init_sh /vendor/bin/init.insmod.sh /vendor/etc/early.init.cfg vendor.all.early_init.ready
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     class main
     user root
     group root system
     disabled
     oneshot
 
-<<<<<<< HEAD
-on property:sys.boot_completed=1 && property:vendor.storageproxyd=trusty
-=======
 on property:sys.boot_completed=1 && property:vendor.storageproxyd=trusty && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     start storageproxyd
 
 service storageproxyd /vendor/bin/storageproxyd -p /data/vendor/ss -r /dev/mmcblk0rpmb -d /dev/trusty-ipc-dev0
    group system
 
 
-<<<<<<< HEAD
-on property:ro.boot.vendor.sysrq=1
-=======
 on property:ro.boot.vendor.sysrq=1 && property:vendor.skip.charger_not_need=0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     write /proc/sys/kernel/sysrq 1
 
 # setenv append_bootargs androidboot.usb.debugging=1
diff --git a/imx8m/vp6820_8mq/manifest.xml b/imx8m/vp6820_8mq/manifest.xml
index 214887d5..888cf2cd 100644
--- a/imx8m/vp6820_8mq/manifest.xml
+++ b/imx8m/vp6820_8mq/manifest.xml
@@ -1,8 +1,5 @@
 <manifest version="1.0" type="device" target-level="4">
-<<<<<<< HEAD
-=======
     <kernel  target-level="5" />
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     <hal format="hidl">
 	<name>android.hardware.graphics.allocator</name>
         <transport>hwbinder</transport>
@@ -16,22 +13,13 @@
     <hal format="hidl">
         <name>android.hardware.graphics.composer</name>
         <transport>hwbinder</transport>
-<<<<<<< HEAD
-        <version>2.3</version>
-=======
         <version>2.4</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <interface>
             <name>IComposer</name>
             <instance>default</instance>
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
-        <name>android.hardware.keymaster</name>
-        <transport>hwbinder</transport>
-        <version>3.0</version>
-=======
        <name>android.hardware.camera.provider</name>
        <transport>hwbinder</transport>
        <fqname>@2.4::ICameraProvider/external/0</fqname>
@@ -40,7 +28,6 @@
         <name>android.hardware.keymaster</name>
         <transport>hwbinder</transport>
         <version>4.0</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <interface>
             <name>IKeymasterDevice</name>
             <instance>default</instance>
@@ -58,13 +45,8 @@
             <name>IDrmFactory</name>
             <instance>default</instance>
         </interface>
-<<<<<<< HEAD
-        <fqname>@1.2::ICryptoFactory/clearkey</fqname>
-        <fqname>@1.2::IDrmFactory/clearkey</fqname>
-=======
         <fqname>@1.3::ICryptoFactory/clearkey</fqname>
         <fqname>@1.3::IDrmFactory/clearkey</fqname>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     </hal>
     <hal format="hidl">
         <name>android.hardware.gatekeeper</name>
@@ -95,7 +77,6 @@
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
         <name>android.hardware.sensors</name>
         <transport>hwbinder</transport>
         <version>1.0</version>
@@ -105,8 +86,6 @@
         </interface>
     </hal>
     <hal format="hidl">
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <name>android.hardware.configstore</name>
         <transport>hwbinder</transport>
         <version>1.1</version>
@@ -138,46 +117,6 @@
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
-       <name>android.hardware.wifi</name>
-       <transport>hwbinder</transport>
-       <version>1.3</version>
-       <interface>
-           <name>IWifi</name>
-           <instance>default</instance>
-       </interface>
-    </hal>
-    <hal format="hidl">
-       <name>android.hardware.wifi.supplicant</name>
-       <transport>hwbinder</transport>
-       <version>1.2</version>
-       <interface>
-           <name>ISupplicant</name>
-           <instance>default</instance>
-       </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.wifi.hostapd</name>
-        <transport>hwbinder</transport>
-        <version>1.1</version>
-        <interface>
-            <name>IHostapd</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-       <name>android.hardware.camera.provider</name>
-	<transport>hwbinder</transport>
-	<impl level="generic"></impl>
-	<version>2.4</version>
-	<interface>
-	    <name>ICameraProvider</name>
-	    <instance>legacy/0</instance>
-	</interface>
-    </hal>
-    <hal format="hidl">
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <name>android.hardware.light</name>
         <transport>hwbinder</transport>
         <version>2.0</version>
@@ -198,11 +137,7 @@
     <hal format="hidl">
         <name>android.hardware.audio</name>
         <transport>hwbinder</transport>
-<<<<<<< HEAD
-        <version>5.0</version>
-=======
         <version>6.0</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <interface>
             <name>IDevicesFactory</name>
             <instance>default</instance>
@@ -211,38 +146,13 @@
     <hal format="hidl">
         <name>android.hardware.audio.effect</name>
         <transport>hwbinder</transport>
-<<<<<<< HEAD
-        <version>5.0</version>
-=======
         <version>6.0</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <interface>
             <name>IEffectsFactory</name>
             <instance>default</instance>
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
-        <name>android.hardware.usb</name>
-        <transport>hwbinder</transport>
-        <version>1.1</version>
-        <interface>
-            <name>IUsb</name>
-            <instance>default</instance>
-          </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.usb.gadget</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IUsbGadget</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <name>android.hardware.bluetooth</name>
         <transport>hwbinder</transport>
         <version>1.0</version>
@@ -254,38 +164,13 @@
     <hal format="hidl">
         <name>android.hardware.dumpstate</name>
         <transport>hwbinder</transport>
-<<<<<<< HEAD
-        <version>1.0</version>
-=======
         <version>1.1</version>
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <interface>
             <name>IDumpstateDevice</name>
             <instance>default</instance>
         </interface>
     </hal>
     <hal format="hidl">
-<<<<<<< HEAD
-        <name>android.hardware.oemlock</name>
-        <transport>hwbinder</transport>
-        <version>1.0</version>
-        <interface>
-            <name>IOemLock</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-        <name>android.hardware.health</name>
-        <transport>hwbinder</transport>
-        <version>2.0</version>
-        <interface>
-            <name>IHealth</name>
-            <instance>default</instance>
-        </interface>
-    </hal>
-    <hal format="hidl">
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
         <name>nxp.hardware.display</name>
             <transport>hwbinder</transport>
         <version>1.0</version>
@@ -294,16 +179,6 @@
             <instance>default</instance>
         </interface>
     </hal>
-<<<<<<< HEAD
-    <hal format="hidl">
-        <name>android.hardware.neuralnetworks</name>
-        <transport>hwbinder</transport>
-        <version>1.2</version>
-        <interface>
-            <name>IDevice</name>
-            <instance>vsi-npu</instance>
-        </interface>
-    </hal>
     <hal format="hidl">
         <name>android.hardware.broadcastradio</name>
             <transport>hwbinder</transport>
@@ -331,6 +206,4 @@
             <instance>slot1</instance>
         </interface>
     </hal>
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 </manifest>
diff --git a/imx8m/vp6820_8mq/overlay/frameworks/base/core/res/res/values/config.xml b/imx8m/vp6820_8mq/overlay/frameworks/base/core/res/res/values/config.xml
index 74a44c5b..a8d9f4d6 100644
--- a/imx8m/vp6820_8mq/overlay/frameworks/base/core/res/res/values/config.xml
+++ b/imx8m/vp6820_8mq/overlay/frameworks/base/core/res/res/values/config.xml
@@ -72,16 +72,12 @@
          before automatically restore the default connection.  Set -1 if the connection
          does not require auto-restore. -->
     <!-- the 6th element indicates boot-time dependency-met value. -->
-<<<<<<< HEAD
 <!--
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     <string-array translatable="false" name="networkAttributes">
         <item>"wifi,1,1,1,-1,true"</item>
         <item>"bluetooth,7,7,2,-1,true"</item>
         <item>"ethernet,9,9,2,-1,true"</item>
     </string-array>
-<<<<<<< HEAD
 -->
     <string-array translatable="false" name="networkAttributes">
         <item>"wifi,1,1,1,-1,true"</item>
@@ -97,8 +93,6 @@
         <item>"mobile_ia,14,0,2,-1,true"</item>
         <item>"mobile_emergency,15,0,2,-1,true"</item>
     </string-array>
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
     <!-- Array of light sensor LUX values to define our levels for auto backlight brightness support.
          The N entries of this array define N + 1 zones as follows:
@@ -207,40 +201,13 @@
     <!-- This device is not "voice capable"; it's data-only. -->
     <bool name="config_voice_capable">false</bool>
 
-<<<<<<< HEAD
-    <!-- Boolean indicating whether the wifi chipset has dual frequency band support -->
-    <bool translatable="false" name="config_wifi_dual_band_support">true</bool>
-
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     <!-- Boolean indicating whether system support sustained performance mode. -->
     <bool name="config_sustainedPerformanceModeSupported">true</bool>
 
     <!-- If the system has the input method for each display - enable per-display focus. -->
     <bool name="config_perDisplayFocusEnabled">true</bool>
-<<<<<<< HEAD
-
-    <!-- Enable 802.11ac for Wifi hotspot (SAP) -->
-    <bool translatable="false" name="config_wifi_softap_ieee80211ac_supported">true</bool>
-
-    <!-- Enable ACS (auto channel selection) for Wifi hotspot (SAP) -->
-    <bool translatable="false" name="config_wifi_softap_acs_supported">true</bool>
-
-    <!-- Boolean indicating whether 802.11r Fast BSS Transition is enabled on this platform -->
-    <bool translatable="false" name="config_wifi_fast_bss_transition_enabled">true</bool>
-
-    <!-- Boolean indicating whether the wifi chipset has background scan support -->
-    <bool translatable="false" name="config_wifi_background_scan_support">true</bool>
-
-    <!-- Indicates that connected MAC randomization is supported on this device -->
-    <bool translatable="false" name="config_wifi_connected_mac_randomization_supported">true</bool>
-
-    <!-- Indicates that p2p MAC randomization is supported on this device -->
-    <bool translatable="false" name="config_wifi_p2p_mac_randomization_supported">true</bool>
 
     <!-- The default gravity for the picture-in-picture window.
          Currently, this maps to Gravity.TOP | Gravity.RIGHT -->
     <integer name="config_defaultPictureInPictureGravity">0x35</integer>
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 </resources>
diff --git a/imx8m/vp6820_8mq/overlay/frameworks/base/packages/SettingsProvider/res/values/defaults.xml b/imx8m/vp6820_8mq/overlay/frameworks/base/packages/SettingsProvider/res/values/defaults.xml
index bd32383c..0bf9ee21 100644
--- a/imx8m/vp6820_8mq/overlay/frameworks/base/packages/SettingsProvider/res/values/defaults.xml
+++ b/imx8m/vp6820_8mq/overlay/frameworks/base/packages/SettingsProvider/res/values/defaults.xml
@@ -21,8 +21,5 @@
     <bool name="def_user_setup_complete">true</bool>
     <bool name="def_bluetooth_on">false</bool>
     <bool name="def_stay_on_while_plugged_in">true</bool>
-<<<<<<< HEAD
     <string name="def_immersive_mode_confirmations" translatable="false">confirmed</string>
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 </resources>
diff --git a/imx8m/vp6820_8mq/powerhint_imx8mq.json b/imx8m/vp6820_8mq/powerhint_imx8mq.json
index dd45c0b3..99ea1690 100644
--- a/imx8m/vp6820_8mq/powerhint_imx8mq.json
+++ b/imx8m/vp6820_8mq/powerhint_imx8mq.json
@@ -4,16 +4,10 @@
       "Name": "CPULittleClusterMaxFreq",
       "Path": "/sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq",
       "Values": [
-<<<<<<< HEAD
-        "1800000",
-        "1600000",
-        "1200000"
-=======
         "1500000",
         "1300000",
         "1000000",
         "800000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
       ],
       "DefaultIndex": 0,
       "ResetOnInit": true
@@ -22,16 +16,10 @@
       "Name": "CPULittleClusterMinFreq",
       "Path": "/sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq",
       "Values": [
-<<<<<<< HEAD
-        "1800000",
-        "1600000",
-        "1200000"
-=======
         "1500000",
         "1300000",
         "1000000",
         "800000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
       ],
       "ResetOnInit": true
     },
@@ -88,21 +76,13 @@
       "PowerHint": "SUSTAINED_PERFORMANCE",
       "Node": "CPULittleClusterMaxFreq",
       "Duration": 0,
-<<<<<<< HEAD
-      "Value": "1600000"
-=======
       "Value": "1300000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "INTERACTION",
       "Node": "CPULittleClusterMinFreq",
       "Duration": 0,
-<<<<<<< HEAD
-      "Value": "1600000"
-=======
       "Value": "1500000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "INTERACTION",
@@ -111,12 +91,6 @@
       "Value": "60"
     },
     {
-<<<<<<< HEAD
-      "PowerHint": "LAUNCH",
-      "Node": "CPULittleClusterMinFreq",
-      "Duration": 5000,
-      "Value": "1800000"
-=======
       "PowerHint": "INTERACTION",
       "Node": "PMQoSCpuDmaLatency",
       "Duration": 500,
@@ -127,17 +101,12 @@
       "Node": "CPULittleClusterMinFreq",
       "Duration": 5000,
       "Value": "1500000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "LAUNCH",
       "Node": "CPULittleClusterMaxFreq",
       "Duration": 5000,
-<<<<<<< HEAD
-      "Value": "1800000"
-=======
       "Value": "1500000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "LAUNCH",
@@ -148,24 +117,14 @@
     {
       "PowerHint": "CAMERA_LAUNCH",
       "Node": "CPULittleClusterMinFreq",
-<<<<<<< HEAD
-      "Duration": 1000,
-      "Value": "1800000"
-=======
       "Duration": 5000,
       "Value": "1500000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "CAMERA_LAUNCH",
       "Node": "CPULittleClusterMaxFreq",
-<<<<<<< HEAD
-      "Duration": 1000,
-      "Value": "1800000"
-=======
       "Duration": 5000,
       "Value": "1500000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "CAMERA_LAUNCH",
@@ -183,33 +142,19 @@
       "PowerHint": "CAMERA_STREAMING",
       "Node": "CPULittleClusterMaxFreq",
       "Duration": 0,
-<<<<<<< HEAD
-      "Value": "1600000"
-=======
       "Value": "1300000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "CAMERA_SHOT",
       "Node": "CPULittleClusterMinFreq",
-<<<<<<< HEAD
-      "Duration": 1000,
-      "Value": "1800000"
-=======
       "Duration": 5000,
       "Value": "1500000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "CAMERA_SHOT",
       "Node": "CPULittleClusterMaxFreq",
-<<<<<<< HEAD
-      "Duration": 1000,
-      "Value": "1800000"
-=======
       "Duration": 5000,
       "Value": "1500000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "CAMERA_SHOT",
@@ -221,21 +166,13 @@
       "PowerHint": "LOW_POWER",
       "Node": "CPULittleClusterMinFreq",
       "Duration": 0,
-<<<<<<< HEAD
-      "Value": "1200000"
-=======
       "Value": "800000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "LOW_POWER",
       "Node": "CPULittleClusterMaxFreq",
       "Duration": 0,
-<<<<<<< HEAD
-      "Value": "1200000"
-=======
       "Value": "1300000"
->>>>>>> post_merge/android-11.0.0_1.0.0_history
     },
     {
       "PowerHint": "AUDIO_STREAMING",
@@ -244,15 +181,12 @@
       "Value": "0"
     },
     {
-<<<<<<< HEAD
-=======
       "PowerHint": "AUDIO_STREAMING",
       "Node": "CPULittleClusterMinFreq",
       "Duration": 2000,
       "Value": "1000000"
     },
     {
->>>>>>> post_merge/android-11.0.0_1.0.0_history
       "PowerHint": "AUDIO_LOW_LATENCY",
       "Node": "PowerHALAudioState",
       "Duration": 0,
diff --git a/imx8m/vp6820_8mq/sepolicy/file_contexts b/imx8m/vp6820_8mq/sepolicy/file_contexts
index f64c1eff..07f15121 100644
--- a/imx8m/vp6820_8mq/sepolicy/file_contexts
+++ b/imx8m/vp6820_8mq/sepolicy/file_contexts
@@ -23,15 +23,12 @@
 /dev/block/platform/soc@0/soc@0\:bus@30800000/30b40000\.mmc/by-name/userdata         u:object_r:userdata_block_device:s0
 /dev/block/platform/soc@0/soc@0\:bus@30800000/30b40000\.mmc/by-name/vbmeta_[ab]      u:object_r:vbmeta_block_device:s0
 /dev/block/platform/soc@0/soc@0\:bus@30800000/30b40000\.mmc/by-name/super            u:object_r:super_block_device:s0
-<<<<<<< HEAD
 /dev/block/platform/soc@0/soc@0\:bus@30800000/30b40000\.mmc/by-name/bootloader_[ab]  u:object_r:bootloader_block_device:s0
 /dev/block/platform/soc@0/soc@0\:bus@30800000/30b40000\.mmc/by-name/mem_info_[ab]    u:object_r:bootloader_block_device:s0
 
 # spl
 /dev/block/mmcblk0boot[01]            u:object_r:spl_block_device:s0
 /dev/block/mmcblk0boot[01]p[1-9]      u:object_r:spl_block_device:s0
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 #peripheral
 /vendor/bin/magd                u:object_r:sensors_exec:s0
@@ -50,7 +47,3 @@
 /vendor/bin/hw/android\.hardware\.thermal@2\.0-service.imx         u:object_r:hal_thermal_default_exec:s0
 
 /vendor/bin/hw/android\.hardware\.media\.c2@1\.0-service    u:object_r:mediacodec_exec:s0
-<<<<<<< HEAD
-
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mq/sepolicy/genfs_contexts b/imx8m/vp6820_8mq/sepolicy/genfs_contexts
index 9d287d6c..2f5e1478 100644
--- a/imx8m/vp6820_8mq/sepolicy/genfs_contexts
+++ b/imx8m/vp6820_8mq/sepolicy/genfs_contexts
@@ -7,16 +7,11 @@ genfscon sysfs /devices/platform/soc@0/soc@0:bus@30800000/30b50000.mmc/mmc_host/
 genfscon sysfs /devices/platform/soc@0/soc@0:bus@30800000/30bb0000.spi/spi_master/spi3/spi3.0/mtd/mtd0/mtdblock u:object_r:sysfs_block_devices:s0
 
 genfscon sysfs /devices/platform/soc@0/soc@0:bus@30800000/30a00000.mipi_dsi/30a00000.mipi_dsi.0/backlight u:object_r:sysfs_leds:s0
-<<<<<<< HEAD
 genfscon sysfs /devices/platform/backlight/backlight/backlight u:object_r:sysfs_leds:s0
-=======
->>>>>>> post_merge/android-11.0.0_1.0.0_history
 
 #/sys/class/net
 genfscon sysfs /devices/platform/soc@0/soc@0:bus@30800000/30be0000.ethernet/net               u:object_r:sysfs_net:s0
 genfscon sysfs /devices/platform/soc@0/33800000.pcie/pci0000:00/0000:00:00.0/0000:01:00.0/net u:object_r:sysfs_net:s0
-<<<<<<< HEAD
-=======
 genfscon sysfs /devices/platform/soc@0/33c00000.pcie/pci0000:00/0000:00:00.0/0000:01:00.0/net u:object_r:sysfs_net:s0
 
 
@@ -28,4 +23,3 @@ genfscon sysfs /devices/platform/soc@0/soc@0:bus@30000000/30370000.snvs/30370000
 genfscon sysfs /devices/virtual/power_supply/battery/wakeup4                                                                       u:object_r:sysfs_wakeup:s0
 genfscon sysfs /devices/virtual/power_supply/usb/wakeup5                                                                           u:object_r:sysfs_wakeup:s0
 genfscon sysfs /devices/platform/soc@0/soc@0:bus@30800000/30a20000.i2c/i2c-0/0-0050/power_supply/tcpm-source-psy-0-0050/wakeup6    u:object_r:sysfs_wakeup:s0
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mq/vp6820_8mq.mk b/imx8m/vp6820_8mq/vp6820_8mq.mk
index 9e9e9192..4290b475 100644
--- a/imx8m/vp6820_8mq/vp6820_8mq.mk
+++ b/imx8m/vp6820_8mq/vp6820_8mq.mk
@@ -1,418 +1,8 @@
 # This is a FSL Android Reference Design platform based on i.MX8QP ARD board
 # It will inherit from FSL core product which in turn inherit from Google generic
 
-<<<<<<< HEAD
 IMX_DEVICE_PATH := device/idtech/imx8m/vp6820_8mq
 $(call inherit-product, $(TOPDIR)$(IMX_DEVICE_PATH)/vp6820_8mq_common.mk)
 
 # Overrides
 PRODUCT_NAME := vp6820_8mq
-=======
-IMX_DEVICE_PATH := device/nxp/imx8m/evk_8mq
-
-# configs shared between uboot, kernel and Android rootfs
-include $(IMX_DEVICE_PATH)/SharedBoardConfig.mk
-
--include device/nxp/common/imx_path/ImxPathConfig.mk
-include device/nxp/imx8m/ProductConfigCommon.mk
-
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab_nand.nxp),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab_nand.nxp)
-endif
-
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.nxp),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab.nxp)
-endif
-
-# Overrides
-PRODUCT_NAME := evk_8mq
-PRODUCT_DEVICE := evk_8mq
-PRODUCT_MODEL := EVK_8MQ
-
-PRODUCT_FULL_TREBLE_OVERRIDE := true
-PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/power
-PRODUCT_SOONG_NAMESPACES += hardware/google/pixel
-
-#Enable this to choose 32 bit user space build
-#IMX8_BUILD_32BIT_ROOTFS := true
-
-# Enable this to support vendor boot and boot header v3, this would be a MUST for GKI
-TARGET_USE_VENDOR_BOOT ?= true
-
-#Enable this to use dynamic partitions for the readonly partitions not touched by bootloader
-TARGET_USE_DYNAMIC_PARTITIONS ?= true
-#If the device is retrofit to have dynamic partition feature, set this variable to true to build
-#the images and OTA package. Here is a demo to update 10.0.0_1.0.0 to 10.0.0_2.0.0 or higher
-TARGET_USE_RETROFIT_DYNAMIC_PARTITION ?= false
-
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
-  $(call inherit-product, $(SRC_TARGET_DIR)/product/virtual_ab_ota.mk)
-  PRODUCT_USE_DYNAMIC_PARTITIONS := true
-  BOARD_BUILD_SUPER_IMAGE_BY_DEFAULT := true
-  BOARD_SUPER_IMAGE_IN_UPDATE_PACKAGE := true
-  ifeq ($(TARGET_USE_RETROFIT_DYNAMIC_PARTITION),true)
-    PRODUCT_RETROFIT_DYNAMIC_PARTITIONS := true
-    BOARD_SUPER_PARTITION_METADATA_DEVICE := system
-    ifeq ($(IMX_NO_PRODUCT_PARTITION),true)
-      BOARD_SUPER_PARTITION_BLOCK_DEVICES := system vendor
-      BOARD_SUPER_PARTITION_SYSTEM_DEVICE_SIZE := 2952790016
-      BOARD_SUPER_PARTITION_VENDOR_DEVICE_SIZE := 536870912
-    else
-      BOARD_SUPER_PARTITION_BLOCK_DEVICES := system vendor product
-      BOARD_SUPER_PARTITION_SYSTEM_DEVICE_SIZE := 1610612736
-      BOARD_SUPER_PARTITION_VENDOR_DEVICE_SIZE := 536870912
-      BOARD_SUPER_PARTITION_PRODUCT_DEVICE_SIZE := 1879048192
-    endif
-  endif
-endif
-
-# Include keystore attestation keys and certificates.
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
--include $(IMX_SECURITY_PATH)/attestation/imx_attestation.mk
-endif
-
-# Copy device related config and binary to board
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/app_whitelist.xml:system/etc/sysconfig/app_whitelist.xml \
-    $(IMX_DEVICE_PATH)/audio_effects.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_effects.xml \
-    $(IMX_DEVICE_PATH)/audio_policy_configuration.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
-    $(IMX_DEVICE_PATH)/input-port-associations.xml:$(TARGET_COPY_OUT_VENDOR)/etc/input-port-associations.xml \
-    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.nxp \
-    $(IMX_DEVICE_PATH)/init.imx8mq.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mq.rc \
-    $(IMX_DEVICE_PATH)/init.recovery.nxp.rc:root/init.recovery.nxp.rc \
-    $(IMX_DEVICE_PATH)/early.init.cfg:$(TARGET_COPY_OUT_VENDOR)/etc/early.init.cfg \
-    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.rc \
-    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.usb.rc \
-    $(IMX_DEVICE_PATH)/required_hardware.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/required_hardware.xml \
-    $(IMX_DEVICE_PATH)/ueventd.nxp.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
-    $(LINUX_FIRMWARE_IMX_PATH)/linux-firmware-imx/firmware/sdma/sdma-imx7d.bin:$(TARGET_COPY_OUT_VENDOR)/firmware/imx/sdma/sdma-imx7d.bin \
-    device/nxp/common/init/init.insmod.sh:$(TARGET_COPY_OUT_VENDOR)/bin/init.insmod.sh \
-    device/nxp/common/wifi/p2p_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/p2p_supplicant_overlay.conf \
-    device/nxp/common/wifi/wpa_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/wpa_supplicant_overlay.conf
-
-# We load the fstab from device tree so this is not needed, but since no kernel modules are installed to vendor
-# boot ramdisk so far, we need this step to generate the vendor-ramdisk folder or build process would fail. This
-# can be deleted once we figure out what kernel modules should be put into the vendor boot ramdisk.
-ifeq ($(TARGET_USE_VENDOR_BOOT),true)
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR_RAMDISK)/first_stage_ramdisk/fstab.nxp
-endif
-
-
-# Audio card json
-PRODUCT_COPY_FILES += \
-    device/nxp/common/audio-json/wm8524_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/wm8524_config.json \
-    device/nxp/common/audio-json/spdif_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/spdif_config.json \
-    device/nxp/common/audio-json/cdnhdmi_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/cdnhdmi_config.json \
-    device/nxp/common/audio-json/ak4458_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/ak4458_config.json \
-    device/nxp/common/audio-json/ak5558_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/ak5558_config.json \
-    device/nxp/common/audio-json/btsco_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/btsco_config.json \
-    device/nxp/common/audio-json/readme.txt:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/readme.txt
-
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_COPY_FILES += \
-    device/nxp/common/security/rpmb_key_test.bin:rpmb_key_test.bin \
-    device/nxp/common/security/testkey_public_rsa4096.bin:testkey_public_rsa4096.bin
-endif
-
-# ONLY devices that meet the CDD's requirements may declare these features
-PRODUCT_COPY_FILES += \
-    frameworks/native/data/etc/android.hardware.audio.output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.audio.output.xml \
-    frameworks/native/data/etc/android.hardware.bluetooth_le.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.bluetooth_le.xml \
-    frameworks/native/data/etc/android.hardware.camera.external.xml:vendor/etc/permissions/android.hardware.camera.external.xml \
-    frameworks/native/data/etc/android.hardware.camera.front.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.front.xml \
-    frameworks/native/data/etc/android.hardware.camera.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.xml \
-    frameworks/native/data/etc/android.hardware.ethernet.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.ethernet.xml \
-    frameworks/native/data/etc/android.hardware.screen.landscape.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.screen.landscape.xml \
-    frameworks/native/data/etc/android.hardware.screen.portrait.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.screen.portrait.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.multitouch.distinct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.multitouch.distinct.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.multitouch.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.multitouch.xml \
-    frameworks/native/data/etc/android.hardware.touchscreen.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.touchscreen.xml \
-    frameworks/native/data/etc/android.hardware.usb.accessory.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.accessory.xml \
-    frameworks/native/data/etc/android.hardware.usb.host.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.host.xml \
-    frameworks/native/data/etc/android.hardware.vulkan.level-0.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.level-0.xml \
-    frameworks/native/data/etc/android.hardware.vulkan.version-1_1.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.version-1_1.xml \
-    frameworks/native/data/etc/android.software.vulkan.deqp.level-2020-03-01.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.vulkan.deqp.level-2020-03-01.xml \
-    frameworks/native/data/etc/android.hardware.wifi.direct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.direct.xml \
-    frameworks/native/data/etc/android.hardware.wifi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.xml \
-    frameworks/native/data/etc/android.hardware.wifi.passpoint.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.passpoint.xml \
-    frameworks/native/data/etc/android.software.app_widgets.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.app_widgets.xml \
-    frameworks/native/data/etc/android.software.backup.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.backup.xml \
-    frameworks/native/data/etc/android.software.device_admin.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.device_admin.xml \
-    frameworks/native/data/etc/android.software.managed_users.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.managed_users.xml \
-    frameworks/native/data/etc/android.software.midi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.midi.xml \
-    frameworks/native/data/etc/android.software.print.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.print.xml \
-    frameworks/native/data/etc/android.software.sip.voip.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.sip.voip.xml \
-    frameworks/native/data/etc/android.software.verified_boot.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.verified_boot.xml \
-    frameworks/native/data/etc/android.software.voice_recognizers.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.voice_recognizers.xml \
-    frameworks/native/data/etc/android.software.activities_on_secondary_displays.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.activities_on_secondary_displays.xml \
-    frameworks/native/data/etc/android.software.picture_in_picture.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.picture_in_picture.xml
-
-# Vendor seccomp policy files for media components:
-PRODUCT_COPY_FILES += \
-    $(IMX_DEVICE_PATH)/seccomp/mediacodec-seccomp.policy:vendor/etc/seccomp_policy/mediacodec.policy \
-    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.base.policy:vendor/etc/seccomp_policy/codec2.vendor.base.policy \
-    device/nxp/common/seccomp_policy/codec2.vendor.ext.policy:vendor/etc/seccomp_policy/codec2.vendor.ext.policy
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mq/powerhint_imx8mq.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/powerhint_imx8mq.json
-
-# fastboot_imx_flashall scripts, fsl-sdcard-partition script and uuu_imx_android_flash scripts
-PRODUCT_COPY_FILES += \
-    device/nxp/common/tools/fastboot_imx_flashall.bat:fastboot_imx_flashall.bat \
-    device/nxp/common/tools/fastboot_imx_flashall.sh:fastboot_imx_flashall.sh \
-    device/nxp/common/tools/imx-sdcard-partition.sh:imx-sdcard-partition.sh \
-    device/nxp/common/tools/uuu_imx_android_flash.bat:uuu_imx_android_flash.bat \
-    device/nxp/common/tools/uuu_imx_android_flash.sh:uuu_imx_android_flash.sh
-
-USE_XML_AUDIO_POLICY_CONF := 1
-
-DEVICE_PACKAGE_OVERLAYS := $(IMX_DEVICE_PATH)/overlay
-
-PRODUCT_CHARACTERISTICS := tablet
-
-PRODUCT_AAPT_CONFIG += xlarge large tvdpi hdpi xhdpi xxhdpi
-
-# GPU openCL g2d
-PRODUCT_COPY_FILES += \
-    $(IMX_PATH)/imx/opencl-2d/cl_g2d.cl:$(TARGET_COPY_OUT_VENDOR)/etc/cl_g2d.cl
-
-# GPU openCL SDK header file
--include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/include/CL/cl_sdk.mk
-
-# GPU openVX SDK header file
--include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/include/nnxc_kernels/nnxc_kernels.mk
-
-# GPU openCL icdloader config file
--include $(FSL_PROPRIETARY_PATH)/fsl-proprietary/gpu-viv/icdloader/icdloader.mk
-
-# HWC2 HAL
-PRODUCT_PACKAGES += \
-    android.hardware.graphics.composer@2.4-service
-
-# Charger Mode
-PRODUCT_PRODUCT_PROPERTIES += \
-    ro.charger.no_ui=false
-
-# Do not skip charger_not_need trigger by default
-PRODUCT_DEFAULT_PROPERTY_OVERRIDES += \
-    vendor.skip.charger_not_need=0
-
-# Gralloc HAL
-PRODUCT_PACKAGES += \
-    android.hardware.graphics.mapper@2.0-impl-2.1 \
-    android.hardware.graphics.allocator@2.0-impl \
-    android.hardware.graphics.allocator@2.0-service
-
-# RenderScript HAL
-PRODUCT_PACKAGES += \
-    android.hardware.renderscript@1.0-impl
-
-PRODUCT_PACKAGES += \
-        libEGL_VIVANTE \
-        libGLESv1_CM_VIVANTE \
-        libGLESv2_VIVANTE \
-        gralloc_viv.imx \
-        libGAL \
-        libGLSLC \
-        libVSC \
-        libgpuhelper \
-        libSPIRV_viv \
-        libvulkan_VIVANTE \
-        vulkan.imx \
-        libCLC \
-        libLLVM_viv \
-        libOpenCL \
-        libg2d-opencl \
-        libg2d-viv \
-        libOpenVX \
-        libOpenVXU \
-        libNNVXCBinary-evis \
-        libNNVXCBinary-evis2 \
-        libNNVXCBinary-lite \
-        libOvx12VXCBinary-evis \
-        libOvx12VXCBinary-evis2 \
-        libOvx12VXCBinary-lite \
-        libNNGPUBinary-evis \
-        libNNGPUBinary-evis2 \
-        libNNGPUBinary-lite \
-        libNNGPUBinary-ulite \
-        libNNArchPerf \
-        libarchmodelSw
-
-PRODUCT_PACKAGES += \
-    android.hardware.audio@6.0-impl:32 \
-    android.hardware.audio@2.0-service \
-    android.hardware.audio.effect@6.0-impl:32 \
-    android.hardware.power@1.3-service.imx \
-    android.hardware.light@2.0-impl \
-    android.hardware.light@2.0-service \
-    android.hardware.configstore@1.1-service \
-    configstore@1.1.policy
-
-# Thermal HAL
-PRODUCT_PACKAGES += \
-    android.hardware.thermal@2.0-service.imx
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mq/thermal_info_config_imx8mq.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/thermal_info_config_imx8mq.json
-
-# Neural Network HAL and lib
-PRODUCT_PACKAGES += \
-    libovxlib \
-    libnnrt \
-    android.hardware.neuralnetworks@1.2-service-vsi-npu-server
-
-# Usb HAL
-PRODUCT_PACKAGES += \
-    android.hardware.usb@1.1-service.imx
-
-# Bluetooth HAL
-PRODUCT_PACKAGES += \
-    android.hardware.bluetooth@1.0-impl \
-    android.hardware.bluetooth@1.0-service
-
-# WiFi HAL
-PRODUCT_PACKAGES += \
-    android.hardware.wifi@1.0-service \
-    wifilogd \
-    wificond
-
-# WiFi RRO
-PRODUCT_PACKAGES += \
-    WifiOverlay
-
-# NXP 8997 Bluetooth vendor config
-PRODUCT_PACKAGES += \
-    bt_vendor.conf
-
-# NXP 8997 Wifi and Bluetooth Combo Firmware
-PRODUCT_COPY_FILES += \
-    vendor/nxp/imx-firmware/nxp/FwImage_8997/pcieuart8997_combo_v4.bin:vendor/firmware/pcieuart8997_combo_v4.bin \
-    vendor/nxp/imx-firmware/nxp/android_wifi_mod_para.conf:vendor/firmware/wifi_mod_para.conf
-
-# Wifi regulatory
-PRODUCT_COPY_FILES += \
-    external/wireless-regdb/regulatory.db:vendor/firmware/regulatory.db \
-    external/wireless-regdb/regulatory.db.p7s:vendor/firmware/regulatory.db.p7s
-
-# hardware backed keymaster service
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_PACKAGES += \
-    android.hardware.keymaster@4.0-service.trusty
-endif
-
-PRODUCT_COPY_FILES += \
-    device/nxp/imx8m/evk_8mq/camera_config_imx8mq.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/camera_config_imx8mq.json \
-    device/nxp/imx8m/evk_8mq/external_camera_config.xml:$(TARGET_COPY_OUT_VENDOR)/etc/external_camera_config.xml
-
-# Keymaster HAL
-PRODUCT_PACKAGES += \
-    android.hardware.keymaster@4.0-service-imx
-
-# DRM HAL
-TARGET_ENABLE_MEDIADRM_64 := true
-PRODUCT_PACKAGES += \
-    android.hardware.drm@1.0-impl \
-    android.hardware.drm@1.0-service
-
-# new gatekeeper HAL
-PRODUCT_PACKAGES += \
-    android.hardware.gatekeeper@1.0-service.software-imx
-
-# Add Trusty OS backed gatekeeper and secure storage proxy
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-PRODUCT_PACKAGES += \
-    android.hardware.gatekeeper@1.0-service.trusty \
-    storageproxyd
-endif
-
-#Dumpstate HAL 1.1 support
-PRODUCT_PACKAGES += \
-    android.hardware.dumpstate@1.1-service.imx
-
-ifeq ($(PRODUCT_IMX_TRUSTY),true)
-#Oemlock HAL 1.0 support
-PRODUCT_PACKAGES += \
-    android.hardware.oemlock@1.0-service.imx
-endif
-
-ifneq ($(BUILD_TARGET_FS),ubifs)
-PRODUCT_PROPERTY_OVERRIDES += \
-    ro.frp.pst=/dev/block/by-name/presistdata
-endif
-
-PRODUCT_PACKAGES += \
-    libg1 \
-    libhantro \
-    libcodec
-
-# imx c2 codec binary
-PRODUCT_PACKAGES += \
-    lib_vpu_wrapper \
-    lib_imx_c2_videodec_common \
-    lib_imx_c2_videodec \
-    lib_imx_c2_vpuwrapper_dec \
-    lib_imx_c2_process \
-    lib_imx_c2_process_dummy_post \
-    c2_component_register \
-    c2_component_register_ms \
-    c2_component_register_wmv9 \
-    c2_component_register_ra \
-    c2_component_register_rv
->>>>>>> post_merge/android-11.0.0_1.0.0_history
-
-# Add oem unlocking option in settings.
-PRODUCT_PROPERTY_OVERRIDES += ro.frp.pst=/dev/block/by-name/presistdata
-PRODUCT_COMPATIBLE_PROPERTY_OVERRIDE := true
-<<<<<<< HEAD
-=======
-
-# Tensorflow lite camera demo
-PRODUCT_PACKAGES += \
-                    tflitecamerademo
-
-# Multi-Display launcher
-PRODUCT_PACKAGES += \
-    MultiClientInputMethod \
-    MultiDisplay
-
-# Specify rollback index for boot and vbmeta partitions
-ifneq ($(AVB_RBINDEX),)
-BOARD_AVB_ROLLBACK_INDEX := $(AVB_RBINDEX)
-else
-BOARD_AVB_ROLLBACK_INDEX := 0
-endif
-
-ifneq ($(AVB_BOOT_RBINDEX),)
-BOARD_AVB_BOOT_ROLLBACK_INDEX := $(AVB_BOOT_RBINDEX)
-else
-BOARD_AVB_BOOT_ROLLBACK_INDEX := 0
-endif
-
-#DRM Widevine 1.2 L3 support
-PRODUCT_PACKAGES += \
-    android.hardware.drm@1.0-impl \
-    android.hardware.drm@1.0-service \
-    android.hardware.drm@1.3-service.widevine \
-    android.hardware.drm@1.3-service.clearkey \
-    libwvdrmcryptoplugin \
-    libwvhidl \
-    libwvdrmengine \
-
-IMX-DEFAULT-G2D-LIB := libg2d-viv
-
-ifeq ($(PREBUILT_FSL_IMX_CODEC),true)
-ifneq ($(IMX8_BUILD_32BIT_ROOTFS),true)
-INSTALL_64BIT_LIBRARY := true
-endif
--include $(FSL_CODEC_PATH)/fsl-codec/fsl-codec.mk
-endif
-
-PRODUCT_SOONG_NAMESPACES += hardware/google/camera
-PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/camera
-
-$(call  inherit-product-if-exists, vendor/nxp-private/security/nxp_security.mk)
-
-$(call inherit-product, $(SRC_TARGET_DIR)/product/emulated_storage.mk)
->>>>>>> post_merge/android-11.0.0_1.0.0_history
diff --git a/imx8m/vp6820_8mq/vp6820_8mq_common.mk b/imx8m/vp6820_8mq/vp6820_8mq_common.mk
index d68f5d38..97efc6cb 100644
--- a/imx8m/vp6820_8mq/vp6820_8mq_common.mk
+++ b/imx8m/vp6820_8mq/vp6820_8mq_common.mk
@@ -9,12 +9,12 @@ include $(IMX_DEVICE_PATH)/SharedBoardConfig.mk
 -include device/idtech/common/imx_path/ImxPathConfig.mk
 include device/idtech/imx8m/ProductConfigCommon.mk
 
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab_nand.freescale),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab_nand.freescale)
+ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab_nand.nxp),)
+$(shell touch $(IMX_DEVICE_PATH)/fstab_nand.nxp)
 endif
 
-ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.freescale),)
-$(shell touch $(IMX_DEVICE_PATH)/fstab.freescale)
+ifneq ($(wildcard $(IMX_DEVICE_PATH)/fstab.nxp),)
+$(shell touch $(IMX_DEVICE_PATH)/fstab.nxp)
 endif
 
 # Overrides
@@ -23,10 +23,15 @@ PRODUCT_DEVICE := vp6820_8mq
 PRODUCT_MODEL := VP6820_8MQ
 
 PRODUCT_FULL_TREBLE_OVERRIDE := true
+PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/power
+PRODUCT_SOONG_NAMESPACES += hardware/google/pixel
 
 #Enable this to choose 32 bit user space build
 #IMX8_BUILD_32BIT_ROOTFS := true
 
+# Enable this to support vendor boot and boot header v3, this would be a MUST for GKI
+TARGET_USE_VENDOR_BOOT ?= true
+
 #Enable this to use dynamic partitions for the readonly partitions not touched by bootloader
 TARGET_USE_DYNAMIC_PARTITIONS ?= true
 #If the device is retrofit to have dynamic partition feature, set this variable to true to build
@@ -34,6 +39,7 @@ TARGET_USE_DYNAMIC_PARTITIONS ?= true
 TARGET_USE_RETROFIT_DYNAMIC_PARTITION ?= false
 
 ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
+  $(call inherit-product, $(SRC_TARGET_DIR)/product/virtual_ab_ota.mk)
   PRODUCT_USE_DYNAMIC_PARTITIONS := true
   BOARD_BUILD_SUPER_IMAGE_BY_DEFAULT := true
   BOARD_SUPER_IMAGE_IN_UPDATE_PACKAGE := false
@@ -64,14 +70,14 @@ PRODUCT_COPY_FILES += \
     $(IMX_DEVICE_PATH)/audio_effects.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_effects.xml \
     $(IMX_DEVICE_PATH)/audio_policy_configuration.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
     $(IMX_DEVICE_PATH)/input-port-associations.xml:$(TARGET_COPY_OUT_VENDOR)/etc/input-port-associations.xml \
-    $(IMX_DEVICE_PATH)/fstab.freescale:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.freescale \
-    $(IMX_DEVICE_PATH)/init.imx8mq.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.freescale.imx8mq.rc \
-    $(IMX_DEVICE_PATH)/init.recovery.freescale.rc:root/init.recovery.freescale.rc \
+    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR)/etc/fstab.nxp \
+    $(IMX_DEVICE_PATH)/init.imx8mq.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mq.rc \
+    $(IMX_DEVICE_PATH)/init.recovery.nxp.rc:root/init.recovery.nxp.rc \
     $(IMX_DEVICE_PATH)/early.init.cfg:$(TARGET_COPY_OUT_VENDOR)/etc/early.init.cfg \
-    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.freescale.rc \
-    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.freescale.usb.rc \
+    $(IMX_DEVICE_PATH)/init.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.rc \
+    $(IMX_DEVICE_PATH)/init.usb.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.usb.rc \
     $(IMX_DEVICE_PATH)/required_hardware.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/required_hardware.xml \
-    $(IMX_DEVICE_PATH)/ueventd.freescale.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
+    $(IMX_DEVICE_PATH)/ueventd.nxp.rc:$(TARGET_COPY_OUT_VENDOR)/ueventd.rc \
     $(LINUX_FIRMWARE_IMX_PATH)/linux-firmware-imx/firmware/sdma/sdma-imx7d.bin:$(TARGET_COPY_OUT_VENDOR)/firmware/imx/sdma/sdma-imx7d.bin \
     device/idtech/common/init/init.insmod.sh:$(TARGET_COPY_OUT_VENDOR)/bin/init.insmod.sh \
     device/idtech/common/wifi/p2p_supplicant_overlay.conf:$(TARGET_COPY_OUT_VENDOR)/etc/wifi/p2p_supplicant_overlay.conf \
@@ -83,12 +89,15 @@ PRODUCT_COPY_FILES += \
     device/idtech/common/prebuilts/mem_info.txt:$(PRODUCT_OUT)/mem_info.txt \
     device/idtech/imx8m/device_policy.sh:$(TARGET_COPY_OUT_PRODUCT)/etc/init/hw/device_policy.sh
 
-ifeq ($(TARGET_USE_DYNAMIC_PARTITIONS),true)
+# We load the fstab from device tree so this is not needed, but since no kernel modules are installed to vendor
+# boot ramdisk so far, we need this step to generate the vendor-ramdisk folder or build process would fail. This
+# can be deleted once we figure out what kernel modules should be put into the vendor boot ramdisk.
+ifeq ($(TARGET_USE_VENDOR_BOOT),true)
 PRODUCT_COPY_FILES += \
-    $(FSL_PROPRIETARY_PATH)/fsl-proprietary/dynamic_partiton_tools/lpmake:lpmake \
-    $(FSL_PROPRIETARY_PATH)/fsl-proprietary/dynamic_partiton_tools/lpmake.exe:lpmake.exe
+    $(IMX_DEVICE_PATH)/fstab.nxp:$(TARGET_COPY_OUT_VENDOR_RAMDISK)/first_stage_ramdisk/fstab.nxp
 endif
 
+
 # Audio card json
 PRODUCT_COPY_FILES += \
     device/idtech/common/audio-json/wm8524_config.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/audio/wm8524_config.json \
@@ -111,6 +120,7 @@ endif
 PRODUCT_COPY_FILES += \
     frameworks/native/data/etc/android.hardware.audio.output.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.audio.output.xml \
     frameworks/native/data/etc/android.hardware.bluetooth_le.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.bluetooth_le.xml \
+    frameworks/native/data/etc/android.hardware.camera.external.xml:vendor/etc/permissions/android.hardware.camera.external.xml \
     frameworks/native/data/etc/android.hardware.camera.front.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.front.xml \
     frameworks/native/data/etc/android.hardware.camera.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.camera.xml \
     frameworks/native/data/etc/android.hardware.ethernet.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.ethernet.xml \
@@ -123,6 +133,7 @@ PRODUCT_COPY_FILES += \
     frameworks/native/data/etc/android.hardware.usb.host.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.usb.host.xml \
     frameworks/native/data/etc/android.hardware.vulkan.level-0.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.level-0.xml \
     frameworks/native/data/etc/android.hardware.vulkan.version-1_1.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.vulkan.version-1_1.xml \
+    frameworks/native/data/etc/android.software.vulkan.deqp.level-2020-03-01.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.vulkan.deqp.level-2020-03-01.xml \
     frameworks/native/data/etc/android.hardware.wifi.direct.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.direct.xml \
     frameworks/native/data/etc/android.hardware.wifi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.xml \
     frameworks/native/data/etc/android.hardware.wifi.passpoint.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.wifi.passpoint.xml \
@@ -130,6 +141,7 @@ PRODUCT_COPY_FILES += \
     frameworks/native/data/etc/android.software.backup.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.backup.xml \
     frameworks/native/data/etc/android.software.device_admin.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.device_admin.xml \
     frameworks/native/data/etc/android.software.managed_users.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.managed_users.xml \
+    frameworks/native/data/etc/android.software.midi.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.midi.xml \
     frameworks/native/data/etc/android.software.print.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.print.xml \
     frameworks/native/data/etc/android.software.sip.voip.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.sip.voip.xml \
     frameworks/native/data/etc/android.software.verified_boot.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.software.verified_boot.xml \
@@ -140,7 +152,9 @@ PRODUCT_COPY_FILES += \
 # Vendor seccomp policy files for media components:
 PRODUCT_COPY_FILES += \
     $(IMX_DEVICE_PATH)/seccomp/mediacodec-seccomp.policy:vendor/etc/seccomp_policy/mediacodec.policy \
-    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy
+    $(IMX_DEVICE_PATH)/seccomp/mediaextractor-seccomp.policy:vendor/etc/seccomp_policy/mediaextractor.policy \
+    device/idtech/common/seccomp_policy/codec2.vendor.base.policy:vendor/etc/seccomp_policy/codec2.vendor.base.policy \
+    device/idtech/common/seccomp_policy/codec2.vendor.ext.policy:vendor/etc/seccomp_policy/codec2.vendor.ext.policy
 
 PRODUCT_COPY_FILES += \
     device/idtech/imx8m/vp6820_8mq/powerhint_imx8mq.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/powerhint_imx8mq.json
@@ -149,7 +163,7 @@ PRODUCT_COPY_FILES += \
 PRODUCT_COPY_FILES += \
     device/idtech/common/tools/fastboot_imx_flashall.bat:fastboot_imx_flashall.bat \
     device/idtech/common/tools/fastboot_imx_flashall.sh:fastboot_imx_flashall.sh \
-    device/idtech/common/tools/fsl-sdcard-partition.sh:fsl-sdcard-partition.sh \
+    device/idtech/common/tools/imx-sdcard-partition.sh:imx-sdcard-partition.sh \
     device/idtech/common/tools/uuu_imx_android_flash.bat:uuu_imx_android_flash.bat \
     device/idtech/common/tools/uuu_imx_android_flash.sh:uuu_imx_android_flash.sh
 
@@ -176,7 +190,15 @@ PRODUCT_COPY_FILES += \
 
 # HWC2 HAL
 PRODUCT_PACKAGES += \
-    android.hardware.graphics.composer@2.3-service
+    android.hardware.graphics.composer@2.4-service
+
+# Charger Mode
+PRODUCT_PRODUCT_PROPERTIES += \
+    ro.charger.no_ui=false
+
+# Do not skip charger_not_need trigger by default
+PRODUCT_DEFAULT_PROPERTY_OVERRIDES += \
+    vendor.skip.charger_not_need=0
 
 # Gralloc HAL
 PRODUCT_PACKAGES += \
@@ -219,12 +241,12 @@ PRODUCT_PACKAGES += \
         libNNGPUBinary-ulite \
         libNNArchPerf \
         libarchmodelSw \
-        gatekeeper.imx
+        kioskled.imx
 
 PRODUCT_PACKAGES += \
-    android.hardware.audio@5.0-impl:32 \
+    android.hardware.audio@6.0-impl:32 \
     android.hardware.audio@2.0-service \
-    android.hardware.audio.effect@5.0-impl:32 \
+    android.hardware.audio.effect@6.0-impl:32 \
     android.hardware.power@1.3-service.imx \
     android.hardware.light@2.0-impl \
     android.hardware.light@2.0-service \
@@ -261,6 +283,10 @@ PRODUCT_PACKAGES += \
     wifilogd \
     wificond
 
+# WiFi RRO
+PRODUCT_PACKAGES += \
+    WifiOverlay
+
 # BCM Bluetooth vendor config
 PRODUCT_PACKAGES += \
     bt_vendor.conf
@@ -283,16 +309,16 @@ PRODUCT_COPY_FILES += \
 # hardware backed keymaster service
 ifeq ($(PRODUCT_IMX_TRUSTY),true)
 PRODUCT_PACKAGES += \
-    android.hardware.keymaster@3.0-service.trusty
+    android.hardware.keymaster@4.0-service.trusty
 endif
 
 PRODUCT_COPY_FILES += \
-    device/idtech/imx8m/vp6820_8mq/camera_config_imx8mq.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/camera_config_imx8mq.json
+    device/idtech/imx8m/vp6820_8mq/camera_config_imx8mq.json:$(TARGET_COPY_OUT_VENDOR)/etc/configs/camera_config_imx8mq.json \
+    device/idtech/imx8m/vp6820_8mq/external_camera_config.xml:$(TARGET_COPY_OUT_VENDOR)/etc/external_camera_config.xml
 
 # Keymaster HAL
 PRODUCT_PACKAGES += \
-    android.hardware.keymaster@3.0-impl \
-    android.hardware.keymaster@3.0-service
+    android.hardware.keymaster@4.0-service-imx
 
 # DRM HAL
 TARGET_ENABLE_MEDIADRM_64 := true
@@ -302,19 +328,18 @@ PRODUCT_PACKAGES += \
 
 # new gatekeeper HAL
 PRODUCT_PACKAGES += \
-    android.hardware.gatekeeper@1.0-impl \
-    android.hardware.gatekeeper@1.0-service
+    android.hardware.gatekeeper@1.0-service.software-imx
 
 # Add Trusty OS backed gatekeeper and secure storage proxy
 ifeq ($(PRODUCT_IMX_TRUSTY),true)
 PRODUCT_PACKAGES += \
-    gatekeeper.trusty \
+    android.hardware.gatekeeper@1.0-service.trusty \
     storageproxyd
 endif
 
-#Dumpstate HAL 1.0 support
+#Dumpstate HAL 1.1 support
 PRODUCT_PACKAGES += \
-    android.hardware.dumpstate@1.0-service.imx
+    android.hardware.dumpstate@1.1-service.imx
 
 ifeq ($(PRODUCT_IMX_TRUSTY),true)
 #Oemlock HAL 1.0 support
@@ -327,10 +352,6 @@ PRODUCT_PROPERTY_OVERRIDES += \
     ro.frp.pst=/dev/block/by-name/presistdata
 endif
 
-# ro.product.first_api_level indicates the first api level the device has commercially launched on.
-PRODUCT_PROPERTY_OVERRIDES += \
-    ro.product.first_api_level=28
-
 PRODUCT_PACKAGES += \
     libg1 \
     libhantro \
@@ -368,29 +389,29 @@ endif
 PRODUCT_PACKAGES += \
     MultiClientInputMethod
 
-# Specify rollback index for bootloader and for AVB
+# Specify rollback index for boot and vbmeta partitions
 ifneq ($(AVB_RBINDEX),)
 BOARD_AVB_ROLLBACK_INDEX := $(AVB_RBINDEX)
 else
 BOARD_AVB_ROLLBACK_INDEX := 0
 endif
 
+ifneq ($(AVB_BOOT_RBINDEX),)
+BOARD_AVB_BOOT_ROLLBACK_INDEX := $(AVB_BOOT_RBINDEX)
+else
+BOARD_AVB_BOOT_ROLLBACK_INDEX := 0
+endif
+
 #DRM Widevine 1.2 L3 support
 PRODUCT_PACKAGES += \
     android.hardware.drm@1.0-impl \
     android.hardware.drm@1.0-service \
-    android.hardware.drm@1.2-service.widevine \
-    android.hardware.drm@1.2-service.clearkey \
+    android.hardware.drm@1.3-service.widevine \
+    android.hardware.drm@1.3-service.clearkey \
     libwvdrmcryptoplugin \
     libwvhidl \
     libwvdrmengine \
 
-ifneq (,$(filter userdebug eng,$(TARGET_BUILD_VARIANT)))
-$(call inherit-product, $(SRC_TARGET_DIR)/product/gsi_keys.mk)
-PRODUCT_PACKAGES += \
-    adb_debug.prop
-endif
-
 IMX-DEFAULT-G2D-LIB := libg2d-viv
 
 ifeq ($(PREBUILT_FSL_IMX_CODEC),true)
@@ -400,8 +421,13 @@ endif
 -include $(FSL_CODEC_PATH)/fsl-codec/fsl-codec.mk
 endif
 
+PRODUCT_SOONG_NAMESPACES += hardware/google/camera
+PRODUCT_SOONG_NAMESPACES += vendor/nxp-opensource/imx/camera
+
 $(call  inherit-product-if-exists, vendor/nxp-private/security/nxp_security.mk)
 
+$(call inherit-product, $(SRC_TARGET_DIR)/product/emulated_storage.mk)
+
 # Copy Quectel vendor RIL
 PRODUCT_COPY_FILES += \
     vendor/quectel/libstdc++.so:/vendor/lib64/libstdc++.so \
diff --git a/imx8m/vp6820_8mq/vp6820_8mq_drm.mk b/imx8m/vp6820_8mq/vp6820_8mq_drm.mk
index 5921aaef..495b2ca0 100644
--- a/imx8m/vp6820_8mq/vp6820_8mq_drm.mk
+++ b/imx8m/vp6820_8mq/vp6820_8mq_drm.mk
@@ -8,8 +8,8 @@ PRODUCT_IMX_DRM := true
 # copy drm specific files before inherit vp6820_8mq.mk, otherwise copy is ignored
 PRODUCT_COPY_FILES += \
 	$(IMX_DEVICE_PATH)/audio_policy_configuration_drm.xml:$(TARGET_COPY_OUT_VENDOR)/etc/audio_policy_configuration.xml \
-	$(IMX_DEVICE_PATH)/init.imx8mq.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.freescale.imx8mq.main.rc \
-	$(IMX_DEVICE_PATH)/init.imx8mq.drm.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.freescale.imx8mq.rc \
+	$(IMX_DEVICE_PATH)/init.imx8mq.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mq.main.rc \
+	$(IMX_DEVICE_PATH)/init.imx8mq.drm.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/hw/init.nxp.imx8mq.rc \
 	$(TOPDIR)device/idtech/imx8m/tee-supplicant.rc:$(TARGET_COPY_OUT_VENDOR)/etc/init/tee-supplicant.rc \
 
 
