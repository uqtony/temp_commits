3d3fad3b George.Huang 2022-05-06

AOS-936: GKI: remove unused kernel configs

- change audio drivers to modules
  CONFIG_SND_SOC_IMX_RT5640=m
  CONFIG_SND_SOC_RT5640=m
  CONFIG_SND_SOC_IMX_TLV320AIC31XX=m
  CONFIG_SND_SOC_TLV320AIC31XX=m

- remove unused kernel configs

Change-Id: I6394dad9f1ddaeb49182e55dd4017bea7e857b3f

diff --git a/imx8m/bigcypress_8mp/SharedBoardConfig.mk b/imx8m/bigcypress_8mp/SharedBoardConfig.mk
index e75608f5..eddae0de 100644
--- a/imx8m/bigcypress_8mp/SharedBoardConfig.mk
+++ b/imx8m/bigcypress_8mp/SharedBoardConfig.mk
@@ -1,7 +1,7 @@
 # -------@block_kernel_bootimg-------
 KERNEL_NAME := Image.lz4
 TARGET_KERNEL_ARCH := arm64
-#IMX8MP_USES_GKI := true
+IMX8MP_USES_GKI := true
 
 #NXP 8997 wifi driver module
 BOARD_VENDOR_KERNEL_MODULES += \
@@ -82,6 +82,13 @@ BOARD_VENDOR_KERNEL_MODULES +=     \
     $(KERNEL_OUT)/drivers/input/touchscreen/synaptics_dsx/synaptics_dsx_i2c.ko
 endif
 
+# kernel modules add by IDTECH
+# CONFIG_I2C_CHARDEV: i2c-dev.ko, for userspace(i2cdetect) to access /dev/i2c*
+ifeq ($(IMX8MQ_USES_GKI),true)
+BOARD_VENDOR_KERNEL_MODULES += \
+    $(KERNEL_OUT)/drivers/i2c/i2c-dev.ko
+endif
+
 ifeq ($(POWERSAVE),true)
 BOARD_VENDOR_KERNEL_MODULES += \
     $(KERNEL_OUT)/drivers/soc/imx/lpa_ctrl.ko \
diff --git a/imx8m/bigcypress_8mp/android_addition_defconfig b/imx8m/bigcypress_8mp/android_addition_defconfig
index 1473454a..abcd9e98 100644
--- a/imx8m/bigcypress_8mp/android_addition_defconfig
+++ b/imx8m/bigcypress_8mp/android_addition_defconfig
@@ -1,265 +1,31 @@
-CONFIG_LIBNVDIMM=y
-CONFIG_OF_PMEM=y
 CONFIG_IDG_SPI=y
 # CONFIG_USB_NET_QMI_WWAN is not set
 CONFIG_SINGLE_LOGO=y
 CONFIG_SPLASH_SCREEN_CENTERED=y
 CONFIG_USB_SERIAL=y
 CONFIG_USB_SERIAL_OPTION=y
-CONFIG_INPUT_VL53L1X_ULD=y
-CONFIG_SND_SOC_IMX_RT5640=y
-CONFIG_SND_SOC_RT5640=y
-CONFIG_KEYBOARD_MATRIX=y
-CONFIG_TYPEC_HD3SS3220=y
-CONFIG_MXC_DUAL_MIPI_CAMERA=y
-CONFIG_MXC_CAMERA_OV2685_MIPI_V2=y
-CONFIG_INPUT_ST=y
-CONFIG_INPUT_ECOMPASS=y
-CONFIG_INPUT_LSM303AGR=y
-CONFIG_INPUT_LSM303AGR_I2C=y
-CONFIG_TOUCHSCREEN_GOODIX=y
-CONFIG_DRM_PANEL_DATAIMAGE_5INCHLCM=y
 CONFIG_DEBUG_FS=y
-CONFIG_PPP=y
-CONFIG_PPP_ASYNC=y
-CONFIG_PPP_SYNC_TTY=y
-CONFIG_OF_OVERLAY=y
 CONFIG_TASKSTATS=y
 CONFIG_DEVMEM=y
-CONFIG_ION_UNMAPPED_HEAP=y
-CONFIG_KFENCE_SAMPLE_INTERVAL=500
-CONFIG_KFENCE_NUM_OBJECTS=63
-CONFIG_CMA_SYSFS=y
-CONFIG_CMA_DEBUGFS=y
-CONFIG_DMABUF_SYSFS_STATS=y
-CONFIG_DMABUF_HEAPS_DEFERRED_FREE=y
-CONFIG_DMABUF_HEAPS_PAGE_POOL=y
-CONFIG_GPU_OLD_RESET_METHOD=y
+CONFIG_I2C_CHARDEV=m
 
-CONFIG_PARAVIRT=y
-CONFIG_NETFILTER_XT_TARGET_CT=y
-CONFIG_MVMDIO=y
-CONFIG_MDIO_BITBANG=y
 CONFIG_I2C_SLAVE=y
 CONFIG_GPIOLIB=y
-CONFIG_GPIO_GENERIC_PLATFORM=y
+CONFIG_PINCTRL=y
+CONFIG_FB=y
 CONFIG_POWER_RESET_BRCMSTB=y
 CONFIG_REGULATOR=y
 CONFIG_DRM_I2C_CH7006=m
 CONFIG_DRM_I2C_SIL164=m
-CONFIG_TMPFS=y
-CONFIG_BCM_FLEXRM_MBOX=y
-CONFIG_PHY_SAMSUNG_USB2=y
 CONFIG_ARM_TIMER_SP804=y
-CONFIG_COMMON_CLK_VERSATILE=y
 CONFIG_CLK_SP810=y
 CONFIG_USB_SNP_UDC_PLAT=y
 CONFIG_USB_BDC_UDC=y
-CONFIG_BCM_SBA_RAID=m
-CONFIG_WLAN_VENDOR_NXP=y
-CONFIG_MWL8K=y
-CONFIG_WLAN_VENDOR_MARVELL=m
 
 # CONFIG_KVM is not set
-# CONFIG_MTD_UBI is not set
-# CONFIG_VGA_ARB is not set
 # CONFIG_ARCH_SUNXI is not set
-# CONFIG_ARCH_ALPINE is not set
-# CONFIG_ARCH_BCM2835 is not set
-# CONFIG_ARCH_BCM_IPROC is not set
-# CONFIG_ARCH_BERLIN is not set
-# CONFIG_ARCH_BRCMSTB is not set
-# CONFIG_ARCH_EXYNOS is not set
-# CONFIG_ARCH_LAYERSCAPE is not set
-# CONFIG_ARCH_LG1K is not set
 # CONFIG_ARCH_HISI is not set
-# CONFIG_ARCH_MEDIATEK is not set
-# CONFIG_ARCH_MESON is not set
-# CONFIG_ARCH_MVEBU is not set
 # CONFIG_ARCH_QCOM is not set
-# CONFIG_ARCH_ROCKCHIP is not set
-# CONFIG_ARCH_SEATTLE is not set
-# CONFIG_ARCH_RENESAS is not set
-# CONFIG_ARCH_R8A7795 is not set
-# CONFIG_ARCH_R8A7796 is not set
-# CONFIG_ARCH_STRATIX10 is not set
-# CONFIG_ARCH_TEGRA is not set
 # CONFIG_ARCH_SPRD is not set
-# CONFIG_ARCH_THUNDER is not set
-# CONFIG_ARCH_THUNDER2 is not set
-# CONFIG_ARCH_UNIPHIER is not set
-# CONFIG_ARCH_VEXPRESS is not set
-# CONFIG_ARCH_XGENE is not set
-# CONFIG_ARCH_ZX is not set
-# CONFIG_ARCH_ZYNQMP is not set
-# CONFIG_ARCH_TEGRA_132_SOC is not set
-# CONFIG_ARCH_TEGRA_210_SOC is not set
-# CONFIG_ARCH_TEGRA_186_SOC is not set
-# CONFIG_PCI_HISI is not set
-# CONFIG_PCIE_KIRIN is not set
-# CONFIG_PCI_AARDVARK is not set
-# CONFIG_PCIE_RCAR is not set
-# CONFIG_PCIE_ROCKCHIP is not set
-# CONFIG_XEN is not set
-# CONFIG_SPI_FSL_QUADSPI is not set
-# CONFIG_XEN_BLKDEV_BACKEND is not set
-# CONFIG_AHCI_MVEBU is not set
-# CONFIG_SATA_RCAR is not set
-# CONFIG_NET_XGENE is not set
-# CONFIG_MVNETA is not set
-# CONFIG_MVPP2 is not set
-# CONFIG_RAVB is not set
-# CONFIG_MESON_GXL_PHY is not set
-# CONFIG_XEN_NETDEV_BACKEND is not set
-# CONFIG_INPUT_PM8941_PWRKEY is not set
-# CONFIG_INPUT_HISI_POWERKEY is not set
-# CONFIG_SERIAL_8250_BCM2835AUX is not set
-# CONFIG_SERIAL_8250_MT6577 is not set
-# CONFIG_SERIAL_8250_UNIPHIER is not set
-# CONFIG_SERIAL_MESON is not set
-# CONFIG_SERIAL_MESON_CONSOLE is not set
 # CONFIG_SERIAL_SAMSUNG is not set
-# CONFIG_SERIAL_SAMSUNG_CONSOLE is not set
-# CONFIG_SERIAL_TEGRA is not set
-# CONFIG_SERIAL_SH_SCI is not set
-# CONFIG_SERIAL_SH_SCI_NR_UARTS is not set
-# CONFIG_SERIAL_SH_SCI_CONSOLE is not set
-# CONFIG_SERIAL_MSM is not set
-# CONFIG_SERIAL_MSM_CONSOLE is not set
-# CONFIG_SERIAL_XILINX_PS_UART is not set
-# CONFIG_SERIAL_XILINX_PS_UART_CONSOLE is not set
-# CONFIG_SERIAL_MVEBU_UART is not set
-# CONFIG_I2C_BCM2835 is not set
-# CONFIG_I2C_MESON is not set
-# CONFIG_I2C_MV64XXX is not set
-# CONFIG_I2C_PXA is not set
-# CONFIG_I2C_QUP is not set
-# CONFIG_I2C_SH_MOBILE is not set
-# CONFIG_I2C_TEGRA is not set
-# CONFIG_I2C_UNIPHIER_F is not set
-# CONFIG_I2C_RCAR is not set
-# CONFIG_SPI_BCM2835 is not set
-# CONFIG_SPI_BCM2835AUX is not set
-# CONFIG_SPI_MESON_SPICC is not set
-# CONFIG_SPI_ORION is not set
-# CONFIG_SPI_ROCKCHIP is not set
-# CONFIG_SPI_QUP is not set
-# CONFIG_SPI_S3C64XX is not set
-# CONFIG_PINCTRL_MAX77620 is not set
-# CONFIG_PINCTRL_IPQ8074 is not set
-# CONFIG_PINCTRL_MSM8916 is not set
-# CONFIG_PINCTRL_MSM8994 is not set
-# CONFIG_PINCTRL_MSM8996 is not set
-# CONFIG_PINCTRL_QDF2XXX is not set
-# CONFIG_PINCTRL_QCOM_SPMI_PMIC is not set
-# CONFIG_GPIO_RCAR is not set
-# CONFIG_GPIO_XGENE_SB is not set
-# CONFIG_POWER_RESET_MSM is not set
-# CONFIG_ROCKCHIP_THERMAL is not set
-# CONFIG_EXYNOS_THERMAL is not set
-# CONFIG_S3C2410_WATCHDOG is not set
-# CONFIG_MESON_GXBB_WATCHDOG is not set
-# CONFIG_MESON_WATCHDOG is not set
-# CONFIG_RENESAS_WDT is not set
-# CONFIG_UNIPHIER_WATCHDOG is not set
-# CONFIG_BCM2835_WDT is not set
-# CONFIG_MFD_AXP20X_RSB is not set
-# CONFIG_MFD_EXYNOS_LPASS is not set
-# CONFIG_MFD_HI655X_PMIC is not set
-# CONFIG_MFD_SPMI_PMIC is not set
-# CONFIG_REGULATOR_AXP20X is not set
-# CONFIG_REGULATOR_HI655X is not set
-# CONFIG_REGULATOR_QCOM_SMD_RPM is not set
-# CONFIG_RPMSG is not set
-# CONFIG_IR_MESON is not set
-# CONFIG_VIDEO_SAMSUNG_S5P_JPEG is not set
-# CONFIG_VIDEO_SAMSUNG_S5P_MFC is not set
-# CONFIG_VIDEO_SAMSUNG_EXYNOS_GSC is not set
-# CONFIG_VIDEO_RENESAS_FCP is not set
-# CONFIG_VIDEO_RENESAS_VSP1 is not set
-# CONFIG_ROCKCHIP_ANALOGIX_DP is not set
-# CONFIG_ROCKCHIP_CDN_DP is not set
-# CONFIG_ROCKCHIP_DW_HDMI is not set
-# CONFIG_ROCKCHIP_DW_MIPI_DSI is not set
-# CONFIG_ROCKCHIP_INNO_HDMI is not set
-# CONFIG_SND_BCM2835_SOC_I2S is not set
-# CONFIG_SND_SOC_SAMSUNG is not set
-# CONFIG_SND_SOC_RCAR is not set
-# CONFIG_DRM_NOUVEAU is not set
-# CONFIG_DRM_EXYNOS is not set
-# CONFIG_DRM_EXYNOS5433_DECON is not set
-# CONFIG_DRM_EXYNOS7_DECON is not set
-# CONFIG_DRM_EXYNOS_DSI is not set
-# CONFIG_DRM_EXYNOS_DP is not set
-# CONFIG_DRM_EXYNOS_HDMI is not set
-# CONFIG_DRM_EXYNOS_MIC is not set
-# CONFIG_DRM_ROCKCHIP is not set
-# CONFIG_DRM_RCAR_DU is not set
-# CONFIG_DRM_RCAR_LVDS is not set
-# CONFIG_DRM_RCAR_VSP is not set
-# CONFIG_DRM_TEGRA is not set
-# CONFIG_DRM_VC4 is not set
-# CONFIG_DRM_MESON is not set
-# CONFIG_USB_XHCI_TEGRA is not set
-# CONFIG_USB_EHCI_MSM is not set
-# CONFIG_USB_EHCI_EXYNOS is not set
-# CONFIG_USB_OHCI_EXYNOS is not set
-# CONFIG_USB_RENESAS_USBHS is not set
-# CONFIG_USB_QCOM_8X16_PHY is not set
-# CONFIG_RASPBERRYPI_FIRMWARE is not set
-# CONFIG_PHY_SUN4I_USB is not set
-# CONFIG_PHY_HI6220_USB is not set
-# CONFIG_PHY_RCAR_GEN3_USB2 is not set
-# CONFIG_PHY_ROCKCHIP_EMMC is not set
-# CONFIG_PHY_ROCKCHIP_INNO_USB2 is not set
-# CONFIG_PHY_ROCKCHIP_PCIE is not set
-# CONFIG_PHY_TEGRA_XUSB is not set
-# CONFIG_QCOM_L2_PMU is not set
-# CONFIG_QCOM_L3_PMU is not set
-# CONFIG_PWM_MESON is not set
-# CONFIG_PWM_ROCKCHIP is not set
-# CONFIG_PWM_SAMSUNG is not set
-# CONFIG_PWM_TEGRA is not set
-# CONFIG_QCOM_SMEM is not set
-# CONFIG_QCOM_SMD_RPM is not set
-# CONFIG_QCOM_SMP2P is not set
-# CONFIG_QCOM_SMSM is not set
-# CONFIG_ROCKCHIP_PM_DOMAINS is not set
-# CONFIG_ARCH_TEGRA_132_SOC is not set
-# CONFIG_ARCH_TEGRA_210_SOC is not set
-# CONFIG_ARCH_TEGRA_186_SOC is not set
-# CONFIG_EXYNOS_ADC is not set
-# CONFIG_ROCKCHIP_SARADC is not set
-# CONFIG_PWM_BCM2835 is not set
-# CONFIG_RPMSG_QCOM_SMD is not set
-# CONFIG_RASPBERRYPI_POWER is not set
-# CONFIG_BCM2835_MBOX is not set
-# CONFIG_HI6220_MBOX is not set
-# CONFIG_ROCKCHIP_IOMMU is not set
-# CONFIG_HWSPINLOCK_QCOM is not set
-# CONFIG_COMMON_CLK_QCOM is not set
-# CONFIG_QCOM_CLK_SMD_RPM is not set
-# CONFIG_IPQ_GCC_8074 is not set
-# CONFIG_MSM_GCC_8916 is not set
-# CONFIG_MSM_GCC_8994 is not set
-# CONFIG_MSM_MMCC_8996 is not set
-# CONFIG_USB_RENESAS_USBHS_UDC is not set
-# CONFIG_MMC_SDHCI_OF_ESDHC is not set
-# CONFIG_XEN_GNTDEV is not set
-# CONFIG_XEN_GRANT_DEV_ALLOC is not set
-# CONFIG_RCAR_DMAC is not set
-# CONFIG_TEGRA20_APB_DMA is not set
-# CONFIG_QCOM_BAM_DMA is not set
-# CONFIG_K3_DMA is not set
-# CONFIG_DMA_BCM2835 is not set
-# CONFIG_RTC_DRV_XGENE is not set
-# CONFIG_RTC_DRV_TEGRA is not set
-# CONFIG_RTC_DRV_S3C is not set
-# CONFIG_MMC_DW_ROCKCHIP is not set
-# CONFIG_MMC_SUNXI is not set
-# CONFIG_MMC_BCM2835 is not set
-# CONFIG_MMC_SDHCI_TEGRA is not set
-# CONFIG_MMC_MESON_GX is not set
-# CONFIG_MMC_SDHCI_MSM is not set
-# CONFIG_MMC_SDHI is not set
-# CONFIG_MMC_DW_EXYNOS is not set
+# CONFIG_LOGO is not set
diff --git a/imx8m/bigcypress_8mq/SharedBoardConfig.mk b/imx8m/bigcypress_8mq/SharedBoardConfig.mk
index fa8ef3f4..e71ac494 100644
--- a/imx8m/bigcypress_8mq/SharedBoardConfig.mk
+++ b/imx8m/bigcypress_8mq/SharedBoardConfig.mk
@@ -72,6 +72,16 @@ BOARD_VENDOR_KERNEL_MODULES += \
     $(KERNEL_OUT)/drivers/input/touchscreen/synaptics_dsx/synaptics_dsx_i2c.ko
 endif
 
+# kernel modules add by IDTECH
+# CONFIG_SND_SOC_IMX_RT5640: snd-soc-imx-rt5640.ko, snd-soc-rt5640.ko, audio codec
+# CONFIG_I2C_CHARDEV: i2c-dev.ko, for userspace(i2cdetect) to access /dev/i2c*
+ifeq ($(IMX8MQ_USES_GKI),true)
+BOARD_VENDOR_KERNEL_MODULES += \
+    $(KERNEL_OUT)/drivers/i2c/i2c-dev.ko \
+    $(KERNEL_OUT)/sound/soc/codecs/snd-soc-rt5640.ko \
+    $(KERNEL_OUT)/sound/soc/fsl/snd-soc-imx-rt5640.ko
+endif
+
 # CONFIG_ZRAM: zram.ko, lzo.ko, lzo-rle.ko compressed ram using LZ coding.
 # CONFIG_ZSMALLOC: zsmalloc.ko
 # CONFIG_CLK_IMX8MP: clk-imx8mq.ko
diff --git a/imx8m/bigcypress_8mq/android_addition_defconfig b/imx8m/bigcypress_8mq/android_addition_defconfig
index 99e017ab..d4215f0c 100644
--- a/imx8m/bigcypress_8mq/android_addition_defconfig
+++ b/imx8m/bigcypress_8mq/android_addition_defconfig
@@ -5,10 +5,10 @@ CONFIG_SPLASH_SCREEN_CENTERED=y
 CONFIG_USB_SERIAL=y
 CONFIG_USB_SERIAL_OPTION=y
 CONFIG_INPUT_VL53L1X_ULD=y
-CONFIG_SND_SOC_IMX_RT5640=y
-CONFIG_SND_SOC_RT5640=y
-CONFIG_SND_SOC_IMX_TLV320AIC31XX=y
-CONFIG_SND_SOC_TLV320AIC31XX=y
+CONFIG_SND_SOC_IMX_RT5640=m
+CONFIG_SND_SOC_RT5640=m
+CONFIG_SND_SOC_IMX_TLV320AIC31XX=m
+CONFIG_SND_SOC_TLV320AIC31XX=m
 CONFIG_KEYBOARD_MATRIX=y
 CONFIG_TYPEC_HD3SS3220=y
 CONFIG_MXC_DUAL_MIPI_CAMERA=y
@@ -25,11 +25,9 @@ CONFIG_DEBUG_FS=y
 CONFIG_PPP=y
 CONFIG_PPP_ASYNC=y
 CONFIG_PPP_SYNC_TTY=y
-CONFIG_LEDS_TRIGGERS=y
-CONFIG_LEDS_TRIGGER_TIMER=y
+CONFIG_WLAN_VENDOR_BROADCOM=y
 CONFIG_BRCMUTIL=m
 CONFIG_BRCMFMAC=m
-CONFIG_BRCMFMAC_PROTO_BCDC=y
 CONFIG_BRCMFMAC_PROTO_MSGBUF=y
 CONFIG_BRCMFMAC_SDIO=y
 CONFIG_BRCMFMAC_PCIE=y
@@ -39,233 +37,29 @@ CONFIG_RFKILL_INPUT=y
 CONFIG_RFKILL_GPIO=y
 CONFIG_TASKSTATS=y
 CONFIG_DEVMEM=y
+CONFIG_USB_PRINTER=y
+CONFIG_MLX90614=y
+CONFIG_HID_CP2112=y
+CONFIG_INPUT_POLLDEV=y
+CONFIG_I2C_CHARDEV=m
 
-CONFIG_PARAVIRT=y
-CONFIG_NETFILTER_XT_TARGET_CT=y
-CONFIG_MVMDIO=y
-CONFIG_MDIO_BITBANG=y
 CONFIG_I2C_SLAVE=y
 CONFIG_GPIOLIB=y
-CONFIG_GPIO_GENERIC_PLATFORM=y
+CONFIG_PINCTRL=y
+CONFIG_FB=y
 CONFIG_POWER_RESET_BRCMSTB=y
 CONFIG_REGULATOR=y
 CONFIG_DRM_I2C_CH7006=m
 CONFIG_DRM_I2C_SIL164=m
-CONFIG_TMPFS=y
-CONFIG_BCM_FLEXRM_MBOX=y
-CONFIG_PHY_SAMSUNG_USB2=y
 CONFIG_ARM_TIMER_SP804=y
-CONFIG_COMMON_CLK_VERSATILE=y
 CONFIG_CLK_SP810=y
 CONFIG_USB_SNP_UDC_PLAT=y
 CONFIG_USB_BDC_UDC=y
-CONFIG_BCM_SBA_RAID=m
-CONFIG_USB_PRINTER=y
-CONFIG_MLX90614=y
-CONFIG_HID_CP2112=y
 
 # CONFIG_KVM is not set
-# CONFIG_MTD_UBI is not set
-# CONFIG_VGA_ARB is not set
 # CONFIG_ARCH_SUNXI is not set
-# CONFIG_ARCH_ALPINE is not set
-# CONFIG_ARCH_BCM2835 is not set
-# CONFIG_ARCH_BCM_IPROC is not set
-# CONFIG_ARCH_BERLIN is not set
-# CONFIG_ARCH_BRCMSTB is not set
-# CONFIG_ARCH_EXYNOS is not set
-# CONFIG_ARCH_LAYERSCAPE is not set
-# CONFIG_ARCH_LG1K is not set
 # CONFIG_ARCH_HISI is not set
-# CONFIG_ARCH_MEDIATEK is not set
-# CONFIG_ARCH_MESON is not set
-# CONFIG_ARCH_MVEBU is not set
 # CONFIG_ARCH_QCOM is not set
-# CONFIG_ARCH_ROCKCHIP is not set
-# CONFIG_ARCH_SEATTLE is not set
-# CONFIG_ARCH_RENESAS is not set
-# CONFIG_ARCH_R8A7795 is not set
-# CONFIG_ARCH_R8A7796 is not set
-# CONFIG_ARCH_STRATIX10 is not set
-# CONFIG_ARCH_TEGRA is not set
 # CONFIG_ARCH_SPRD is not set
-# CONFIG_ARCH_THUNDER is not set
-# CONFIG_ARCH_THUNDER2 is not set
-# CONFIG_ARCH_UNIPHIER is not set
-# CONFIG_ARCH_VEXPRESS is not set
-# CONFIG_ARCH_XGENE is not set
-# CONFIG_ARCH_ZX is not set
-# CONFIG_ARCH_ZYNQMP is not set
-# CONFIG_ARCH_TEGRA_132_SOC is not set
-# CONFIG_ARCH_TEGRA_210_SOC is not set
-# CONFIG_ARCH_TEGRA_186_SOC is not set
-# CONFIG_PCI_HISI is not set
-# CONFIG_PCIE_KIRIN is not set
-# CONFIG_PCI_AARDVARK is not set
-# CONFIG_PCIE_RCAR is not set
-# CONFIG_PCIE_ROCKCHIP is not set
-# CONFIG_XEN is not set
-# CONFIG_SPI_FSL_QUADSPI is not set
-# CONFIG_XEN_BLKDEV_BACKEND is not set
-# CONFIG_AHCI_MVEBU is not set
-# CONFIG_SATA_RCAR is not set
-# CONFIG_NET_XGENE is not set
-# CONFIG_MVNETA is not set
-# CONFIG_MVPP2 is not set
-# CONFIG_RAVB is not set
-# CONFIG_MESON_GXL_PHY is not set
-# CONFIG_XEN_NETDEV_BACKEND is not set
-# CONFIG_INPUT_PM8941_PWRKEY is not set
-# CONFIG_INPUT_HISI_POWERKEY is not set
-# CONFIG_SERIAL_8250_BCM2835AUX is not set
-# CONFIG_SERIAL_8250_MT6577 is not set
-# CONFIG_SERIAL_8250_UNIPHIER is not set
-# CONFIG_SERIAL_MESON is not set
-# CONFIG_SERIAL_MESON_CONSOLE is not set
 # CONFIG_SERIAL_SAMSUNG is not set
-# CONFIG_SERIAL_SAMSUNG_CONSOLE is not set
-# CONFIG_SERIAL_TEGRA is not set
-# CONFIG_SERIAL_SH_SCI is not set
-# CONFIG_SERIAL_SH_SCI_NR_UARTS is not set
-# CONFIG_SERIAL_SH_SCI_CONSOLE is not set
-# CONFIG_SERIAL_MSM is not set
-# CONFIG_SERIAL_MSM_CONSOLE is not set
-# CONFIG_SERIAL_XILINX_PS_UART is not set
-# CONFIG_SERIAL_XILINX_PS_UART_CONSOLE is not set
-# CONFIG_SERIAL_MVEBU_UART is not set
-# CONFIG_I2C_BCM2835 is not set
-# CONFIG_I2C_MESON is not set
-# CONFIG_I2C_MV64XXX is not set
-# CONFIG_I2C_PXA is not set
-# CONFIG_I2C_QUP is not set
-# CONFIG_I2C_SH_MOBILE is not set
-# CONFIG_I2C_TEGRA is not set
-# CONFIG_I2C_UNIPHIER_F is not set
-# CONFIG_I2C_RCAR is not set
-# CONFIG_SPI_BCM2835 is not set
-# CONFIG_SPI_BCM2835AUX is not set
-# CONFIG_SPI_MESON_SPICC is not set
-# CONFIG_SPI_ORION is not set
-# CONFIG_SPI_ROCKCHIP is not set
-# CONFIG_SPI_QUP is not set
-# CONFIG_SPI_S3C64XX is not set
-# CONFIG_PINCTRL_MAX77620 is not set
-# CONFIG_PINCTRL_IPQ8074 is not set
-# CONFIG_PINCTRL_MSM8916 is not set
-# CONFIG_PINCTRL_MSM8994 is not set
-# CONFIG_PINCTRL_MSM8996 is not set
-# CONFIG_PINCTRL_QDF2XXX is not set
-# CONFIG_PINCTRL_QCOM_SPMI_PMIC is not set
-# CONFIG_GPIO_RCAR is not set
-# CONFIG_GPIO_XGENE_SB is not set
-# CONFIG_POWER_RESET_MSM is not set
-# CONFIG_ROCKCHIP_THERMAL is not set
-# CONFIG_EXYNOS_THERMAL is not set
-# CONFIG_S3C2410_WATCHDOG is not set
-# CONFIG_MESON_GXBB_WATCHDOG is not set
-# CONFIG_MESON_WATCHDOG is not set
-# CONFIG_RENESAS_WDT is not set
-# CONFIG_UNIPHIER_WATCHDOG is not set
-# CONFIG_BCM2835_WDT is not set
-# CONFIG_MFD_AXP20X_RSB is not set
-# CONFIG_MFD_EXYNOS_LPASS is not set
-# CONFIG_MFD_HI655X_PMIC is not set
-# CONFIG_MFD_SPMI_PMIC is not set
-# CONFIG_REGULATOR_AXP20X is not set
-# CONFIG_REGULATOR_HI655X is not set
-# CONFIG_REGULATOR_QCOM_SMD_RPM is not set
-# CONFIG_RPMSG is not set
-# CONFIG_IR_MESON is not set
-# CONFIG_VIDEO_SAMSUNG_S5P_JPEG is not set
-# CONFIG_VIDEO_SAMSUNG_S5P_MFC is not set
-# CONFIG_VIDEO_SAMSUNG_EXYNOS_GSC is not set
-# CONFIG_VIDEO_RENESAS_FCP is not set
-# CONFIG_VIDEO_RENESAS_VSP1 is not set
-# CONFIG_ROCKCHIP_ANALOGIX_DP is not set
-# CONFIG_ROCKCHIP_CDN_DP is not set
-# CONFIG_ROCKCHIP_DW_HDMI is not set
-# CONFIG_ROCKCHIP_DW_MIPI_DSI is not set
-# CONFIG_ROCKCHIP_INNO_HDMI is not set
-# CONFIG_SND_BCM2835_SOC_I2S is not set
-# CONFIG_SND_SOC_SAMSUNG is not set
-# CONFIG_SND_SOC_RCAR is not set
-# CONFIG_DRM_NOUVEAU is not set
-# CONFIG_DRM_EXYNOS is not set
-# CONFIG_DRM_EXYNOS5433_DECON is not set
-# CONFIG_DRM_EXYNOS7_DECON is not set
-# CONFIG_DRM_EXYNOS_DSI is not set
-# CONFIG_DRM_EXYNOS_DP is not set
-# CONFIG_DRM_EXYNOS_HDMI is not set
-# CONFIG_DRM_EXYNOS_MIC is not set
-# CONFIG_DRM_ROCKCHIP is not set
-# CONFIG_DRM_RCAR_DU is not set
-# CONFIG_DRM_RCAR_LVDS is not set
-# CONFIG_DRM_RCAR_VSP is not set
-# CONFIG_DRM_TEGRA is not set
-# CONFIG_DRM_VC4 is not set
-# CONFIG_DRM_MESON is not set
-# CONFIG_USB_XHCI_TEGRA is not set
-# CONFIG_USB_EHCI_MSM is not set
-# CONFIG_USB_EHCI_EXYNOS is not set
-# CONFIG_USB_OHCI_EXYNOS is not set
-# CONFIG_USB_RENESAS_USBHS is not set
-# CONFIG_USB_QCOM_8X16_PHY is not set
-# CONFIG_RASPBERRYPI_FIRMWARE is not set
-# CONFIG_PHY_SUN4I_USB is not set
-# CONFIG_PHY_HI6220_USB is not set
-# CONFIG_PHY_RCAR_GEN3_USB2 is not set
-# CONFIG_PHY_ROCKCHIP_EMMC is not set
-# CONFIG_PHY_ROCKCHIP_INNO_USB2 is not set
-# CONFIG_PHY_ROCKCHIP_PCIE is not set
-# CONFIG_PHY_TEGRA_XUSB is not set
-# CONFIG_QCOM_L2_PMU is not set
-# CONFIG_QCOM_L3_PMU is not set
-# CONFIG_PWM_MESON is not set
-# CONFIG_PWM_ROCKCHIP is not set
-# CONFIG_PWM_SAMSUNG is not set
-# CONFIG_PWM_TEGRA is not set
-# CONFIG_QCOM_SMEM is not set
-# CONFIG_QCOM_SMD_RPM is not set
-# CONFIG_QCOM_SMP2P is not set
-# CONFIG_QCOM_SMSM is not set
-# CONFIG_ROCKCHIP_PM_DOMAINS is not set
-# CONFIG_ARCH_TEGRA_132_SOC is not set
-# CONFIG_ARCH_TEGRA_210_SOC is not set
-# CONFIG_ARCH_TEGRA_186_SOC is not set
-# CONFIG_EXYNOS_ADC is not set
-# CONFIG_ROCKCHIP_SARADC is not set
-# CONFIG_PWM_BCM2835 is not set
-# CONFIG_RPMSG_QCOM_SMD is not set
-# CONFIG_RASPBERRYPI_POWER is not set
-# CONFIG_BCM2835_MBOX is not set
-# CONFIG_HI6220_MBOX is not set
-# CONFIG_ROCKCHIP_IOMMU is not set
-# CONFIG_HWSPINLOCK_QCOM is not set
-# CONFIG_COMMON_CLK_QCOM is not set
-# CONFIG_QCOM_CLK_SMD_RPM is not set
-# CONFIG_IPQ_GCC_8074 is not set
-# CONFIG_MSM_GCC_8916 is not set
-# CONFIG_MSM_GCC_8994 is not set
-# CONFIG_MSM_MMCC_8996 is not set
-# CONFIG_USB_RENESAS_USBHS_UDC is not set
-# CONFIG_MMC_SDHCI_OF_ESDHC is not set
-# CONFIG_XEN_GNTDEV is not set
-# CONFIG_XEN_GRANT_DEV_ALLOC is not set
-# CONFIG_RCAR_DMAC is not set
-# CONFIG_TEGRA20_APB_DMA is not set
-# CONFIG_QCOM_BAM_DMA is not set
-# CONFIG_K3_DMA is not set
-# CONFIG_DMA_BCM2835 is not set
-# CONFIG_RTC_DRV_XGENE is not set
-# CONFIG_RTC_DRV_TEGRA is not set
-# CONFIG_RTC_DRV_S3C is not set
-# CONFIG_MMC_DW_ROCKCHIP is not set
-# CONFIG_MMC_SUNXI is not set
-# CONFIG_MMC_BCM2835 is not set
-# CONFIG_MMC_SDHCI_TEGRA is not set
-# CONFIG_MMC_MESON_GX is not set
-# CONFIG_MMC_SDHCI_MSM is not set
-# CONFIG_MMC_SDHI is not set
-# CONFIG_MMC_DW_EXYNOS is not set
-# CONFIG_FRAMEBUFFER_CONSOLE is not set
 # CONFIG_LOGO is not set
diff --git a/imx8m/kingscanyon_8mq/SharedBoardConfig.mk b/imx8m/kingscanyon_8mq/SharedBoardConfig.mk
index 743fdda5..fc7fe4bd 100644
--- a/imx8m/kingscanyon_8mq/SharedBoardConfig.mk
+++ b/imx8m/kingscanyon_8mq/SharedBoardConfig.mk
@@ -35,6 +35,7 @@ BOARD_VENDOR_KERNEL_MODULES += \
 ifeq ($(IMX8MQ_USES_GKI),true)
 BOARD_VENDOR_KERNEL_MODULES += \
     $(KERNEL_OUT)/drivers/mxc/gpu-viv/galcore.ko \
+    $(KERNEL_OUT)/drivers/thermal/qoriq_thermal.ko \
     $(KERNEL_OUT)/drivers/media/platform/imx8/mxc-mipi-csi2_yav.ko \
     $(KERNEL_OUT)/drivers/media/platform/mxc/capture/mx6s_capture.ko \
     $(KERNEL_OUT)/drivers/media/platform/mxc/capture/mxc_mipi_csi.ko \
@@ -70,6 +71,16 @@ BOARD_VENDOR_KERNEL_MODULES += \
     $(KERNEL_OUT)/drivers/input/touchscreen/synaptics_dsx/synaptics_dsx_i2c.ko
 endif
 
+# kernel modules add by IDTECH
+# CONFIG_SND_SOC_IMX_RT5640: snd-soc-imx-rt5640.ko, snd-soc-rt5640.ko, audio codec
+# CONFIG_I2C_CHARDEV: i2c-dev.ko, for userspace(i2cdetect) to access /dev/i2c*
+ifeq ($(IMX8MQ_USES_GKI),true)
+BOARD_VENDOR_KERNEL_MODULES += \
+    $(KERNEL_OUT)/drivers/i2c/i2c-dev.ko \
+    $(KERNEL_OUT)/sound/soc/codecs/snd-soc-rt5640.ko \
+    $(KERNEL_OUT)/sound/soc/fsl/snd-soc-imx-rt5640.ko
+endif
+
 # CONFIG_ZRAM: zram.ko, lzo.ko, lzo-rle.ko compressed ram using LZ coding.
 # CONFIG_ZSMALLOC: zsmalloc.ko
 # CONFIG_CLK_IMX8MP: clk-imx8mq.ko
@@ -129,7 +140,6 @@ BOARD_VENDOR_RAMDISK_KERNEL_MODULES += \
     $(KERNEL_OUT)/drivers/regulator/pfuze100-regulator.ko \
     $(KERNEL_OUT)/drivers/gpio/gpio-mxc.ko \
     $(KERNEL_OUT)/drivers/thermal/device_cooling.ko \
-    $(KERNEL_OUT)/drivers/thermal/qoriq_thermal.ko \
     $(KERNEL_OUT)/drivers/perf/fsl_imx8_ddr_perf.ko \
     $(KERNEL_OUT)/drivers/cpufreq/cpufreq-dt.ko \
     $(KERNEL_OUT)/drivers/cpufreq/imx-cpufreq-dt.ko \
diff --git a/imx8m/kingscanyon_8mq/android_addition_defconfig b/imx8m/kingscanyon_8mq/android_addition_defconfig
index 8a0a080a..7368ca04 100644
--- a/imx8m/kingscanyon_8mq/android_addition_defconfig
+++ b/imx8m/kingscanyon_8mq/android_addition_defconfig
@@ -4,23 +4,11 @@ CONFIG_SINGLE_LOGO=y
 CONFIG_SPLASH_SCREEN_CENTERED=y
 CONFIG_USB_SERIAL=y
 CONFIG_USB_SERIAL_OPTION=y
-# CONFIG_INPUT_VL53L1X_ULD is not set
-CONFIG_SND_SOC_IMX_RT5640=y
-CONFIG_SND_SOC_RT5640=y
-# CONFIG_SND_SOC_IMX_TLV320AIC31XX is not set
-# CONFIG_SND_SOC_TLV320AIC31XX is not set
+CONFIG_SND_SOC_IMX_RT5640=m
+CONFIG_SND_SOC_RT5640=m
 CONFIG_KEYBOARD_MATRIX=y
-# CONFIG_TYPEC_HD3SS3220 is not set
 CONFIG_MXC_DUAL_MIPI_CAMERA=y
 CONFIG_MXC_CAMERA_OV2685_MIPI_V2=y
-# CONFIG_INPUT_ST is not set
-# CONFIG_INPUT_ECOMPASS is not set
-# CONFIG_INPUT_LSM303AGR is not set
-# CONFIG_INPUT_LSM303AGR_I2C is not set
-# CONFIG_TOUCHSCREEN_ILI9881_I2C is not set
-# CONFIG_DRM_PANEL_TIANMA_TM050JDHC02 is not set
-# CONFIG_TOUCHSCREEN_GOODIX is not set
-# CONFIG_DRM_PANEL_DATAIMAGE_5INCHLCM is not set
 CONFIG_DEBUG_FS=y
 CONFIG_PPP=y
 CONFIG_PPP_ASYNC=y
@@ -35,6 +23,7 @@ CONFIG_LEDS_TRIGGER_TIMER=y
 CONFIG_BT_HCIUART_QCA=y
 CONFIG_BT_HCIBTUSB=y
 CONFIG_TASKSTATS=y
+CONFIG_WLAN_VENDOR_ATH=y
 # CONFIG_CLD_HL_SDIO_CORE is not set
 CONFIG_QCA_CLD_WLAN=m
 CONFIG_QCACLD_WLAN_LFR3=y
@@ -49,232 +38,28 @@ CONFIG_QCOM_TDLS=y
 CONFIG_QCOM_LTE_COEX=y
 CONFIG_WLAN_SYNC_TSF=y
 CONFIG_WLAN_OFFLOAD_PACKETS=y
+CONFIG_NL80211_TESTMODE=y
+CONFIG_RELAY=y
 CONFIG_DEVMEM=y
+CONFIG_I2C_CHARDEV=m
 
-CONFIG_PARAVIRT=y
-CONFIG_NETFILTER_XT_TARGET_CT=y
-CONFIG_MVMDIO=y
-CONFIG_MDIO_BITBANG=y
 CONFIG_I2C_SLAVE=y
 CONFIG_GPIOLIB=y
-CONFIG_GPIO_GENERIC_PLATFORM=y
+CONFIG_PINCTRL=y
+CONFIG_FB=y
 CONFIG_POWER_RESET_BRCMSTB=y
 CONFIG_REGULATOR=y
 CONFIG_DRM_I2C_CH7006=m
 CONFIG_DRM_I2C_SIL164=m
-CONFIG_TMPFS=y
-CONFIG_BCM_FLEXRM_MBOX=y
-CONFIG_PHY_SAMSUNG_USB2=y
 CONFIG_ARM_TIMER_SP804=y
-CONFIG_COMMON_CLK_VERSATILE=y
 CONFIG_CLK_SP810=y
 CONFIG_USB_SNP_UDC_PLAT=y
 CONFIG_USB_BDC_UDC=y
-CONFIG_BCM_SBA_RAID=m
-CONFIG_USB_PRINTER=y
-CONFIG_MLX90614=y
-CONFIG_HID_CP2112=y
 
 # CONFIG_KVM is not set
-# CONFIG_MTD_UBI is not set
-# CONFIG_VGA_ARB is not set
 # CONFIG_ARCH_SUNXI is not set
-# CONFIG_ARCH_ALPINE is not set
-# CONFIG_ARCH_BCM2835 is not set
-# CONFIG_ARCH_BCM_IPROC is not set
-# CONFIG_ARCH_BERLIN is not set
-# CONFIG_ARCH_BRCMSTB is not set
-# CONFIG_ARCH_EXYNOS is not set
-# CONFIG_ARCH_LAYERSCAPE is not set
-# CONFIG_ARCH_LG1K is not set
 # CONFIG_ARCH_HISI is not set
-# CONFIG_ARCH_MEDIATEK is not set
-# CONFIG_ARCH_MESON is not set
-# CONFIG_ARCH_MVEBU is not set
 # CONFIG_ARCH_QCOM is not set
-# CONFIG_ARCH_ROCKCHIP is not set
-# CONFIG_ARCH_SEATTLE is not set
-# CONFIG_ARCH_RENESAS is not set
-# CONFIG_ARCH_R8A7795 is not set
-# CONFIG_ARCH_R8A7796 is not set
-# CONFIG_ARCH_STRATIX10 is not set
-# CONFIG_ARCH_TEGRA is not set
 # CONFIG_ARCH_SPRD is not set
-# CONFIG_ARCH_THUNDER is not set
-# CONFIG_ARCH_THUNDER2 is not set
-# CONFIG_ARCH_UNIPHIER is not set
-# CONFIG_ARCH_VEXPRESS is not set
-# CONFIG_ARCH_XGENE is not set
-# CONFIG_ARCH_ZX is not set
-# CONFIG_ARCH_ZYNQMP is not set
-# CONFIG_ARCH_TEGRA_132_SOC is not set
-# CONFIG_ARCH_TEGRA_210_SOC is not set
-# CONFIG_ARCH_TEGRA_186_SOC is not set
-# CONFIG_PCI_HISI is not set
-# CONFIG_PCIE_KIRIN is not set
-# CONFIG_PCI_AARDVARK is not set
-# CONFIG_PCIE_RCAR is not set
-# CONFIG_PCIE_ROCKCHIP is not set
-# CONFIG_XEN is not set
-# CONFIG_SPI_FSL_QUADSPI is not set
-# CONFIG_XEN_BLKDEV_BACKEND is not set
-# CONFIG_AHCI_MVEBU is not set
-# CONFIG_SATA_RCAR is not set
-# CONFIG_NET_XGENE is not set
-# CONFIG_MVNETA is not set
-# CONFIG_MVPP2 is not set
-# CONFIG_RAVB is not set
-# CONFIG_MESON_GXL_PHY is not set
-# CONFIG_XEN_NETDEV_BACKEND is not set
-# CONFIG_INPUT_PM8941_PWRKEY is not set
-# CONFIG_INPUT_HISI_POWERKEY is not set
-# CONFIG_SERIAL_8250_BCM2835AUX is not set
-# CONFIG_SERIAL_8250_MT6577 is not set
-# CONFIG_SERIAL_8250_UNIPHIER is not set
-# CONFIG_SERIAL_MESON is not set
-# CONFIG_SERIAL_MESON_CONSOLE is not set
 # CONFIG_SERIAL_SAMSUNG is not set
-# CONFIG_SERIAL_SAMSUNG_CONSOLE is not set
-# CONFIG_SERIAL_TEGRA is not set
-# CONFIG_SERIAL_SH_SCI is not set
-# CONFIG_SERIAL_SH_SCI_NR_UARTS is not set
-# CONFIG_SERIAL_SH_SCI_CONSOLE is not set
-# CONFIG_SERIAL_MSM is not set
-# CONFIG_SERIAL_MSM_CONSOLE is not set
-# CONFIG_SERIAL_XILINX_PS_UART is not set
-# CONFIG_SERIAL_XILINX_PS_UART_CONSOLE is not set
-# CONFIG_SERIAL_MVEBU_UART is not set
-# CONFIG_I2C_BCM2835 is not set
-# CONFIG_I2C_MESON is not set
-# CONFIG_I2C_MV64XXX is not set
-# CONFIG_I2C_PXA is not set
-# CONFIG_I2C_QUP is not set
-# CONFIG_I2C_SH_MOBILE is not set
-# CONFIG_I2C_TEGRA is not set
-# CONFIG_I2C_UNIPHIER_F is not set
-# CONFIG_I2C_RCAR is not set
-# CONFIG_SPI_BCM2835 is not set
-# CONFIG_SPI_BCM2835AUX is not set
-# CONFIG_SPI_MESON_SPICC is not set
-# CONFIG_SPI_ORION is not set
-# CONFIG_SPI_ROCKCHIP is not set
-# CONFIG_SPI_QUP is not set
-# CONFIG_SPI_S3C64XX is not set
-# CONFIG_PINCTRL_MAX77620 is not set
-# CONFIG_PINCTRL_IPQ8074 is not set
-# CONFIG_PINCTRL_MSM8916 is not set
-# CONFIG_PINCTRL_MSM8994 is not set
-# CONFIG_PINCTRL_MSM8996 is not set
-# CONFIG_PINCTRL_QDF2XXX is not set
-# CONFIG_PINCTRL_QCOM_SPMI_PMIC is not set
-# CONFIG_GPIO_RCAR is not set
-# CONFIG_GPIO_XGENE_SB is not set
-# CONFIG_POWER_RESET_MSM is not set
-# CONFIG_ROCKCHIP_THERMAL is not set
-# CONFIG_EXYNOS_THERMAL is not set
-# CONFIG_S3C2410_WATCHDOG is not set
-# CONFIG_MESON_GXBB_WATCHDOG is not set
-# CONFIG_MESON_WATCHDOG is not set
-# CONFIG_RENESAS_WDT is not set
-# CONFIG_UNIPHIER_WATCHDOG is not set
-# CONFIG_BCM2835_WDT is not set
-# CONFIG_MFD_AXP20X_RSB is not set
-# CONFIG_MFD_EXYNOS_LPASS is not set
-# CONFIG_MFD_HI655X_PMIC is not set
-# CONFIG_MFD_SPMI_PMIC is not set
-# CONFIG_REGULATOR_AXP20X is not set
-# CONFIG_REGULATOR_HI655X is not set
-# CONFIG_REGULATOR_QCOM_SMD_RPM is not set
-# CONFIG_RPMSG is not set
-# CONFIG_IR_MESON is not set
-# CONFIG_VIDEO_SAMSUNG_S5P_JPEG is not set
-# CONFIG_VIDEO_SAMSUNG_S5P_MFC is not set
-# CONFIG_VIDEO_SAMSUNG_EXYNOS_GSC is not set
-# CONFIG_VIDEO_RENESAS_FCP is not set
-# CONFIG_VIDEO_RENESAS_VSP1 is not set
-# CONFIG_ROCKCHIP_ANALOGIX_DP is not set
-# CONFIG_ROCKCHIP_CDN_DP is not set
-# CONFIG_ROCKCHIP_DW_HDMI is not set
-# CONFIG_ROCKCHIP_DW_MIPI_DSI is not set
-# CONFIG_ROCKCHIP_INNO_HDMI is not set
-# CONFIG_SND_BCM2835_SOC_I2S is not set
-# CONFIG_SND_SOC_SAMSUNG is not set
-# CONFIG_SND_SOC_RCAR is not set
-# CONFIG_DRM_NOUVEAU is not set
-# CONFIG_DRM_EXYNOS is not set
-# CONFIG_DRM_EXYNOS5433_DECON is not set
-# CONFIG_DRM_EXYNOS7_DECON is not set
-# CONFIG_DRM_EXYNOS_DSI is not set
-# CONFIG_DRM_EXYNOS_DP is not set
-# CONFIG_DRM_EXYNOS_HDMI is not set
-# CONFIG_DRM_EXYNOS_MIC is not set
-# CONFIG_DRM_ROCKCHIP is not set
-# CONFIG_DRM_RCAR_DU is not set
-# CONFIG_DRM_RCAR_LVDS is not set
-# CONFIG_DRM_RCAR_VSP is not set
-# CONFIG_DRM_TEGRA is not set
-# CONFIG_DRM_VC4 is not set
-# CONFIG_DRM_MESON is not set
-# CONFIG_USB_XHCI_TEGRA is not set
-# CONFIG_USB_EHCI_MSM is not set
-# CONFIG_USB_EHCI_EXYNOS is not set
-# CONFIG_USB_OHCI_EXYNOS is not set
-# CONFIG_USB_RENESAS_USBHS is not set
-# CONFIG_USB_QCOM_8X16_PHY is not set
-# CONFIG_RASPBERRYPI_FIRMWARE is not set
-# CONFIG_PHY_SUN4I_USB is not set
-# CONFIG_PHY_HI6220_USB is not set
-# CONFIG_PHY_RCAR_GEN3_USB2 is not set
-# CONFIG_PHY_ROCKCHIP_EMMC is not set
-# CONFIG_PHY_ROCKCHIP_INNO_USB2 is not set
-# CONFIG_PHY_ROCKCHIP_PCIE is not set
-# CONFIG_PHY_TEGRA_XUSB is not set
-# CONFIG_QCOM_L2_PMU is not set
-# CONFIG_QCOM_L3_PMU is not set
-# CONFIG_PWM_MESON is not set
-# CONFIG_PWM_ROCKCHIP is not set
-# CONFIG_PWM_SAMSUNG is not set
-# CONFIG_PWM_TEGRA is not set
-# CONFIG_QCOM_SMEM is not set
-# CONFIG_QCOM_SMD_RPM is not set
-# CONFIG_QCOM_SMP2P is not set
-# CONFIG_QCOM_SMSM is not set
-# CONFIG_ROCKCHIP_PM_DOMAINS is not set
-# CONFIG_ARCH_TEGRA_132_SOC is not set
-# CONFIG_ARCH_TEGRA_210_SOC is not set
-# CONFIG_ARCH_TEGRA_186_SOC is not set
-# CONFIG_EXYNOS_ADC is not set
-# CONFIG_ROCKCHIP_SARADC is not set
-# CONFIG_PWM_BCM2835 is not set
-# CONFIG_RPMSG_QCOM_SMD is not set
-# CONFIG_RASPBERRYPI_POWER is not set
-# CONFIG_BCM2835_MBOX is not set
-# CONFIG_HI6220_MBOX is not set
-# CONFIG_ROCKCHIP_IOMMU is not set
-# CONFIG_HWSPINLOCK_QCOM is not set
-# CONFIG_COMMON_CLK_QCOM is not set
-# CONFIG_QCOM_CLK_SMD_RPM is not set
-# CONFIG_IPQ_GCC_8074 is not set
-# CONFIG_MSM_GCC_8916 is not set
-# CONFIG_MSM_GCC_8994 is not set
-# CONFIG_MSM_MMCC_8996 is not set
-# CONFIG_USB_RENESAS_USBHS_UDC is not set
-# CONFIG_MMC_SDHCI_OF_ESDHC is not set
-# CONFIG_XEN_GNTDEV is not set
-# CONFIG_XEN_GRANT_DEV_ALLOC is not set
-# CONFIG_RCAR_DMAC is not set
-# CONFIG_TEGRA20_APB_DMA is not set
-# CONFIG_QCOM_BAM_DMA is not set
-# CONFIG_K3_DMA is not set
-# CONFIG_DMA_BCM2835 is not set
-# CONFIG_RTC_DRV_XGENE is not set
-# CONFIG_RTC_DRV_TEGRA is not set
-# CONFIG_RTC_DRV_S3C is not set
-# CONFIG_MMC_DW_ROCKCHIP is not set
-# CONFIG_MMC_SUNXI is not set
-# CONFIG_MMC_BCM2835 is not set
-# CONFIG_MMC_SDHCI_TEGRA is not set
-# CONFIG_MMC_MESON_GX is not set
-# CONFIG_MMC_SDHCI_MSM is not set
-# CONFIG_MMC_SDHI is not set
-# CONFIG_MMC_DW_EXYNOS is not set
+# CONFIG_LOGO is not set
diff --git a/imx8m/redwood_8mm/SharedBoardConfig.mk b/imx8m/redwood_8mm/SharedBoardConfig.mk
index bdd13579..866b5ac1 100644
--- a/imx8m/redwood_8mm/SharedBoardConfig.mk
+++ b/imx8m/redwood_8mm/SharedBoardConfig.mk
@@ -73,6 +73,18 @@ BOARD_VENDOR_KERNEL_MODULES +=     \
     $(KERNEL_OUT)/drivers/input/touchscreen/synaptics_dsx/synaptics_dsx_i2c.ko
 endif
 
+# kernel modules add by IDTECH
+# CONFIG_SND_SOC_IMX_TLV320AIC31XX: snd-soc-imx-tlv320aic31xx.ko, snd-soc-tlv320aic31xx.ko, audio codec
+# CONFIG_I2C_CHARDEV: i2c-dev.ko, for userspace(i2cdetect) to access /dev/i2c*
+# CONFIG_DP83822_PHY: dp83822.ko, ethernet phy driver
+ifeq ($(IMX8MQ_USES_GKI),true)
+BOARD_VENDOR_KERNEL_MODULES += \
+    $(KERNEL_OUT)/drivers/i2c/i2c-dev.ko \
+    $(KERNEL_OUT)/drivers/net/phy/dp83822.ko \
+    $(KERNEL_OUT)/sound/soc/codecs/snd-soc-tlv320aic31xx.ko \
+    $(KERNEL_OUT)/sound/soc/fsl/snd-soc-imx-tlv320aic31xx.ko
+endif
+
 # CONFIG_ZRAM: zram.ko, lzo.ko, lzo-rle.ko compressed ram using LZ coding.
 # CONFIG_ZSMALLOC: zsmalloc.ko
 # CONFIG_CLK_IMX8MM: clk-imx8mm.ko
diff --git a/imx8m/redwood_8mm/android_addition_defconfig b/imx8m/redwood_8mm/android_addition_defconfig
index b34970b7..66152d4c 100644
--- a/imx8m/redwood_8mm/android_addition_defconfig
+++ b/imx8m/redwood_8mm/android_addition_defconfig
@@ -4,8 +4,8 @@ CONFIG_SINGLE_LOGO=y
 CONFIG_SPLASH_SCREEN_CENTERED=y
 CONFIG_USB_SERIAL=y
 CONFIG_USB_SERIAL_OPTION=y
-CONFIG_SND_SOC_IMX_TLV320AIC31XX=y
-CONFIG_SND_SOC_TLV320AIC31XX=y
+CONFIG_SND_SOC_IMX_TLV320AIC31XX=m
+CONFIG_SND_SOC_TLV320AIC31XX=m
 CONFIG_INPUT_ST=y
 CONFIG_DEBUG_FS=y
 CONFIG_PPP=y
@@ -22,232 +22,27 @@ CONFIG_TOUCHSCREEN_ST_FW_UPDATE=y
 CONFIG_BACKLIGHT_LED=y
 CONFIG_TYPEC_TPS65994=y
 CONFIG_THERMAL_EMERGENCY_POWEROFF_DELAY_MS=100
-CONFIG_DP83822_PHY=y
+CONFIG_DP83822_PHY=m
 CONFIG_OPT3001=y
+CONFIG_I2C_CHARDEV=m
 
-CONFIG_PARAVIRT=y
-CONFIG_NETFILTER_XT_TARGET_CT=y
-CONFIG_MVMDIO=y
-CONFIG_MDIO_BITBANG=y
 CONFIG_I2C_SLAVE=y
 CONFIG_GPIOLIB=y
-CONFIG_GPIO_GENERIC_PLATFORM=y
+CONFIG_PINCTRL=y
+CONFIG_FB=y
 CONFIG_POWER_RESET_BRCMSTB=y
 CONFIG_REGULATOR=y
 CONFIG_DRM_I2C_CH7006=m
 CONFIG_DRM_I2C_SIL164=m
-CONFIG_TMPFS=y
-CONFIG_BCM_FLEXRM_MBOX=y
-CONFIG_PHY_SAMSUNG_USB2=y
 CONFIG_ARM_TIMER_SP804=y
-CONFIG_COMMON_CLK_VERSATILE=y
 CONFIG_CLK_SP810=y
 CONFIG_USB_SNP_UDC_PLAT=y
 CONFIG_USB_BDC_UDC=y
-CONFIG_BCM_SBA_RAID=m
-CONFIG_PINCTRL=y
 
 # CONFIG_KVM is not set
-# CONFIG_MTD_UBI is not set
-# CONFIG_VGA_ARB is not set
 # CONFIG_ARCH_SUNXI is not set
-# CONFIG_ARCH_ALPINE is not set
-# CONFIG_ARCH_BCM2835 is not set
-# CONFIG_ARCH_BCM_IPROC is not set
-# CONFIG_ARCH_BERLIN is not set
-# CONFIG_ARCH_BRCMSTB is not set
-# CONFIG_ARCH_EXYNOS is not set
-# CONFIG_ARCH_LAYERSCAPE is not set
-# CONFIG_ARCH_LG1K is not set
 # CONFIG_ARCH_HISI is not set
-# CONFIG_ARCH_MEDIATEK is not set
-# CONFIG_ARCH_MESON is not set
-# CONFIG_ARCH_MVEBU is not set
 # CONFIG_ARCH_QCOM is not set
-# CONFIG_ARCH_ROCKCHIP is not set
-# CONFIG_ARCH_SEATTLE is not set
-# CONFIG_ARCH_RENESAS is not set
-# CONFIG_ARCH_R8A7795 is not set
-# CONFIG_ARCH_R8A7796 is not set
-# CONFIG_ARCH_STRATIX10 is not set
-# CONFIG_ARCH_TEGRA is not set
 # CONFIG_ARCH_SPRD is not set
-# CONFIG_ARCH_THUNDER is not set
-# CONFIG_ARCH_THUNDER2 is not set
-# CONFIG_ARCH_UNIPHIER is not set
-# CONFIG_ARCH_VEXPRESS is not set
-# CONFIG_ARCH_XGENE is not set
-# CONFIG_ARCH_ZX is not set
-# CONFIG_ARCH_ZYNQMP is not set
-# CONFIG_ARCH_TEGRA_132_SOC is not set
-# CONFIG_ARCH_TEGRA_210_SOC is not set
-# CONFIG_ARCH_TEGRA_186_SOC is not set
-# CONFIG_PCI_HISI is not set
-# CONFIG_PCIE_KIRIN is not set
-# CONFIG_PCI_AARDVARK is not set
-# CONFIG_PCIE_RCAR is not set
-# CONFIG_PCIE_ROCKCHIP is not set
-# CONFIG_XEN is not set
-# CONFIG_XEN_BLKDEV_BACKEND is not set
-# CONFIG_AHCI_MVEBU is not set
-# CONFIG_SATA_RCAR is not set
-# CONFIG_NET_XGENE is not set
-# CONFIG_MVNETA is not set
-# CONFIG_MVPP2 is not set
-# CONFIG_RAVB is not set
-# CONFIG_MESON_GXL_PHY is not set
-# CONFIG_XEN_NETDEV_BACKEND is not set
-# CONFIG_INPUT_PM8941_PWRKEY is not set
-# CONFIG_INPUT_HISI_POWERKEY is not set
-# CONFIG_SERIAL_8250_BCM2835AUX is not set
-# CONFIG_SERIAL_8250_MT6577 is not set
-# CONFIG_SERIAL_8250_UNIPHIER is not set
-# CONFIG_SERIAL_MESON is not set
-# CONFIG_SERIAL_MESON_CONSOLE is not set
 # CONFIG_SERIAL_SAMSUNG is not set
-# CONFIG_SERIAL_SAMSUNG_CONSOLE is not set
-# CONFIG_SERIAL_TEGRA is not set
-# CONFIG_SERIAL_SH_SCI is not set
-# CONFIG_SERIAL_SH_SCI_NR_UARTS is not set
-# CONFIG_SERIAL_SH_SCI_CONSOLE is not set
-# CONFIG_SERIAL_MSM is not set
-# CONFIG_SERIAL_MSM_CONSOLE is not set
-# CONFIG_SERIAL_XILINX_PS_UART is not set
-# CONFIG_SERIAL_XILINX_PS_UART_CONSOLE is not set
-# CONFIG_SERIAL_MVEBU_UART is not set
-# CONFIG_I2C_BCM2835 is not set
-# CONFIG_I2C_MESON is not set
-# CONFIG_I2C_MV64XXX is not set
-# CONFIG_I2C_PXA is not set
-# CONFIG_I2C_QUP is not set
-# CONFIG_I2C_SH_MOBILE is not set
-# CONFIG_I2C_TEGRA is not set
-# CONFIG_I2C_UNIPHIER_F is not set
-# CONFIG_I2C_RCAR is not set
-# CONFIG_SPI_BCM2835 is not set
-# CONFIG_SPI_BCM2835AUX is not set
-# CONFIG_SPI_MESON_SPICC is not set
-# CONFIG_SPI_ORION is not set
-# CONFIG_SPI_ROCKCHIP is not set
-# CONFIG_SPI_QUP is not set
-# CONFIG_SPI_S3C64XX is not set
-# CONFIG_PINCTRL_MAX77620 is not set
-# CONFIG_PINCTRL_IPQ8074 is not set
-# CONFIG_PINCTRL_MSM8916 is not set
-# CONFIG_PINCTRL_MSM8994 is not set
-# CONFIG_PINCTRL_MSM8996 is not set
-# CONFIG_PINCTRL_QDF2XXX is not set
-# CONFIG_PINCTRL_QCOM_SPMI_PMIC is not set
-# CONFIG_GPIO_RCAR is not set
-# CONFIG_GPIO_XGENE_SB is not set
-# CONFIG_POWER_RESET_MSM is not set
-# CONFIG_ROCKCHIP_THERMAL is not set
-# CONFIG_EXYNOS_THERMAL is not set
-# CONFIG_S3C2410_WATCHDOG is not set
-# CONFIG_MESON_GXBB_WATCHDOG is not set
-# CONFIG_MESON_WATCHDOG is not set
-# CONFIG_RENESAS_WDT is not set
-# CONFIG_UNIPHIER_WATCHDOG is not set
-# CONFIG_BCM2835_WDT is not set
-# CONFIG_MFD_AXP20X_RSB is not set
-# CONFIG_MFD_EXYNOS_LPASS is not set
-# CONFIG_MFD_HI655X_PMIC is not set
-# CONFIG_MFD_SPMI_PMIC is not set
-# CONFIG_REGULATOR_AXP20X is not set
-# CONFIG_REGULATOR_HI655X is not set
-# CONFIG_REGULATOR_QCOM_SMD_RPM is not set
-# CONFIG_RPMSG is not set
-# CONFIG_IR_MESON is not set
-# CONFIG_VIDEO_SAMSUNG_S5P_JPEG is not set
-# CONFIG_VIDEO_SAMSUNG_S5P_MFC is not set
-# CONFIG_VIDEO_SAMSUNG_EXYNOS_GSC is not set
-# CONFIG_VIDEO_RENESAS_FCP is not set
-# CONFIG_VIDEO_RENESAS_VSP1 is not set
-# CONFIG_ROCKCHIP_ANALOGIX_DP is not set
-# CONFIG_ROCKCHIP_CDN_DP is not set
-# CONFIG_ROCKCHIP_DW_HDMI is not set
-# CONFIG_ROCKCHIP_DW_MIPI_DSI is not set
-# CONFIG_ROCKCHIP_INNO_HDMI is not set
-# CONFIG_SND_BCM2835_SOC_I2S is not set
-# CONFIG_SND_SOC_SAMSUNG is not set
-# CONFIG_SND_SOC_RCAR is not set
-# CONFIG_DRM_NOUVEAU is not set
-# CONFIG_DRM_EXYNOS is not set
-# CONFIG_DRM_EXYNOS5433_DECON is not set
-# CONFIG_DRM_EXYNOS7_DECON is not set
-# CONFIG_DRM_EXYNOS_DSI is not set
-# CONFIG_DRM_EXYNOS_DP is not set
-# CONFIG_DRM_EXYNOS_HDMI is not set
-# CONFIG_DRM_EXYNOS_MIC is not set
-# CONFIG_DRM_ROCKCHIP is not set
-# CONFIG_DRM_RCAR_DU is not set
-# CONFIG_DRM_RCAR_LVDS is not set
-# CONFIG_DRM_RCAR_VSP is not set
-# CONFIG_DRM_TEGRA is not set
-# CONFIG_DRM_VC4 is not set
-# CONFIG_DRM_MESON is not set
-# CONFIG_USB_XHCI_TEGRA is not set
-# CONFIG_USB_EHCI_MSM is not set
-# CONFIG_USB_EHCI_EXYNOS is not set
-# CONFIG_USB_OHCI_EXYNOS is not set
-# CONFIG_USB_RENESAS_USBHS is not set
-# CONFIG_USB_QCOM_8X16_PHY is not set
-# CONFIG_RASPBERRYPI_FIRMWARE is not set
-# CONFIG_PHY_SUN4I_USB is not set
-# CONFIG_PHY_HI6220_USB is not set
-# CONFIG_PHY_RCAR_GEN3_USB2 is not set
-# CONFIG_PHY_ROCKCHIP_EMMC is not set
-# CONFIG_PHY_ROCKCHIP_INNO_USB2 is not set
-# CONFIG_PHY_ROCKCHIP_PCIE is not set
-# CONFIG_PHY_TEGRA_XUSB is not set
-# CONFIG_QCOM_L2_PMU is not set
-# CONFIG_QCOM_L3_PMU is not set
-# CONFIG_PWM_MESON is not set
-# CONFIG_PWM_ROCKCHIP is not set
-# CONFIG_PWM_SAMSUNG is not set
-# CONFIG_PWM_TEGRA is not set
-# CONFIG_QCOM_SMEM is not set
-# CONFIG_QCOM_SMD_RPM is not set
-# CONFIG_QCOM_SMP2P is not set
-# CONFIG_QCOM_SMSM is not set
-# CONFIG_ROCKCHIP_PM_DOMAINS is not set
-# CONFIG_ARCH_TEGRA_132_SOC is not set
-# CONFIG_ARCH_TEGRA_210_SOC is not set
-# CONFIG_ARCH_TEGRA_186_SOC is not set
-# CONFIG_EXYNOS_ADC is not set
-# CONFIG_ROCKCHIP_SARADC is not set
-# CONFIG_PWM_BCM2835 is not set
-# CONFIG_RPMSG_QCOM_SMD is not set
-# CONFIG_RASPBERRYPI_POWER is not set
-# CONFIG_BCM2835_MBOX is not set
-# CONFIG_HI6220_MBOX is not set
-# CONFIG_ROCKCHIP_IOMMU is not set
-# CONFIG_HWSPINLOCK_QCOM is not set
-# CONFIG_COMMON_CLK_QCOM is not set
-# CONFIG_QCOM_CLK_SMD_RPM is not set
-# CONFIG_IPQ_GCC_8074 is not set
-# CONFIG_MSM_GCC_8916 is not set
-# CONFIG_MSM_GCC_8994 is not set
-# CONFIG_MSM_MMCC_8996 is not set
-# CONFIG_USB_RENESAS_USBHS_UDC is not set
-# CONFIG_MMC_SDHCI_OF_ESDHC is not set
-# CONFIG_XEN_GNTDEV is not set
-# CONFIG_XEN_GRANT_DEV_ALLOC is not set
-# CONFIG_RCAR_DMAC is not set
-# CONFIG_TEGRA20_APB_DMA is not set
-# CONFIG_QCOM_BAM_DMA is not set
-# CONFIG_K3_DMA is not set
-# CONFIG_DMA_BCM2835 is not set
-# CONFIG_RTC_DRV_XGENE is not set
-# CONFIG_RTC_DRV_TEGRA is not set
-# CONFIG_RTC_DRV_S3C is not set
-# CONFIG_MMC_DW_ROCKCHIP is not set
-# CONFIG_MMC_SUNXI is not set
-# CONFIG_MMC_BCM2835 is not set
-# CONFIG_MMC_SDHCI_TEGRA is not set
-# CONFIG_MMC_MESON_GX is not set
-# CONFIG_MMC_SDHCI_MSM is not set
-# CONFIG_MMC_SDHI is not set
-# CONFIG_MMC_DW_EXYNOS is not set
-# CONFIG_FRAMEBUFFER_CONSOLE is not set
 # CONFIG_LOGO is not set
diff --git a/imx8m/redwood_8mq/SharedBoardConfig.mk b/imx8m/redwood_8mq/SharedBoardConfig.mk
index 37932d3f..7e44915b 100644
--- a/imx8m/redwood_8mq/SharedBoardConfig.mk
+++ b/imx8m/redwood_8mq/SharedBoardConfig.mk
@@ -72,13 +72,14 @@ BOARD_VENDOR_KERNEL_MODULES += \
 endif
 
 # kernel modules add by IDTECH
-# CONFIG_SND_SOC_IMX_TLV320AIC31XX: snd-soc-imx-tlv320aic31xx.ko, audio codec
+# CONFIG_SND_SOC_IMX_TLV320AIC31XX: snd-soc-imx-tlv320aic31xx.ko, snd-soc-tlv320aic31xx.ko, audio codec
 # CONFIG_I2C_CHARDEV: i2c-dev.ko, for userspace(i2cdetect) to access /dev/i2c*
 # CONFIG_DP83822_PHY: dp83822.ko, ethernet phy driver
 ifeq ($(IMX8MQ_USES_GKI),true)
 BOARD_VENDOR_KERNEL_MODULES += \
     $(KERNEL_OUT)/drivers/i2c/i2c-dev.ko \
     $(KERNEL_OUT)/drivers/net/phy/dp83822.ko \
+    $(KERNEL_OUT)/sound/soc/codecs/snd-soc-tlv320aic31xx.ko \
     $(KERNEL_OUT)/sound/soc/fsl/snd-soc-imx-tlv320aic31xx.ko
 endif
 
diff --git a/imx8m/redwood_8mq/android_addition_defconfig b/imx8m/redwood_8mq/android_addition_defconfig
index 75a7daf4..08223f58 100644
--- a/imx8m/redwood_8mq/android_addition_defconfig
+++ b/imx8m/redwood_8mq/android_addition_defconfig
@@ -5,7 +5,7 @@ CONFIG_SPLASH_SCREEN_CENTERED=y
 CONFIG_USB_SERIAL=y
 CONFIG_USB_SERIAL_OPTION=y
 CONFIG_SND_SOC_IMX_TLV320AIC31XX=m
-CONFIG_SND_SOC_TLV320AIC31XX=y
+CONFIG_SND_SOC_TLV320AIC31XX=m
 CONFIG_KEYBOARD_MATRIX=y
 CONFIG_MXC_DUAL_MIPI_CAMERA=y
 CONFIG_MXC_CAMERA_GC02M2_MIPI=y
@@ -33,216 +33,23 @@ CONFIG_DP83822_PHY=m
 CONFIG_OPT3001=y
 CONFIG_I2C_CHARDEV=m
 
-CONFIG_PARAVIRT=y
-CONFIG_NETFILTER_XT_TARGET_CT=y
 CONFIG_I2C_SLAVE=y
 CONFIG_GPIOLIB=y
-CONFIG_GPIO_GENERIC_PLATFORM=y
+CONFIG_PINCTRL=y
+CONFIG_FB=y
 CONFIG_POWER_RESET_BRCMSTB=y
 CONFIG_REGULATOR=y
 CONFIG_DRM_I2C_CH7006=m
 CONFIG_DRM_I2C_SIL164=m
-CONFIG_TMPFS=y
-CONFIG_BCM_FLEXRM_MBOX=y
 CONFIG_ARM_TIMER_SP804=y
-CONFIG_COMMON_CLK_VERSATILE=y
 CONFIG_CLK_SP810=y
 CONFIG_USB_SNP_UDC_PLAT=y
 CONFIG_USB_BDC_UDC=y
-CONFIG_BCM_SBA_RAID=m
-CONFIG_PINCTRL=y
 
 # CONFIG_KVM is not set
-# CONFIG_MTD_UBI is not set
-# CONFIG_VGA_ARB is not set
 # CONFIG_ARCH_SUNXI is not set
-# CONFIG_ARCH_ALPINE is not set
-# CONFIG_ARCH_BCM2835 is not set
-# CONFIG_ARCH_BCM_IPROC is not set
-# CONFIG_ARCH_BERLIN is not set
-# CONFIG_ARCH_BRCMSTB is not set
-# CONFIG_ARCH_EXYNOS is not set
-# CONFIG_ARCH_LAYERSCAPE is not set
-# CONFIG_ARCH_LG1K is not set
 # CONFIG_ARCH_HISI is not set
-# CONFIG_ARCH_MEDIATEK is not set
-# CONFIG_ARCH_MESON is not set
-# CONFIG_ARCH_MVEBU is not set
 # CONFIG_ARCH_QCOM is not set
-# CONFIG_ARCH_ROCKCHIP is not set
-# CONFIG_ARCH_SEATTLE is not set
-# CONFIG_ARCH_RENESAS is not set
-# CONFIG_ARCH_R8A7795 is not set
-# CONFIG_ARCH_R8A7796 is not set
-# CONFIG_ARCH_STRATIX10 is not set
-# CONFIG_ARCH_TEGRA is not set
 # CONFIG_ARCH_SPRD is not set
-# CONFIG_ARCH_THUNDER is not set
-# CONFIG_ARCH_THUNDER2 is not set
-# CONFIG_ARCH_UNIPHIER is not set
-# CONFIG_ARCH_VEXPRESS is not set
-# CONFIG_ARCH_XGENE is not set
-# CONFIG_ARCH_ZX is not set
-# CONFIG_ARCH_ZYNQMP is not set
-# CONFIG_ARCH_TEGRA_132_SOC is not set
-# CONFIG_ARCH_TEGRA_210_SOC is not set
-# CONFIG_ARCH_TEGRA_186_SOC is not set
-# CONFIG_PCI_HISI is not set
-# CONFIG_PCI_AARDVARK is not set
-# CONFIG_PCIE_RCAR is not set
-# CONFIG_PCIE_ROCKCHIP is not set
-# CONFIG_XEN is not set
-# CONFIG_XEN_BLKDEV_BACKEND is not set
-# CONFIG_AHCI_MVEBU is not set
-# CONFIG_SATA_RCAR is not set
-# CONFIG_NET_XGENE is not set
-# CONFIG_MVNETA is not set
-# CONFIG_MVPP2 is not set
-# CONFIG_RAVB is not set
-# CONFIG_XEN_NETDEV_BACKEND is not set
-# CONFIG_INPUT_PM8941_PWRKEY is not set
-# CONFIG_INPUT_HISI_POWERKEY is not set
-# CONFIG_SERIAL_8250_BCM2835AUX is not set
-# CONFIG_SERIAL_8250_MT6577 is not set
-# CONFIG_SERIAL_8250_UNIPHIER is not set
-# CONFIG_SERIAL_MESON is not set
-# CONFIG_SERIAL_MESON_CONSOLE is not set
 # CONFIG_SERIAL_SAMSUNG is not set
-# CONFIG_SERIAL_SAMSUNG_CONSOLE is not set
-# CONFIG_SERIAL_TEGRA is not set
-# CONFIG_SERIAL_SH_SCI is not set
-# CONFIG_SERIAL_SH_SCI_NR_UARTS is not set
-# CONFIG_SERIAL_SH_SCI_CONSOLE is not set
-# CONFIG_SERIAL_MSM is not set
-# CONFIG_SERIAL_MSM_CONSOLE is not set
-# CONFIG_SERIAL_XILINX_PS_UART is not set
-# CONFIG_SERIAL_XILINX_PS_UART_CONSOLE is not set
-# CONFIG_SERIAL_MVEBU_UART is not set
-# CONFIG_I2C_BCM2835 is not set
-# CONFIG_I2C_MESON is not set
-# CONFIG_I2C_MV64XXX is not set
-# CONFIG_I2C_PXA is not set
-# CONFIG_I2C_QUP is not set
-# CONFIG_I2C_SH_MOBILE is not set
-# CONFIG_I2C_TEGRA is not set
-# CONFIG_I2C_UNIPHIER_F is not set
-# CONFIG_I2C_RCAR is not set
-# CONFIG_SPI_BCM2835 is not set
-# CONFIG_SPI_BCM2835AUX is not set
-# CONFIG_SPI_MESON_SPICC is not set
-# CONFIG_SPI_ORION is not set
-# CONFIG_SPI_ROCKCHIP is not set
-# CONFIG_SPI_QUP is not set
-# CONFIG_SPI_S3C64XX is not set
-# CONFIG_PINCTRL_MAX77620 is not set
-# CONFIG_PINCTRL_IPQ8074 is not set
-# CONFIG_PINCTRL_MSM8916 is not set
-# CONFIG_PINCTRL_MSM8994 is not set
-# CONFIG_PINCTRL_MSM8996 is not set
-# CONFIG_PINCTRL_QDF2XXX is not set
-# CONFIG_PINCTRL_QCOM_SPMI_PMIC is not set
-# CONFIG_GPIO_RCAR is not set
-# CONFIG_GPIO_XGENE_SB is not set
-# CONFIG_POWER_RESET_MSM is not set
-# CONFIG_ROCKCHIP_THERMAL is not set
-# CONFIG_EXYNOS_THERMAL is not set
-# CONFIG_S3C2410_WATCHDOG is not set
-# CONFIG_MESON_GXBB_WATCHDOG is not set
-# CONFIG_MESON_WATCHDOG is not set
-# CONFIG_RENESAS_WDT is not set
-# CONFIG_UNIPHIER_WATCHDOG is not set
-# CONFIG_BCM2835_WDT is not set
-# CONFIG_MFD_AXP20X_RSB is not set
-# CONFIG_MFD_EXYNOS_LPASS is not set
-# CONFIG_MFD_HI655X_PMIC is not set
-# CONFIG_MFD_SPMI_PMIC is not set
-# CONFIG_REGULATOR_AXP20X is not set
-# CONFIG_REGULATOR_HI655X is not set
-# CONFIG_REGULATOR_QCOM_SMD_RPM is not set
-# CONFIG_RPMSG is not set
-# CONFIG_IR_MESON is not set
-# CONFIG_VIDEO_SAMSUNG_S5P_JPEG is not set
-# CONFIG_VIDEO_SAMSUNG_S5P_MFC is not set
-# CONFIG_VIDEO_SAMSUNG_EXYNOS_GSC is not set
-# CONFIG_VIDEO_RENESAS_FCP is not set
-# CONFIG_VIDEO_RENESAS_VSP1 is not set
-# CONFIG_ROCKCHIP_ANALOGIX_DP is not set
-# CONFIG_ROCKCHIP_CDN_DP is not set
-# CONFIG_ROCKCHIP_DW_HDMI is not set
-# CONFIG_ROCKCHIP_DW_MIPI_DSI is not set
-# CONFIG_ROCKCHIP_INNO_HDMI is not set
-# CONFIG_SND_BCM2835_SOC_I2S is not set
-# CONFIG_SND_SOC_SAMSUNG is not set
-# CONFIG_SND_SOC_RCAR is not set
-# CONFIG_DRM_NOUVEAU is not set
-# CONFIG_DRM_EXYNOS is not set
-# CONFIG_DRM_EXYNOS5433_DECON is not set
-# CONFIG_DRM_EXYNOS7_DECON is not set
-# CONFIG_DRM_EXYNOS_DSI is not set
-# CONFIG_DRM_EXYNOS_DP is not set
-# CONFIG_DRM_EXYNOS_HDMI is not set
-# CONFIG_DRM_EXYNOS_MIC is not set
-# CONFIG_DRM_ROCKCHIP is not set
-# CONFIG_DRM_RCAR_DU is not set
-# CONFIG_DRM_RCAR_LVDS is not set
-# CONFIG_DRM_RCAR_VSP is not set
-# CONFIG_DRM_TEGRA is not set
-# CONFIG_DRM_VC4 is not set
-# CONFIG_DRM_MESON is not set
-# CONFIG_USB_XHCI_TEGRA is not set
-# CONFIG_USB_EHCI_MSM is not set
-# CONFIG_USB_EHCI_EXYNOS is not set
-# CONFIG_USB_OHCI_EXYNOS is not set
-# CONFIG_USB_RENESAS_USBHS is not set
-# CONFIG_RASPBERRYPI_FIRMWARE is not set
-# CONFIG_QCOM_L2_PMU is not set
-# CONFIG_QCOM_L3_PMU is not set
-# CONFIG_PWM_MESON is not set
-# CONFIG_PWM_ROCKCHIP is not set
-# CONFIG_PWM_SAMSUNG is not set
-# CONFIG_PWM_TEGRA is not set
-# CONFIG_QCOM_SMEM is not set
-# CONFIG_QCOM_SMD_RPM is not set
-# CONFIG_QCOM_SMP2P is not set
-# CONFIG_QCOM_SMSM is not set
-# CONFIG_ROCKCHIP_PM_DOMAINS is not set
-# CONFIG_ARCH_TEGRA_132_SOC is not set
-# CONFIG_ARCH_TEGRA_210_SOC is not set
-# CONFIG_ARCH_TEGRA_186_SOC is not set
-# CONFIG_EXYNOS_ADC is not set
-# CONFIG_ROCKCHIP_SARADC is not set
-# CONFIG_PWM_BCM2835 is not set
-# CONFIG_RPMSG_QCOM_SMD is not set
-# CONFIG_RASPBERRYPI_POWER is not set
-# CONFIG_BCM2835_MBOX is not set
-# CONFIG_HI6220_MBOX is not set
-# CONFIG_ROCKCHIP_IOMMU is not set
-# CONFIG_HWSPINLOCK_QCOM is not set
-# CONFIG_COMMON_CLK_QCOM is not set
-# CONFIG_QCOM_CLK_SMD_RPM is not set
-# CONFIG_IPQ_GCC_8074 is not set
-# CONFIG_MSM_GCC_8916 is not set
-# CONFIG_MSM_GCC_8994 is not set
-# CONFIG_MSM_MMCC_8996 is not set
-# CONFIG_USB_RENESAS_USBHS_UDC is not set
-# CONFIG_MMC_SDHCI_OF_ESDHC is not set
-# CONFIG_XEN_GNTDEV is not set
-# CONFIG_XEN_GRANT_DEV_ALLOC is not set
-# CONFIG_RCAR_DMAC is not set
-# CONFIG_TEGRA20_APB_DMA is not set
-# CONFIG_QCOM_BAM_DMA is not set
-# CONFIG_K3_DMA is not set
-# CONFIG_DMA_BCM2835 is not set
-# CONFIG_RTC_DRV_XGENE is not set
-# CONFIG_RTC_DRV_TEGRA is not set
-# CONFIG_RTC_DRV_S3C is not set
-# CONFIG_MMC_DW_ROCKCHIP is not set
-# CONFIG_MMC_SUNXI is not set
-# CONFIG_MMC_BCM2835 is not set
-# CONFIG_MMC_SDHCI_TEGRA is not set
-# CONFIG_MMC_MESON_GX is not set
-# CONFIG_MMC_SDHCI_MSM is not set
-# CONFIG_MMC_SDHI is not set
-# CONFIG_MMC_DW_EXYNOS is not set
-# CONFIG_FRAMEBUFFER_CONSOLE is not set
 # CONFIG_LOGO is not set
diff --git a/imx8m/vp6820_8mn/SharedBoardConfig.mk b/imx8m/vp6820_8mn/SharedBoardConfig.mk
index fb379acd..09354bb9 100644
--- a/imx8m/vp6820_8mn/SharedBoardConfig.mk
+++ b/imx8m/vp6820_8mn/SharedBoardConfig.mk
@@ -68,6 +68,16 @@ BOARD_VENDOR_KERNEL_MODULES +=     \
     $(KERNEL_OUT)/drivers/input/touchscreen/synaptics_dsx/synaptics_dsx_i2c.ko
 endif
 
+# kernel modules add by IDTECH
+# CONFIG_SND_SOC_IMX_RT5640: snd-soc-imx-rt5640.ko, snd-soc-rt5640.ko, audio codec
+# CONFIG_I2C_CHARDEV: i2c-dev.ko, for userspace(i2cdetect) to access /dev/i2c*
+ifeq ($(IMX8MQ_USES_GKI),true)
+BOARD_VENDOR_KERNEL_MODULES += \
+    $(KERNEL_OUT)/drivers/i2c/i2c-dev.ko \
+    $(KERNEL_OUT)/sound/soc/codecs/snd-soc-rt5640.ko \
+    $(KERNEL_OUT)/sound/soc/fsl/snd-soc-imx-rt5640.ko
+endif
+
 # CONFIG_ZRAM: zram.ko, lzo.ko, lzo-rle.ko compressed ram using LZ coding.
 # CONFIG_ZSMALLOC: zsmalloc.ko
 # CONFIG_CLK_IMX8MM: clk-imx8mm.ko
diff --git a/imx8m/vp6820_8mn/android_addition_defconfig b/imx8m/vp6820_8mn/android_addition_defconfig
index ddc2b44f..71378768 100644
--- a/imx8m/vp6820_8mn/android_addition_defconfig
+++ b/imx8m/vp6820_8mn/android_addition_defconfig
@@ -1,5 +1,3 @@
-CONFIG_LIBNVDIMM=y
-CONFIG_OF_PMEM=y
 CONFIG_IDG_SPI=y
 # CONFIG_USB_NET_QMI_WWAN is not set
 CONFIG_SINGLE_LOGO=y
@@ -7,8 +5,8 @@ CONFIG_SPLASH_SCREEN_CENTERED=y
 CONFIG_USB_SERIAL=y
 CONFIG_USB_SERIAL_OPTION=y
 CONFIG_INPUT_VL53L1X_ULD=y
-CONFIG_SND_SOC_IMX_RT5640=y
-CONFIG_SND_SOC_RT5640=y
+CONFIG_SND_SOC_IMX_RT5640=m
+CONFIG_SND_SOC_RT5640=m
 CONFIG_KEYBOARD_MATRIX=y
 CONFIG_TYPEC_HD3SS3220=y
 CONFIG_MXC_DUAL_MIPI_CAMERA=y
@@ -23,9 +21,9 @@ CONFIG_DEBUG_FS=y
 CONFIG_PPP=y
 CONFIG_PPP_ASYNC=y
 CONFIG_PPP_SYNC_TTY=y
+CONFIG_WLAN_VENDOR_BROADCOM=y
 CONFIG_BRCMUTIL=m
 CONFIG_BRCMFMAC=m
-CONFIG_BRCMFMAC_PROTO_BCDC=y
 CONFIG_BRCMFMAC_PROTO_MSGBUF=y
 CONFIG_BRCMFMAC_SDIO=y
 CONFIG_BRCMFMAC_PCIE=y
@@ -35,228 +33,25 @@ CONFIG_RFKILL_INPUT=y
 CONFIG_RFKILL_GPIO=y
 CONFIG_TASKSTATS=y
 CONFIG_DEVMEM=y
+CONFIG_I2C_CHARDEV=m
 
-CONFIG_PARAVIRT=y
-CONFIG_NETFILTER_XT_TARGET_CT=y
-CONFIG_MVMDIO=y
-CONFIG_MDIO_BITBANG=y
 CONFIG_I2C_SLAVE=y
 CONFIG_GPIOLIB=y
-CONFIG_GPIO_GENERIC_PLATFORM=y
+CONFIG_PINCTRL=y
+CONFIG_FB=y
 CONFIG_POWER_RESET_BRCMSTB=y
 CONFIG_REGULATOR=y
 CONFIG_DRM_I2C_CH7006=m
 CONFIG_DRM_I2C_SIL164=m
-CONFIG_TMPFS=y
-CONFIG_BCM_FLEXRM_MBOX=y
-CONFIG_PHY_SAMSUNG_USB2=y
 CONFIG_ARM_TIMER_SP804=y
-CONFIG_COMMON_CLK_VERSATILE=y
 CONFIG_CLK_SP810=y
 CONFIG_USB_SNP_UDC_PLAT=y
 CONFIG_USB_BDC_UDC=y
-CONFIG_BCM_SBA_RAID=m
 
 # CONFIG_KVM is not set
-# CONFIG_MTD_UBI is not set
-# CONFIG_VGA_ARB is not set
 # CONFIG_ARCH_SUNXI is not set
-# CONFIG_ARCH_ALPINE is not set
-# CONFIG_ARCH_BCM2835 is not set
-# CONFIG_ARCH_BCM_IPROC is not set
-# CONFIG_ARCH_BERLIN is not set
-# CONFIG_ARCH_BRCMSTB is not set
-# CONFIG_ARCH_EXYNOS is not set
-# CONFIG_ARCH_LAYERSCAPE is not set
-# CONFIG_ARCH_LG1K is not set
 # CONFIG_ARCH_HISI is not set
-# CONFIG_ARCH_MEDIATEK is not set
-# CONFIG_ARCH_MESON is not set
-# CONFIG_ARCH_MVEBU is not set
 # CONFIG_ARCH_QCOM is not set
-# CONFIG_ARCH_ROCKCHIP is not set
-# CONFIG_ARCH_SEATTLE is not set
-# CONFIG_ARCH_RENESAS is not set
-# CONFIG_ARCH_R8A7795 is not set
-# CONFIG_ARCH_R8A7796 is not set
-# CONFIG_ARCH_STRATIX10 is not set
-# CONFIG_ARCH_TEGRA is not set
 # CONFIG_ARCH_SPRD is not set
-# CONFIG_ARCH_THUNDER is not set
-# CONFIG_ARCH_THUNDER2 is not set
-# CONFIG_ARCH_UNIPHIER is not set
-# CONFIG_ARCH_VEXPRESS is not set
-# CONFIG_ARCH_XGENE is not set
-# CONFIG_ARCH_ZX is not set
-# CONFIG_ARCH_ZYNQMP is not set
-# CONFIG_ARCH_TEGRA_132_SOC is not set
-# CONFIG_ARCH_TEGRA_210_SOC is not set
-# CONFIG_ARCH_TEGRA_186_SOC is not set
-# CONFIG_PCI_HISI is not set
-# CONFIG_PCIE_KIRIN is not set
-# CONFIG_PCI_AARDVARK is not set
-# CONFIG_PCIE_RCAR is not set
-# CONFIG_PCIE_ROCKCHIP is not set
-# CONFIG_XEN is not set
-# CONFIG_SPI_FSL_QUADSPI is not set
-# CONFIG_XEN_BLKDEV_BACKEND is not set
-# CONFIG_AHCI_MVEBU is not set
-# CONFIG_SATA_RCAR is not set
-# CONFIG_NET_XGENE is not set
-# CONFIG_MVNETA is not set
-# CONFIG_MVPP2 is not set
-# CONFIG_RAVB is not set
-# CONFIG_MESON_GXL_PHY is not set
-# CONFIG_XEN_NETDEV_BACKEND is not set
-# CONFIG_INPUT_PM8941_PWRKEY is not set
-# CONFIG_INPUT_HISI_POWERKEY is not set
-# CONFIG_SERIAL_8250_BCM2835AUX is not set
-# CONFIG_SERIAL_8250_MT6577 is not set
-# CONFIG_SERIAL_8250_UNIPHIER is not set
-# CONFIG_SERIAL_MESON is not set
-# CONFIG_SERIAL_MESON_CONSOLE is not set
 # CONFIG_SERIAL_SAMSUNG is not set
-# CONFIG_SERIAL_SAMSUNG_CONSOLE is not set
-# CONFIG_SERIAL_TEGRA is not set
-# CONFIG_SERIAL_SH_SCI is not set
-# CONFIG_SERIAL_SH_SCI_NR_UARTS is not set
-# CONFIG_SERIAL_SH_SCI_CONSOLE is not set
-# CONFIG_SERIAL_MSM is not set
-# CONFIG_SERIAL_MSM_CONSOLE is not set
-# CONFIG_SERIAL_XILINX_PS_UART is not set
-# CONFIG_SERIAL_XILINX_PS_UART_CONSOLE is not set
-# CONFIG_SERIAL_MVEBU_UART is not set
-# CONFIG_I2C_BCM2835 is not set
-# CONFIG_I2C_MESON is not set
-# CONFIG_I2C_MV64XXX is not set
-# CONFIG_I2C_PXA is not set
-# CONFIG_I2C_QUP is not set
-# CONFIG_I2C_SH_MOBILE is not set
-# CONFIG_I2C_TEGRA is not set
-# CONFIG_I2C_UNIPHIER_F is not set
-# CONFIG_I2C_RCAR is not set
-# CONFIG_SPI_BCM2835 is not set
-# CONFIG_SPI_BCM2835AUX is not set
-# CONFIG_SPI_MESON_SPICC is not set
-# CONFIG_SPI_ORION is not set
-# CONFIG_SPI_ROCKCHIP is not set
-# CONFIG_SPI_QUP is not set
-# CONFIG_SPI_S3C64XX is not set
-# CONFIG_PINCTRL_MAX77620 is not set
-# CONFIG_PINCTRL_IPQ8074 is not set
-# CONFIG_PINCTRL_MSM8916 is not set
-# CONFIG_PINCTRL_MSM8994 is not set
-# CONFIG_PINCTRL_MSM8996 is not set
-# CONFIG_PINCTRL_QDF2XXX is not set
-# CONFIG_PINCTRL_QCOM_SPMI_PMIC is not set
-# CONFIG_GPIO_RCAR is not set
-# CONFIG_GPIO_XGENE_SB is not set
-# CONFIG_POWER_RESET_MSM is not set
-# CONFIG_ROCKCHIP_THERMAL is not set
-# CONFIG_EXYNOS_THERMAL is not set
-# CONFIG_S3C2410_WATCHDOG is not set
-# CONFIG_MESON_GXBB_WATCHDOG is not set
-# CONFIG_MESON_WATCHDOG is not set
-# CONFIG_RENESAS_WDT is not set
-# CONFIG_UNIPHIER_WATCHDOG is not set
-# CONFIG_BCM2835_WDT is not set
-# CONFIG_MFD_AXP20X_RSB is not set
-# CONFIG_MFD_EXYNOS_LPASS is not set
-# CONFIG_MFD_HI655X_PMIC is not set
-# CONFIG_MFD_SPMI_PMIC is not set
-# CONFIG_REGULATOR_AXP20X is not set
-# CONFIG_REGULATOR_HI655X is not set
-# CONFIG_REGULATOR_QCOM_SMD_RPM is not set
-# CONFIG_RPMSG is not set
-# CONFIG_IR_MESON is not set
-# CONFIG_VIDEO_SAMSUNG_S5P_JPEG is not set
-# CONFIG_VIDEO_SAMSUNG_S5P_MFC is not set
-# CONFIG_VIDEO_SAMSUNG_EXYNOS_GSC is not set
-# CONFIG_VIDEO_RENESAS_FCP is not set
-# CONFIG_VIDEO_RENESAS_VSP1 is not set
-# CONFIG_ROCKCHIP_ANALOGIX_DP is not set
-# CONFIG_ROCKCHIP_CDN_DP is not set
-# CONFIG_ROCKCHIP_DW_HDMI is not set
-# CONFIG_ROCKCHIP_DW_MIPI_DSI is not set
-# CONFIG_ROCKCHIP_INNO_HDMI is not set
-# CONFIG_SND_BCM2835_SOC_I2S is not set
-# CONFIG_SND_SOC_SAMSUNG is not set
-# CONFIG_SND_SOC_RCAR is not set
-# CONFIG_DRM_NOUVEAU is not set
-# CONFIG_DRM_EXYNOS is not set
-# CONFIG_DRM_EXYNOS5433_DECON is not set
-# CONFIG_DRM_EXYNOS7_DECON is not set
-# CONFIG_DRM_EXYNOS_DSI is not set
-# CONFIG_DRM_EXYNOS_DP is not set
-# CONFIG_DRM_EXYNOS_HDMI is not set
-# CONFIG_DRM_EXYNOS_MIC is not set
-# CONFIG_DRM_ROCKCHIP is not set
-# CONFIG_DRM_RCAR_DU is not set
-# CONFIG_DRM_RCAR_LVDS is not set
-# CONFIG_DRM_RCAR_VSP is not set
-# CONFIG_DRM_TEGRA is not set
-# CONFIG_DRM_VC4 is not set
-# CONFIG_DRM_MESON is not set
-# CONFIG_USB_XHCI_TEGRA is not set
-# CONFIG_USB_EHCI_MSM is not set
-# CONFIG_USB_EHCI_EXYNOS is not set
-# CONFIG_USB_OHCI_EXYNOS is not set
-# CONFIG_USB_RENESAS_USBHS is not set
-# CONFIG_USB_QCOM_8X16_PHY is not set
-# CONFIG_RASPBERRYPI_FIRMWARE is not set
-# CONFIG_PHY_SUN4I_USB is not set
-# CONFIG_PHY_HI6220_USB is not set
-# CONFIG_PHY_RCAR_GEN3_USB2 is not set
-# CONFIG_PHY_ROCKCHIP_EMMC is not set
-# CONFIG_PHY_ROCKCHIP_INNO_USB2 is not set
-# CONFIG_PHY_ROCKCHIP_PCIE is not set
-# CONFIG_PHY_TEGRA_XUSB is not set
-# CONFIG_QCOM_L2_PMU is not set
-# CONFIG_QCOM_L3_PMU is not set
-# CONFIG_PWM_MESON is not set
-# CONFIG_PWM_ROCKCHIP is not set
-# CONFIG_PWM_SAMSUNG is not set
-# CONFIG_PWM_TEGRA is not set
-# CONFIG_QCOM_SMEM is not set
-# CONFIG_QCOM_SMD_RPM is not set
-# CONFIG_QCOM_SMP2P is not set
-# CONFIG_QCOM_SMSM is not set
-# CONFIG_ROCKCHIP_PM_DOMAINS is not set
-# CONFIG_ARCH_TEGRA_132_SOC is not set
-# CONFIG_ARCH_TEGRA_210_SOC is not set
-# CONFIG_ARCH_TEGRA_186_SOC is not set
-# CONFIG_EXYNOS_ADC is not set
-# CONFIG_ROCKCHIP_SARADC is not set
-# CONFIG_PWM_BCM2835 is not set
-# CONFIG_RPMSG_QCOM_SMD is not set
-# CONFIG_RASPBERRYPI_POWER is not set
-# CONFIG_BCM2835_MBOX is not set
-# CONFIG_HI6220_MBOX is not set
-# CONFIG_ROCKCHIP_IOMMU is not set
-# CONFIG_HWSPINLOCK_QCOM is not set
-# CONFIG_COMMON_CLK_QCOM is not set
-# CONFIG_QCOM_CLK_SMD_RPM is not set
-# CONFIG_IPQ_GCC_8074 is not set
-# CONFIG_MSM_GCC_8916 is not set
-# CONFIG_MSM_GCC_8994 is not set
-# CONFIG_MSM_MMCC_8996 is not set
-# CONFIG_USB_RENESAS_USBHS_UDC is not set
-# CONFIG_MMC_SDHCI_OF_ESDHC is not set
-# CONFIG_XEN_GNTDEV is not set
-# CONFIG_XEN_GRANT_DEV_ALLOC is not set
-# CONFIG_RCAR_DMAC is not set
-# CONFIG_TEGRA20_APB_DMA is not set
-# CONFIG_QCOM_BAM_DMA is not set
-# CONFIG_K3_DMA is not set
-# CONFIG_DMA_BCM2835 is not set
-# CONFIG_RTC_DRV_XGENE is not set
-# CONFIG_RTC_DRV_TEGRA is not set
-# CONFIG_RTC_DRV_S3C is not set
-# CONFIG_MMC_DW_ROCKCHIP is not set
-# CONFIG_MMC_SUNXI is not set
-# CONFIG_MMC_BCM2835 is not set
-# CONFIG_MMC_SDHCI_TEGRA is not set
-# CONFIG_MMC_MESON_GX is not set
-# CONFIG_MMC_SDHCI_MSM is not set
-# CONFIG_MMC_SDHI is not set
-# CONFIG_MMC_DW_EXYNOS is not set
+# CONFIG_LOGO is not set
diff --git a/imx8m/vp6820_8mq/SharedBoardConfig.mk b/imx8m/vp6820_8mq/SharedBoardConfig.mk
index fa8ef3f4..e71ac494 100644
--- a/imx8m/vp6820_8mq/SharedBoardConfig.mk
+++ b/imx8m/vp6820_8mq/SharedBoardConfig.mk
@@ -72,6 +72,16 @@ BOARD_VENDOR_KERNEL_MODULES += \
     $(KERNEL_OUT)/drivers/input/touchscreen/synaptics_dsx/synaptics_dsx_i2c.ko
 endif
 
+# kernel modules add by IDTECH
+# CONFIG_SND_SOC_IMX_RT5640: snd-soc-imx-rt5640.ko, snd-soc-rt5640.ko, audio codec
+# CONFIG_I2C_CHARDEV: i2c-dev.ko, for userspace(i2cdetect) to access /dev/i2c*
+ifeq ($(IMX8MQ_USES_GKI),true)
+BOARD_VENDOR_KERNEL_MODULES += \
+    $(KERNEL_OUT)/drivers/i2c/i2c-dev.ko \
+    $(KERNEL_OUT)/sound/soc/codecs/snd-soc-rt5640.ko \
+    $(KERNEL_OUT)/sound/soc/fsl/snd-soc-imx-rt5640.ko
+endif
+
 # CONFIG_ZRAM: zram.ko, lzo.ko, lzo-rle.ko compressed ram using LZ coding.
 # CONFIG_ZSMALLOC: zsmalloc.ko
 # CONFIG_CLK_IMX8MP: clk-imx8mq.ko
diff --git a/imx8m/vp6820_8mq/android_addition_defconfig b/imx8m/vp6820_8mq/android_addition_defconfig
index 1ecc0708..d83b81db 100644
--- a/imx8m/vp6820_8mq/android_addition_defconfig
+++ b/imx8m/vp6820_8mq/android_addition_defconfig
@@ -5,10 +5,10 @@ CONFIG_SPLASH_SCREEN_CENTERED=y
 CONFIG_USB_SERIAL=y
 CONFIG_USB_SERIAL_OPTION=y
 CONFIG_INPUT_VL53L1X_ULD=y
-CONFIG_SND_SOC_IMX_RT5640=y
-CONFIG_SND_SOC_RT5640=y
-CONFIG_SND_SOC_IMX_TLV320AIC31XX=y
-CONFIG_SND_SOC_TLV320AIC31XX=y
+CONFIG_SND_SOC_IMX_RT5640=m
+CONFIG_SND_SOC_RT5640=m
+CONFIG_SND_SOC_IMX_TLV320AIC31XX=m
+CONFIG_SND_SOC_TLV320AIC31XX=m
 CONFIG_KEYBOARD_MATRIX=y
 CONFIG_TYPEC_HD3SS3220=y
 CONFIG_MXC_DUAL_MIPI_CAMERA=y
@@ -25,9 +25,9 @@ CONFIG_DEBUG_FS=y
 CONFIG_PPP=y
 CONFIG_PPP_ASYNC=y
 CONFIG_PPP_SYNC_TTY=y
+CONFIG_WLAN_VENDOR_BROADCOM=y
 CONFIG_BRCMUTIL=m
 CONFIG_BRCMFMAC=m
-CONFIG_BRCMFMAC_PROTO_BCDC=y
 CONFIG_BRCMFMAC_PROTO_MSGBUF=y
 CONFIG_BRCMFMAC_SDIO=y
 CONFIG_BRCMFMAC_PCIE=y
@@ -37,230 +37,25 @@ CONFIG_RFKILL_INPUT=y
 CONFIG_RFKILL_GPIO=y
 CONFIG_TASKSTATS=y
 CONFIG_DEVMEM=y
+CONFIG_I2C_CHARDEV=m
 
-CONFIG_PARAVIRT=y
-CONFIG_NETFILTER_XT_TARGET_CT=y
-CONFIG_MVMDIO=y
-CONFIG_MDIO_BITBANG=y
 CONFIG_I2C_SLAVE=y
 CONFIG_GPIOLIB=y
-CONFIG_GPIO_GENERIC_PLATFORM=y
+CONFIG_PINCTRL=y
+CONFIG_FB=y
 CONFIG_POWER_RESET_BRCMSTB=y
 CONFIG_REGULATOR=y
 CONFIG_DRM_I2C_CH7006=m
 CONFIG_DRM_I2C_SIL164=m
-CONFIG_TMPFS=y
-CONFIG_BCM_FLEXRM_MBOX=y
-CONFIG_PHY_SAMSUNG_USB2=y
 CONFIG_ARM_TIMER_SP804=y
-CONFIG_COMMON_CLK_VERSATILE=y
 CONFIG_CLK_SP810=y
 CONFIG_USB_SNP_UDC_PLAT=y
 CONFIG_USB_BDC_UDC=y
-CONFIG_BCM_SBA_RAID=m
 
 # CONFIG_KVM is not set
-# CONFIG_MTD_UBI is not set
-# CONFIG_VGA_ARB is not set
 # CONFIG_ARCH_SUNXI is not set
-# CONFIG_ARCH_ALPINE is not set
-# CONFIG_ARCH_BCM2835 is not set
-# CONFIG_ARCH_BCM_IPROC is not set
-# CONFIG_ARCH_BERLIN is not set
-# CONFIG_ARCH_BRCMSTB is not set
-# CONFIG_ARCH_EXYNOS is not set
-# CONFIG_ARCH_LAYERSCAPE is not set
-# CONFIG_ARCH_LG1K is not set
 # CONFIG_ARCH_HISI is not set
-# CONFIG_ARCH_MEDIATEK is not set
-# CONFIG_ARCH_MESON is not set
-# CONFIG_ARCH_MVEBU is not set
 # CONFIG_ARCH_QCOM is not set
-# CONFIG_ARCH_ROCKCHIP is not set
-# CONFIG_ARCH_SEATTLE is not set
-# CONFIG_ARCH_RENESAS is not set
-# CONFIG_ARCH_R8A7795 is not set
-# CONFIG_ARCH_R8A7796 is not set
-# CONFIG_ARCH_STRATIX10 is not set
-# CONFIG_ARCH_TEGRA is not set
 # CONFIG_ARCH_SPRD is not set
-# CONFIG_ARCH_THUNDER is not set
-# CONFIG_ARCH_THUNDER2 is not set
-# CONFIG_ARCH_UNIPHIER is not set
-# CONFIG_ARCH_VEXPRESS is not set
-# CONFIG_ARCH_XGENE is not set
-# CONFIG_ARCH_ZX is not set
-# CONFIG_ARCH_ZYNQMP is not set
-# CONFIG_ARCH_TEGRA_132_SOC is not set
-# CONFIG_ARCH_TEGRA_210_SOC is not set
-# CONFIG_ARCH_TEGRA_186_SOC is not set
-# CONFIG_PCI_HISI is not set
-# CONFIG_PCIE_KIRIN is not set
-# CONFIG_PCI_AARDVARK is not set
-# CONFIG_PCIE_RCAR is not set
-# CONFIG_PCIE_ROCKCHIP is not set
-# CONFIG_XEN is not set
-# CONFIG_SPI_FSL_QUADSPI is not set
-# CONFIG_XEN_BLKDEV_BACKEND is not set
-# CONFIG_AHCI_MVEBU is not set
-# CONFIG_SATA_RCAR is not set
-# CONFIG_NET_XGENE is not set
-# CONFIG_MVNETA is not set
-# CONFIG_MVPP2 is not set
-# CONFIG_RAVB is not set
-# CONFIG_MESON_GXL_PHY is not set
-# CONFIG_XEN_NETDEV_BACKEND is not set
-# CONFIG_INPUT_PM8941_PWRKEY is not set
-# CONFIG_INPUT_HISI_POWERKEY is not set
-# CONFIG_SERIAL_8250_BCM2835AUX is not set
-# CONFIG_SERIAL_8250_MT6577 is not set
-# CONFIG_SERIAL_8250_UNIPHIER is not set
-# CONFIG_SERIAL_MESON is not set
-# CONFIG_SERIAL_MESON_CONSOLE is not set
 # CONFIG_SERIAL_SAMSUNG is not set
-# CONFIG_SERIAL_SAMSUNG_CONSOLE is not set
-# CONFIG_SERIAL_TEGRA is not set
-# CONFIG_SERIAL_SH_SCI is not set
-# CONFIG_SERIAL_SH_SCI_NR_UARTS is not set
-# CONFIG_SERIAL_SH_SCI_CONSOLE is not set
-# CONFIG_SERIAL_MSM is not set
-# CONFIG_SERIAL_MSM_CONSOLE is not set
-# CONFIG_SERIAL_XILINX_PS_UART is not set
-# CONFIG_SERIAL_XILINX_PS_UART_CONSOLE is not set
-# CONFIG_SERIAL_MVEBU_UART is not set
-# CONFIG_I2C_BCM2835 is not set
-# CONFIG_I2C_MESON is not set
-# CONFIG_I2C_MV64XXX is not set
-# CONFIG_I2C_PXA is not set
-# CONFIG_I2C_QUP is not set
-# CONFIG_I2C_SH_MOBILE is not set
-# CONFIG_I2C_TEGRA is not set
-# CONFIG_I2C_UNIPHIER_F is not set
-# CONFIG_I2C_RCAR is not set
-# CONFIG_SPI_BCM2835 is not set
-# CONFIG_SPI_BCM2835AUX is not set
-# CONFIG_SPI_MESON_SPICC is not set
-# CONFIG_SPI_ORION is not set
-# CONFIG_SPI_ROCKCHIP is not set
-# CONFIG_SPI_QUP is not set
-# CONFIG_SPI_S3C64XX is not set
-# CONFIG_PINCTRL_MAX77620 is not set
-# CONFIG_PINCTRL_IPQ8074 is not set
-# CONFIG_PINCTRL_MSM8916 is not set
-# CONFIG_PINCTRL_MSM8994 is not set
-# CONFIG_PINCTRL_MSM8996 is not set
-# CONFIG_PINCTRL_QDF2XXX is not set
-# CONFIG_PINCTRL_QCOM_SPMI_PMIC is not set
-# CONFIG_GPIO_RCAR is not set
-# CONFIG_GPIO_XGENE_SB is not set
-# CONFIG_POWER_RESET_MSM is not set
-# CONFIG_ROCKCHIP_THERMAL is not set
-# CONFIG_EXYNOS_THERMAL is not set
-# CONFIG_S3C2410_WATCHDOG is not set
-# CONFIG_MESON_GXBB_WATCHDOG is not set
-# CONFIG_MESON_WATCHDOG is not set
-# CONFIG_RENESAS_WDT is not set
-# CONFIG_UNIPHIER_WATCHDOG is not set
-# CONFIG_BCM2835_WDT is not set
-# CONFIG_MFD_AXP20X_RSB is not set
-# CONFIG_MFD_EXYNOS_LPASS is not set
-# CONFIG_MFD_HI655X_PMIC is not set
-# CONFIG_MFD_SPMI_PMIC is not set
-# CONFIG_REGULATOR_AXP20X is not set
-# CONFIG_REGULATOR_HI655X is not set
-# CONFIG_REGULATOR_QCOM_SMD_RPM is not set
-# CONFIG_RPMSG is not set
-# CONFIG_IR_MESON is not set
-# CONFIG_VIDEO_SAMSUNG_S5P_JPEG is not set
-# CONFIG_VIDEO_SAMSUNG_S5P_MFC is not set
-# CONFIG_VIDEO_SAMSUNG_EXYNOS_GSC is not set
-# CONFIG_VIDEO_RENESAS_FCP is not set
-# CONFIG_VIDEO_RENESAS_VSP1 is not set
-# CONFIG_ROCKCHIP_ANALOGIX_DP is not set
-# CONFIG_ROCKCHIP_CDN_DP is not set
-# CONFIG_ROCKCHIP_DW_HDMI is not set
-# CONFIG_ROCKCHIP_DW_MIPI_DSI is not set
-# CONFIG_ROCKCHIP_INNO_HDMI is not set
-# CONFIG_SND_BCM2835_SOC_I2S is not set
-# CONFIG_SND_SOC_SAMSUNG is not set
-# CONFIG_SND_SOC_RCAR is not set
-# CONFIG_DRM_NOUVEAU is not set
-# CONFIG_DRM_EXYNOS is not set
-# CONFIG_DRM_EXYNOS5433_DECON is not set
-# CONFIG_DRM_EXYNOS7_DECON is not set
-# CONFIG_DRM_EXYNOS_DSI is not set
-# CONFIG_DRM_EXYNOS_DP is not set
-# CONFIG_DRM_EXYNOS_HDMI is not set
-# CONFIG_DRM_EXYNOS_MIC is not set
-# CONFIG_DRM_ROCKCHIP is not set
-# CONFIG_DRM_RCAR_DU is not set
-# CONFIG_DRM_RCAR_LVDS is not set
-# CONFIG_DRM_RCAR_VSP is not set
-# CONFIG_DRM_TEGRA is not set
-# CONFIG_DRM_VC4 is not set
-# CONFIG_DRM_MESON is not set
-# CONFIG_USB_XHCI_TEGRA is not set
-# CONFIG_USB_EHCI_MSM is not set
-# CONFIG_USB_EHCI_EXYNOS is not set
-# CONFIG_USB_OHCI_EXYNOS is not set
-# CONFIG_USB_RENESAS_USBHS is not set
-# CONFIG_USB_QCOM_8X16_PHY is not set
-# CONFIG_RASPBERRYPI_FIRMWARE is not set
-# CONFIG_PHY_SUN4I_USB is not set
-# CONFIG_PHY_HI6220_USB is not set
-# CONFIG_PHY_RCAR_GEN3_USB2 is not set
-# CONFIG_PHY_ROCKCHIP_EMMC is not set
-# CONFIG_PHY_ROCKCHIP_INNO_USB2 is not set
-# CONFIG_PHY_ROCKCHIP_PCIE is not set
-# CONFIG_PHY_TEGRA_XUSB is not set
-# CONFIG_QCOM_L2_PMU is not set
-# CONFIG_QCOM_L3_PMU is not set
-# CONFIG_PWM_MESON is not set
-# CONFIG_PWM_ROCKCHIP is not set
-# CONFIG_PWM_SAMSUNG is not set
-# CONFIG_PWM_TEGRA is not set
-# CONFIG_QCOM_SMEM is not set
-# CONFIG_QCOM_SMD_RPM is not set
-# CONFIG_QCOM_SMP2P is not set
-# CONFIG_QCOM_SMSM is not set
-# CONFIG_ROCKCHIP_PM_DOMAINS is not set
-# CONFIG_ARCH_TEGRA_132_SOC is not set
-# CONFIG_ARCH_TEGRA_210_SOC is not set
-# CONFIG_ARCH_TEGRA_186_SOC is not set
-# CONFIG_EXYNOS_ADC is not set
-# CONFIG_ROCKCHIP_SARADC is not set
-# CONFIG_PWM_BCM2835 is not set
-# CONFIG_RPMSG_QCOM_SMD is not set
-# CONFIG_RASPBERRYPI_POWER is not set
-# CONFIG_BCM2835_MBOX is not set
-# CONFIG_HI6220_MBOX is not set
-# CONFIG_ROCKCHIP_IOMMU is not set
-# CONFIG_HWSPINLOCK_QCOM is not set
-# CONFIG_COMMON_CLK_QCOM is not set
-# CONFIG_QCOM_CLK_SMD_RPM is not set
-# CONFIG_IPQ_GCC_8074 is not set
-# CONFIG_MSM_GCC_8916 is not set
-# CONFIG_MSM_GCC_8994 is not set
-# CONFIG_MSM_MMCC_8996 is not set
-# CONFIG_USB_RENESAS_USBHS_UDC is not set
-# CONFIG_MMC_SDHCI_OF_ESDHC is not set
-# CONFIG_XEN_GNTDEV is not set
-# CONFIG_XEN_GRANT_DEV_ALLOC is not set
-# CONFIG_RCAR_DMAC is not set
-# CONFIG_TEGRA20_APB_DMA is not set
-# CONFIG_QCOM_BAM_DMA is not set
-# CONFIG_K3_DMA is not set
-# CONFIG_DMA_BCM2835 is not set
-# CONFIG_RTC_DRV_XGENE is not set
-# CONFIG_RTC_DRV_TEGRA is not set
-# CONFIG_RTC_DRV_S3C is not set
-# CONFIG_MMC_DW_ROCKCHIP is not set
-# CONFIG_MMC_SUNXI is not set
-# CONFIG_MMC_BCM2835 is not set
-# CONFIG_MMC_SDHCI_TEGRA is not set
-# CONFIG_MMC_MESON_GX is not set
-# CONFIG_MMC_SDHCI_MSM is not set
-# CONFIG_MMC_SDHI is not set
-# CONFIG_MMC_DW_EXYNOS is not set
-# CONFIG_FRAMEBUFFER_CONSOLE is not set
 # CONFIG_LOGO is not set
